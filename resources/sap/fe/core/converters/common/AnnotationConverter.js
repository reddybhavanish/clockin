sap.ui.define("sap/fe/core/converters/common/AnnotationConverter",[],function(){"use strict";function _(n,i){return e(n)||d(n,i)||b(n,i)||a();}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function b(o,i){if(!o)return;if(typeof o==="string")return c(o,i);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(o,i);}function c(n,o){if(o==null||o>n.length)o=n.length;for(var i=0,v=new Array(o);i<o;i++){v[i]=n[i];}return v;}function d(n,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(n)))return;var o=[];var v=true;var w=false;var x=undefined;try{for(var y=n[Symbol.iterator](),z;!(v=(z=y.next()).done);v=true){o.push(z.value);if(i&&o.length===i)break;}}catch(B){w=true;x=B;}finally{try{if(!v&&y["return"]!=null)y["return"]();}finally{if(w)throw x;}}return o;}function e(i){if(Array.isArray(i))return i;}function f(i,C){if(!(i instanceof C)){throw new TypeError("Cannot call a class as a function");}}var P=function P(i,n){f(this,P);this.path=i.Path;this.type="Path";this.$target=n;};function g(i){var o={};if(i.schema.entityContainer&&i.schema.entityContainer.fullyQualifiedName){o[i.schema.entityContainer.fullyQualifiedName]=i.schema.entityContainer;}i.schema.entitySets.forEach(function(n){o[n.fullyQualifiedName]=n;});i.schema.actions.forEach(function(n){o[n.fullyQualifiedName]=n;n.parameters.forEach(function(v){o[v.fullyQualifiedName]=v;});});i.schema.entityTypes.forEach(function(n){o[n.fullyQualifiedName]=n;n.entityProperties.forEach(function(v){o[v.fullyQualifiedName]=v;});n.navigationProperties.forEach(function(v){o[v.fullyQualifiedName]=v;});});Object.keys(i.schema.annotations).forEach(function(n){i.schema.annotations[n].forEach(function(v){var w=i.unalias(v.target);v.annotations.forEach(function(x){var y="".concat(w,"@").concat(i.unalias(x.term));if(x.qualifier){y+="#".concat(x.qualifier);}o[y]=x;x.fullyQualifiedName=y;});});});return o;}function h(i,n){if(n.startsWith("@")){return i+n;}else{return i+"/"+n;}}function r(o,i,n){var v=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;n=h(i.fullyQualifiedName,n);var w=n.split("/");var x=n;var y=w.reduce(function(z,B){if(!z){x=B;}else if(z._type==="EntitySet"&&z.entityType){x=h(z.entityType,B);}else if(z._type==="NavigationProperty"&&z.targetTypeName){x=h(z.targetTypeName,B);}else if(z._type==="NavigationProperty"&&z.targetType){x=h(z.targetType.fullyQualifiedName,B);}else if(z._type==="Property"){x=h(i.fullyQualifiedName.substr(0,i.fullyQualifiedName.lastIndexOf("/")),B);}else if(z._type==="Action"&&z.isBound){x=h(z.fullyQualifiedName,B);if(!o[x]){x=h(z.sourceType,B);}}else if(z._type==="ActionParameter"&&z.isEntitySet){x=h(z.type,B);}else if(z._type==="ActionParameter"&&!z.isEntitySet){x=h(i.fullyQualifiedName.substr(0,i.fullyQualifiedName.lastIndexOf("/")),B);if(!o[x]){var C=i.fullyQualifiedName.lastIndexOf("/");if(C===-1){C=i.fullyQualifiedName.length;}x=h(o[i.fullyQualifiedName.substr(0,C)].sourceType,B);}}else{x=h(z.fullyQualifiedName,B);}return o[x];},null);if(!y){}if(v){return x;}return y;}function p(i,n,o,v,w){if(i===undefined){return undefined;}switch(i.type){case"String":return i.String;case"Int":return i.Int;case"Bool":return i.Bool;case"Decimal":return i.Decimal;case"Date":return i.Date;case"EnumMember":return i.EnumMember;case"PropertyPath":return{type:"PropertyPath",value:i.PropertyPath,$target:r(v,o,i.PropertyPath)};case"NavigationPropertyPath":return{type:"NavigationPropertyPath",value:i.NavigationPropertyPath,$target:r(v,o,i.NavigationPropertyPath)};case"AnnotationPath":var x=r(v,o,n.unalias(i.AnnotationPath),true);var y={type:"AnnotationPath",value:i.AnnotationPath,$target:x};w.push(y);return y;case"Path":var $=r(v,o,i.Path,true);var z=new P(i,$);w.push(z);return z;case"Record":return j(i.Record,n,o,v,w);case"Collection":return k(i.Collection,n,o,v,w);case"Apply":return i;}}function j(i,n,o,v,w){var x={$Type:n.unalias(i.type)};var y={};i.propertyValues.forEach(function(z){y[z.name]=p(z.value,n,o,v,w);});return Object.assign(x,y);}function k(i,n,o,v,w){switch(i.type){case"PropertyPath":return i.map(function(x){return{type:"PropertyPath",value:x.PropertyPath,$target:r(v,o,x.PropertyPath)};});case"Path":return i.map(function(x){var $=r(v,o,x.Path,true);var y=new P(x,$);w.push(y);return y;});case"AnnotationPath":return i.map(function(x){var y=r(v,o,x.AnnotationPath,true);var z={type:"AnnotationPath",value:x.AnnotationPath,$target:y};w.push(z);return z;});case"NavigationPropertyPath":return i.map(function(x){return{type:"NavigationPropertyPath",value:x.NavigationPropertyPath,$target:r(v,o,x.NavigationPropertyPath)};});case"Record":return i.map(function(x){return j(x,n,o,v,w);});case"String":return i.map(function(x){return x;});default:if(i.length===0){return[];}throw new Error("Unsupported case");}}function l(i,n,o,v,w){if(i.record){var x={$Type:n.unalias(i.record.type),fullyQualifiedName:i.fullyQualifiedName,qualifier:i.qualifier};var y={};i.record.propertyValues.forEach(function(B){y[B.name]=p(B.value,n,o,v,w);});return Object.assign(x,y);}else if(!i.isCollection){if(i.value){return p(i.value,n,o,v,w);}else{return true;}}else if(i.collection){var z=k(i.collection,n,o,v,w);z.fullyQualifiedName=i.fullyQualifiedName;return z;}else{throw new Error("Unsupported case");}}function m(i,o){return function(n){return r(o,i,n);};}function q(i,o){i.schema.entityTypes.forEach(function(n){n.navigationProperties.forEach(function(v){if(v.targetTypeName){v.targetType=o[v.targetTypeName];}else if(v.relationship){var w=i.schema.associations.find(function(y){return y.fullyQualifiedName===v.relationship;});if(w){var x=w.associationEnd.find(function(y){return y.role===v.toRole;});if(x){v.targetType=o[x.type];}}}});n.resolvePath=m(n,o);});}function s(i,o){i.schema.actions.forEach(function(n){if(n.isBound){var v=o[n.sourceType];n.sourceEntityType=v;if(v){if(!v.actions){v.actions={};}v.actions[n.name]=n;v.actions["".concat(i.schema.namespace,".").concat(n.name)]=n;}var w=o[n.returnType];n.returnEntityType=w;}});}function t(i,o){i.schema.entitySets.forEach(function(n){n.entityTypeInstance=o[n.entityType];});}function u(i){var o=g(i);q(i,o);s(i,o);t(i,o);var n=[];var v=[];Object.keys(i.schema.annotations).forEach(function(w){i.schema.annotations[w].forEach(function(x){var y=i.unalias(x.target);var z=o[y];if(!z){if(y.indexOf("@")!==-1){v.push(x);}}else{if(!z.annotations){z.annotations={};}x.annotations.forEach(function(B){var C=B.term.split("."),D=_(C,2),E=D[0],F=D[1];if(!z.annotations[E]){z.annotations[E]={};}if(!z.annotations._annotations){z.annotations._annotations={};}var G="".concat(F).concat(B.qualifier?"#".concat(B.qualifier):"");z.annotations[E][G]=l(B,i,z,o,n);if(z.annotations[E][G]!==null&&typeof z.annotations[E][G]==="object"){z.annotations[E][G].term=i.unalias("".concat(E,".").concat(F));z.annotations[E][G].qualifier=B.qualifier;}z.annotations._annotations["".concat(E,".").concat(G)]=z.annotations[E][G];o["".concat(y,"@").concat(i.unalias(E+"."+G))]=z.annotations[E][G];});}});});v.forEach(function(w){var x=i.unalias(w.target);var y=x.split("@"),z=_(y,2),B=z[0],C=z[1];var D=C.split("/");B=B+"@"+D[0];var E=D.slice(1).reduce(function(F,G){if(!F){return null;}return F[G];},o[B]);if(!E){}else{if(!E.annotations){E.annotations={};}w.annotations.forEach(function(F){var G=F.term.split("."),H=_(G,2),I=H[0],J=H[1];if(!E.annotations[I]){E.annotations[I]={};}if(!E.annotations._annotations){E.annotations._annotations={};}var K="".concat(J).concat(F.qualifier?"#".concat(F.qualifier):"");E.annotations[I][K]=l(F,i,E,o,n);if(E.annotations[I][K]!==null&&typeof E.annotations[I][K]==="object"){E.annotations[I][K].term=i.unalias("".concat(I,".").concat(J));E.annotations[I][K].qualifier=F.qualifier;}E.annotations._annotations["".concat(I,".").concat(K)]=E.annotations[I][K];o["".concat(x,"@").concat(i.unalias(I+"."+K))]=E.annotations[I][K];});}});n.forEach(function(w){var x=w.$target;w.$target=o[x];});return i;}var A={convertTypes:u};return A;});
