/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/model/json/JSONModel","sap/fe/macros/CommonHelper"],function(J,C){"use strict";var a={fnUpdateChart:function(e,c){var I=c||e.getSource(),m=I.getParent(),s,A,b,d;m.getCustomData().forEach(function(p){if(p.getKey()==="selectedContextsModel"){s=p.getValue();}else if(p.getKey()==="operationAvailableMap"){A=JSON.parse(p.getValue());}else if(p.getKey()==="multiSelectDisabledActions"){b=p.getValue();d=b?b.split(","):[];}});if(s){var o=m.getModel(s);var f="/$contexts/"+m.getId().substr(m.getId().indexOf("fe::chart"),m.getId().length);o.setProperty("/$contexts",{});var S=[];var M;var g=I.getSelectedDataPoints().dataPoints;for(var i=0;i<g.length;i++){S.push(g[i].context);}o.setProperty(f,{selectedContexts:S,numberOfSelectedContexts:I.getSelectedDataPoints().count});for(var j=0;j<S.length;j++){var h=S[j];var k=h.getObject();for(var l in k){if(l.indexOf("#")===0){var n=l;n=n.substring(1,n.length);M=o.getProperty(f);M[n]=true;o.setProperty(f,M);}}M=o.getProperty(f);}this.setActionEnablement(o,A,f,S);if(S.length>1){this.disableAction(o,d,f);}}},setActionEnablement:function(c,A,s,S){for(var b in A){c.setProperty(s+"/"+b,false);var p=A[b];for(var i=0;i<S.length;i++){var o=S[i];var d=o.getObject();if(p===null&&!!d["#"+b]){c.setProperty(s+"/"+b,true);break;}else if(!!o.getObject(p)){c.setProperty(s+"/"+b,true);break;}}}},disableAction:function(c,A,s){A.forEach(function(b){c.setProperty(s+"/"+b,false);});}};return a;},true);
