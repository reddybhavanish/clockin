sap.ui.define(["sap/ui/test/Opa5","sap/ui/test/OpaBuilder","sap/ui/thirdparty/jquery","sap/base/util/UriParameters","sap/fe/test/Utils","./Stubs"],function(O,a,q,U,b,S){"use strict";return O.extend("sap.fe.integrations.common.BaseArrangements",{iStartMyApp:function(c,A,s){var u=new U(window.location.href),B=u.get("useBackendUrl")||"http://localhost:4004",d=Object.keys(s||{}).reduce(function(C,k){return C+"&"+k+"="+s[k];},"");this.iStartMyAppInAFrame("test-resources/sap/fe/templates/internal/demokit/flpSandbox.html?sap-ui-log-level=ERROR&sap-ui-xx-viewCache=true&useBackendUrl="+B+d+"#"+c+(A||""));return a.create(this).success(function(){var w=O.getWindow();var W=w.parent;w.history.go=W.history.go;w.history.back=W.history.back;S.stubConfirm(w);S.stubMessageToast(w);}).description(b.formatMessage("App '{0}{1}' started",c,A||"")).execute();},iResetTestData:function(){var u=new U(window.location.href),B=u.get("useBackendUrl")||"http://localhost:4004",p="/databinding/proxy/"+B.replace("://","/"),s=false,t=window.__karma__&&window.__karma__.config&&window.__karma__.config.ui5?window.__karma__.config.ui5.shardIndex:"default";return a.create(this).success(function(){localStorage.clear();q.post(p+"/redeploy?tenant="+t,function(){s=true;});return a.create(this).check(function(){return s;}).execute();}).description(b.formatMessage("Reset test data on tenant '{0}'",t)).execute();},iTearDownMyApp:function(){return a.create(this).do(function(){var w=O.getWindow();S.restoreConfirm(w);S.restoreMessageToast(w);}).do(this.iTeardownMyAppFrame.bind(this)).description("Tearing down my app").execute();}});});
