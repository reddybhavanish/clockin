sap.ui.define(["sap/base/util/merge","./TemplatePage","sap/ui/test/OpaBuilder","sap/ui/test/Opa5","sap/fe/test/Utils","sap/fe/test/builder/FEBuilder","sap/fe/test/builder/FieldBuilder","sap/fe/test/builder/OverflowToolbarBuilder","sap/fe/test/builder/HeaderBuilder","sap/fe/test/api/FooterActions","sap/fe/test/api/FooterAssertions","sap/fe/test/api/HeaderActions","sap/fe/test/api/HeaderAssertions","sap/fe/core/helpers/StableIdHelper"],function(m,T,O,a,U,F,b,c,H,d,e,f,g,S){"use strict";function h(n){return"fe::table::"+n.split("/").join("::")+"::LineItem";}function _(s,n,o,p,v){var I="fe::";if(typeof o==="string"){I+="FormContainer";I+="::"+S.prepareId(o);if(v){I+="::FieldValueHelp";I+="::"+s;}else{I+="::FormElement";I+="::DataField";I+="::"+s;I+="::Field";}}else if(typeof p==="string"){I+="HeaderFacet";I+="::Form";I+="::"+S.prepareId(p);I+="::DataField";I+="::"+s;I+="::Field";}I=S.prepareId(I);return I;}function i(o){return _(o.field,"",o.facet,o.headerFacet,true);}function j(o,s){return _(o.field,s||"",o.facet,o.headerFacet,false);}function k(o,v){return c.create(o).hasId(v.id);}function l(o,v){return H.create(o).hasId(v.id);}return{create:function(A,C,E){var V=A+"::"+C,n=V+"--fe::ObjectPage",o="fe::HeaderFacet",p="fe::ObjectPage-OPHeaderContent",q="fe::FooterBar",r="fe::FacetSubSection",s="fe::Form",B=V+"--fe::Breadcrumbs",t="fe::ObjectPage-anchBar",P="fe::Paginator",u={DISPLAY:"Display",EDITABLE:"Editable"},R=sap.ui.getCore().getLibraryResourceBundle("sap.fe.core");return m(T.create(V,E),{actions:{onTable:function(v){if(!U.isOfType(v,String)){v={id:h(v.property)};}return this._onTable(v);},onFooter:function(){return new d(k(this,{id:q}),{id:q});},onHeader:function(){return new f(l(this,{id:n}),{id:n,headerId:o,headerContentId:p,viewId:V,paginatorId:P,breadCrumbId:B});},iClickQuickViewMoreLinksButton:function(){return O.create(this).hasType("sap.m.Button").has(O.Matchers.resourceBundle("text","sap.ui.mdc","info.POPOVER_DEFINE_LINKS")).doPress().description("Pressing 'More Links' button").execute();},iClickLinkWithText:function(v){return O.create(this).hasType("sap.m.Link").hasProperties({text:v}).doPress().description("Navigating via link '"+v+"'").execute();},iClickSemanticLink:function(v){var w=j(v);return O.create(this).hasId(new RegExp(w)).hasType("sap.m.Link").doPress().description("Opening semantic link '"+v.field+"'").execute();},iEnableLink:function(v){return O.create(this).hasType("sap.m.ColumnListItem").hasAggregationProperties("cells",{text:v}).isDialogElement().doPress("selectMulti").description("The CheckBox for link "+v+" is selected").execute();},iEnterValueForField:function(v,w){var x=j(v);return O.create(this).hasId(x).doEnterText(w).description("Entering Text in the field '"+v.field+"' with value '"+w+"'").execute();},iOpenVHDialog:function(v){var w=j(v)+"-inner-vhi";return O.create(this).hasId(w).doPress().description("Opening value help for '"+v.field+"'").execute();},iPressKeyboardShortcutOnSection:function(v,w){return this._iPressKeyboardShortcut(undefined,v,w,"sap.uxap.ObjectPageSection");},iSelectFromVHDTable:function(v){return O.create(this).hasType("sap.m.ColumnListItem").hasAggregationProperties("cells",{value:v}).checkNumberOfMatches(1).isDialogElement().doPress().description("Selecting row from dialog with value '"+v+"'").execute();},iConfirmFacetVHD:function(v){var w=i(v)+"-ok";return O.create(this).hasId(w).doPress().description("Confirming value help selection for '"+v.field+"'").execute();},iCancelDialog:function(){return O.create(this).hasType("sap.m.Button").isDialogElement().hasProperties({text:R.getText("OBJECT_PAGE_CANCEL")}).doPress().description("Clicking the Cancel button").execute();},iConfirmDialogWithButtonText:function(v){return O.create(this).hasType("sap.m.Button").isDialogElement().hasProperties({text:v}).doPress().description("Clicking the "+v+"button").execute();},iOpenSectionWithTitle:function(N){return O.create(this).hasId(t).has(O.Matchers.aggregation("content",O.Matchers.properties({text:N}))).doPress().description("Selecting section "+N).execute();},iSortTableByColumn:function(N,v){return this._iSortTableByColumn(h(N),v);},iClickCreateButton:function(){return O.create(this).isDialogElement().hasType("sap.m.Button").has(O.Matchers.resourceBundle("text","sap.fe.core","SAPFE_ACTION_CREATE")).doPress().description("Pressing Create button on sticky creation dialog.").execute();},iWantToSeeMore:function(v){return O.create(this).hasId(r+"::"+v+"--seeMore").doPress().description("Show Optional Subsection").execute();},iWantToSeeLess:function(v){return O.create(this).hasId(r+"::"+v+"--seeLess").doPress().description("Hide Optional Subsection").execute();}},assertions:{onTable:function(v){if(!U.isOfType(v,String)){v={id:h(v.property)};}return this._onTable(v);},onFooter:function(){return new e(k(this,{id:q}),{id:q});},onHeader:function(){return new g(l(this,{id:n}),{id:n,headerId:o,headerContentId:p,viewId:V,paginatorId:P,breadCrumbId:B});},iSeeLinkWithText:function(v){return O.create(this).hasType("sap.m.Link").hasProperties({text:v}).description("Seeing link with text '"+v+"'").execute();},iSeeFacetActionButton:function(v,w,x){return this._iSeeElement("fe::Form::"+v+"::DataFieldForAction::"+w,x);},iSeeContactDetailsPopover:function(v){return(O.create(this).hasType("sap.ui.mdc.link.Panel").description("Contact card with title '"+v+"' is present").execute());},iSeeQuickViewPopover:function(){return O.create(this).hasType("sap.ui.mdc.link.Panel").description("Seeing Quick View Details in ObjectPage").execute();},iSeeQuickViewMoreLinksButton:function(){return O.create(this).isDialogElement(true).hasType("sap.m.Button").has(O.Matchers.resourceBundle("text","sap.ui.mdc","info.POPOVER_DEFINE_LINKS")).description("The 'More Links' button found").execute();},iSeeObjectPageInDisplayMode:function(){return this._iSeeObjectPageInMode(u.DISPLAY);},iSeeObjectPageInEditMode:function(){return this._iSeeObjectPageInMode(u.EDITABLE);},_iSeeObjectPageInMode:function(M){return O.create(this).hasId(V).viewId(null).has(function(v){return v.getModel("ui").getProperty("/editMode")===M;}).description("Object Page is in mode '"+M+"'").execute();},iSeeValueSetInStatus:function(v){return O.create(this).hasType("sap.m.ObjectStatus").hasProperties({text:v}).description("Seeing object status '"+v+"'").execute();},iSeeValueForField:function(v,w,x,y){var z=U.parseArguments([Object,[Array,String],String,Object],arguments),D=j(z[0]);return b.create(this).hasId(D).hasState(z[3]).hasValue(z[1],z[2]).description(U.formatMessage("Seeing field '{0}' with value '{1}'",v.field,[].concat(z[1],z[2]||[]))).execute(this);},iSeeSectionWithTitle:function(v){return O.create(this).hasType("sap.uxap.ObjectPageSection").hasProperties({title:v}).description("Seeing section with title '"+v+"'").execute();},iSeeSubSectionWithTitle:function(v){return O.create(this).hasType("sap.uxap.ObjectPageSubSection").hasProperties({title:v}).description("Seeing sub-section with title '"+v+"'").execute();},iSeeSemanticLink:function(v){var w=j(v);return O.create(this).hasId(new RegExp(w)).hasType("sap.m.Link").description("Seeing semantic link for field '"+v.field+"'").execute();},iSeeFlpLink:function(D){return O.create(this).hasType("sap.ui.mdc.link.PanelListItem").isDialogElement(true).hasProperties({text:D}).description("FLP link with text '"+D+"' is present").execute();},iSeeSelectLinksDialog:function(){return O.create(this).hasType("sap.m.Title").isDialogElement(true).has(O.Matchers.resourceBundle("text","sap.ui.mdc","info.SELECTION_DIALOG_ALIGNEDTITLE")).description("Seeing dialog open").execute();},iDoNotSeeFlpLink:function(D){return O.create(this).hasType("sap.m.Link").isDialogElement(true).check(function(v){var w=v.some(function(x){return x.getText()===D;});return w===false;},true).description("FLP link with text '"+D+"' is not found").execute();},iSeeVHD:function(v){var D=i(v)+"-dialog";return O.create(this).hasId(D).description("Seeing value help dialog for field '"+v.field+"'").execute();},iSeeVHDTable:function(v){var w=i(v)+"::Table";return O.create(this).hasId(w).hasAggregation("items").description("Seeing filled value help dialog for field '"+v.field+"'").execute();},iSeeVHDFilterBar:function(v){var w=i(v)+"::FilterBar";return O.create(this).hasId(w).description("Seeing value help filterbar for field '"+v.field+"'").execute();},iSeeSaveConfirmation:function(){return this._iSeeTheMessageToast(R.getText("OBJECT_SAVED"));},iSeeDeleteConfirmation:function(){return this._iSeeTheMessageToast(R.getText("OBJECT_PAGE_DELETE_TOAST_SINGULAR"));},iSeeSortedColumn:function(N,v,w){return this._iSeeSortedColumn(h(N),v,w||"sortOrder");},iSeeConfirmMessageBoxWithTitle:function(v){return O.create(this).hasType("sap.m.Dialog").isDialogElement(true).hasProperties({title:v}).description("Seeing Message dialog open").execute();},iSeeShowMoreButton:function(v){return O.create(this).hasId(r+"::"+v+"--seeMore").description("Seeing 'Show More' Button").execute();},iSeeShowLessButton:function(v){return O.create(this).hasId(r+"::"+v+"--seeLess").description("Seeing 'Show Less' Button").execute();},iSeeMoreFormContent:function(v){return O.create(this).hasId(s+"::"+v+"::MoreContent").description("Seeing More Form Content in "+v).execute();},iDoNotSeeMoreFormContent:function(v){return O.create(this).hasType("sap.ui.layout.form.Form").check(function(w){var x=w.some(function(y){return y.getId().includes(v+"::MoreContent");});return x===false;}).description("Not Seeing More Form Content in "+v).execute();},iSeeControlVMTableTitle:function(v,N){return O.create(this).hasType("sap.m.Title").hasId(h(N)+"::VM-text").hasProperties({text:v}).description("Seeing variant title '"+v+"'").execute();}}});}};});
