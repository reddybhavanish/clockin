sap.ui.define(["./BaseAPI","sap/fe/test/Utils","sap/ui/test/OpaBuilder","sap/ui/test/actions/Action","sap/fe/test/builder/FEBuilder","sap/fe/test/builder/FilterBarBuilder","sap/fe/test/builder/FilterFieldBuilder","./FieldActions","./FieldAssertions","sap/fe/core/model/DraftEditState"],function(B,U,O,A,F,a,b,c,d,E){"use strict";var e=function(f,v){if(!U.isOfType(f,a)){throw new Error("oFilterBarBuilder parameter must be a FilterBarBuilder instance");}return B.call(this,f,v);};e.prototype=Object.create(B.prototype);e.prototype.constructor=e;e.EditState={All:E.ALL.id,Unchanged:E.UNCHANGED.id,OwnDraft:E.OWN_DRAFT.id,Locked:E.LOCKED.id,UnsavedChanges:E.UNSAVED_CHANGES.id};e.prototype.createFilterFieldBuilder=function(f){var o=this.getBuilder(),v;if(U.isOfType(f,String)){v=O.Matchers.properties({label:f});}else{v=F.Matchers.id(RegExp(U.formatMessage("::FilterField::{0}$",f.property)));}o.hasField(v,true);return b.create(this.getOpaInstance()).options(o.build());};e.prototype.iOpenFilterAdaptation=function(){var f=this.getBuilder();return this.prepareResult(f.doOpenSettings().description(U.formatMessage("Opening the filter bar adaptation dialog for '{0}'",this.getIdentifier())).execute());};e.prototype.iCloseFilterAdaptation=function(){return this.prepareResult(F.createClosePopoverBuilder(this.getOpaInstance(),O.Matchers.resourceBundle("title","sap.ui.mdc","filterbar.ADAPT_TITLE")).description(U.formatMessage("Closing the filter bar adaptation dialog for '{0}'",this.getIdentifier())).execute());};e.prototype.filterFieldAdaptation=function(f,s,v,D){var g=U.parseArguments([[String,Object],Object,[Function,Array,A],String],arguments),o=F.create(this.getOpaInstance()),p,h=F.create(this.getOpaInstance()).hasType("sap.m.ColumnListItem").isDialogElement(),P=F.createPopoverBuilder(this.getOpaInstance(),O.Matchers.resourceBundle("title","sap.ui.mdc","filterbar.ADAPT_TITLE"));f=g[0];if(U.isOfType(f,String)){h.has(O.Matchers.bindingProperties(undefined,{label:f}));}else{h.has(O.Matchers.bindingProperties(undefined,{name:f.property}));}s=g[1];if(!U.isOfType(s,[null,undefined])){if("filtered"in s){h.has(O.Matchers.bindingProperties(undefined,{isFiltered:s.filtered}));delete s.filtered;}h.hasState(s);}v=g[2];if(!U.isOfType(v,[null,undefined])){P.do(v);}D=g[3];return this.prepareResult(o.success(function(){p=F.controlsExist(P);if(!p){this.iOpenFilterAdaptation();}if(!p){P.success(this.iCloseFilterAdaptation.bind(this));}return P.has(O.Matchers.children(h)).has(F.Matchers.atIndex(0)).checkNumberOfMatches(1).description(D).execute();}.bind(this)).execute());};return e;});
