sap.ui.define(["sap/ui/test/OpaBuilder","sap/fe/test/Utils","sap/ui/test/Opa5","sap/ui/test/matchers/Matcher","sap/ui/core/util/ShortcutHelper","sap/base/util/deepEqual"],function(O,U,a,M,S,d){"use strict";var E={focus:function(f){var b=O.Matchers.focused(true);return f?b:O.Matchers.not(b);},focused:function(f){var b=O.Matchers.focused(true);return f?b:O.Matchers.not(b);},type:function(t){return function(c){return c&&c.isA(t);};},p13nMode:function(m){if(!Array.isArray(m)){m=[];}m.sort();return function(c){var p=c.getP13nMode();if(!Array.isArray(p)){p=[];}p.sort();return d(m,p);};}};var F=function(){return O.apply(this,arguments);};F.create=function(o){return new F(o);};F.prototype=Object.create(O.prototype);F.prototype.constructor=F;F.prototype.getStatesMatcher=function(s){return F.Matchers.states(s);};F.prototype.hasState=function(s){if(!s){return this;}if(s.visible===false){this.mustBeVisible(false);this.mustBeEnabled(false);}if(s.enabled===false){this.mustBeEnabled(false);}return this.has(this.getStatesMatcher(s));};F.prototype.doPressKeyboardShortcut=function(s){return this.do(function(e){var n=S.parseShortcut(s);n.type="keydown";e.$().trigger(n);});};F.getControls=function(b,s){var o=b.build(),c=a.getPlugin().getMatchingControls(o),C=O.Matchers.filter(o.matchers)(c);if(s){if(C.length>1){throw new Error("found ambiguous results");}return C.length?C[0]:null;}return C;};F.controlsExist=function(b){return!!F.getControls(b).length;};F.createClosePopoverBuilder=function(o,p,s){return O.create(o).success(function(){var P=false,c=function(){P=true;},b=F.createPopoverBuilder(o,p);if(s||F.controlsExist(b)){return b.do(function(e){e.attachEventOnce("afterClose",c);e.close();}).success(O.create(o).check(function(){return P;})).execute();}});};F.createPopoverBuilder=function(o,p){var b=O.create(o).hasType("sap.m.Popover").isDialogElement(true).has(function(P){return P.isOpen();}).checkNumberOfMatches(1);if(p){b.has(p||[]);}return b;};F.createMessageToastBuilder=function(t){return O.create().check(function(){var w=a.getWindow();return(w.sapFEStubs&&w.sapFEStubs.getLastToastMessage&&w.sapFEStubs.getLastToastMessage()===t);}).description("Toast message '"+t+"' was displayed");};F.Matchers={state:function(n,v){if(n in E){return E[n](v);}var p={};p[n]=v;return O.Matchers.properties(p);},states:function(s){if(!U.isOfType(s,Object)){return O.Matchers.TRUE;}return F.Matchers.match(Object.keys(s).map(function(p){return F.Matchers.state(p,s[p]);}));},match:function(m){var f=O.Matchers.match(m);return function(c){return!!f(c);};},bound:function(){return function(c){return c&&!!c.getBindingContext();};},allMatch:function(m){var f=O.Matchers.filter(m);return function(i){var e=(i&&i.length)||0;return e===f(i).length;};},someMatch:function(m){var f=O.Matchers.filter(m);return function(i){return f(i).length>0;};},id:function(i){return function(c){if(U.isOfType(i,String)){return c.getId()===i;}else{return i.test(c.getId());}};},atIndex:function(i){return function(I){if(U.isOfType(I,[null,undefined])){return null;}I=[].concat(I);return I.length>i?I[i]:null;};}};F.Actions={};return F;});
