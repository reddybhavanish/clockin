/* Copyright 2012 Mozilla Foundation
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function compatibilityWrapper(){'use strict';if(typeof PDFJS==='undefined'){(typeof window!=='undefined'?window:this).PDFJS={};}(function checkTypedArrayCompatibility(){if(typeof Uint8Array!=='undefined'){if(typeof Uint8Array.prototype.subarray==='undefined'){Uint8Array.prototype.subarray=function s(b,e){return new Uint8Array(this.slice(b,e));};Float32Array.prototype.subarray=function s(b,e){return new Float32Array(this.slice(b,e));};}if(typeof Float64Array==='undefined'){window.Float64Array=Float32Array;}return;}function s(b,e){return new T(this.slice(b,e));}function a(b,o){if(arguments.length<2){o=0;}for(var i=0,n=b.length;i<n;++i,++o){this[o]=b[i]&0xFF;}}function T(b){var r,i,n;if(typeof b==='number'){r=[];for(i=0;i<b;++i){r[i]=0;}}else if('slice'in b){r=b.slice(0);}else{r=[];for(i=0,n=b.length;i<n;++i){r[i]=b[i];}}r.subarray=s;r.buffer=r;r.byteLength=r.length;r.set=a;if(typeof b==='object'&&b.buffer){r.buffer=b.buffer;}return r;}window.Uint8Array=T;window.Int8Array=T;window.Uint32Array=T;window.Int32Array=T;window.Uint16Array=T;window.Float32Array=T;window.Float64Array=T;})();(function normalizeURLObject(){if(!window.URL){window.URL=window.webkitURL;}})();(function checkObjectDefinePropertyCompatibility(){if(typeof Object.defineProperty!=='undefined'){var d=true;try{Object.defineProperty(new Image(),'id',{value:'test'});var T=function T(){};T.prototype={get id(){}};Object.defineProperty(new T(),'id',{value:'',configurable:true,enumerable:true,writable:false});}catch(e){d=false;}if(d){return;}}Object.defineProperty=function objectDefineProperty(o,n,a){delete o[n];if('get'in a){o.__defineGetter__(n,a['get']);}if('set'in a){o.__defineSetter__(n,a['set']);}if('value'in a){o.__defineSetter__(n,function objectDefinePropertySetter(v){this.__defineGetter__(n,function objectDefinePropertyGetter(){return v;});return v;});o[n]=a.value;}};})();(function checkXMLHttpRequestResponseCompatibility(){var x=XMLHttpRequest.prototype;var a=new XMLHttpRequest();if(!('overrideMimeType'in a)){Object.defineProperty(x,'overrideMimeType',{value:function xmlHttpRequestOverrideMimeType(m){}});}if('responseType'in a){return;}PDFJS.disableWorker=true;Object.defineProperty(x,'responseType',{get:function xmlHttpRequestGetResponseType(){return this._responseType||'text';},set:function xmlHttpRequestSetResponseType(v){if(v==='text'||v==='arraybuffer'){this._responseType=v;if(v==='arraybuffer'&&typeof this.overrideMimeType==='function'){this.overrideMimeType('text/plain; charset=x-user-defined');}}}});if(typeof VBArray!=='undefined'){Object.defineProperty(x,'response',{get:function xmlHttpRequestResponseGet(){if(this.responseType==='arraybuffer'){return new Uint8Array(new VBArray(this.responseBody).toArray());}else{return this.responseText;}}});return;}Object.defineProperty(x,'response',{get:function xmlHttpRequestResponseGet(){if(this.responseType!=='arraybuffer'){return this.responseText;}var t=this.responseText;var i,n=t.length;var r=new Uint8Array(n);for(i=0;i<n;++i){r[i]=t.charCodeAt(i)&0xFF;}return r.buffer;}});})();(function checkWindowBtoaCompatibility(){if('btoa'in window){return;}var d='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';window.btoa=function windowBtoa(c){var b='';var i,n;for(i=0,n=c.length;i<n;i+=3){var a=c.charCodeAt(i)&0xFF;var e=c.charCodeAt(i+1)&0xFF;var f=c.charCodeAt(i+2)&0xFF;var g=a>>2,h=((a&3)<<4)|(e>>4);var j=i+1<n?((e&0xF)<<2)|(f>>6):64;var k=i+2<n?(f&0x3F):64;b+=(d.charAt(g)+d.charAt(h)+d.charAt(j)+d.charAt(k));}return b;};})();(function checkWindowAtobCompatibility(){if('atob'in window){return;}var d='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';window.atob=function(i){i=i.replace(/=+$/,'');if(i.length%4===1){throw new Error('bad atob input');}for(var b=0,a,c,e=0,o='';c=i.charAt(e++);~c&&(a=b%4?a*64+c:c,b++%4)?o+=String.fromCharCode(255&a>>(-2*b&6)):0){c=d.indexOf(c);}return o;};})();(function checkFunctionPrototypeBindCompatibility(){if(typeof Function.prototype.bind!=='undefined'){return;}Function.prototype.bind=function functionPrototypeBind(o){var f=this,h=Array.prototype.slice.call(arguments,1);var b=function functionPrototypeBindBound(){var a=h.concat(Array.prototype.slice.call(arguments));return f.apply(o,a);};return b;};})();(function checkDatasetProperty(){var d=document.createElement('div');if('dataset'in d){return;}Object.defineProperty(HTMLElement.prototype,'dataset',{get:function(){if(this._dataset){return this._dataset;}var a={};for(var j=0,b=this.attributes.length;j<b;j++){var c=this.attributes[j];if(c.name.substring(0,5)!=='data-'){continue;}var k=c.name.substring(5).replace(/\-([a-z])/g,function(e,f){return f.toUpperCase();});a[k]=c.value;}Object.defineProperty(this,'_dataset',{value:a,writable:false,enumerable:false});return a;},enumerable:true});})();(function checkClassListProperty(){var d=document.createElement('div');if('classList'in d){return;}function c(e,i,b,r){var s=e.className||'';var l=s.split(/\s+/g);if(l[0]===''){l.shift();}var f=l.indexOf(i);if(f<0&&b){l.push(i);}if(f>=0&&r){l.splice(f,1);}e.className=l.join(' ');return(f>=0);}var a={add:function(n){c(this.element,n,true,false);},contains:function(n){return c(this.element,n,false,false);},remove:function(n){c(this.element,n,false,true);},toggle:function(n){c(this.element,n,true,true);}};Object.defineProperty(HTMLElement.prototype,'classList',{get:function(){if(this._classList){return this._classList;}var b=Object.create(a,{element:{value:this,writable:false,enumerable:true}});Object.defineProperty(this,'_classList',{value:b,writable:false,enumerable:false});return b;},enumerable:true});})();(function checkConsoleCompatibility(){if(!('console'in window)){window.console={log:function(){},error:function(){},warn:function(){}};}else if(!('bind'in console.log)){console.log=(function(f){return function(m){return f(m);};})(console.log);console.error=(function(f){return function(m){return f(m);};})(console.error);console.warn=(function(f){return function(m){return f(m);};})(console.warn);}})();(function checkOnClickCompatibility(){function i(e){if(a(e.target)){e.stopPropagation();}}function a(n){return n.disabled||(n.parentNode&&a(n.parentNode));}if(navigator.userAgent.indexOf('Opera')!==-1){document.addEventListener('click',i,true);}})();(function checkOnBlobSupport(){if(navigator.userAgent.indexOf('Trident')>=0){PDFJS.disableCreateObjectURL=true;}})();(function checkNavigatorLanguage(){if('language'in navigator){return;}PDFJS.locale=navigator.userLanguage||'en-US';})();(function checkRangeRequests(){var i=Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor')>0;var r=/Android\s[0-2][^\d]/;var a=r.test(navigator.userAgent);var b=/Chrome\/(39|40)\./.test(navigator.userAgent);if(i||a||b){PDFJS.disableRange=true;PDFJS.disableStream=true;}})();(function checkHistoryManipulation(){if(!history.pushState||navigator.userAgent.indexOf('Android 2.')>=0){PDFJS.disableHistory=true;}})();(function checkSetPresenceInImageData(){if(window.CanvasPixelArray){if(typeof window.CanvasPixelArray.prototype.set!=='function'){window.CanvasPixelArray.prototype.set=function(b){for(var i=0,d=this.length;i<d;i++){this[i]=b[i];}};}}else{var p=false,v;if(navigator.userAgent.indexOf('Chrom')>=0){v=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);p=v&&parseInt(v[2])<21;}else if(navigator.userAgent.indexOf('Android')>=0){p=/Android\s[0-4][^\d]/g.test(navigator.userAgent);}else if(navigator.userAgent.indexOf('Safari')>=0){v=navigator.userAgent.match(/Version\/([0-9]+)\.([0-9]+)\.([0-9]+) Safari\//);p=v&&parseInt(v[1])<6;}if(p){var c=window.CanvasRenderingContext2D.prototype;var a=c.createImageData;c.createImageData=function(w,h){var b=a.call(this,w,h);b.data.set=function(d){for(var i=0,e=this.length;i<e;i++){this[i]=d[i];}};return b;};c=null;}}})();(function checkRequestAnimationFrame(){function f(c){window.setTimeout(c,20);}var i=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);if(i){window.requestAnimationFrame=f;return;}if('requestAnimationFrame'in window){return;}window.requestAnimationFrame=window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||f;})();(function checkCanvasSizeLimitation(){var i=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);var a=/Android/g.test(navigator.userAgent);if(i||a){PDFJS.maxCanvasPixels=5242880;}})();(function checkFullscreenSupport(){var i=(navigator.userAgent.indexOf('Trident')>=0&&window.parent!==window);if(i){PDFJS.disableFullscreen=true;}})();(function checkCurrentScript(){if('currentScript'in document){return;}Object.defineProperty(document,'currentScript',{get:function(){var s=document.getElementsByTagName('script');return s[s.length-1];},enumerable:true,configurable:true});})();}).call((typeof window==='undefined')?this:window);
