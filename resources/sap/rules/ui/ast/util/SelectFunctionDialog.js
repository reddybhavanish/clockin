sap.ui.define(["sap/ui/core/Control","sap/m/List","sap/ui/model/json/JSONModel","sap/rules/ui/ast/constants/Constants"],function(C,L,J,a){"use strict";var i;var S=function(){this.oBundle=sap.ui.getCore().getLibraryResourceBundle("sap.rules.ui.i18n");this.functionLabelDisplay="";this.functionLabel="";this._selectFunctionSelected="";this._whereExpressionId="";this.dataObjectId="";this._count=0;this.dataObjectLabel="";this.dataObjectIdSelected="";this.enableCountField=true;this.sortOrder=[{name:a.NOSORT,label:this.oBundle.getText("no_sorting")},{name:a.SORTASC,label:this.oBundle.getText("sort_ascending")},{name:a.SORTDESC,label:this.oBundle.getText("sort_descending")}];this.selectedData=[{attributeSelected:"",sortOrder:a.NOSORT,cancelButton:false,addButton:true}];this.enabledData={enabled:false};this.dataObjectIdData={dataObjectId:""};};S.prototype._filterSelectFunction=function(s){var f=[];if(s&&s.selection){for(var b=0;b<s.selection.length;b++){if(s.selection[b].name!==a.SORTASC&&s.selection[b].name!==a.SORTDESC&&s.selection[b].name!==a.BOTTOM){f.push(s.selection[b]);}}return{selection:f};}};S.prototype._createFunctionSelectionDropDown=function(s){var t=this;s=this._filterSelectFunction(s);var m=new sap.ui.model.json.JSONModel(s);this.functionSelect=new sap.m.Select({width:"200px",selectedKey:this._selectFunctionSelected,forceSelection:false,showSecondaryValues:true,layoutData:new sap.ui.layout.GridData({span:"L3 M3 S3"}),change:function(e){t._selectFunctionSelected=e.getSource().getSelectedItem().getText();if(t._selectFunctionSelected===a.SELECT||t._selectFunctionSelected===a.FIRST){t._countField.setEnabled(false);t._countField.setValue("");t._count="";}else{t._countField.setEnabled(true);}if(t.dataObjectId&&t._selectFunctionSelected&&(t._count||t._selectFunctionSelected===a.SELECT||t._selectFunctionSelected===a.FIRST)){t.functionLabelDisplay=t._count?t._selectFunctionSelected+'('+t.dataObjectLabel+','+t._count+')':t._selectFunctionSelected+'('+t.dataObjectLabel+')';t.functionLabel=t._count?t._selectFunctionSelected+'('+t.dataObjectId+','+t._count+')':t._selectFunctionSelected+'('+t.dataObjectId+')';t.functionLabelField.setValue(t.functionLabelDisplay);if((t._selectFunctionSelected!==a.SELECT&&t._count>0)||(this.oModel.getData().selectionData[0].attributeSelected!==""&&t._selectFunctionSelected===a.SELECT)||(t._selectFunctionSelected===a.FIRST&&t.dataObjectId)){this.applyButton.setEnabled(true);}else{this.applyButton.setEnabled(false);}this.astExpressionBasicForWhere.setEditable(true);}else{this.applyButton.setEnabled(false);this.astExpressionBasicForWhere.setEditable(false);this.astExpressionBasicForWhere.setValue("");this.functionLabelField.setValue("");}}.bind(this)}).addStyleClass("sapAstExpressionDialogField");this.functionSelect.setModel(m);this.functionSelect.bindItems({path:"/selection",template:new sap.ui.core.ListItem({text:"{name}",key:"{name}",additionalText:"{label}"})});return this.functionSelect;};S.prototype._getAttributeAstExpressionBasic=function(b){var t=this;this.astExpressionBasicForAttribute=new sap.rules.ui.AstExpressionBasic({astExpressionLanguage:this._oAstExpressionLanguage,enableAggregateFunctionWhereClause:true,value:"{attributeSelected}",dataObjectInfo:"{/dataObjectIdData/dataObjectId}",isAttributeContext:true,editable:"{/enabledData/enabled}",change:function(e){var s=parseInt(e.getSource().getBindingContext().sPath.split("/")[2]);t._AttributeExpressionId=e.getParameter("newValue");var c=t.oModel.getData().selectionData;if(this._attributeAlreadySelected(c)){e.oSource.setValueState("Error");e.oSource.setValueStateText(this.oBundle.getText("duplicateAttribute"));}else{e.oSource.setValueState("None");}if(t._AttributeExpressionId){c[s].attributeSelected=t._AttributeExpressionId.trim();}var d=t._setDataObjectInfoForWhereConditionAutoSuggestion();t.astExpressionBasicForWhere.setDataObjectInfo(d);if((t._selectFunctionSelected!==a.SELECT&&t._count>0)||(this.oModel.getData().selectionData[0].attributeSelected!==""&&t._selectFunctionSelected===a.SELECT)||(t._selectFunctionSelected===a.FIRST&&t.dataObjectId)){this.applyButton.setEnabled(true);}else{this.applyButton.setEnabled(false);}this.astExpressionBasicForWhere.setValue("");this._whereExpressionId="";}.bind(this)});this.astExpressionBasicForAttribute.addStyleClass("sapAstExpressionDialog");return this.astExpressionBasicForAttribute;};S.prototype._attributeAlreadySelected=function(s){var b=0;for(var e in s){if(s[e].attributeSelected.trim()===this._AttributeExpressionId.trim()){b++;}}if(b>1){return true;}return false;};S.prototype._tableColumnsFactory=function(I,c){var t=this;var b=new sap.m.ColumnListItem({cells:[t._getAttributeAstExpressionBasic(),new sap.m.Select({enabled:"{/enabledData/enabled}",items:{path:"/sortOrder",template:new sap.ui.core.ListItem({key:'{name}',text:'{label}'})},change:function(e){var s=parseInt(e.getSource().getBindingContext().sPath.split("/")[2]);t._sortOrder=e.getSource().getSelectedItem().getKey();t.oModel.getData().selectionData[s].sortOrder=t._sortOrder}.bind(this),selectedKey:"{sortOrder}",width:'200px'}).addStyleClass("sapAstExpressionDialogField sapAstExpressionSortSelect"),new sap.ui.layout.HorizontalLayout({content:[new sap.m.Button({type:sap.m.ButtonType.Transparent,icon:sap.ui.core.IconPool.getIconURI("sys-cancel"),visible:"{cancelButton}",enabled:"{/enabledData/enabled}",press:function(e){var s=e.getSource().getParent().getParent().getBindingContextPath().split("/")[2];this._removeColumnFromJsonModel(parseInt(s));}.bind(this)}),new sap.m.Button({type:sap.m.ButtonType.Transparent,icon:sap.ui.core.IconPool.getIconURI("add"),visible:"{addButton}",enabled:"{/enabledData/enabled}",press:function(e){var s=e.getSource().getParent().getParent().getBindingContextPath().split("/")[2];this._addColumnToJsonModel(parseInt(s));}.bind(this)})]})]});return b;};S.prototype._addColumnToJsonModel=function(s){var n={attributeSelected:"",sortOrder:a.NOSORT,cancelButton:true,addButton:true,};this.selectedData.splice(s+1,0,n);if(this.selectedData.length>1){this.selectedData[0].cancelButton=true;}this.oModel.setData({sortOrder:this.sortOrder,selectionData:this.selectedData,enabledData:this.enabledData,dataObjectIdData:this.dataObjectIdData});};S.prototype._removeColumnFromJsonModel=function(s){this.selectedData.splice(s,1);if(this.selectedData.length===1){this.selectedData[0].cancelButton=false;}this.oModel.setData({sortOrder:this.sortOrder,selectionData:this.selectedData,enabledData:this.enabledData,dataObjectIdData:this.dataObjectIdData});var b=this._setDataObjectInfoForWhereConditionAutoSuggestion();this.astExpressionBasicForWhere.setDataObjectInfo(b);this.astExpressionBasicForWhere.setValue("");this._whereExpressionId="";};S.prototype._getSuggestionsForTheGivenInput=function(b){var t=this._oAstExpressionLanguage.getTokensForGivenStringInput(b);var u=this._oAstExpressionLanguage.convertTokensToUiModelForAutoSuggestion(t);var s={};s.AttributeContext=true;s.OperationsContext=false;var c=this._oAstExpressionLanguage.getSuggesstions(u,s);return c;};S.prototype._createDataObjectDropDown=function(A){var t=this;var b=this._getSuggestionsForTheGivenInput("");var d=b.autoComplete.categories;var m=new sap.ui.model.json.JSONModel(d);this.vocabularySelect=new sap.m.Select({width:"200px",selectedKey:this.dataObjectIdSelected,forceSelection:false,ariaLabelledBy:A,layoutData:new sap.ui.layout.GridData({span:"L3 M3 S3"}),change:function(E){t.dataObjectIdSelected=E.getSource().getSelectedItem().getKey();t.dataObjectId="/"+E.getSource().getSelectedItem().getKey();t.dataObjectLabel=E.getSource().getSelectedItem().getText();if(t.dataObjectId){t.oModel.getData().dataObjectIdData.dataObjectId=t.dataObjectId;t.oModel.getData().enabledData.enabled=true;}this.selectedData=[{attributeSelected:"",sortOrder:a.NOSORT,cancelButton:false,addButton:true}];t._bindAttributes();var s=t._setDataObjectInfoForWhereConditionAutoSuggestion();t.astExpressionBasicForWhere.setDataObjectInfo(s);if(t.dataObjectId&&t._selectFunctionSelected&&(t._count||t._selectFunctionSelected===a.SELECT||t._selectFunctionSelected===a.FIRST)){t.functionLabelDisplay=t._count?t._selectFunctionSelected+'('+t.dataObjectLabel+','+t._count+')':t._selectFunctionSelected+'('+t.dataObjectLabel+')';t.functionLabel=t._count?t._selectFunctionSelected+'('+t.dataObjectId+','+t._count+')':t._selectFunctionSelected+'('+t.dataObjectId+')';t.functionLabelField.setValue(t.functionLabelDisplay);if((t._selectFunctionSelected!==a.SELECT&&t._count>0)||(this.oModel.getData().selectionData[0].attributeSelected!==""&&t._selectFunctionSelected===a.SELECT)||(t._selectFunctionSelected===a.FIRST&&t.dataObjectId)){this.applyButton.setEnabled(true);}else{this.applyButton.setEnabled(false);}this.astExpressionBasicForWhere.setValue("");this._whereExpressionId="";this.astExpressionBasicForWhere.setEditable(true);}else{this.applyButton.setEnabled(false);this.astExpressionBasicForWhere.setEditable(false);this.astExpressionBasicForWhere.setValue("");this.functionLabelField.setValue("");}}.bind(this)}).addStyleClass("sapAstExpressionDialogField");this.vocabularySelect.setModel(m);this.vocabularySelect.bindItems({path:"/terms",template:new sap.ui.core.ListItem({text:"{label}",key:"{id}"})});var v=b.autoComplete.categories.vocabularyRules;for(var e in v){var c=new sap.ui.core.ListItem({text:v[e].label,key:v[e].id});this.vocabularySelect.addItem(c);}return this.vocabularySelect;};S.prototype._bindAttributes=function(){this.oModel=new sap.ui.model.json.JSONModel();this.oModel.setData({sortOrder:this.sortOrder,selectionData:this.selectedData,enabledData:this.enabledData,dataObjectIdData:this.dataObjectIdData});this.conditionsTable.setModel(this.oModel);};S.prototype._createWhereAstExpressionBasic=function(){var t=this;this.astExpressionBasicForWhere=new sap.rules.ui.AstExpressionBasic({astExpressionLanguage:this._oAstExpressionLanguage,enableAggregateFunctionWhereClause:true,value:this._whereExpressionId,editable:"{/value}",dataObjectInfo:this._setDataObjectInfoForWhereConditionAutoSuggestion(),change:function(e){t._whereExpressionId=e.getParameter("newValue");}.bind(this)});this.astExpressionBasicForWhere.addStyleClass("sapAstExpressionDialog");return this.astExpressionBasicForWhere;};S.prototype._setDataObjectInfoForWhereConditionAutoSuggestion=function(){if(this.dataObjectId){var d=this._returnDataObjectBasedOnCommonAssociationAndCardinality(this.dataObjectId,this._getSelectedAttributeJsons());return this._selectFunctionSelected+"("+a.FILTER+"("+d+",";}};S.prototype._createFunctionLabel=function(){this.functionLabelField=new sap.m.TextArea({value:this.functionLabelDisplay,enabled:false,width:"100%"}).addStyleClass("sapAstExpressionDialogTextField");return this.functionLabelField;};S.prototype._clearData=function(){this.functionLabelDisplay="";this.functionLabel="";this._selectFunctionSelected="";this._whereExpressionId="";this.dataObjectId="";this._count="";this.dataObjectLabel="";this.dataObjectIdSelected="";this.enableCountField=false;this.attributeJson={};this.sortOrder=[{name:a.NOSORT,label:this.oBundle.getText("no_sorting")},{name:a.SORTASC,label:this.oBundle.getText("sort_ascending")},{name:a.SORTDESC,label:this.oBundle.getText("sort_descending")}];this.selectedData=[{attributeSelected:"",sortOrder:a.NOSORT,cancelButton:false,addButton:true}];this.enabledData={enabled:false};this.dataObjectIdData={dataObjectId:""};};S.prototype._createTable=function(){var t=this;this.conditionsTable=new sap.m.Table({backgroundDesign:sap.m.BackgroundDesign.Solid,showSeparators:sap.m.ListSeparators.None,layoutData:new sap.ui.layout.form.GridContainerData({halfGrid:false}),columns:[new sap.m.Column({width:"50%"}).setStyleClass("sapAstAttributeColumn"),new sap.m.Column({width:"25%"}).setStyleClass("sapAstSortColumn"),new sap.m.Column({width:"20%"})]}).addStyleClass("sapAstAttributeTable");this._bindAttributes();var b=t._tableColumnsFactory();this.conditionsTable.bindItems("/selectionData",b);return this.conditionsTable;};S.prototype._createCountField=function(A){var t=this;this._countField=new sap.m.TextArea({value:t._count,enabled:this.enableCountField,ariaLabelledBy:A,layoutData:new sap.ui.layout.GridData({span:"L1 M1 S1"}),change:function(e){t._count=e.getSource().getValue();if(t.dataObjectId&&t._selectFunctionSelected&&(t._count||t._selectFunctionSelected===a.SELECT||t._selectFunctionSelected===a.FIRST)){t.functionLabelDisplay=t._count?t._selectFunctionSelected+'('+t.dataObjectLabel+','+t._count+')':t._selectFunctionSelected+'('+t.dataObjectLabel+')';t.functionLabel=t._count?t._selectFunctionSelected+'('+t.dataObjectId+','+t._count+')':t._selectFunctionSelected+'('+t.dataObjectId+')';t.functionLabelField.setValue(t.functionLabelDisplay);if((t._selectFunctionSelected!==a.SELECT&&t._count>0)||(this.oModel.getData().selectionData[0].attributeSelected!==""&&t._selectFunctionSelected===a.SELECT)||(t._selectFunctionSelected===a.FIRST&&t.dataObjectId)){this.applyButton.setEnabled(true);}else{this.applyButton.setEnabled(false);}this.astExpressionBasicForWhere.setEditable(true);}else{this.applyButton.setEnabled(false);this.astExpressionBasicForWhere.setEditable(false);this.astExpressionBasicForWhere.setValue("");this.functionLabelField.setValue("");}}.bind(this)}).addStyleClass("sapAstSelectCountField sapAstExpressionDialogTextField");return this._countField;};S.prototype._convertFunctionLabelToText=function(d,f){this.termsProvider=this._oAstExpressionLanguage._astBunldeInstance.TermsProvider.TermsProvider;var o=this.termsProvider.getTermNameFromASTNodeReference(d);f=f.replace(d,o);return f};S.prototype._createSelectFunctionDialog=function(d,c,A,b,j){var t=this;var s=0;this._clearData();this.oBundle=sap.ui.getCore().getLibraryResourceBundle("sap.rules.ui.i18n");this._oAstExpressionLanguage=A;if(j){this._selectFunctionSelected=j.function;this._whereExpressionId=j.filter;this.dataObjectId=j.dataObject;this.functionLabel=j.functionLabel;this.dataObjectIdSelected=j.dataObject.replace("/","");this.attributeJson=j.attributes;if(j.count){this._count=j.count;this.enableCountField=true;}t.functionLabelDisplay=this._convertFunctionLabelToText(j.dataObject,j.functionLabel);;if(this.dataObjectId){var e=this._returnDataObjectBasedOnCommonAssociationSelection(j.doVocabId,j.attributes);this.attributeJson=this._addAssociationIdFromAttribute(j.attributes,e,this.dataObjectId);this.dataObjectIdData.dataObjectId=this.dataObjectId;this.enabledData.enabled=true;this.termsProvider=this._oAstExpressionLanguage._astBunldeInstance.TermsProvider.TermsProvider;this.dataObjectLabel=this.termsProvider.getTermNameFromASTNodeReference(this.dataObjectId);}if(!jQuery.isEmptyObject(this.attributeJson)){this.selectedData=[];for(var k in this.attributeJson){var n={attributeSelected:"",sortOrder:a.NOSORT,cancelButton:true,addButton:true,};n.attributeSelected=k;n.sortOrder=this.attributeJson[k];this.selectedData.push(n);s++;}if(s===1){this.selectedData[0].cancelButton=false;}}if(this._selectFunctionSelected===a.SELECT){this.enableCountField=false;}}var f=t._createFunctionSelectionDropDown(d);var g=new sap.m.Text({text:"Count",tooltip:"Count",textAlign:"End",layoutData:new sap.ui.layout.GridData({span:"L1 M1 S1"})});var v=new sap.m.Text({text:t.oBundle.getText("vocabulary"),tooltip:t.oBundle.getText("vocabulary"),textAlign:"End",layoutData:new sap.ui.layout.GridData({span:"L2 M2 S2"})});var h=t._createTable();var w=t._createWhereAstExpressionBasic();var F=t._createFunctionLabel();var l=new sap.ui.layout.form.SimpleForm({layout:sap.ui.layout.form.SimpleFormLayout.ResponsiveGridLayout,editable:true,content:[new sap.m.Label({text:t.oBundle.getText("function"),tooltip:t.oBundle.getText("function"),labelFor:f.getId()}),f,g,t._createCountField(g.getId()),v,t._createDataObjectDropDown(v.getId()),new sap.m.Label({text:t.oBundle.getText("attributes"),tooltip:t.oBundle.getText("attributes"),labelFor:h.getId()}).addStyleClass("sapAstAttributeLabel"),h,new sap.m.Label({text:t.oBundle.getText("where"),tooltip:t.oBundle.getText("where"),labelFor:w.getId()}),w,new sap.m.Label({text:t.oBundle.getText("function_label"),tooltip:t.oBundle.getText("function_label"),labelFor:F.getId()}),F]});var m=new sap.m.Dialog({title:this.oBundle.getText("selectFunctionTitle"),contentWidth:"800px",showHeader:true,draggable:true,beforeClose:function(){b(false);},content:[l],buttons:[this.applyButton=new sap.m.Button({text:this.oBundle.getText("apply"),tooltip:this.oBundle.getText("applyChangesBtnTooltip"),press:function(o){var p=t._createJson();o.getSource().mProperties={value:t.functionLabel,jsonData:p};c(o);t._setModal(false);m.close();m.destroy();}}),new sap.m.Button({text:this.oBundle.getText("cancel"),tooltip:this.oBundle.getText("cancelBtnTooltip"),press:function(o){t._setModal(false);m.close();m.destroy();}})]}).addStyleClass("sapUiSizeCompact");;t._setModal(true);m.open();};S.prototype._setModal=function(v){var p=sap.ui.getCore().byId("popover");if(p){p.setModal(v);}};S.prototype._getSelectedAttributeJsons=function(){var k="";var v="";var j={};for(var b=0;b<this.oModel.getData().selectionData.length;b++){if(this.oModel.getData().selectionData[b].attributeSelected!==""){k=this.oModel.getData().selectionData[b].attributeSelected;v=this.oModel.getData().selectionData[b].sortOrder;j[k]=v;}}return j;};S.prototype._returnDataObjectBasedOnCommonAssociationSelection=function(d,b){var s="";var c="";if(d&&Object.keys(b).length!==0&&b.constructor===Object){var f=Object.keys(b)[0];s=d+f.replace(".","");if(Object.keys(b).length>1){for(var k in b){c=d+k.replace(".","");var e=s.split("/");var g=c.split("/");if(e.length>2&&g.length>2){s="";for(var h=1;h<(e<g?e.length:g.length);h++){if(e[h]===g[h]){s+="/"+e[h];}}}}}else{var e=s.split("/");s="";for(var h=1;h<e.length-1;h++){s+="/"+e[h];}}if(this._hasAssociationId(s)){return s;}}if(!this.includes(d,"/")){d="/"+d;}return d;};S.prototype._returnDataObjectBasedOnCommonAssociationAndCardinality=function(d,b){var s="";var c="";if(d&&Object.keys(b).length!==0&&b.constructor===Object){var f=Object.keys(b)[0];s=d+f.replace(".","");if(Object.keys(b).length>1){for(var k in b){c=d+k.replace(".","");var e=s.split("/");var g=c.split("/");if(e.length>2&&g.length>2){s="";for(var h=1;h<(e<g?e.length:g.length);h++){if(e[h]===g[h]){s+="/"+e[h];}}}}}else{var e=s.split("/");s="";for(var h=1;h<e.length-1;h++){s+="/"+e[h];}}if(this._hasAssociationId(s)){return this._returnDataObjectBasedOnCardinality(s);}}return d;};S.prototype._returnDataObjectBasedOnCardinality=function(v){var b=v;if(b){var s=b.split("/");var c=s[1];var d=0;var t;var e="";if(s.length>2){for(var f=2;f<s.length;f++){c+="."+s[f];t=this._oAstExpressionLanguage._astBunldeInstance.TermsProvider.TermsProvider.getTermByTermId(c);if(t&&t._dataObjectType==="AO"&&t._cardinality==="1..n"){d=f;}}if(d>0){for(var f=1;f<=d;f++){e+="/"+s[f];}}}if(e){return e;}else{return"/"+s[1];}}};S.prototype._hasAssociationId=function(v){var b=v;if(b){var s=b.split("/");var c=s[1];if(s.length>2){for(var d=2;d<s.length;d++){c+="."+s[d];}}if(this._oAstExpressionLanguage._astBunldeInstance.TermsProvider.TermsProvider.getTermByTermId(c)&&this._oAstExpressionLanguage._astBunldeInstance.TermsProvider.TermsProvider.getTermByTermId(c)._dataObjectType==="AO"){return true;}}return false;};S.prototype._returnAssociationForAttributesBasedOnCardinality=function(b){if(b){var s=b.split("/");var c=s[1];var d=0;var t;var e="";if(s.length>2){for(var f=2;f<s.length;f++){c+="."+s[f];t=this._oAstExpressionLanguage._astBunldeInstance.TermsProvider.TermsProvider.getTermByTermId(c);if(t&&t._dataObjectType==="AO"&&t._cardinality==="1..n"){d=f;}}if(d>0){for(var f=2;f<=d;f++){e+="/"+s[f];}}}return e;}};S.prototype._addAssociationIdToWhere=function(w,b){var e="";var I;if(w){I=w.split(" ");for(var c=0;c<I.length;c++){if(I[c].indexOf("./")!==-1){I[c]="."+I[c].replace(/\./,b)}e+=I[c]+" ";}return e.trim();}return w;};S.prototype._removeAssociationIdFromAttribute=function(b,d,D){var e="";var I;var n={};var c=this._returnAssociationForAttributesBasedOnCardinality(d);if(D&&Object.keys(b).length!==0&&b.constructor===Object&&c){var k=Object.keys(b);for(var j=0;j<k.length;j++){var f=k[j];var v=b[f];f=f.replace(c,"");n[f]=v;}return n;}return b};S.prototype._removeAssociationIdToWhere=function(w){var e="";var I;if(w){I=w.split(" ");for(var b=0;b<I.length;b++){if(I[b].indexOf("./")!==-1){var s=I[b].split("/");I[b]="./"+s[s.length-1];}e+=I[b]+" ";}return e.trim();}return w;};S.prototype._addAssociationIdFromAttribute=function(b,d,D){var e="";var I;var n={};var c=this._returnAssociationForAttributesBasedOnCardinality(d);if(D&&Object.keys(b).length!==0&&b.constructor===Object&&c){var k=Object.keys(b);for(var j=0;j<k.length;j++){var f=k[j];var v=b[f];f="."+f.replace(/\./,c);n[f]=v;}return n;}return b};S.prototype._createJson=function(){var b=this._getSelectedAttributeJsons();var w=this._whereExpressionId;var d=this._returnDataObjectBasedOnCommonAssociationSelection(this.dataObjectId,b);var c=this._returnDataObjectBasedOnCommonAssociationAndCardinality(this.dataObjectId,b);b=this._removeAssociationIdFromAttribute(b,d,this.dataObjectId);var j={"function":this._selectFunctionSelected,"filter":w,"functionLabel":this.functionLabel,"dataObject":this.dataObjectId,"attributes":b,"doVocabId":c};if(this._count){j["count"]=this._count;}return j;};S.prototype.includes=function(p,s){var r=false;if(p.indexOf(s)!==-1){r=true;}return r;};return{getInstance:function(){i=new S();return i;}};},true);
