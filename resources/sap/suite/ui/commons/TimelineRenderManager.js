/*!
 * 
		SAP UI development toolkit for HTML5 (SAPUI5)
		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define("sap/suite/ui/commons/TimelineRenderManager",["sap/ui/thirdparty/jquery","./library","sap/m/Text","sap/ui/core/Icon","sap/m/ViewSettingsDialog","sap/ui/core/ResizeHandler","sap/ui/core/Item","sap/m/ButtonType","sap/m/ToolbarSpacer","sap/m/SearchField","sap/m/OverflowToolbar","sap/m/Select","sap/m/RangeSlider","sap/m/Label","sap/m/Panel","sap/m/FlexBox","sap/m/OverflowToolbarButton","sap/m/MessageStrip","sap/ui/core/CSSSize","sap/m/ViewSettingsFilterItem","sap/m/ViewSettingsCustomItem","sap/m/OverflowToolbarLayoutData","sap/m/library","sap/m/MessageToast","sap/ui/core/InvisibleText","sap/m/SliderTooltip","sap/suite/ui/commons/TimelineRenderManagerTimestamp","sap/suite/ui/commons/util/StringSliderTooltip","sap/m/ResponsiveScale"],function(q,l,T,I,V,R,a,B,b,S,O,c,d,L,P,F,e,M,C,f,g,h,m,k,n,o,p,r,s){"use strict";var t=m.OverflowToolbarPriority;var u=l.TimelineGroupType;var v=sap.ui.getCore().getLibraryResourceBundle("sap.suite.ui.commons");var w=680;var D=Object.freeze({UP:"UP",DOWN:"DOWN",NONE:"NONE"});function x($,i,j){$.removeClass(i).addClass(j);}function _($,A){return parseInt($.css(A).replace("px",""),10);}var y={extendTimeline:function(z){z.prototype._initControls=function(){this._setupMessageStrip();this._setupFilterDialog();this._setupHeaderToolbar();this._setupAccessibilityItems();};z.prototype._registerResizeListener=function(){var i=this.$().parent().get(0);if(i){this.oResizeListener=R.register(i,q.proxy(this._performResizeChanges,this));}};z.prototype._deregisterResizeListener=function(){if(this.oResizeListener){R.deregister(this.oResizeListener);}};z.prototype._performUiChanges=function(i){this._deregisterResizeListener();if(!this.getDomRef()){return;}if(this._isVertical()){this._performUiChangesV(i);}else{this._performUiChangesH();}this._setupScrollers();this._startItemNavigation();this._registerResizeListener();};z.prototype._performDoubleSidedChangesLi=function($,i){var j=$.children().first(),A=this._isLeftAlignment()?"sapSuiteUiCommonsTimelineItemWrapperVLeft":"sapSuiteUiCommonsTimelineItemWrapperVRight";if(this._renderDblSided){if($.hasClass('sapSuiteUiCommonsTimelineItem')){$.removeClass('sapSuiteUiCommonsTimelineItem').addClass(i?"sapSuiteUiCommonsTimelineItemOdd":"sapSuiteUiCommonsTimelineItemEven");if(!i){x(j,"sapSuiteUiCommonsTimelineItemWrapperVLeft","sapSuiteUiCommonsTimelineItemWrapperVRight");}else{x(j,"sapSuiteUiCommonsTimelineItemWrapperVRight","sapSuiteUiCommonsTimelineItemWrapperVLeft");}}}else{$.removeClass("sapSuiteUiCommonsTimelineItemOdd").removeClass("sapSuiteUiCommonsTimelineItemEven").addClass("sapSuiteUiCommonsTimelineItem");j.removeClass("sapSuiteUiCommonsTimelineItemWrapperVLeft").removeClass("sapSuiteUiCommonsTimelineItemWrapperVRight").addClass(A);}};z.prototype._performDoubleSidedChanges=function(){var $=this.$(),A=$.find('.sapSuiteUiCommonsTimelineItemUlWrapper').not(".sapSuiteUiCommonsTimelineShowMoreWrapper"),E=$.find(".sapSuiteUiCommonsTimelineScrollV .sapSuiteUiCommonsTimelineGroupHeader"),G;if(this._renderDblSided){this._$content.addClass("sapSuiteUiCommonsTimelineDblSided");E.addClass("sapSuiteUiCommonsTimelineGroupHeaderDblSided");E.addClass("sapSuiteUiCommonsTimelineItemWrapperVLeft").removeClass("sapSuiteUiCommonsTimelineItemWrapperVRight");}else{this._$content.removeClass("sapSuiteUiCommonsTimelineDblSided");E.removeClass("sapSuiteUiCommonsTimelineGroupHeaderDblSided sapSuiteUiCommonsTimelineItemWrapperVLeft");E.addClass(this._isLeftAlignment()?"sapSuiteUiCommonsTimelineItemWrapperVLeft":"sapSuiteUiCommonsTimelineItemWrapperVRight");}for(var j=0;j<A.length;j++){var H=q(A[j]),J=H.find('> li').not(".sapSuiteUiCommonsTimelineGroupHeader");J.eq(1).css("margin-top",this._renderDblSided?"40px":"auto");for(var i=0;i<J.length;i++){G=q(J[i]);this._performDoubleSidedChangesLi(G,(i%2)===0);}}$.find(".sapSuiteUiCommonsTimelineItemBarV").css("height","");$.find(".sapSuiteUiCommonsTimelineItem").css("margin-bottom","");};z.prototype._performUiChangesH=function(){var $=this.$(),i,j;var A=function(E){return($.width()-(E.position().left+E.outerWidth()));};if(this.getEnableDoubleSided()&&this._isGrouped()){j=$.find(".sapSuiteUiCommonsTimelineHorizontalBottomLine ul");$.find("[firstgroupevenitem = true]:visible").each(function(E,G){var H=function(Y){return Y+"-"+(this._bRtlMode?"right":"left");}.bind(this),J=q("#"+G.id+"-line"),K=this._bRtlMode?A(J):J.position().left,N=30,Q=q(G),U=_(j,H("padding")),W,X;if(E===0){W=K-N-U;}else{i=Q.prevAll(".sapSuiteUiCommonsTimelineItemLiWrapperV:visible:first");X=this._bRtlMode?A(i):(i.position().left+_(i,H("margin")));W=(K-N)-(X+i.outerWidth());}Q.css(H("margin"),W+"px");}.bind(this));}if(!this.getEnableScroll()){$.find(".sapSuiteUiCommonsTimelineContentsH").css("overflow-x","hidden");}this._calculateTextHeight();};z.prototype._performUiChangesV=function(i){var $=this.$(),j=$.outerWidth()+50;if(this.getEnableDoubleSided()){this._renderDblSided=j>=w;if(this._renderDblSided!==this._lastStateDblSided||i){this._performDoubleSidedChanges();}this._lastStateDblSided=this._renderDblSided;}this._calculateTextHeight();this._calculateHeightV();};z.prototype._calculateHeightV=function(){var $=this.$(),j=this.$("headerBar").outerHeight()||0,A=this.$("filterMessage").outerHeight()||0,E=this.$("messageStrip").outerHeight()||0,G=E+A+j,H=function(W,Q){var X,Y,Z,a1,b1,c1,d1,e1=W.length,f1=this.getShowIcons()?".sapSuiteUiCommonsTimelineItemBarIconWrapperV:visible":".sapSuiteUiCommonsTimelineItemNoIcon:visible",g1=Q.length>0?Q.find(f1+", .sapSuiteUiCommonsTimelineItemBarIconWrapperV:visible").eq(0):q(),h1=8;for(var i=0;i<e1;i++){X=q(W[i+1]);Y=q(W[i]);Z=i<e1-1?X.find(f1):g1;b1=Y.find(f1);if(Z.length>0&&b1.length>0){c1=Z.offset().top;d1=b1.offset().top+b1.height();a1=Y.find(".sapSuiteUiCommonsTimelineItemBarV");h1=8;a1.height(c1-d1-h1);}}},J=function(W){var X,Y,Z,a1,b1,c1=40,d1=100,e1=function(){var f1=_(Z,"margin-top")+Z.position().top+Z.height()-X.position().top;Y.css("margin-bottom",f1+c1+"px");};for(var i=2;i<W.length;i++){X=q(W[i]);Y=q(W[i-1]);Z=q(W[i-2]);a1=this._bRtlMode?!X.hasClass("sapSuiteUiCommonsTimelineItemOdd"):X.hasClass("sapSuiteUiCommonsTimelineItemOdd");b1=X.position().left;if(!a1&&b1<d1||a1&&b1>d1){e1();}else{var f1=X.position().top-Y.position().top,g1=_(Z,"margin-bottom");if(f1<c1){Z.css("margin-bottom",g1+c1-f1);}}}},K=function(){var X=5,Y=$.position().top,Z=$.parent().height(),a1=_(this._$content,"padding-bottom"),b1=_(this._$content,"padding-top"),c1=Z-Y-G-b1-a1-X;this._$content.height(c1);}.bind(this),U,N,Q,W;if(this.getEnableScroll()){K();}if(this._renderDblSided){U=$.find(".sapSuiteUiCommonsTimelineItemUlWrapper");for(var i=0;i<U.length;i++){N=q(U[i]);Q=q(U[i+1]);W=N.find(" > li:not(.sapSuiteUiCommonsTimelineGroupHeader):visible");W.css("margin-bottom","");J.call(this,W,N);H.call(this,W,Q);}}};z.prototype._performResizeChanges=function(){this._performUiChanges();};z.prototype._calculateTextHeight=function(){var $=this.$(),j=this.getTextHeight(),A,E,G=function(N,Q){$.find(".sapSuiteUiCommonsTimelineItemTextWrapper:visible").each(function(U,W){var X=q(W),Y=X.children().first(),Z=Y.get(0).getClientRects(),a1=0,b1=0,c1,d1=-100000,e1=0,f1=X.attr("expanded");if(!f1){if(Z&&Z.length>0){c1=Z[0].top;e1=0;for(var i=0;i<Z.length-1;i++){if(d1!==Z[i].bottom){d1=Z[i].bottom;e1++;}if(N>0&&(Z[i+1].bottom-c1>N)){b1=e1;a1=Z[i].bottom-c1;break;}if(Q>0&&e1===Q){a1=Z[i].bottom-Z[0].top;b1=Q;break;}}}if(a1>0){X.height(a1);X.css("-webkit-line-clamp",b1.toString());X.next().show();}else if(!X.attr("expandable")){X.next().hide();}}});},H=function(i){G(0,parseInt(i,10));},J=function(i){G(i,0);},K=function(){var i=$.find(".sapSuiteUiCommonsTimelineItemTextWrapper");i.css("height","");i.css("-webkit-line-clamp","");$.css("height","100%");var N=this._$content.height(),Q=_(this._$content,"padding-bottom"),U=this._$content.get(0).scrollHeight,W=U-N-Q,X={height:0},Y,Z=20;$.find(".sapSuiteUiCommonsTimelineItemTextWrapper").each(function(a1,b1){var c1=q(b1).height();if(c1>X.height){X.height=c1;X.item=q(this);}});if(X.item){Y=X.item.parent().find(".sapSuiteUiCommonsTimelineItemShowMore:hidden").height();return X.height-W-Y-Z;}return 1;};if(j){if(this._useAutomaticHeight()){J(K.call(this));}else if(q.isNumeric(j)){H(j);}else{A=/([0-9]*\.?[0-9]+)(px)+/i;E=A.exec(j);if(E&&E.length>1){J(E[1]);}else if(C.isValid(j)){$.find(".sapSuiteUiCommonsTimelineItemTextWrapper").height(j);}}}};z.prototype._fixScrollerPositionH=function(){var $=this.$(),i=$.find(".sapSuiteUiCommonsTimelineHorizontalMiddleLine"),j=$.find(".sapSuiteUiCommonsTimelineHorizontalScroller"),A,E=this._$content.position().top;if(i.get(0)){A=i.position().top;$.find(".sapSuiteUiCommonsTimelineScrollerIconWrapper").css("top",A-5);j.css("top",E+"px");j.height(this._$content.outerHeight()-15);}};z.prototype._setupScrollers=function(){var $=this.$(),i=450,N='rgba(0, 0, 0, 0)',j,A,E,G,H,J,K,Q,U,W,X,Y,Z,a1=function(b1){var c1=N;b1.parents().each(function(d1,e1){var A=q(e1).css("background-color"),f1=q(e1).css("background-image");if(f1!=="none"){c1=N;return;}if(A!==N&&A!=="transparent"){c1=A;}});return c1;};if(this._scrollingFadeout()){j=this._isVertical()?$.height():$.width();if(j<i){$.find(".sapSuiteUiCommonsTimelineVerticalScroller",".sapSuiteUiCommonsTimelineHorizontalScroller").hide();this._scrollersSet=false;return;}if(!this._scrollersSet){A=a1(this.$());if(A&&A!==N){E=A.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);if(E&&E.length>=4){G=parseInt(E[1],10);H=parseInt(E[2],10);J=parseInt(E[3],10);K="rgba("+G+","+H+","+J+", 0)";U="rgba("+G+","+H+","+J+", 0.7)";Q="rgba("+G+","+H+","+J+", 1)";W=$.find(".sapSuiteUiCommonsTimelineHorizontalLeftScroller, .sapSuiteUiCommonsTimelineTopScroller ");X=$.find(".sapSuiteUiCommonsTimelineHorizontalRightScroller, .sapSuiteUiCommonsTimelineBottomScroller");Y=this._isVertical()?"top":"left";Z=this._isVertical()?"bottom":"right";W.css("background-image","linear-gradient(to "+Y+", "+K+", "+Q+")");X.css("background-image","linear-gradient(to "+Z+", "+K+", "+Q+")");W.css("background-image","-webkit-linear-gradient("+Z+", "+K+", "+U+" 30%,"+Q+")");X.css("background-image","-webkit-linear-gradient("+Y+", "+K+", "+U+" 30%,"+Q+")");this._scrollersSet=true;if(this.getContent().length>0){if((!this._isVertical()&&this._$content.get(0).scrollWidth>this._$content.outerWidth())||(this._isVertical()&&this._$content.get(0).scrollHeight>this._$content.outerHeight())){X.show();}}}}else{$.find(".sapSuiteUiCommonsTimelineHorizontalScroller").hide();}}if(!this._isVertical()){this._fixScrollerPositionH();}}};z.prototype._setupScrollEvent=function(){var $=this.$(),i=$.find(".sapSuiteUiCommonsTimelineHorizontalLeftScroller .sapSuiteUiCommonsTimelineScrollerIconWrapper, .sapSuiteUiCommonsTimelineTopScroller .sapSuiteUiCommonsTimelineScrollerIconWrapper"),j=$.find(".sapSuiteUiCommonsTimelineHorizontalRightScroller .sapSuiteUiCommonsTimelineScrollerIconWrapper, .sapSuiteUiCommonsTimelineBottomScroller .sapSuiteUiCommonsTimelineScrollerIconWrapper"),A=$.find(".sapSuiteUiCommonsTimelineHorizontalLeftScroller, .sapSuiteUiCommonsTimelineTopScroller"),E=$.find(".sapSuiteUiCommonsTimelineHorizontalRightScroller, .sapSuiteUiCommonsTimelineBottomScroller"),G=this._$content,H=this;if(H._lazyLoading()||H._scrollingFadeout()){G.on("scroll",function(J){var K=q(J.currentTarget),N=K.get(0).scrollLeft,Q=K.get(0).scrollTop,U=false,W=200,X=5,Y=false,Z,a1,b1,c1,G;if(H._isVertical()){Z=K.outerHeight();a1=K.get(0).scrollHeight;Y=Q+Z>a1-W;U=Q+Z>=a1-X;}else{b1=K.width();c1=K.get(0).scrollWidth;Y=N+b1>c1-W;U=N+b1>=c1-X-185;}if(H._lazyLoading()&&H._scrollMoreEvent){if(Y&&!H._isMaxed()){H._scrollMoreEvent=false;H._loadMore();}}if(H._scrollersSet){if(N>50||Q>50){A.show();}else{A.hide();H._manualScrolling=false;}if(U){E.hide();}else{E.show();}var d1;if(H._isVertical()){d1=K.get(0).scrollTop;G=d1>H._lastScrollPosition.y?j:i;H._lastScrollPosition.y=d1;}else{d1=K.get(0).scrollLeft;G=d1>H._lastScrollPosition.x?j:i;H._lastScrollPosition.x=d1;}G.addClass("sapSuiteUiCommonsTimelineScrolling");clearTimeout(q.data(this,'scrollTimer'));q.data(this,'scrollTimer',setTimeout(function(){i.removeClass("sapSuiteUiCommonsTimelineScrolling");j.removeClass("sapSuiteUiCommonsTimelineScrolling");},350));}});this.$().find(".sapSuiteUiCommonsTimelineScrollerIconWrapper").mousedown(function(J){var K=90,N=(q(this).hasClass("sapSuiteUiCommonsTimelineScrollerIconWrapperLeft")||q(this).hasClass("sapSuiteUiCommonsTimelineScrollerIconWrapperTop"))?-K:K;H._manualScrolling=true;H._performScroll(N);});this.$().find(".sapSuiteUiCommonsTimelineScrollerIconWrapper").mouseup(function(){H._manualScrolling=false;}).mouseout(function(){H._manualScrolling=false;});}if(this.getEnableScroll()&&!H._isVertical()){this._$content.on("wheel",function(J){if(J.originalEvent.deltaX){return;}var K=J.originalEvent.deltaY,N=30;if(K<N&&K>N*-1){K=K>0?N:N*-1;}this.scrollLeft+=K*2;});$.find(".sapSuiteUiCommonsTimelineHorizontalScroller, .sapSuiteUiCommonsTimelineVerticalScroller").on("wheel",function(J){var K=J.originalEvent.deltaY;if(H._isVertical()){H._$content.get(0).scrollTop+=K*2;}else{H._$content.get(0).scrollLeft+=K*2;}});}};z.prototype._setupMessageStrip=function(){var i=this;this._objects.register("messageStrip",function(){return new M(i.getId()+"-messageStrip",{close:function(){i.setCustomMessage("");i.fireCustomMessageClosed();},showCloseButton:true});});this._objects.register("filterMessageText",function(){return new T(i.getId()+"-filterMessageText",{});});this._objects.register("filterMessage",function(){var j=i._objects.getFilterMessageText(),A,E;E=new I(i.getId()+"filterMessageIcon",{src:"sap-icon://decline",press:[i._clearFilter,i]});A=new O(i.getId()+"-filterMessage",{design:"Info",content:[j,new b(),E]});A.addStyleClass("sapSuiteUiCommonsTimelineFilterInfoBar");A.setHeight("auto");return A;});};z.prototype._setMessageBars=function(i){var j=this._getFilterMessage();if(j){i.addChild(this._objects.getFilterMessage());this._objects.getFilterMessageText().setText(j);}};z.prototype._setupRangeFilterPage=function(){var i=this;this._rangeFilterType=null;this._objects.register("timestampFilterPicker",function(){return new p(i.getId(),{dateChanged:function(E){var j=E.getSource(),A=j.getStartDate()||i._minDate,G=j.getEndDate()||i._maxDate;i._filterDialogRangePage.setFilterCount(+(A!==i._minDate||G!==i._maxDate));}},undefined,v);});this._objects.register("timeFilterSelect",function(){var j=new c(i.getId()+"-timeFilterSelect",{change:function(A){i._rangeFilterType=A.getParameter("selectedItem").getProperty("key");i.toggleGroupTypeSelector(i._rangeFilterType);i._setRangeFilter();},items:[new a({text:v.getText("TIMELINE_YEAR"),key:u.Year}),new a({text:v.getText("TIMELINE_QUARTER"),key:u.Quarter}),new a({text:v.getText("TIMELINE_MONTH"),key:u.Month}),new a({text:v.getText("TIMELINE_DAY"),key:u.Day}),new a({text:v.getText("TIMELINE_CUSTOM_RANGE"),key:u.None})]});j.addStyleClass("sapSuiteUiCommonsTimelineRangeSelect");return j;});this._objects.register("timeRangeSlider",function(){var j=function(G){if(typeof G==="string"){G=Number(G);}var H=i._fnAddDate(G);return i._formatGroupBy(H,i._rangeFilterType).title;};var A=new s();A.getLabel=j;var E=new d(i.getId()+"-timeRangeSlider",{enableTickmarks:true,visible:false,showAdvancedTooltip:true,step:1,change:function(G){var H=E.getMin(),J=E.getMax(),K=E.getRange();i._filterDialogRangePage.setFilterCount(+(K[0]!==H||K[1]!==J));},customTooltips:[new r({mapFunction:j}),new r({mapFunction:j,fetchValue2:true})],scale:A});E.addStyleClass("sapSuiteUiCommonsTimelineRangeFilter");return E;});this._objects.register("rangeTypeLbl",function(){return new L(i.getId()+"-rangeTypeLbl",{text:v.getText("TIMELINE_GROUP_BY_PERIOD")+":"});});this._objects.register("rangeTypePanel",function(){var j=new P(i.getId()+"-rangeTypePanel",{content:[i._objects.getRangeTypeLbl(),i._objects.getTimeFilterSelect()]});j.addStyleClass("sapSuiteUiCommonsTimelineRangeFilterPanel");j.addStyleClass("sapSuiteUiCommonsTimelineRangeFilterPanelShadowed");return j;});this._objects.register("rangePanel",function(){return new F(i.getId()+"rangePanel",{direction:"Column",items:[i._objects.getRangeTypePanel(),i._objects.getTimeRangeSlider(),i._objects.getTimestampFilterPicker().getTimestampPanelRadio(),i._objects.getTimestampFilterPicker().getTimestampPanelPicker()]});});};z.prototype._setupFilterFirstPage=function(i){if(i){i.removeAllAggregation("filterItems");if(this.getShowItemFilter()){i.addAggregation("filterItems",new f({key:"items",text:this._getFilterTitle()}));}if(this.getShowTimeFilter()){this._filterDialogRangePage=new g({key:"range",text:v.getText("TIMELINE_RANGE_SELECTION"),customControl:[this._objects.getRangePanel()]});i.addAggregation("filterItems",this._filterDialogRangePage);}}};z.prototype._setupFilterDialog=function(){var i=this;this._setupRangeFilterPage();this._objects.register("filterContent",function(){var j,A,E=function(K){if(!i._filterState.data){i._setFilterList();K.removeAllItems();i._aFilterList.forEach(function(N){var Q=q.grep(i._currentFilterKeys,function(U){return N.key===U.key;}).length>0;K.addItem(new f({key:N.key,text:N.text,selected:Q}));});}i._filterState.data=true;},G=function(){k.show(v.getText("TIMELINE_NO_LIMIT_DATA"));},H=function(){if(!i._filterState.range){J.setBusy(true);i._getTimeFilterData().then(function(){J.setBusy(false);if((!i._minDate||!i._maxDate)||(!(i._minDate instanceof Date)||!(i._maxDate instanceof Date))){G();return;}if(!i._rangeFilterType){i._rangeFilterType=i._calculateRangeTypeFilter();}if(!i._startDate&&!i._endDate){i._setRangeFilter();}else{var K=i._objects.getTimeRangeSlider(),N=i._fnDateDiff(i._rangeFilterType),Q=K.getMin(),U=K.getMax();if(U-Q!==N){i._setRangeFilter();}j=i._fnDateDiff(i._rangeFilterType,i._minDate,i._startDate);A=i._fnDateDiff(i._rangeFilterType,i._minDate,i._endDate);K.setRange([j,A]);}i.toggleGroupTypeSelector(i._rangeFilterType);i._objects.getTimeFilterSelect().setSelectedKey(i._rangeFilterType);}).catch(function(){J.setBusy(false);G();});i._filterState.range=true;}},J=new V(i.getId()+"-filterContent",{confirm:function(K){var N=K.getParameter("filterItems"),Q,U,W,X,Y;i._currentFilterKeys=N.map(function(a1){return{key:a1.getProperty("key"),text:a1.getProperty("text")};});i._startDate=null;i._endDate=null;if(i._objects.getTimestampFilterPicker().getVisible()){var Z=i._objects.getTimestampFilterPicker().getStartDate()||i._minDate,$=i._objects.getTimestampFilterPicker().getEndDate()||i._maxDate;if(Z!==i._minDate||$!==i._maxDate){i._startDate=Z;i._endDate=$;Y=true;}}else{Q=i._objects.getTimeRangeSlider();X=Q.getRange();U=Q.getMin();W=Q.getMax();if(X[0]!==U||X[1]!==W){i._startDate=i._fnAddDate(Math.min.apply(null,X),D.DOWN);i._endDate=i._fnAddDate(Math.max.apply(null,X),D.UP);Y=true;}}i._filterData(Y);},resetFilters:function(K){var N=i._objects.getTimeRangeSlider();N.setValue(N.getMin());N.setValue2(N.getMax());i._filterDialogRangePage.setFilterCount(0);i._objects.getTimestampFilterPicker().clearDates();},filterDetailPageOpened:function(K){var N=K.getParameter("parentFilterItem").getProperty("key");if(N==="items"){E(K.getParameter("parentFilterItem"));}if(N==="range"){H();}}});i._setupFilterFirstPage(J);return J;});};z.prototype._setupHeaderToolbar=function(){var i=this,j=function(E){i._objects.register(E.name,function(){var G=new e(i.getId()+"-"+E.name,{type:B.Transparent,icon:E.icon,tooltip:E.tooltip,press:E.fnPress});G.setLayoutData(new h({priority:E.priority}));return G;});};j({name:"filterIcon",icon:"sap-icon://add-filter",tooltip:v.getText("TIMELINE_FILTER_BY"),fnPress:[i._openFilterDialog,i],priority:t.NeverOverflow,visible:i.getShowItemFilter()||i.getShowTimeFilter()});j({name:"sortIcon",icon:"sap-icon://arrow-bottom",tooltip:v.getText("TIMELINE_SORT"),fnPress:[i._sortClick,i],priority:t.High,visible:i.getSort()&&i.getShowSort()});var A=new b();this._objects.register("searchFieldLabel",function(){return new n(i.getId()+"-searchFieldLabel",{text:v.getText("TIMELINE_ACCESSIBILITY_SEARCH")});});this._objects.register("searchField",function(){var E=new S(i.getId()+"-searchField",{width:"14rem",ariaLabelledBy:i._objects.getSearchFieldLabel().getId(),search:function(G){i._search(G.getSource().getValue());},visible:i.getShowSearch()});E.setLayoutData(new h({priority:t.Low}));return E;});this._objects.register("headerBar",function(){var E=[A,i._objects.getSearchFieldLabel(),i._objects.getSearchField(),i._objects.getSortIcon(),i._objects.getFilterIcon()];var H=new O(i.getId()+"-headerBar",{content:E,visible:i.getShowHeaderBar()});H.addStyleClass("sapSuiteUiCommonsTimelineHeaderBar");H.setParent(i);return H;});};z.prototype._setupAccessibilityItems=function(){var i=this;this._objects.register("accessibilityTitle",function(){return new n(i.getId()+"-accessibilityTitle",{text:v.getText("TIMELINE_ACCESSIBILITY_TITLE")});});};z.prototype.toggleGroupTypeSelector=function(i){var j=i!==u.None;this._objects.getTimestampFilterPicker().setVisible(!j);this._objects.getTimeRangeSlider().setVisible(j);};}};return y;},true);
