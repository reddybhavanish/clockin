sap.ui.define(["sap/ui/generic/app/navigation/service/SelectionVariant","sap/suite/ui/generic/template/AnalyticalListPage/extensionAPI/ExtensionAPI","sap/suite/ui/generic/template/AnalyticalListPage/controller/FilterBarController","sap/suite/ui/generic/template/AnalyticalListPage/controller/ToolbarController","sap/suite/ui/generic/template/AnalyticalListPage/controller/VisualFilterBarController","sap/suite/ui/generic/template/AnalyticalListPage/controller/VisualFilterDialogController","sap/suite/ui/generic/template/AnalyticalListPage/controller/AnalyticGridController","sap/ui/table/AnalyticalTable","sap/ui/model/odata/AnnotationHelper","sap/ui/model/analytics/odata4analytics","sap/suite/ui/generic/template/AnalyticalListPage/controller/ContentAreaController","sap/suite/ui/generic/template/AnalyticalListPage/controller/IappStateHandler","sap/ui/Device","sap/m/SegmentedButtonItem","sap/m/SegmentedButton","sap/m/OverflowToolbar","sap/m/ToolbarSpacer","sap/m/library","sap/ui/model/Context","sap/suite/ui/generic/template/AnalyticalListPage/util/AnnotationHelper","sap/base/Log","sap/suite/ui/generic/template/AnalyticalListPage/util/FilterUtil","sap/base/util/ObjectPath","sap/suite/ui/generic/template/lib/ShareUtils","sap/base/util/merge","sap/base/util/deepExtend"],function(S,E,F,T,V,a,A,b,O,c,C,I,D,d,f,g,h,j,k,l,L,m,n,o,p,q){"use strict";var r="chart",s="visual",t="compact",u=900;return{getMethods:function(v,w,x){var y={};y.bVisualFilterInitialised=false;y._bIsStartingUp=true;function z(){var e=x.getOwnerComponent();var i=e.getModel("_templPriv");i.setProperty("/listReport/isLeaf",e.getIsLeaf());}function B(e,i){var U=e&&e.property;return U.filter(function(W){return typeof W[i]!=="undefined";});}function G(e){var i=e.SelectOptions,U=l.resolveParameterStringValue(e.Parameters);var W=new k(null,"/");var X={};if(i){i.forEach(function(Y){Y.PropertyName=Y.PropertyName.PropertyPath;Y.Ranges.forEach(function(Z){Z.Sign=Z.Sign.EnumMember.split("/")[1];Z.Option=Z.Option.EnumMember.split("/")[1];Z.Low=m.resolveSelectOptionValue(W,Z.Low);Z.High=m.resolveSelectOptionValue(W,Z.High);});});X.SelectOptions=i;}if(U){U.forEach(function(Y){Y.PropertyName=Y.PropertyName.PropertyPath;Y.PropertyValue=O.format(W,Y.PropertyValue)||null;});X.Parameters=U;}return new S(X);}function H(i){var U=i.getModel(),W=U&&U.getMetaModel(),X=W&&W.getODataEntityType(i.getEntityType()),Y,Z=W&&W.getODataEntityType(i.getEntityType(),true),$=l.createSVAnnotation(X,W,y.oController.getOwnerComponent().getQualifier());if(y.oController.getOwnerComponent().getFilterDefaultsFromSelectionVariant()&&$){Y=G(p({},$));}else{if(y.oController.getOwnerComponent().getFilterDefaultsFromSelectionVariant()&&!$){L.warning("No SelectionVariant found in the annotation : No default values filled in FilterBar","","ALPSmartFilterBar");}var a1=X&&B(X,"com.sap.vocabularies.Common.v1.FilterDefaultValue"),b1,c1,d1,e1,f1,g1=[];try{b1=new c.Model(new c.Model.ReferenceByModel(U));f1=b1&&b1.findQueryResultByName(i.getEntitySet());c1=f1&&f1.getParameterization();d1=c1&&W.getODataEntitySet(c1.getEntitySet().getQName());e1=d1&&W.getODataEntityType(d1.entityType);g1=e1?B(e1,"defaultValue"):[];}catch(e){L.error(e);}if(a1.length>0||g1.length>0){Y=new S();a1.forEach(function(h1){var i1=W.createBindingContext(Z+"/property/[${path:'name'}===\'"+h1.name+"']/com.sap.vocabularies.Common.v1.FilterDefaultValue");Y.addSelectOption(h1.name,"I","EQ",O.format(i1));});g1.forEach(function(h1){Y.addParameter(h1.name,h1.defaultValue);});}}return Y;}function J(e){var i=e.getSource(),U=H(i);if(U){y.oIappStateHandler.fnSetFiltersUsingUIState(U.toJSONObject(),true,false);}y.oIappStateHandler.onSmartFilterBarInitialise();x.onInitSmartFilterBarExtension(e);x.templateBaseExtension.onInitSmartFilterBar(e);}function K(){var e=y.oIappStateHandler.onSmartFilterBarInitialized();e.then(function(){y._bIsStartingUp=false;if(y.bVisualFilterInitialised){y.oIappStateHandler.fnUpdateVisualFilterBar();}if(y.sNavType!==sap.ui.generic.app.navigation.service.NavType.iAppState){y.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();}},function(i){if(i instanceof Error){i.showMessageBox();}y.oIappStateHandler.fnOnError();y._bIsStartingUp=false;}).finally(function(){if(y.oSmartFilterableKPI){var i=y.oSmartFilterableKPI.getContent();i.forEach(function(U){if(U.getSmartFilterId){U._bStopDataLoad=false;U._updateKpiList(true);}});}});}function M(e){var i=e.getSource(),U=e.getParameters().limitReached,W=i.getSelectedIndices(),X,Y;if(W.length>0){if(U){X="Your last selection was limited to the maximum of "+i.getLimit()+" items.";w.oServices.oApplication.showMessageToast(X);}}Y=i.getParent();w.oCommonUtils.setEnabledToolbarButtons(Y);}function N(e){var i=e.getParameters();var U=e.getSource();w.oCommonEventHandlers.onSemanticObjectLinkNavigationPressed(U,i);}function P(e){var i,U;i=e.getParameters();U=e.getSource();w.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(U,i,y,undefined,undefined);}function _(e){var i=y.oSmartFilterbar;var U=[];if(e.fetchVariant()&&e.fetchVariant().filter&&e.fetchVariant().filter.filterItems){U=e.fetchVariant().filter.filterItems;}var W={search:!!i.getBasicSearchValue(),filter:!!(U.length||i.retrieveFiltersWithValues().length)};return W;}function Q(e){var i=e.getId();var U=_(e);var W="";if(U.search||U.filter){W=w.oCommonUtils.getContextText("NOITEMS_SMARTCHART_WITH_FILTER",i);}else{W=w.oCommonUtils.getContextText("NOITEMS_SMARTCHART",i);}e.getChartAsync().then(function(X){X.setCustomMessages({NO_DATA:W});});}function R(e){var i={shareEmailPressed:function(){var W=w.oCommonUtils.getText("EMAIL_HEADER",[w.oServices.oApplication.getAppTitle()]);sap.m.URLHelper.triggerEmail(null,W,document.URL);},shareJamPressed:function(){o.openJamShareDialog(w.oServices.oApplication.getAppTitle());},getDownloadUrl:function(){var W=y.oSmartTable.getTable();var X=W.getBinding("rows")||W.getBinding("items");return X&&X.getDownloadUrl()||"";},getServiceUrl:function(){var W=i.getDownloadUrl();if(W){W+="&$top=0&$inlinecount=allpages";}var X={serviceUrl:W};if(x.onSaveAsTileExtension){x.onSaveAsTileExtension(X);}return X.serviceUrl;},getModelData:function(){var W=n.get("sap.ushell.Container.getUser");var X=x.getOwnerComponent();var Y=X.getAppComponent();var Z=Y.getMetadata();var $=Z.getManifestEntry("sap.ui");var a1=($&&$.icons&&$.icons.icon)||"";var b1=Z.getManifestEntry("sap.app");var c1=(b1&&b1.title)||"";return{serviceUrl:i.getServiceUrl(),icon:a1,title:c1,isShareInJamActive:!!W&&W().isJamActive(),customUrl:o.getCustomUrl()};}};o.openSharePopup(w.oCommonUtils,e,i);var U=this.getView().byId("bookmarkButton");U.setBeforePressHandler(function(){e.focus();});}return{onInit:function(){var e=x.getOwnerComponent();L.setLevel(L.Level.WARNING,"ALPSmartFilterBar");var U=e.getModel("_templPriv");U.setProperty("/alp",{filterMode:e.getHideVisualFilter()?t:e.getDefaultFilterMode(),contentView:e.getDefaultContentView(),autoHide:e.getAutoHide(),visibility:{hybridView:(D.system.phone||D.system.tablet&&!D.system.desktop)?false:true},filterChanged:false});y.hideVisualFilter=e.getHideVisualFilter();y.hideVisualFilter=(y.hideVisualFilter===undefined||y.hideVisualFilter!==true)?false:true;y.oSmartFilterbar=x.byId("template::SmartFilterBar");y.oSmartTable=x.byId("table");y.oSmartFilterableKPI=x.byId("template::KPITagContainer::filterableKPIs");y.oPage=x.byId("template::Page");y.oSmartChart=x.byId("chart");if(x.getOwnerComponent().getProperty("dshQueryName")){y.oAnalyticGridContainer=x.byId("template::AnalyticGridContainer");y.oAnalyticGridController=new A();y.oAnalyticGridController.setState(y);}y.alr_compactFilterContainer=x.byId("template::CompactFilterContainer");y.alr_visualFilterContainer=x.byId("template::VisualFilterContainer");y.alr_filterContainer=x.byId("template::FilterContainer");y.alr_visualFilterBar=x.byId("template::VisualFilterBar");y.alp_ColumnListItem=x.byId("template::responsiveHightlightCol");if(y.alr_visualFilterBar){y.alr_visualFilterBar.setSmartFilterId(y.oSmartFilterbar.getId());y.alr_visualFilterBar.attachOnFilterItemAdded(function(i){var h1=i.getParameters();h1.attachBeforeRebindVisualFilter(function(i1){var j1=i1.getParameters();var k1=j1.sEntityType;var l1=j1.sDimension;var m1=j1.sMeasure;var n1=j1.oContext;var d1=y.oController;d1.onBeforeRebindVisualFilterExtension(k1,l1,m1,n1);});});}y.oKpiTagContainer=x.byId("template::KPITagContainer::globalKPIs");y.oFilterableKpiTagContainer=x.byId("template::KPITagContainer::filterableKPIs");if(y.oKpiTagContainer||y.oFilterableKpiTagContainer){sap.ui.require(["sap/suite/ui/generic/template/AnalyticalListPage/controller/KpiTagController"],function(i){i.init(y);});}y.oContentArea=new C();y.oTemplateUtils=w;y.toolbarController=new T();y.oController=x;y.filterBarController=new F();y.filterBarController.init(y);y.oContentArea.createAndSetCustomModel(y);y.oContentArea.setState(y);if(!y.hideVisualFilter){y.visualFilterBarContainer=new V();y.visualFilterBarContainer.init(y);}if(y.alr_visualFilterBar){y.alr_visualFilterBar.addEventDelegate({onAfterRendering:function(){if(y.oSmartFilterbar.isInitialised()){y.oSmartFilterbar.setFilterData({_CUSTOM:y.oIappStateHandler.getFilterState()});}}});}y.oIappStateHandler=new I(y,x,w.oCommonUtils.getNavigationHandler());z();x.byId("template::FilterText").attachBrowserEvent("click",function(){x.byId("template::Page").setHeaderExpanded(true);});U.setProperty("/listReport/isHeaderExpanded",true);if(y.oSmartTable){var W=y.oSmartTable.getTable();}var X="sapUiSizeCozy",Y="sapUiSizeCompact",Z="sapUiSizeCondensed";if(w.oCommonUtils.isUiTable(W)||W instanceof b){var $=x.getView();var a1=document.body;if(a1.classList.contains(X)||$.hasStyleClass(X)){y.oSmartTable.addStyleClass(X);}else if(a1.classList.contains(Y)||$.hasStyleClass(Y)){var b1=e.getComponentContainer().getSettings().condensedTableLayout;if(b1===false){y.oSmartTable.addStyleClass(Y);}else{y.oSmartTable.addStyleClass(Z);}}}if(y.oSmartFilterableKPI){y.oSmartFilterableKPI.setModel(e.getModel("_templPriv"),"_templPriv");var c1=y.oSmartFilterableKPI.getContent(),d1=y.oController;c1.forEach(function(i){if(i.getSmartFilterId){i.attachBeforeRebindFilterableKPI(function(h1){var i1=h1.getParameters(),j1=i1.selectionVariant,k1=i1.entityType,l1=h1.getSource().getId();d1.onBeforeRebindFilterableKPIExtension(j1,k1,l1);},d1);}});}v.getUrlParameterInfo=function(){return y.oIappStateHandler.getUrlParameterInfo();};v.onComponentActivate=function(){};v.refreshBinding=function(){if(y.alr_visualFilterBar&&y.alr_visualFilterBar.updateVisualFilterBindings){y.alr_visualFilterBar.updateVisualFilterBindings();}if(y.oSmartChart&&y.oSmartChart.rebindChart){y.oSmartChart.rebindChart();}if(y.oSmartTable){w.oCommonUtils.refreshSmartTable(y.oSmartTable);}if(y.oKpiTagContainer){var h1=y.oKpiTagContainer.mAggregations.content;for(var i in h1){if(h1[i]._createGlobalKpi){h1[i]._createGlobalKpi();}}}if(y.oFilterableKpiTagContainer){var h1=y.oFilterableKpiTagContainer.mAggregations.content;for(var i in h1){if(h1[i]._createFilterableKpi){h1[i]._createFilterableKpi();}}}};if(y.alr_visualFilterBar){y.alr_visualFilterBar.attachInitialized(function(i){y.bVisualFilterInitialised=true;if(!y._bIsStartingUp){y.oIappStateHandler.fnUpdateVisualFilterBar(true);}});}y.oSmartFilterbar.attachFilterChange(function(i){var U=e.getModel("_templPriv");y.oIappStateHandler.fnCheckMandatory();var h1=y.oSmartFilterbar.isDialogOpen();var i1=i.getSource(),j1;j1=q({},i1.getFilterData(true));if(h1&&y.visualFilterDialogContainer){var k1=y.visualFilterDialogContainer.oVerticalBox.getModel("_dialogFilter");k1.setData(j1);}else{var l1=y.oController.getOwnerComponent().getModel("_filter");l1.setData(j1);}if(i.getParameters().filterItem){if(!y.hideVisualFilter){y.filterBarController.changeVisibility(i);}U.setProperty('/alp/_ignoreChartSelections',false);}y.filterBarController._updateFilterLink();if(!y.oSmartFilterbar.isLiveMode()&&!y.oSmartFilterbar.isDialogOpen()){if(y.oSmartFilterableKPI&&y.oSmartFilterableKPI.getEnabled()){U.setProperty('/alp/filterChanged',true);}}});var $=x.getView();var a1=document.body;var e1,f1;if(a1.classList.contains(X)||$.hasStyleClass(X)){e1=true;}if(e1&&e.getTableType()!=="ResponsiveTable"){var g1=e.getModel("_templPriv");if(D.resize.height<=u){f1=g1.getProperty('/alp/contentView');g1.setProperty('/alp/enableHybridMode',false);g1.setProperty('/alp/contentView',f1==="charttable"?"chart":f1);}y.resizeHandler=function(i){var h1=i.height;if(h1<=u){f1=g1.getProperty('/alp/contentView');g1.setProperty('/alp/enableHybridMode',false);g1.setProperty('/alp/contentView',f1==="charttable"?"chart":f1);}else{g1.setProperty('/alp/enableHybridMode',true);}};D.resize.attachHandler(y.resizeHandler);}},onExit:function(){if(y.resizeHandler){D.resize.detachHandler(y.resizeHandler);}},handlers:{onBack:function(){w.oServices.oNavigationController.navigateBack();},addEntry:function(e){var i=e.getSource();w.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){w.oCommonEventHandlers.addEntry(i,false,y.oSmartFilterbar);},Function.prototype,y);},deleteEntries:function(e){w.oCommonEventHandlers.deleteEntries(e);},onSelectionChange:function(e){var U=e.getSource(),W=U.getModel(),X=U.getModel("_templPriv");var Y=W.getMetaModel(),Z=Y.getODataEntitySet(this.getOwnerComponent().getEntitySet()),$=Z["Org.OData.Capabilities.V1.DeleteRestrictions"];var a1=($&&$.Deletable&&$.Deletable.Path)?$.Deletable.Path:"";var b1=false;var c1=true;var d1=(a1&&a1!=="");var e1=w.oCommonUtils.getSelectedContexts(U);if(e1.length>0){for(var i=0;i<e1.length;i++){var f1=W.getObject(e1[i].getPath());if(!(f1.IsActiveEntity&&f1.HasDraftEntity&&f1.DraftAdministrativeData&&f1.DraftAdministrativeData.InProcessByUser)){c1=false;}if(d1){if(W.getProperty(a1,e1[i])){d1=false;}}if(!c1&&!d1){b1=true;break;}}}X.setProperty("/listReport/deleteEnabled",b1);},onMultiSelectionChange:M,onChange:function(e){w.oCommonEventHandlers.onChange(e);},onSmartFieldUrlPressed:function(e){w.oCommonEventHandlers.onSmartFieldUrlPressed(e,y);},onContactDetails:function(e){w.oCommonEventHandlers.onContactDetails(e);},onSmartFilterBarInitialise:J,onSmartFilterBarInitialized:K,onEditStateFilterChanged:function(e){e.getSource().fireChange();},onFilterPress:function(e){y.filterBarController.showDialog.call(y.filterBarController);},onClearPress:function(e){y.filterBarController.clearFilters();x.onClearFilterExtension(e);},onGoPress:function(e){y.filterBarController.fnCheckMandatory();var i=y.oSmartFilterbar.isDialogOpen();if(!i){y.filterBarController.onGoFilter();}},onBeforeSFBVariantSave:function(){if(y.oSmartFilterbar.isDialogOpen()&&!y.hideVisualFilter){y.visualFilterDialogContainer._updateFilterBarFromDialog.call(y.visualFilterDialogContainer);}var e=y.oIappStateHandler.getCurrentAppState();if(!this.getOwnerComponent().getProperty('smartVariantManagement')){delete e.customData["sap.suite.ui.generic.template.genericData"].contentView;}var i=y.oSmartFilterbar.getFilterData(true);var U,W=y.oSmartFilterbar.getBasicSearchControl();if(W&&W.getValue){U=W.getValue();}i._CUSTOM=e.customData;y.oSmartFilterbar.setFilterData(i,true);if(U){y.oSmartFilterbar.getBasicSearchControl().setValue(U);}y.oSmartFilterbar.fireFilterChange();},onAfterSFBVariantLoad:function(e){if(!y.oSmartFilterbar.isDialogOpen()){y.filterBarController._afterSFBVariantLoad();if(y.oSmartFilterableKPI&&!y.oSmartFilterbar.isLiveMode()){var i=y.oSmartFilterableKPI.getContent();i.forEach(function(U){if(U.getSmartFilterId){if(e.getParameter("executeOnSelect")){U.bSearchTriggred=true;}}});}}},onBeforeRebindChart:function(e){var i=e.getSource();Q(i);},onListNavigate:function(e){w.oCommonEventHandlers.onListNavigate(e,y);},onCallActionFromToolBar:function(e){var i=w.oCommonUtils.getParentTable;w.oCommonUtils.getParentTable=function(){return y.oSmartTable;};w.oCommonEventHandlers.onCallActionFromToolBar(e,y);w.oCommonUtils.getParentTable=i;i=null;},onCallActionFromList:function(e){},onDataFieldForIntentBasedNavigation:function(e){w.oCommonEventHandlers.onDataFieldForIntentBasedNavigation(e,y);},onDataFieldWithIntentBasedNavigation:function(e){w.oCommonEventHandlers.onDataFieldWithIntentBasedNavigation(e,y);},onBeforeSemanticObjectLinkPopoverOpens:function(e){var i=e.getParameters();w.oCommonUtils.processDataLossConfirmationIfNonDraft(function(){var U=y.oSmartFilterbar.getUiState({allFilters:false}).getSelectionVariant();w.oCommonUtils.semanticObjectLinkNavigation(i,U,x);},Function.prototype,y,Function.prototype);},onAssignedFiltersChanged:function(e){if(e&&e.getSource()){if(y&&y.oSmartFilterbar&&y.filterBarController){x.byId("template::FilterText").setText(y.oSmartFilterbar.retrieveFiltersWithValuesAsText());}}},onToggleFiltersPressed:function(){var e=x.getOwnerComponent();var i=e.getModel("_templPriv");i.setProperty("/listReport/isHeaderExpanded",(i.getProperty("/listReport/isHeaderExpanded")===true)?false:true);},onSearchButtonPressed:function(){if(D.system.phone&&y.oPage.getHeaderExpanded()){y.oPage.setHeaderExpanded(false);}var e=x.getOwnerComponent().getModel();if(y.oSmartFilterableKPI&&!y.oSmartFilterableKPI.getEnabled()){y.oController.getOwnerComponent().getModel("_templPriv").setProperty('/alp/filterChanged',false);}e.attachEventOnce("requestSent",function(){if(!y._bIsStartingUp){y.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();}else{y.oIappStateHandler.fnResolveStartUpPromise();}});y.oController.getOwnerComponent().getModel("_templPriv").setProperty('/alp/_ignoreChartSelections',true);w.oCommonUtils.refreshModel(y.oSmartTable);},onSemanticObjectLinkPopoverLinkPressed:function(e){w.oCommonEventHandlers.onSemanticObjectLinkPopoverLinkPressed(e,y);},onSemanticObjectLinkNavigationPressed:N,onSemanticObjectLinkNavigationTargetObtained:P,onAfterTableVariantSave:function(){y.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onAfterApplyTableVariant:function(){y.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onAfterChartVariantSave:function(e){y.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();w.oCommonUtils.setEnabledToolbarButtons(e.getSource());},onAfterApplyChartVariant:function(){y.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onFilterModeSegmentedButtonChange:function(e){y.filterBarController.handleFilterSwitch(e.getParameter("key"),e.oSource._bApplyingVariant);y.oController._templateEventHandlers.onSegmentButtonPressed();},onContentViewSegmentButtonPressed:function(e){if(e.getParameter("key")==="crosstable"&&!y.oAnalyticGrid){y.oAnalyticGridController.initAnalyticGrid();}if(!y.oSmartFilterableKPI&&!y.oController.getOwnerComponent().getContentTitle()){var i=y.oController.getView(),U;if(e.getSource().getSelectedKey()==="customview1"){U="template::contentViewExtensionToolbar";}else if(e.getSource().getSelectedKey()==="customview2"){U="template::contentViewExtension2Toolbar";}else if(e.getSource().getSelectedKey()==="chart"||e.getSource().getSelectedKey()==="charttable"){U=i.byId("template::masterViewExtensionToolbar")?"template::masterViewExtensionToolbar":"template::ChartToolbar";}else if(e.getSource().getSelectedKey()==="table"){U="template::TableToolbar";}y.oController._templateEventHandlers.setFocusOnContentViewSegmentedButtonItem(i,U);}y.oController._templateEventHandlers.onSegmentButtonPressed(!y.oController.getOwnerComponent().getProperty('smartVariantManagement'));},setFocusOnContentViewSegmentedButtonItem:function(e,i){var U=e.byId(i);if(U){var W=U.getContent().length,X=U.getContent()[W-1];if(X){X.addEventDelegate({onAfterRendering:function(Y){Y.srcControl.focus();}});}}},onSegmentButtonPressed:function(i){if(!i){y.oController.byId('template::PageVariant').currentVariantSetModified(true);y.oSmartFilterbar.setFilterData({_CUSTOM:y.oIappStateHandler.getFilterState()});}y.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onShareListReportActionButtonPress:function(e){w.oCommonUtils.executeIfControlReady(R,"template::Share");},onDeterminingDataFieldForAction:function(e){var i=y.oController.getOwnerComponent().getModel("_templPriv");var U=i.getProperty('/alp/contentView');var W=(U===r)?y.oSmartChart:y.oSmartTable;w.oCommonEventHandlers.onDeterminingDataFieldForAction(e,W);},onDeterminingDataFieldForIntentBasedNavigation:function(e){var i=e.getSource();var U=y.oController.getOwnerComponent().getModel("_templPriv");var W=U.getProperty('/alp/contentView');var X=(W===r)?y.oSmartChart:y.oSmartTable.getTable();w.oCommonEventHandlers.onDeterminingDataFieldForIntentBasedNavigation(i,X,y);},onInlineDataFieldForAction:function(e){w.oCommonEventHandlers.onInlineDataFieldForAction(e,y);},onInlineDataFieldForIntentBasedNavigation:function(e){w.oCommonEventHandlers.onInlineDataFieldForIntentBasedNavigation(e.getSource(),y);},onAutoHideToggle:function(){y.oSmartTable.getModel("_tableHighlight").setProperty("/highlightMode","eyeModeSwitch");y.chartController&&y.chartController._updateTable();y.oIappStateHandler.fnStoreCurrentAppStateAndAdjustURL();},onFullScreenToggled:function(e){var i=e.getParameter("fullScreen");var U=e.getSource().getModel("_templPriv");U.setProperty("/alp/fullScreen",i);},onDialogClosed:function(e){y.visualFilterDialogContainer._closeDialog.call(y.visualFilterDialogContainer);},onDialogOpened:function(e){var i=y.oSmartFilterbar.getFilterDialogContent();if(!y.visualFilterDialogContainer){y.visualFilterDialogContainer=new a();y.visualFilterDialogContainer.init(y);}if(i.length<2){y.filterBarController.fnCheckMandatory();var U=[new d({icon:"sap-icon://filter-fields",width:"inherit",key:t,tooltip:"{i18n>FILTER_COMPACT}"}),new d({icon:"sap-icon://filter-analytics",width:"inherit",key:s,tooltip:"{i18n>FILTER_VISUAL}",enabled:"{_templPriv>/alp/searchable}"})];var W=new f({width:"inherit",selectedKey:t,items:U,select:function(e){var $=e.getSource();$.setSelectedKey(t);y.visualFilterDialogContainer._toggle.call(y.visualFilterDialogContainer);}}).addEventDelegate({onAfterRendering:function(e){if(e.srcControl.getCustomData()[0]&&e.srcControl.getCustomData()[0].getValue()){e.srcControl.focus();e.srcControl.removeAllCustomData();}}});var X=y.visualFilterDialogContainer._createForm();y.oSmartFilterbar.addFilterDialogContent(X);var Y=new g({design:j.ToolbarDesign.Transparent,content:[new h(),W]}).addStyleClass("sapSmartTemplatesAnalyticalListPageFilterDialogToolbar");i[0].setToolbar(Y);W.setModel(y.oController.getView().getModel("_templPriv"),"_templPriv");}var Z=y.oController.getView().getModel("_templPriv");if(Z.getProperty("/alp/searchable")){if(Z.getProperty("/alp/filterMode")===s){y.oSmartFilterbar.addFilterDialogContent(i[1]);if(D.system.desktop&&(!D.system.phone||!D.system.tablet)){y.oSmartFilterbar.setContentWidth(790);y.oSmartFilterbar.setContentHeight(685);}else if(D.system.tablet){if(D.orientation.portrait){y.oSmartFilterbar.setContentWidth(400);y.oSmartFilterbar.setContentHeight(720);}else if(D.orientation.landscape){y.oSmartFilterbar.setContentWidth(512);y.oSmartFilterbar.setContentHeight(861);}}}else{y.oSmartFilterbar.addFilterDialogContent(i[0]);}}else{y.oSmartFilterbar.addFilterDialogContent(i[0]);}},onSearchForFilters:function(e){y.visualFilterDialogContainer._triggerSearchInFilterDialog.call(y.visualFilterDialogContainer,e);},onDialogSearch:function(e){y.visualFilterDialogContainer._searchDialog.call(y.visualFilterDialogContainer);},onDialogClear:function(e){x.onClearFilterExtension(e);},onRestore:function(e){y.visualFilterDialogContainer._restoreDialog.call(y.visualFilterDialogContainer);},onDialogCancel:function(e){y.visualFilterDialogContainer._cancelDialog.call(y.visualFilterDialogContainer);},onDataReceived:function(e){y.oContentArea.enableToolbar();w.oCommonEventHandlers.onDataReceived(e);},onRowSelectionChange:function(e){var i=e.getSource();w.oCommonUtils.setEnabledToolbarButtons(i);}},extensionAPI:new E(w,x,y)};}};});
