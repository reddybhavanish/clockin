/*
 * ! SAPUI5

		(c) Copyright 2009-2020 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/m/List","sap/m/ResponsivePopover","sap/m/CustomListItem","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/syncStyleClass","sap/base/util/merge"],function(L,R,C,F,a,s,m){"use strict";var M={isMultiCurrency:function(c){return c==="*";},openMultiCurrencyPopover:function(e,A){var S=sap.ui.getCore().byId(A.smartTableId);var o=S.getTable();var b=o.getBinding("rows");var c=A.currency;var d=A.unit;var f=A.template;var g,D;if(!b||!c||!d){return;}var l=e.getSource();var h=l.getParent();if(A.additionalParent){h=h.getParent();}var j=o.getAnalyticalInfoOfRow(h.getParent());if(!j){return;}var i,k=[],n=[c,d],t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_MULTI_TOTAL_TITLE")||"Total";if(b.aApplicationFilter){k=[].concat(b.aApplicationFilter);}var B=o.getBindingInfo("rows");var p=(B&&B.parameters&&B.parameters.custom)?m({},B.parameters.custom):undefined;if(j.groupTotal||j.group){var G=j.groupedColumns;for(i=0;i<G.length;i++){D=sap.ui.getCore().byId(G[i]).getLeadingProperty();if(!D){continue;}g=b.getAnalyticalInfoForColumn(D);if(g){D=g.dimensionPropertyName;}if(D){k.push(new F(D,a.EQ,j.context.getProperty(D)));}}t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_MULTI_GROUP_TITLE")||"Subtotal";}else if(!j.grandTotal){var P=Object.getOwnPropertyNames(b.getDimensionDetails());for(i=0;i<P.length;i++){k.push(new F(P[i],a.EQ,j.context.getProperty(P[i])));}t=sap.ui.getCore().getLibraryResourceBundle("sap.ui.comp").getText("SMARTTABLE_MULTI_GROUP_TITLE")||"Subtotal";}var q=f.clone();q.unbindProperty("visible");var r=A.smartTableId+"-multiUnitPopover",u,v;u=sap.ui.getCore().byId(r);if(!u){v=new L(r+"-detailsList",{showSeparators:"None",ariaLabelledBy:r+"-title"});v.addStyleClass("sapUiContentPadding sapUiCompMultiCurrency");u=new R(r,{content:v});s("sapUiSizeCompact",o,u);o.addDependent(u);}if(!v){v=sap.ui.getCore().byId(r+"-detailsList");}u.setTitle(t);u.setPlacement(j.grandTotal?"VerticalPreferredTop":"VerticalPreferredBottom");v.bindItems({path:b.getPath(),filters:k,parameters:{select:n.join(","),custom:p},templateShareable:false,template:new C({content:[q]})});u.openBy(l);}};return M;},true);
