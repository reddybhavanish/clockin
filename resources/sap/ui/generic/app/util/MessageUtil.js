/*
 * ! SAPUI5

(c) Copyright 2009-2020 SAP SE. All rights reserved
 */
sap.ui.getCore().loadLibrary("sap.m");sap.ui.define(["sap/ui/core/ValueState","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/ui/core/syncStyleClass"],function(V,F,a,J,M,s){"use strict";var h={badRequest:"400",unauthorized:"401",forbidden:"403",notFound:"404",methodNotAllowed:"405",preconditionFailed:"428",internalServerError:"500",notImplemented:"501",badGateway:"502",serviceUnavailable:"503",gatewayTimeout:"504",httpVersionNotSupported:"505"};var o={callAction:"callAction",addEntry:"addEntry",saveEntity:"saveEntity",deleteEntity:"deleteEntity",editEntity:"editEntity",modifyEntity:"modifyEntity",activateDraftEntity:"activateDraftEntity",saveAndPrepareDraftEntity:"saveAndPrepareDraftEntity",getCollection:"getCollection"};var m;function g(R){var t=[],e;var f=sap.ui.getCore().getMessageManager();var j=f.getMessageModel().getData();for(var i=0;i<j.length;i++){e=j[i];if(e.getPersistent()){t.push(e);}}return t;}function c(P,C){var D;D=function(n,f){var e;var i={onMessageDialogClose:function(){f.onMessageDialogClose();e.destroy();}};e=sap.ui.xmlfragment(n,i);if(C){s(C,P,e);}P.addDependent(P);return e;};return D;}function b(v,A){var t=g();if(t.length===0){return Promise.resolve();}r();var S=V.None;for(var i=0;i<t.length&&S!==V.Error;i++){var e=t[i];switch(e.type){case sap.ui.core.MessageType.Error:S=V.Error;break;case sap.ui.core.MessageType.Warning:S=V.Warning;break;case sap.ui.core.MessageType.Success:if(S===sap.ui.core.ValueState.None){S=V.Success;}}}if(t.length===1&&(S===V.Success||S===V.None)){M.show(t[0].message);return Promise.resolve();}return new Promise(function(R){var f=(typeof v==="function")?v:c(v.owner,v.contentDensityClass);var D,j,k;var l={onMessageDialogClose:function(){D.close();k.setProperty("/backButtonVisible",false);k.setProperty("/messages",[]);k.setProperty("/messageToGroupName",Object.create(null));j.navigateBack();k.getProperty("/resolve")();},onBackButtonPress:function(){k.setProperty("/backButtonVisible",false);j.navigateBack();},onMessageSelect:function(){k.setProperty("/backButtonVisible",true);}};D=f("sap.ui.generic.app.fragments.MessageDialog",l);j=D.getContent()[0];var n=D.getModel();var q=n&&n.getMetaModel();var G=false;var u=Object.create(null);if(q){t.forEach(function(e){var w=e.getTarget();if(!w){return;}if(w.lastIndexOf("/")>0){w=w.substring(0,w.lastIndexOf("/"));}var E=w.substring(1,w.indexOf("("));var x=E&&q.getODataEntitySet(E);var y=x&&q.getODataEntityType(x.entityType);var H=y&&y["com.sap.vocabularies.UI.v1.HeaderInfo"];var T=H&&H.Title&&H.Title.Value&&H.Title.Value.Path;var z=n.getProperty(w);var B=z&&z[T];if(B){u[e.getId()]=B;G=true;}});}var L=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app");k=D.getModel("settings");if(!k){k=new J({closeButtonText:L.getText("DIALOG_CLOSE"),genericGroupName:L.getText("GENERAL_TITLE"),backButtonVisible:false});D.setModel(k,"settings");}k.setProperty("/title",A||L.getText("DIALOG_TITLE"));k.setProperty("/messages",t);k.setProperty("/grouping",G);k.setProperty("/state",S);k.setProperty("/resolve",R);k.setProperty("/messageToGroupName",u);D.open();});}function r(){var e=sap.ui.getCore().getMessageManager();var t=g();if(t.length>0){e.removeMessages(t);}}function d(e,D,f){var t=new sap.ui.core.message.Message({message:e,description:D,type:sap.ui.core.MessageType.Error,processor:f,target:'',persistent:true});sap.ui.getCore().getMessageManager().addMessages(t);}function p(e){var R;m=e&&e.url;if(m){m="/"+m.substring(0,m.indexOf(")")+1);}var f=sap.ui.getCore().getLibraryResourceBundle("sap.ui.generic.app").getText("ERROR_UNKNOWN");var H;if(e instanceof Error){if(e.message){f=e.message;}}else if(e.response){if(e.response.message){f=e.response.message;}if(e.response.statusCode){H=e.response.statusCode;}if(e.response.headers){for(var i in e.response.headers){if(i.toLowerCase()==="content-type"){var j=e.response.headers[i];if(j.toLowerCase().indexOf("application/json")===0){if(e.response.responseText){var O=JSON.parse(e.response.responseText);if(O&&O.error&&O.error.message&&O.error.message.value){f=O.error.message.value;}}}else if(e.message){f=e.message;}break;}}}}var t=g(e);R={httpStatusCode:H,messageText:f,description:null,containsTransientMessage:(t.length===0)?false:true};return R;}return{operations:o,httpStatusCodes:h,handleTransientMessages:b,removeTransientMessages:r,addTransientErrorMessage:d,parseErrorResponse:p};},true);
