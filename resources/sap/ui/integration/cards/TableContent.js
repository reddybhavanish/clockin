/*!
 * OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/integration/library","sap/ui/base/ManagedObject","sap/m/Table","sap/ui/integration/cards/BaseListContent","sap/m/Column","sap/m/ColumnListItem","sap/m/Text","sap/m/Link","sap/m/ProgressIndicator","sap/m/ObjectIdentifier","sap/m/ObjectStatus","sap/m/Avatar","sap/ui/core/library","sap/m/library","sap/ui/integration/util/BindingResolver","sap/ui/integration/util/BindingHelper"],function(l,M,R,B,C,a,T,L,P,O,b,A,c,m,d,e){"use strict";var f=m.AvatarSize;var V=c.VerticalAlign;var g=m.ListSeparators;var h=m.ListType;var i=l.AreaType;var k=B.extend("sap.ui.integration.cards.TableContent",{renderer:{}});k.prototype.exit=function(){B.prototype.exit.apply(this,arguments);if(this._oItemTemplate){this._oItemTemplate.destroy();this._oItemTemplate=null;}};k.prototype._getTable=function(){if(this._bIsBeingDestroyed){return null;}var t=this.getAggregation("_content");if(!t){t=new R({id:this.getId()+"-Table",showSeparators:g.None});this.setAggregation("_content",t);}return t;};k.prototype.setConfiguration=function(o){B.prototype.setConfiguration.apply(this,arguments);if(!o){return this;}if(o.rows&&o.columns){this._setStaticColumns(o.rows,o.columns);return this;}if(o.row&&o.row.columns){this._setColumns(o.row);}return this;};k.prototype.onDataChanged=function(){this._checkHiddenNavigationItems(this.getConfiguration().row);};k.prototype._setColumns=function(r){var j=[],t=this._getTable(),n=r.columns;n.forEach(function(p){t.addColumn(new C({header:new T({text:p.title}),width:p.width,hAlign:p.hAlign}));j.push(this._createCell(p));}.bind(this));this._oItemTemplate=new a({cells:j,vAlign:V.Middle});this._oActions.setAreaType(i.ContentItem);this._oActions.attach(r,this);var o={template:this._oItemTemplate};this._filterHiddenNavigationItems(r,o);this._bindAggregation("items",t,o);};k.prototype._setStaticColumns=function(r,n){var t=this._getTable();n.forEach(function(o){t.addColumn(new C({header:new T({text:o.title}),width:o.width,hAlign:o.hAlign}));});r.forEach(function(o){var I=new a({vAlign:V.Middle});if(o.cells&&Array.isArray(o.cells)){for(var j=0;j<o.cells.length;j++){I.addCell(this._createCell(o.cells[j]));}}if(o.actions&&Array.isArray(o.actions)){var p=o.actions[0];if(p.type===h.Navigation){I.setType(h.Navigation);}if(p.url){I.attachPress(function(){window.open(p.url,p.target||"_blank");});}}t.addItem(I);}.bind(this));this.fireEvent("_actionContentReady");};k.prototype._createCell=function(o){if(o.url){return new L({text:o.value,href:o.url,target:o.target||"_blank"});}if(o.identifier){var t;if(o.identifier.url){t=e.formattedProperty(o.identifier.url,function(v){if(typeof v==="string"){return true;}return false;});}var I=new O({title:o.value,titleActive:t});if(o.identifier.url){I.attachTitlePress(function(E){var S=E.getSource(),j=S.getBindingContext(),n=S.getModel(),p,u,q;if(j){p=j.getPath();}u=d.resolveValue(o.identifier.url,n,p);q=d.resolveValue(o.identifier.target,n,p);if(u){window.open(u,q||"_blank");}});}return I;}if(o.state){return new b({text:o.value,state:o.state});}if(o.value){return new T({text:o.value});}if(o.icon){var s=e.formattedProperty(o.icon.src,function(v){return this._oIconFormatter.formatSrc(v,this._sAppId);}.bind(this));return new A({src:s,displayShape:o.icon.shape,displaySize:f.XS});}if(o.progressIndicator){return new P({percentValue:o.progressIndicator.percent,displayValue:o.progressIndicator.text,state:o.progressIndicator.state});}};k.prototype.getInnerList=function(){return this._getTable();};return k;});
