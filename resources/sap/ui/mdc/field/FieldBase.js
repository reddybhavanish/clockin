/*!
 * SAPUI5

		(c) Copyright 2009-2020 SAP SE. All rights reserved
	
 */
sap.ui.define(['sap/ui/thirdparty/jquery','sap/ui/Device','sap/ui/mdc/library','sap/ui/mdc/field/FieldBaseRenderer','sap/ui/mdc/condition/FilterOperatorUtil','sap/ui/mdc/condition/Condition','sap/ui/mdc/field/ConditionType','sap/ui/mdc/field/ConditionsType','sap/ui/mdc/util/BaseType','sap/ui/mdc/util/DateUtil','sap/ui/mdc/mixin/DelegateMixin','sap/ui/core/library','sap/ui/core/Control','sap/ui/core/LabelEnablement','sap/ui/core/message/MessageMixin','sap/base/util/ObjectPath','sap/base/util/deepEqual','sap/base/util/merge','sap/base/Log','sap/base/util/isEmptyObject','sap/ui/dom/containsOrEquals','sap/ui/model/Filter','sap/ui/model/BindingMode','sap/ui/model/FormatException','sap/ui/model/ParseException','sap/ui/model/ValidateException','sap/ui/model/base/ManagedObjectModel','sap/ui/base/ManagedObjectObserver','sap/ui/base/SyncPromise','sap/base/util/restricted/_throttle','sap/ui/events/KeyCodes'],function(q,D,l,F,a,C,b,c,B,d,e,f,g,L,M,O,h,m,k,n,o,p,r,s,P,V,t,u,S,v,K){"use strict";var E=l.EditMode;var w=l.FieldDisplay;var x=f.ValueState;var y=f.CalendarType;var z=g.extend("sap.ui.mdc.field.FieldBase",{metadata:{interfaces:["sap.ui.core.IFormContent"],library:"sap.ui.mdc",properties:{dataType:{type:"string",group:"Data",defaultValue:'sap.ui.model.type.String'},dataTypeConstraints:{type:"object",group:"Data",defaultValue:null},dataTypeFormatOptions:{type:"object",group:"Data",defaultValue:null},editMode:{type:"sap.ui.mdc.EditMode",group:"Data",defaultValue:E.Editable},required:{type:"boolean",group:"Data",defaultValue:false},display:{type:"sap.ui.mdc.FieldDisplay",defaultValue:w.Value},textAlign:{type:"sap.ui.core.TextAlign",group:"Appearance",defaultValue:sap.ui.core.TextAlign.Initial},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:sap.ui.core.TextDirection.Inherit},placeholder:{type:"string",group:"Misc",defaultValue:""},valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:sap.ui.core.ValueState.None},valueStateText:{type:"string",group:"Misc",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},multipleLines:{type:"boolean",group:"Appearance",defaultValue:false},maxConditions:{type:"int",group:"Behavior",defaultValue:-1},conditions:{type:"object[]",group:"Data",defaultValue:[],byValue:true},label:{type:"string",group:"Misc",defaultValue:""},delegate:{type:"object",defaultValue:{name:"sap/ui/mdc/field/FieldBaseDelegate",payload:{}}},_fieldHelpEnabled:{type:"boolean",group:"Appearance",defaultValue:false,visibility:"hidden"}},aggregations:{content:{type:"sap.ui.core.Control",multiple:false},contentEdit:{type:"sap.ui.core.Control",multiple:false},contentDisplay:{type:"sap.ui.core.Control",multiple:false},_content:{type:"sap.ui.core.Control",multiple:true,visibility:"hidden"},fieldInfo:{type:"sap.ui.mdc.field.FieldInfoBase",multiple:false}},associations:{fieldHelp:{type:"sap.ui.mdc.field.FieldHelpBase",multiple:false},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{liveChange:{parameters:{value:{type:"string"},escPressed:{type:"boolean"},previousValue:{type:"string"}}},press:{}},publicMethods:[],defaultAggregation:"content"},_oManagedObjectModel:null});M.call(z.prototype);var A={Default:{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Token"],editMultiLine:"sap/m/TextArea",display:"sap/m/Text",createEdit:q1,createEditMulti:s1,createEditMultiLine:t1,createDisplay:u1,useDefaultFieldHelp:{name:"defineConditions",oneOperator:false}},Search:{edit:"sap/m/SearchField",display:"sap/m/Text",createEdit:r1,createDisplay:u1,useDefaultFieldHelp:false},Date:{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Token"],display:"sap/m/Text",editOperator:{"EQ":{name:"sap/m/DatePicker",create:v1},"BT":{name:"sap/m/DateRangeSelection",create:w1}},createEdit:q1,createEditMulti:s1,createDisplay:u1,useDefaultFieldHelp:{name:"defineConditions",oneOperator:false}},Time:{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Token"],display:"sap/m/Text",editOperator:{"EQ":{name:"sap/m/TimePicker",create:v1}},createEdit:q1,createEditMulti:s1,createDisplay:u1,useDefaultFieldHelp:{name:"defineConditions",oneOperator:false}},DateTime:{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Token"],display:"sap/m/Text",editOperator:{"EQ":{name:"sap/m/DateTimePicker",create:v1}},createEdit:q1,createEditMulti:s1,createDisplay:u1,useDefaultFieldHelp:{name:"defineConditions",oneOperator:false}},Link:{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Token"],editMultiLine:"sap/m/TextArea",display:"sap/m/Link",createEdit:q1,createEditMulti:s1,createEditMultiLine:t1,createDisplay:x1,useDefaultFieldHelp:false},Boolean:{edit:"sap/m/Input",display:"sap/m/Text",createEdit:y1,createDisplay:u1,useDefaultFieldHelp:{name:"bool",oneOperator:true}},Unit:{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Input","sap/m/Token"],display:"sap/m/Text",createEdit:z1,createEditMulti:A1,createDisplay:u1,useDefaultFieldHelp:false}};var G;var H;z._init=function(){G={};if(H&&H.bool&&H.bool.control){H.bool.control.destroy();}if(H&&H.defineConditions&&H.defineConditions.control){H.defineConditions.control.destroy();}H={bool:{name:"sap/ui/mdc/field/BoolFieldHelp",id:"BoolDefaultHelp",getDelegate:"getDefaultFieldHelpBaseDelegate",properties:{},control:undefined},defineConditions:{name:"sap/ui/mdc/field/FieldValueHelp",id:"Field-DefineConditions-Help",getDelegate:"getDefaultFieldValueHelpDelegate",properties:{showConditionPanel:true},control:undefined}};};z._init();z.prototype.init=function(){this._oManagedObjectModel=new t(this);this._oObserver=new u(this._observeChanges.bind(this));this._oObserver.observe(this,{properties:["display","editMode","dataType","dataTypeFormatOptions","dataTypeConstraints","multipleLines","maxConditions","conditions","delegate"],aggregations:["fieldInfo","content","contentEdit","contentDisplay"],associations:["fieldHelp","ariaLabelledBy"]});this._oDatePickerRequested={};this.attachEvent("modelContextChange",this._handleModelContextChange,this);this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._aAsyncChanges=[];};z.prototype.exit=function(){var i=this.getFieldInfo();if(i){i.detachEvent("dataUpdate",b2,this);}var j=this.getContent();if(j){j1.call(this,j);}var m2=this.getContentEdit();if(m2){j1.call(this,m2);}var n2=this.getContentDisplay();if(n2){j1.call(this,n2);}this._oManagedObjectModel.destroy();delete this._oManagedObjectModel;this._oObserver.disconnect();this._oObserver=undefined;if(this._oConditionType&&this._oConditionType._bCreatedByField){this._oConditionType.destroy();this._oConditionType=undefined;}if(this._oConditionsType&&this._oConditionsType._bCreatedByField){this._oConditionsType.destroy();this._oConditionsType=undefined;}var o2=R1.call(this);if(o2){o2.detachEvent("dataUpdate",X1,this);if(this._bConnected){Y1.call(this);o2.connect();}}N1.call(this);delete this._fnLiveChangeTimer;};z.prototype.applySettings=function(){g.prototype.applySettings.apply(this,arguments);if(!this.DELEGATE&&!this._bDelegateSet){this._oPayload=this.getDelegate().payload||{};this.loadDelegateModule();}};e.call(z.prototype);z.prototype.onBeforeRendering=function(){if(!this.DELEGATE){this.oDelegatePromise.then(function(){l1.call(this);}.bind(this));return;}l1.call(this);};z.prototype.onAfterRendering=function(){if(R1.call(this)&&this.getEditMode()!=E.Display){var j=this.getAggregation("_content",[]);for(var i=0;i<j.length;i++){var m2=j[i];var n2=m2.getFocusDomRef();q(n2).attr("autocomplete","off");}}};z.prototype.onfocusin=function(i){Z1.call(this);};z.prototype.onsapfocusleave=function(i){N1.call(this);};z.prototype.onsapup=function(i){var j=R1.call(this);var m2=i.srcControl;if(j&&(!this._bIsMeasure||m2.getShowValueHelp())){i.preventDefault();i.stopPropagation();j.navigate(-1);}};z.prototype.onsapdown=function(i){var j=R1.call(this);var m2=i.srcControl;if(j&&(!this._bIsMeasure||m2.getShowValueHelp())){i.preventDefault();i.stopPropagation();j.navigate(1);}};z.prototype.onsapenter=function(i){var j=R1.call(this);if(j&&j.isOpen(true)){j.close();}};z.prototype.onsapescape=function(i){this.onsapenter(i);};z.prototype.clone=function(i,j){this.detachEvent("modelContextChange",this._handleModelContextChange,this);var m2=this.getContent();if(m2){j1.call(this,m2);}var n2=this.getContentEdit();if(n2){j1.call(this,n2);}var o2=this.getContentDisplay();if(o2){j1.call(this,o2);}var p2=this.getFieldInfo();if(p2){p2.detachEvent("dataUpdate",b2,this);}var q2=g.prototype.clone.apply(this,arguments);this.attachEvent("modelContextChange",this._handleModelContextChange,this);if(m2){i1.call(this,m2);}if(n2){i1.call(this,n2);}if(o2){i1.call(this,o2);}if(p2){p2.attachEvent("dataUpdate",b2,this);}return q2;};z.prototype.getFieldPath=function(){var i=this.getBindingPath("conditions");if(i&&i.startsWith("/conditions/")){return i.slice(12);}else{return"";}};function _(i,j,m2,n2){if(!n2){if(j){n2=Promise.resolve(this._getResultForPromise(i));}else{n2=Promise.reject(m2);}}this._fireChange(i,j,m2,n2);}z.prototype._fireChange=function(i,j,m2,n2){};function I(i){i=this.DELEGATE.getDataTypeClass(this._oPayload,i);var j=J.call(this,i);if(j){var m2=new j(this.getDataTypeFormatOptions(),this.getDataTypeConstraints());m2._bCreatedByField=true;return m2;}}function J(i){var j=O.get(i||"");if(!j){throw new Error("DataType cannot be determined");}return j;}function N(){if(!this._oDataType){var i=this.getDataType();if(typeof i==="string"){this._oDataType=I.call(this,i);}}return this._oDataType;}z.prototype._initDataType=function(){if(this._oDataType){this._oDataType.destroy();this._oDataType=undefined;}if(this._oDateOriginalType){if(this._oDateOriginalType._bCreatedByField){this._oDateOriginalType.destroy();}this._oDateOriginalType=undefined;}if(this._oUnitOriginalType){if(this._oUnitOriginalType._bCreatedByField){this._oUnitOriginalType.destroy();}this._oUnitOriginalType=undefined;}delete this._sDisplayFormat;delete this._sValueFormat;delete this._sCalendarType;};function Q(){if(this._oDataType&&typeof this._oDataType==="object"){return this._oDataType.getMetadata().getName();}else if(this.DELEGATE){return this.DELEGATE.getDataTypeClass(this._oPayload,this.getDataType());}else{return this.getDataType();}}function R(){if(this._oDataType&&typeof this._oDataType==="object"&&this._oDataType.oConstraints){return this._oDataType.oConstraints;}else{return this.getDataTypeConstraints();}}function T(){if(this._oDataType&&typeof this._oDataType==="object"&&this._oDataType.oFormatOptions){return this._oDataType.oFormatOptions;}else{return this.getDataTypeFormatOptions();}}function U(i,j,m2){var n2=this.DELEGATE.getBaseType(this._oPayload,i,j,m2);switch(n2){case B.Date:this._sValueFormat="yyyy-MM-dd";break;case B.DateTime:this._sValueFormat="yyyy-MM-dd'T'HH:mm:ss";break;case B.Time:this._sValueFormat="HH:mm:ss";break;default:return;}this._sDisplayFormat="medium";if(j){if(j.style){this._sDisplayFormat=j.style;}else if(j.pattern){this._sDisplayFormat=j.pattern;}if(j.calendarType){this._sCalendarType=j.calendarType;}}}function W(){var i=N.call(this);var j=i.getMetadata().getName();var m2=i.oFormatOptions;var n2=i.oConstraints;U.call(this,j,m2,n2);if(!m2||m2.style||!m2.pattern||m2.pattern!==this._sValueFormat||!m2.calendarType||m2.calendarType!==y.Gregorian){this._oDateOriginalType=this._oDataType;this._oDataType=d.createInternalType(i,this._sValueFormat);d2.call(this);}}function X(){var i=N.call(this);var j=i.getMetadata().getName();var m2=i.oFormatOptions;var n2=n(i.oConstraints)?undefined:i.oConstraints;if(!m2||!m2.hasOwnProperty("showMeasure")||m2.showMeasure){m2=m({},m2);m2.showMeasure=false;m2.strictParsing=true;if(m2.customCurrencies){delete m2.customCurrencies;}if(m2.customUnits){delete m2.customUnits;}var o2=O.get(j);this._oUnitOriginalType=this._oDataType;this._oDataType=new o2(m2,n2);this.DELEGATE.initializeInternalUnitType(this._oPayload,this._oDataType,this._oTypeInitialization);d2.call(this);}}function Y(i,j){var m2=R1.call(this);if(m2&&this._bConnected){S1.call(this,i,m2);}}z.prototype._getContent=function(){var i=this.getContent();if(!i){if(this.getEditMode()===E.Display){i=this.getContentDisplay();}else{i=this.getContentEdit();}}if(i){return[i];}else{return this.getAggregation("_content",[]);}};function Z(i){if(i===E.Editable||i===E.EditableReadOnly||i===E.EditableDisplay){return true;}else{return false;}}function $(i){if(i===E.Editable){return true;}else{return false;}}function a1(i){if(i&&i!==E.Disabled){return true;}else{return false;}}function b1(i){if(i&&i!==E.Editable){return true;}else{return false;}}z.prototype._handleModelContextChange=function(i){};function c1(i){this.setValueState(x.Error);this.setValueStateText(i);}function d1(){this.setValueState(x.None);this.setValueStateText();}z.prototype._observeChanges=function(j){var m2=function(){if(this.getAggregation("_content",[]).length>0){if(!this.DELEGATE){this.oDelegatePromise.then(function(){l1.call(this);}.bind(this));}else{l1.call(this);}}};if(j.name==="editMode"){m2.call(this);}if(j.name==="multipleLines"){m2.call(this);}if(j.name==="dataType"){if(this._oDataType){var n2=function(q2){var r2=J.call(this,this.DELEGATE.getDataTypeClass(this._oPayload,j.current));if(!(this._oDataType instanceof r2)){this._initDataType();this.destroyAggregation("_content");d2.call(this);}};if(!this.DELEGATE){this.oDelegatePromise.then(function(){n2.call(this,j.current);}.bind(this));return;}n2.call(this,j.current);}}if(j.name==="dataTypeFormatOptions"||j.name==="dataTypeConstraints"){if(this._oDataType){this._initDataType();this.destroyAggregation("_content");d2.call(this);}}if(j.name==="maxConditions"){m2.call(this);d2.call(this);}if(j.name==="conditions"){this._bParseError=false;Y.call(this,j.current,j.old);var o2=false;var i=0;for(i=0;i<this._aAsyncChanges.length;i++){var p2=this._aAsyncChanges[i];if(p2.waitForUpdate&&h(p2.result,j.current)){K1.call(this,p2);o2=true;break;}}if(o2){this._aAsyncChanges.splice(i,1);}}if(j.name==="display"){n1.call(this);d2.call(this);}if(j.name==="fieldHelp"&&j.ids){Q1.call(this,j.ids,j.mutation);d2.call(this);}if(j.name==="fieldInfo"&&j.child){a2.call(this,j.child,j.mutation);}if(j.name==="content"&&j.child){h1.call(this,j.child,j.mutation,j.name);}if(j.name==="contentEdit"&&j.child){h1.call(this,j.child,j.mutation,j.name);}if(j.name==="contentDisplay"&&j.child){h1.call(this,j.child,j.mutation,j.name);}if(j.name==="delegate"&&!this._bDelegateSet){this._bDelegateSet=true;this._oPayload=j.current.payload||{};this.loadDelegateModule.call(this);}if(j.name==="ariaLabelledBy"&&j.ids){e1.call(this,j.ids,j.mutation);}};z.prototype.getFocusDomRef=function(){var i=this._getContent();if(i.length>0){return i[0].getFocusDomRef();}else{return this.getDomRef();}};z.prototype.getIdForLabel=function(){var i;var j=this._getContent();if(j.length>0){i=j[0].getIdForLabel();}else{i=m1.call(this);}return i;};z.prototype.getControlForSuggestion=function(){var i=this._getContent();if(i.length>0){if(this._bIsMeasure){return i[1];}else{return i[0];}}else{return this;}};z.prototype.getMaxConditionsForHelp=function(){if(this._bIsMeasure){return 1;}else{return this.getMaxConditions();}};z.prototype.enhanceAccessibilityState=function(i,j){var m2=this.getParent();if(m2&&m2.enhanceAccessibilityState){m2.enhanceAccessibilityState(this,j);}return j;};z.prototype.getAccessibilityInfo=function(){var i=this._getContent();if(i.length>0&&i[0].getAccessibilityInfo){return i[0].getAccessibilityInfo();}else{return{};}};function e1(j,m2){var n2=this.getAggregation("_content",[]);var o2=this.getContent();if(o2){n2.push(o2);}o2=this.getContentDisplay();if(o2){n2.push(o2);}o2=this.getContentEdit();if(o2){n2.push(o2);}for(var i=0;i<n2.length;i++){o2=n2[i];if(o2.getMetadata().getAllAssociations().ariaLabelledBy){if(m2==="remove"){o2.removeAriaLabelledBy(j);}else if(m2==="insert"){o2.addAriaLabelledBy(j);}}}}function f1(j){var m2=this.getAriaLabelledBy();for(var i=0;i<m2.length;i++){var n2=m2[i];j.addAriaLabelledBy(n2);}}z.prototype.connectLabel=function(i){p1.call(this,i);i.bindProperty("text",{path:"$field>/label"});i.setLabelFor(this);return this;};function g1(){var j=L.getReferencingLabels(this);for(var i=0;i<j.length;i++){var m2=sap.ui.getCore().byId(j[i]);m2.invalidate();}}function h1(i,j,m2){if(j==="remove"){j1.call(this,i);D1.call(this,i);if(this._oContentConditionTypes){delete this._oContentConditionTypes[m2];}i.setModel(null,"$field");}else if(j==="insert"){C1.call(this,i);i1.call(this,i);if(this.getAggregation("_content",[]).length>0){n1.call(this);}if(!this._oContentConditionTypes){this._oContentConditionTypes={};}if(!this._oContentConditionTypes[m2]){this._oContentConditionTypes[m2]={};}var n2;var o2;for(o2 in i.getMetadata().getAllProperties()){if(i.getBindingPath(o2)==="/conditions"){n2=i.getBindingInfo(o2);if(n2&&n2.type&&n2.type instanceof c){this._oContentConditionTypes[m2].oConditionsType=n2.type;}this._sBoundProperty=o2;}if(o2==="editable"&&!i.getBindingPath(o2)&&i.isPropertyInitial(o2)){i.bindProperty(o2,{path:"$field>/editMode",formatter:Z});}if(o2==="enabled"&&!i.getBindingPath(o2)&&i.isPropertyInitial(o2)){i.bindProperty(o2,{path:"$field>/editMode",formatter:a1});}if(o2==="displayOnly"&&!i.getBindingPath(o2)&&i.isPropertyInitial(o2)){i.bindProperty(o2,{path:"$field>/editMode",formatter:b1});}if(o2==="required"&&!i.getBindingPath(o2)&&i.isPropertyInitial(o2)){i.bindProperty(o2,{path:"$field>/required"});}if(o2==="textAlign"&&!i.getBindingPath(o2)&&i.isPropertyInitial(o2)){i.bindProperty(o2,{path:"$field>/textAlign"});}if(o2==="textDirection"&&!i.getBindingPath(o2)&&i.isPropertyInitial(o2)){i.bindProperty(o2,{path:"$field>/textDirection"});}if(o2==="valueState"&&!i.getBindingPath(o2)&&i.isPropertyInitial(o2)){i.bindProperty(o2,{path:"$field>/valueState"});}if(o2==="valueStateText"&&!i.getBindingPath(o2)&&i.isPropertyInitial(o2)){i.bindProperty(o2,{path:"$field>/valueStateText"});}if(o2==="placeholder"&&!i.getBindingPath(o2)&&i.isPropertyInitial(o2)){i.bindProperty(o2,{path:"$field>/placeholder"});}}for(var p2 in i.getMetadata().getAllAggregations()){if(i.getBindingPath(p2)==="/conditions"){n2=i.getBindingInfo(p2);if(n2&&n2.template){for(o2 in n2.template.getMetadata().getAllProperties()){var q2=n2.template.getBindingInfo(o2);if(q2&&q2.type&&q2.type instanceof b){this._oContentConditionTypes[m2].oConditionType=q2.type;break;}}}}if(p2==="tooltip"&&!i.getBindingPath(p2)&&!i.getAggregation(p2)){i.bindProperty(p2,{path:"$field>/tooltip"});}}}f1.call(this,i);}function i1(i){if(i.getMetadata().getEvents().change){i.attachEvent("change",J1,this);}if(i.getMetadata().getEvents().liveChange){i.attachEvent("liveChange",M1,this);}if(i.getMetadata().getEvents().press){i.attachEvent("press",O1,this);}}function j1(i){if(i.getMetadata().getEvents().change){i.detachEvent("change",J1,this);}if(i.getMetadata().getEvents().liveChange){i.detachEvent("liveChange",M1,this);}if(i.getMetadata().getEvents().press){i.detachEvent("press",O1,this);}}function k1(){if(this._oConditionType&&!this._oConditionType._bCreatedByField){this._oConditionType=undefined;}if(this._oConditionsType&&!this._oConditionsType._bCreatedByField){this._oConditionsType=undefined;}var i=this.getEditMode();var j;var m2;if(this.getContent()){if(this._oContentConditionTypes.content){j=this._oContentConditionTypes.content.oConditionType;m2=this._oContentConditionTypes.content.oConditionsType;}}else if(i===E.Display&&this.getContentDisplay()){if(this._oContentConditionTypes.contentDisplay){j=this._oContentConditionTypes.contentDisplay.oConditionType;m2=this._oContentConditionTypes.contentDisplay.oConditionsType;}}else if(i!==E.Display&&this.getContentEdit()){if(this._oContentConditionTypes.contentEdit){j=this._oContentConditionTypes.contentEdit.oConditionType;m2=this._oContentConditionTypes.contentEdit.oConditionsType;}}if(j){if(this._oConditionType&&this._oConditionType._bCreatedByField){this._oConditionType.destroy();}this._oConditionType=j;}if(m2){if(this._oConditionsType&&this._oConditionsType._bCreatedByField){this._oConditionsType.destroy();}this._oConditionsType=m2;}d2.call(this);}function l1(){k1.call(this);var j=this.getEditMode();if(this.getContent()||this._bIsBeingDestroyed||(j===E.Display&&this.getContentDisplay())||(j!==E.Display&&this.getContentEdit())){n1.call(this);var m2=this._getContent();if(m2.length===1){p1.call(this,m2[0]);}return;}var n2=Q.call(this);var o2=R.call(this);var p2=T.call(this);var q2=this.DELEGATE.getBaseType(this._oPayload,n2,p2,o2);var r2=this.getMaxConditions();var s2=this._getOperators();var t2;var u2;var v2;var w2=this.getAggregation("_content",[]);var x2;var y2;if(w2.length>0){x2=w2[0];y2=x2.getMetadata().getName().replace(/\./g,"/");}t2=A[q2];if(!t2){if(this.getFieldInfo()&&this._bTriggerable){t2=A.Link;}else{var z2=new RegExp("^\\*(.*)\\*|\\$search$");if(z2.test(this.getFieldPath())&&this.getMaxConditions()===1){t2=A.Search;}else{t2=A.Default;}}}if(j===E.Display){u2=t2.display;v2=t2.createDisplay;}else if(r2!==1){u2=t2.editMulti;v2=t2.createEditMulti;}else if(this.getMultipleLines()){u2=t2.editMultiLine;v2=t2.createEditMultiLine;}else if(s2.length===1&&t2.editOperator&&t2.editOperator[s2[0]]){u2=t2.editOperator[s2[0]].name;v2=t2.editOperator[s2[0]].create;}else{u2=t2.edit;v2=t2.createEdit;}if(!u2){throw new Error("No control defined for type "+n2+" in "+this);}var A2;if(Array.isArray(u2)){A2=u2;u2=A2[0];}else{A2=[u2];}if(u2!==y2){this._bHideOperator=a.onlyEQ(s2)&&r2===1;if(x2){n1.call(this);if(x2.isA("sap.m.DateTimeField")){this._initDataType();}d2.call(this);}var B2;var i=0;for(i=0;i<A2.length;i++){var C2=A2[i];if(!G[C2]){G[C2]={};}if(!G[C2].control){G[C2].control=sap.ui.require(C2);if(!G[C2].control){B2=undefined;}}if(i===0){B2=G[C2].control;}}if(!B2){if(G[u2].promise){G[u2].promise.then(l1.bind(this));return;}else{G[u2].promise=new Promise(function(G2){G[u2].resolve=G2;sap.ui.require(A2,o1.bind(this));}.bind(this)).then(l1.bind(this));return;}}if(G1.call(this,t2,s2,j)){E1.call(this,t2.useDefaultFieldHelp.name);}var D2=m1.call(this);var E2=v2.call(this,B2,D2);for(i=0;i<E2.length;i++){var F2=E2[i];F2.attachEvent("parseError",H1,this);F2.attachEvent("validationError",I1,this);C1.call(this,F2);p1.call(this,F2);if(this._bConnected&&((i===0&&!this._bIsMeasure)||(i===1&&this._bIsMeasure))){$1.call(this,F2);}this.addAggregation("_content",F2);}g1.call(this);}}function m1(){return this.getId()+"-inner";}function n1(){this.destroyAggregation("_content");if(this._oDateOriginalType){this._oDataType=this._oDateOriginalType;this._oDateOriginalType=undefined;}else if(this._oUnitOriginalType){this._oDataType=this._oUnitOriginalType;this._oUnitOriginalType=undefined;}}function o1(){for(var i=0;i<arguments.length;i++){var j=arguments[i];var m2=j.getMetadata().getName();m2=m2.replace(/\./g,"/");G[m2].control=j;if(G[m2].resolve){G[m2].resolve();delete G[m2].resolve;}}}function p1(i){i.setModel(this._oManagedObjectModel,"$field");}function q1(i,j){var m2=f2.call(this);var n2=new i(j,{value:{path:"$field>/conditions",type:m2},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:Z},enabled:{path:"$field>/editMode",formatter:a1},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",width:"100%",tooltip:"{$field>/tooltip}",change:J1.bind(this),liveChange:M1.bind(this),valueHelpRequest:T1.bind(this),showSuggestion:true});n2._setPreferUserInteraction(true);_1.call(this,n2);f1.call(this,n2);this._sBoundProperty="value";return[n2];}function r1(i,j){this._bHideOperator=true;var m2=f2.call(this);d2.call(this);var n2=new i(j,{value:{path:"$field>/conditions",type:m2,mode:r.OneWay},placeholder:"{$field>/placeholder}",width:"100%",tooltip:"{$field>/tooltip}",search:J1.bind(this),change:J1.bind(this),liveChange:M1.bind(this)});f1.call(this,n2);this._sBoundProperty="value";return[n2];}function s1(i,j){var m2=sap.ui.require("sap/m/Token");var n2=e2.call(this);var o2=new m2(j+"-token",{text:{path:'$field>',type:n2}});var p2=new i(j,{placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:Z},enabled:{path:"$field>/editMode",formatter:a1},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",width:"100%",tooltip:"{$field>/tooltip}",tokens:{path:"$field>/conditions",template:o2},dependents:[o2],change:J1.bind(this),liveChange:M1.bind(this),tokenUpdate:P1.bind(this),valueHelpRequest:T1.bind(this)});p2._setPreferUserInteraction(true);_1.call(this,p2);f1.call(this,p2);return[p2];}function t1(i,j){var m2=f2.call(this);var n2=new i(j,{value:{path:"$field>/conditions",type:m2},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:Z},enabled:{path:"$field>/editMode",formatter:a1},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",rows:4,tooltip:"{$field>/tooltip}",change:J1.bind(this),liveChange:M1.bind(this)});n2._setPreferUserInteraction(true);f1.call(this,n2);this._sBoundProperty="value";return[n2];}function u1(i,j){var m2=f2.call(this);var n2=new i(j,{text:{path:"$field>/conditions",type:m2},textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",wrapping:"{$field>/multipleLines}",width:"100%",tooltip:"{$field>/tooltip}"});this._sBoundProperty="text";return[n2];}function v1(i,j){this._bHideOperator=true;var m2=f2.call(this);W.call(this);var n2=new i(j,{value:{path:"$field>/conditions",type:m2},displayFormat:this._sDisplayFormat,valueFormat:this._sValueFormat,placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:Z},enabled:{path:"$field>/editMode",formatter:a1},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",change:J1.bind(this)});if(n2.setDisplayFormatType){n2.setDisplayFormatType(this._sCalendarType);}n2._setPreferUserInteraction(true);f1.call(this,n2);this._sBoundProperty="value";return[n2];}function w1(i,j){var m2=f2.call(this);W.call(this);var n2=new i(j,{value:{path:"$field>/conditions",type:m2},displayFormat:this._sDisplayFormat,valueFormat:this._sValueFormat,delimiter:"...",displayFormatType:this._sCalendarType,placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:Z},enabled:{path:"$field>/editMode",formatter:a1},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",change:J1.bind(this)});n2._setPreferUserInteraction(true);f1.call(this,n2);this._sBoundProperty="value";return[n2];}function x1(i,j){var m2=this.getFieldInfo();var n2=f2.call(this);var o2=new i(j,{text:{path:"$field>/conditions",type:n2},textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",tooltip:"{$field>/tooltip}",press:O1.bind(this),wrapping:true});if(m2){m2.getDirectLinkHrefAndTarget().then(c2.bind(this));}f1.call(this,o2);this._sBoundProperty="text";return[o2];}function y1(i,j){return q1.call(this,i,j);}function z1(i,j){X.call(this);this._bIsMeasure=true;var m2=f2.call(this);var n2=[];var o2=new i(j,{value:{path:"$field>/conditions",type:m2},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:Z},enabled:{path:"$field>/editMode",formatter:a1},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",change:J1.bind(this),liveChange:M1.bind(this)});o2._setPreferUserInteraction(true);f1.call(this,o2);n2.push(o2);n2=B1.call(this,n2,j,i);this._sBoundProperty="value";return n2;}function A1(i,j){X.call(this);this._bIsMeasure=true;var m2=sap.ui.require("sap/m/Token");var n2=sap.ui.require("sap/m/Input");var o2=e2.call(this);var p2=[];var q2=new m2(j+"-token",{text:{path:'$field>',type:o2}});var r2=new p({path:"values",test:function(t2){if(!Array.isArray(t2[0])||t2[0][0]){return true;}else{return false;}}});var s2=new i(j,{placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:Z},enabled:{path:"$field>/editMode",formatter:a1},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",tokens:{path:"$field>/conditions",template:q2,filters:[r2]},dependents:[q2],change:J1.bind(this),liveChange:M1.bind(this),tokenUpdate:P1.bind(this)});s2._setPreferUserInteraction(true);f1.call(this,s2);p2.push(s2);p2=B1.call(this,p2,j,n2);this._sBoundProperty="value";return p2;}function B1(i,j,m2){var n2=g2.call(this);if(this.getEditMode()===E.EditableDisplay){i[0].bindProperty("description",{path:"$field>/conditions",type:n2});i[0].setWidth("100%");i[0].setFieldWidth("70%");}else{var o2=new m2(j+"-unit",{value:{path:"$field>/conditions",type:n2},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:$},enabled:{path:"$field>/editMode",formatter:a1},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",width:"30%",tooltip:"{$field>/tooltip}",change:J1.bind(this),liveChange:M1.bind(this),valueHelpRequest:T1.bind(this)});o2._setPreferUserInteraction(true);_1.call(this,o2);f1.call(this,o2);i.push(o2);}return i;}function C1(i){if(i.onsapprevious){i._origOnsapprevious=i.onsapprevious;i.onsapprevious=function(j){var m2=R1.call(this);if(j.keyCode!==K.ARROW_UP&&(!m2||!m2.isOpen())){var i=this._getContent()[0];i._origOnsapprevious(j);}}.bind(this);}if(i.onsapnext){i._origOnsapnext=i.onsapnext;i.onsapnext=function(j){var m2=R1.call(this);if(j.keyCode!==K.ARROW_DOWN&&(!m2||!m2.isOpen())){var i=this._getContent()[0];i._origOnsapnext(j);}}.bind(this);}if(i.onsapup){i._origOnsapup=i.onsapup;i.onsapup=function(j){var m2=R1.call(this);if(!m2||!m2.isOpen()){var i=this._getContent()[0];i._origOnsapup(j);}}.bind(this);}if(i.onsapdown){i._origOnsapdown=i.onsapdown;i.onsapdown=function(j){var m2=R1.call(this);if(!m2||!m2.isOpen()){var i=this._getContent()[0];i._origOnsapdown(j);}}.bind(this);}if(i.onsapbackspace){i._origOnsapbackspace=i.onsapbackspace;i.onsapbackspace=function(j){var m2=R1.call(this);if(!m2||!m2.isOpen()){var i=this._getContent()[0];i._origOnsapbackspace(j);}}.bind(this);}}function D1(i){if(i._origOnsapprevious){i.onsapprevious=i._origOnsapprevious;delete i._origOnsapprevious;}if(i._origOnsapnext){i.onsapnext=i._origOnsapnext;delete i._origOnsapnext;}if(i._origOnsapup){i.onsapup=i._origOnsapup;delete i._origOnsapup;}if(i._origOnsapdown){i.onsapdown=i._origOnsapdown;delete i._origOnsapdown;}if(i._origOnsapbackspace){i.onsapbackspace=i._origOnsapbackspace;delete i._origOnsapbackspace;}}function E1(i){this.setProperty("_fieldHelpEnabled",true,true);this._sDefaultFieldHelp=H[i].id;var j=H[i].control;if(j&&j.bIsDestroyed){H[i].control=undefined;j=undefined;}if(!j){if(H[i].promise){H[i].promise.then(F1.bind(this));}var m2=sap.ui.require(H[i].name);if(!m2&&!H[i].promise){H[i].promise=new Promise(function(p2){H[i].resolve=p2;sap.ui.require([H[i].name],function(q2){E1.call(this,i);}.bind(this));}.bind(this)).then(F1.bind(this));}if(m2){var n2=this.DELEGATE&&this.DELEGATE[H[i].getDelegate]();var o2=m({delegate:n2},H[i].properties);j=new m2(H[i].id,o2);H[i].control=j;j.connect(this);if(H[i].resolve){H[i].resolve();delete H[i].resolve;}if(!H[i].promise){F1.call(this);}}}else{F1.call(this);}}function F1(){Q1.call(this,"BoolDefaultHelp","insert");_1.call(this,this.getAggregation("_content",[])[0]);}function G1(i,j,m2){if(i.useDefaultFieldHelp&&!this.getFieldHelp()&&m2!==E.Display){if(j.length===1){var n2=a.getOperator(j[0]);var o2=!n2||n2.isSingleValue();if(!(i.editOperator&&i.editOperator[j[0]])&&(i.useDefaultFieldHelp.oneOperator||!o2)){return true;}}else{return true;}}return false;}function H1(i){this._bParseError=true;}function I1(m2){this._bParseError=true;var n2=m2.getParameter("newValue");var o2=false;var i=0;for(i=0;i<this._aAsyncChanges.length;i++){var p2=this._aAsyncChanges[i];if(p2.waitForUpdate&&Array.isArray(p2.result)){for(var j=0;j<p2.result.length;j++){var q2=p2.result[j];if(h(q2.values[0],n2)||(q2.operator==="BT"&&h(q2.values[1],n2))){p2.reject(m2.getParameter("exception"));o2=true;break;}}if(o2){break;}}}if(o2){this._aAsyncChanges.splice(i,1);}}function J1(i){var j={parameters:m({},i.getParameters()),source:i.getSource()};var m2=this._aAsyncChanges.length;if(m2>0&&!this._aAsyncChanges[m2-1].changeFired){this._aAsyncChanges[m2-1].changeFired=true;this._aAsyncChanges[m2-1].changeEvent=j;_.call(this,undefined,undefined,undefined,this._aAsyncChanges[m2-1].promise);return;}var n2={changeEvent:j};K1.call(this,n2);}function K1(i){var j=this.getConditions();var m2;var n2=true;var o2;var p2;var q2=i.changeEvent.source;var r2=false;var s2=true;var t2=false;if(i.changeEvent.parameters.hasOwnProperty("valid")){n2=i.changeEvent.parameters["valid"];if(!n2&&i.changeEvent.parameters.hasOwnProperty("value")){o2=i.changeEvent.parameters["value"];}}var u2=false;var v2=this._sBoundProperty&&q2.getBinding(this._sBoundProperty);if(v2&&v2.getBindingMode()!==r.OneWay&&v2.getPath()==="/conditions"&&n2){p2=j[0];m2=j[0]&&j[0].values[0];}else if(i.changeEvent.parameters.hasOwnProperty("value")){m2=i.changeEvent.parameters["value"];if(n2){u2=true;}}else if(i.changeEvent.parameters.hasOwnProperty("query")){m2=i.changeEvent.parameters["query"];u2=true;t2=true;}else{p2=j[0];m2=j[0]&&j[0].values[0];}if(u2){d1.call(this);var w2;var x2;if(this._bIgnoreInputValue){this._bIgnoreInputValue=false;q2.setDOMValue("");return;}p2=S.resolve().then(function(){var z2=this.getMaxConditions();if(this._oNavigateCondition){n2=true;return this._oNavigateCondition;}else if(m2===""&&z2!==1){return null;}else{w2=e2.call(this);var A2=w2.parseValue(m2);var B2=this._aAsyncChanges.length;if(B2>0&&!this._aAsyncChanges[B2-1].changeFired){x2=this._aAsyncChanges[B2-1];x2.changeFired=true;x2.changeEvent=i.changeEvent;_.call(this,undefined,undefined,undefined,x2.promise);}return A2;}}.bind(this)).then(function(p2){s2=L1.call(this,p2,j,w2,n2,m2,q2,x2||i);s2=s2||t2;return p2;}.bind(this)).catch(function(z2){if(z2&&!(z2 instanceof P)&&!(z2 instanceof s)&&!(z2 instanceof V)){throw z2;}n2=false;o2=m2;c1.call(this,z2.message);if(x2&&x2.reject){if(k2.call(this,x2)){x2.reject(z2);}}else if(r2){_.call(this,j,n2,o2);}}.bind(this)).unwrap();if(p2 instanceof Promise){r2=true;}}else if(!i.changeEvent.parameters.hasOwnProperty("valid")&&this._bParseError){o2=i.changeEvent.parameters["value"];n2=false;}var y2=R1.call(this);if(y2&&this._bConnected){if(sap.ui.getCore().getCurrentFocusedControlId()===q2.getId()){y2.close();}y2.setFilterValue("");if(!r2&&n2){S1.call(this,j,y2);y2.onFieldChange();}N1.call(this);}if(this._oNavigateCondition){this._oNavigateCondition=undefined;d2.call(this);}if(i.resolve){j2.call(this,i);}else if(!r2&&s2){_.call(this,j,n2,o2);}}function L1(i,j,m2,n2,o2,p2,q2){var r2=this.getMaxConditions();var s2=false;if(i===null&&r2!==1){return true;}if(m2){m2.validateValue(i);}if(n2){if(i){if(this._bIsMeasure&&j.length===1&&j[0].values[0][0]===undefined){j=[];}if(r2!==1&&a.indexOfCondition(i,j)>=0){throw new P(this._oResourceBundle.getText("field.CONDITION_ALREADY_EXIST",[o2]));}else{if(r2>0&&r2<=j.length){j.splice(0,j.length-r2+1);}j.push(i);}}else if(r2===1){j=[];}if(!h(j,this.getConditions())){this.setProperty("conditions",j,true);s2=true;}if(r2!==1){p2.setValue("");}}if(q2.resolve){var t2=R1.call(this);if(t2&&this._bConnected){S1.call(this,j,t2);t2.onFieldChange();}q2.result=j;j2.call(this,q2);k2.call(this,q2);}return s2;}function M1(j){var m2;var n2;var o2=false;var p2=j.getSource();this._oNavigateCondition=undefined;d2.call(this);if("value"in j.getParameters()){m2=j.getParameter("value");}else if("newValue"in j.getParameters()){m2=j.getParameter("newValue");}if("escPressed"in j.getParameters()){o2=j.getParameter("escPressed");}if("previousValue"in j.getParameters()){n2=j.getParameter("previousValue");}else{var q2=this.getConditions();n2=q2[0]&&q2[0].values[0];}this._bParseError=false;var r2=R1.call(this);if(r2&&(!this._bIsMeasure||p2.getShowValueHelp())){if(o2){if(r2.isOpen(true)){r2.close();N1.call(this);}}else{var s2=this._getOperators();var t2=false;for(var i=0;i<s2.length;i++){var u2=a.getOperator(s2[i]);if(u2.validateInput){t2=true;break;}}if(t2){this._bIgnoreInputValue=false;this._vLiveChangeValue=m2;if(!this._fnLiveChangeTimer){this._fnLiveChangeTimer=v(function(){var w2=this.getDisplay();var x2="";if(this._vLiveChangeValue){var u2=a.getEQOperator();var y2=u2.getValues(this._vLiveChangeValue,w2,true);if(y2[0]){x2=y2[0];if(y2[1]){x2=x2+" ";}}if(y2[1]){x2=x2+y2[1];}}var v2=r2.openByTyping();if(this._bConnected&&this._getContent()[0]&&v2&&!(v2 instanceof Promise)&&(sap.ui.getCore().getCurrentFocusedControlId()===this._getContent()[0].getId()||(this._getContent()[1]&&sap.ui.getCore().getCurrentFocusedControlId()===this._getContent()[1].getId()))){r2.setFilterValue(x2);if(this.getMaxConditionsForHelp()===1&&r2.getConditions().length>0){r2.setConditions([]);}r2.open(true);delete this._vLiveChangeValue;}}.bind(this),300,{leading:false,trailing:true});}var v2=r2.openByTyping();if(v2 instanceof Promise){v2.then(function(){var w2=document.activeElement;if(w2&&(o(this.getDomRef(),w2))&&this._fnLiveChangeTimer){this._fnLiveChangeTimer();}}.bind(this));}this._fnLiveChangeTimer();}}}this.fireLiveChange({value:m2,escPressed:o2,previousValue:n2});}function N1(){if(this._fnLiveChangeTimer){this._fnLiveChangeTimer.cancel();delete this._vLiveChangeValue;}}function O1(i){var j=this.getFieldInfo();if(j){j.getTriggerHref().then(function(m2){if(!m2){j.open(this._getContent()[0]);}}.bind(this));}this.firePress();}function P1(j){if(j.getParameter("type")==="removed"){var m2=j.getParameter("removedTokens");var n2=this.getConditions();var o2;var i;for(i=0;i<m2.length;i++){var p2=m2[i];var q2=p2.getBindingContext("$field").sPath;var r2=parseInt(q2.slice(q2.lastIndexOf("/")+1));n2[r2].delete=true;}for(i=n2.length-1;i>=0;i--){if(n2[i].delete){if(this._bIsMeasure){o2=n2[i].values[0][1];}n2.splice(i,1);}}if(this._bIsMeasure&&o2&&n2.length===0){n2=[C.createItemCondition([undefined,o2],undefined)];}this.setProperty("conditions",n2,true);_.call(this,n2,true);j.preventDefault(true);}}function Q1(i,j){var m2=sap.ui.getCore().byId(i);if(j==="remove"){if(m2){m2.detachEvent("select",U1,this);m2.detachEvent("navigate",V1,this);m2.detachEvent("dataUpdate",X1,this);m2.detachEvent("disconnect",Y1,this);m2.detachEvent("afterClose",W1,this);}this.setProperty("_fieldHelpEnabled",false,true);}else if(j==="insert"){if(m2){m2.attachEvent("dataUpdate",X1,this);this.setProperty("_fieldHelpEnabled",true,true);}}Y.call(this,this.getConditions());}function R1(){var i=this.getFieldHelp();var j;if(!i&&this._sDefaultFieldHelp){i=this._sDefaultFieldHelp;}if(i){j=sap.ui.getCore().byId(i);}return j;}function S1(j,m2){if(!m2){m2=R1.call(this);}if(this._bIsMeasure){var n2=[];for(var i=0;i<j.length;i++){var o2=j[i];if(o2.values[0]&&o2.values[0][1]){var p2=C.createItemCondition(o2.values[0][1],undefined,o2.inParameters,o2.outParameters);n2.push(p2);}}m2.setConditions(n2);}else{m2.setConditions(j);}}function T1(i){var j=R1.call(this);if(j){j.setFilterValue("");var m2=this.getConditions();S1.call(this,m2,j);j.toggleOpen(false);if(!j.isFocusInHelp()){var n2=i.getSource();if(n2.bValueHelpRequested){n2.bValueHelpRequested=false;}}}}function U1(j){var m2=this.getConditions();var n2=j.getParameter("conditions");var o2=j.getParameter("add");var p2=j.getParameter("close");var q2=j.oSource;var r2=this.getMaxConditions();var s2;var t2=this.getControlForSuggestion();var u2;var i=0;if(this._bIsMeasure){if(n2.length>1){throw new Error("Only one item must be selected! "+this);}if(n2[0].operator!=="EQ"){throw new Error("Only EQ allowed! "+this);}if(m2.length>0){for(i=0;i<m2.length;i++){m2[i].values[0][1]=n2[0].values[0];if(m2[i].operator==="BT"){m2[i].values[1][1]=n2[0].values[0];}if(n2[0].inParameters){m2[i].inParameters=n2[0].inParameters;}if(n2[0].outParameters){m2[i].outParameters=n2[0].outParameters;}}}else{s2=m({},n2[0]);s2.values[0]=[undefined,s2.values[0]];s2.values[1]=undefined;m2.push(s2);if(this._oConditionType){u2=this._oConditionType.formatValue(s2);}else if(this._oConditionsType){u2=this._oConditionsType.formatValue(m2);}}}else{if(!o2){m2=[];}for(i=0;i<n2.length;i++){s2=n2[i];if(!l2.call(this,s2.operator)){continue;}var v2=o2?-1:a.indexOfCondition(s2,m2);if(v2===-1){m2.push(s2);}else if(s2.values[1]!==m2[v2].values[1]&&m2[v2].values[1]){m2[v2].values[1]=s2.values[1];}}}if(r2>0&&r2<m2.length){m2.splice(0,m2.length-r2);}if(t2&&t2.setDOMValue){if(this.getMaxConditionsForHelp()===1&&m2.length>0){if(this._bIsMeasure&&this._oUnitConditionsType){u2=this._oUnitConditionsType.formatValue(m2);}else if(this._oConditionType){u2=this._oConditionType.formatValue(m2[0]);}else if(this._oConditionsType){u2=this._oConditionsType.formatValue(m2);}if(u2 instanceof Promise){u2.then(function(x2){t2.setDOMValue("");t2.setDOMValue(x2);});}else{t2.setDOMValue("");t2.setDOMValue(u2);}}else if(p2){t2.setDOMValue("");q2.setFilterValue("");this._bIgnoreInputValue=false;}else{this._bIgnoreInputValue=true;}}var w2=this.getConditions();if(!h(m2,w2)){this._oNavigateCondition=undefined;d2.call(this);this.setProperty("conditions",m2,true);if(!a.compareConditionsArray(m2,w2)){q2.onFieldChange();_.call(this,m2,true);}}}function V1(i){var j=i.getParameter("value");var m2=i.getParameter("key");var n2=i.getParameter("condition");var o2;var p2;var q2=this.getControlForSuggestion();if(n2){this._oNavigateCondition=m({},n2);m2=n2.values[0];j=n2.values[1];}else{this._oNavigateCondition=C.createItemCondition(m2,j);}if(this._bIsMeasure){var r2=this.getConditions();if(r2.length>0){this._oNavigateCondition.operator=r2[0].operator;this._oNavigateCondition.values[0]=[r2[0].values[0][0],this._oNavigateCondition.values[0]];if(r2[0].operator==="BT"){this._oNavigateCondition.values[1]=[r2[0].values[1][0],this._oNavigateCondition.values[0][1]];}else{this._oNavigateCondition.values[1]=undefined;}}else{this._oNavigateCondition.values=[[undefined,this._oNavigateCondition.values[0]],undefined];}}d2.call(this);if(this.getDisplay()!==w.Value){o2=m2;}else if(j){o2=j;}else{o2=m2;}if(q2&&q2.setDOMValue){if(!p2){if(this._bIsMeasure&&this._oUnitConditionsType&&this._oNavigateCondition){p2=this._oUnitConditionsType.formatValue([this._oNavigateCondition]);}else if(this._oConditionType&&this._oNavigateCondition){p2=this._oConditionType.formatValue(this._oNavigateCondition);}else if(this._oConditionsType&&this._oNavigateCondition){p2=this._oConditionsType.formatValue([this._oNavigateCondition]);}else{p2=j||m2;}}q2.setDOMValue(p2);q2._doSelect();}this._bIgnoreInputValue=false;this.fireLiveChange({value:o2});}function W1(i){if(this._bIgnoreInputValue){var j=this.getControlForSuggestion();this._bIgnoreInputValue=false;j.setDOMValue("");}}function X1(i){var j=this.getEditMode()===E.Editable&&this._getContent().length>0&&sap.ui.getCore().getCurrentFocusedControlId()===this._getContent()[0].getId();if(!j&&this.getConditions().length>0&&(this.getMaxConditions()!==1||(this.getDisplay()!==w.Value&&!this._bParseError))){this._oManagedObjectModel.checkUpdate(true);}}function Y1(i){var j=R1.call(this);j.detachEvent("select",U1,this);j.detachEvent("navigate",V1,this);j.detachEvent("disconnect",Y1,this);j.detachEvent("afterClose",W1,this);this._bConnected=false;}function Z1(){var i=R1.call(this);if(i&&!this._bConnected){i.connect(this);this._bConnected=true;i.attachEvent("select",U1,this);i.attachEvent("navigate",V1,this);i.attachEvent("disconnect",Y1,this);i.attachEvent("afterClose",W1,this);var j=this.getConditions();S1.call(this,j,i);var m2=this.getControlForSuggestion();$1.call(this,m2);}}function $1(i){if(i&&!i.orgOnsapfocusleave&&i.onsapfocusleave){i.orgOnsapfocusleave=i.onsapfocusleave;i.onsapfocusleave=function(j){var m2=R1.call(this.getParent());if(m2){var n2=sap.ui.getCore().byId(j.relatedControlId);if(n2){if(o(m2.getDomRef(),n2.getFocusDomRef())){j.stopPropagation();return;}else{m2.skipOpening();}}}this.orgOnsapfocusleave(j);};}}function _1(i){var j=R1.call(this);if(j&&i&&i.addEndIcon){var m2=j.getIcon();var n2=i.getAggregation("_endIcon",[])[0];if(n2){n2.setSrc(m2);}else{i.addEndIcon({id:i.getId()+"-vhi",src:m2,useIconTooltip:false,noTabStop:true,press:function(o2){if(!this.getValueHelpOnly()){var p2;if(D.support.touch){p2=this.$('inner');p2.attr('readonly','readonly');this.focus();p2.removeAttr('readonly');}else{this.focus();}this.bValueHelpRequested=true;this.fireValueHelpRequest({fromSuggestions:false});}}.bind(i)});}}}function a2(i,j){if(j==="remove"){i.detachEvent("dataUpdate",b2,this);}else if(j==="insert"){i.attachEvent("dataUpdate",b2,this);b2.call(this);}}function b2(){var i=this.getFieldInfo();var j=this;i.isTriggerable().then(function(m2){j._bTriggerable=m2;if(j.getAggregation("_content",[]).length>0&&j.getEditMode()===E.Display){l1.call(j);if(j._bTriggerable){i.getDirectLinkHrefAndTarget().then(c2.bind(j));}}});}function c2(i){if(i){var j=this.getAggregation("_content",[])[0];j.setHref(i.href);j.setTarget(i.target);}}z.prototype._getFormatOptions=function(){if(!this._asyncParsingCall){this._asyncParsingCall=i2.bind(this);}return{valueType:N.call(this),originalDateType:this._oDateOriginalType||this._oUnitOriginalType,display:this._bIsMeasure?w.Value:this.getDisplay(),fieldHelpID:this._bIsMeasure?undefined:this.getFieldHelp()||this._sDefaultFieldHelp,operators:this._getOperators(),hideOperator:this._bHideOperator,maxConditions:this.getMaxConditions(),bindingContext:this.getBindingContext(),asyncParsing:this._asyncParsingCall,navigateCondition:this._oNavigateCondition,delegate:this.DELEGATE,delegateName:this.getDelegate()&&this.getDelegate().name,payload:this._oPayload};};function d2(){if(this._oConditionType||this._oConditionsType){var i=this._getFormatOptions();if(this._oConditionType){this._oConditionType.setFormatOptions(i);}if(this._oConditionsType){this._oConditionsType.setFormatOptions(i);}if(this._oUnitConditionsType){i=h2.call(this);this._oUnitConditionsType.setFormatOptions(i);}}}function e2(){if(!this._oConditionType){var i=this._getFormatOptions();this._oConditionType=new b(i);this._oConditionType._bCreatedByField=true;}return this._oConditionType;}function f2(){if(!this._oConditionsType){var i=this._getFormatOptions();this._oConditionsType=new c(i);this._oConditionsType._bCreatedByField=true;}return this._oConditionsType;}z.prototype._checkValueInitial=function(i){if(i===null||i===undefined){return true;}if(i===""){var j=N.call(this);var m2=j.parseValue(i,"string");if(m2===i){return true;}else{try{j.validateValue(m2);}catch(n2){return true;}}}else{var o2=Q.call(this);if(this.DELEGATE.getBaseType(this._oPayload,o2)===B.Unit&&Array.isArray(i)&&i.length>1&&(i[0]===undefined||i[0]===null)&&!i[1]){return true;}}return false;};function g2(){if(!this._oUnitConditionsType){var i=h2.call(this);this._oUnitConditionsType=new c(i);this._oUnitConditionsType._bCreatedByField=true;}return this._oUnitConditionsType;}function h2(){if(!this._asyncParsingCall){this._asyncParsingCall=i2.bind(this);}return{valueType:undefined,originalDateType:N.call(this),display:this.getDisplay(),fieldHelpID:this.getFieldHelp()||this._sDefaultFieldHelp,operators:["EQ"],hideOperator:true,maxConditions:1,bindingContext:this.getBindingContext(),asyncParsing:this._asyncParsingCall,navigateCondition:this._oNavigateCondition,delegate:this.DELEGATE,payload:this._oPayload,isUnit:true,getConditions:this.getConditions.bind(this)};}function i2(i){var j=R1.call(this);if(j&&j.isOpen()){var m2=document.activeElement;if(m2&&(o(this.getDomRef(),m2)||o(j.getDomRef(),m2))){j.close();}}var n2={};var o2=new Promise(function(p2,q2){n2.resolve=p2;n2.reject=q2;i.then(function(r2){n2.result=r2;this._bParseError=false;var s2=this.getConditions();if(h(r2,s2)){j2.call(this,n2);k2.call(this,n2);}else{n2.waitForUpdate=true;}}.bind(this)).catch(function(r2){if(r2&&!(r2 instanceof P)&&!(r2 instanceof s)&&!(r2 instanceof V)){throw r2;}this._bParseError=true;q2(r2);k2.call(this,n2);}.bind(this));}.bind(this));n2.promise=o2;this._aAsyncChanges.push(n2);}z.prototype._getResultForPromise=function(i){return i;};function j2(i){i.resolve(this._getResultForPromise(i.result));}function k2(j){var m2=false;var i=0;for(i=0;i<this._aAsyncChanges.length;i++){if(j===this._aAsyncChanges[i]){m2=true;break;}}if(m2){this._aAsyncChanges.splice(i,1);}return m2;}z.prototype._getOperators=function(){var i=new RegExp("^\\*(.*)\\*|\\$search$");if(i.test(this.getFieldPath())&&this.getMaxConditions()===1){return["Contains"];}var j=Q.call(this);var m2=R.call(this);var n2=T.call(this);var o2=this.DELEGATE.getBaseType(this._oPayload,j,n2,m2);if(o2===B.Unit){o2=B.Numeric;}return a.getOperatorsForType(o2);};function l2(j){var m2=this._getOperators();for(var i=0;i<m2.length;i++){if(j===m2[i]){return true;}}return false;}return z;});
