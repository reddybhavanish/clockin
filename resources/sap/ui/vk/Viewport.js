/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

        (c) Copyright 2009-2015 SAP SE. All rights reserved
    
 */
sap.ui.define(["jquery.sap.global","sap/base/util/ObjectPath","./ViewportBase","./ContentConnector","./ViewStateManager","./ViewportRenderer","./VisibilityMode","./RenderMode","./Scene","./Camera"],function(q,O,V,C,a,b,d,R,S,e){"use strict";var f=V.extend("sap.ui.vk.Viewport",{metadata:{library:"sap.ui.vk",designtime:"sap/ui/vk/designtime/Viewport.designtime"}});var g=f.getMetadata().getParent().getClass().prototype;f.prototype.init=function(){if(g.init){g.init.call(this);}this._implementation=null;};f.prototype.exit=function(){this._destroyImplementation();if(g.exit){g.exit.call(this);}};f.prototype.getImplementation=function(){return this._implementation;};f.prototype._destroyImplementation=function(){if(this._implementation){var m=this.removeAllContent();var t=this;m.forEach(function(c){t.addAggregation("content",c);});this.setAggregation("safeArea",this._implementation.getSafeArea());this._implementation.destroy();this._implementation=null;}return this;};f.prototype.getShowDebugInfo=function(){if(this._implementation){return this._implementation.getShowDebugInfo();}return g.getShowDebugInfo.call(this);};f.prototype.setShowDebugInfo=function(v){g.setShowDebugInfo.call(this,v);if(this._implementation){this._implementation.setShowDebugInfo(v);}return this;};f.prototype.getBackgroundColorTop=function(){if(this._implementation){return this._implementation.getBackgroundColorTop();}return g.getBackgroundColorTop.call(this);};f.prototype.setBackgroundColorTop=function(v){g.setBackgroundColorTop.call(this,v);if(this._implementation){this._implementation.setBackgroundColorTop(v);}return this;};f.prototype.getBackgroundColorBottom=function(){if(this._implementation){return this._implementation.getBackgroundColorBottom();}return g.getBackgroundColorBottom.call(this);};f.prototype.setBackgroundColorBottom=function(v){g.setBackgroundColorBottom.call(this,v);if(this._implementation){this._implementation.setBackgroundColorBottom(v);}return this;};f.prototype.setWidth=function(v){g.setWidth.call(this,v);if(this._implementation){this._implementation.setWidth(v);}return this;};f.prototype.setHeight=function(v){g.setHeight.call(this,v);if(this._implementation){this._implementation.setHeight(v);}return this;};f.prototype.setSelectionMode=function(v){g.setSelectionMode.call(this,v);if(this._implementation){this._implementation.setSelectionMode(v);}return this;};f.prototype.getSelectionMode=function(){if(this._implementation){return this._implementation.getSelectionMode();}return g.getSelectionMode.call(this);};f.prototype.setSelectionDisplayMode=function(v){g.setSelectionDisplayMode.call(this,v);if(this._implementation){this._implementation.setSelectionDisplayMode(v);}return this;};f.prototype.getSelectionDisplayMode=function(){if(this._implementation){return this._implementation.getSelectionDisplayMode();}return g.getSelectionDisplayMode.call(this);};f.prototype.setShowSafeArea=function(v){g.setShowSafeArea.call(this,v);if(this._implementation){this._implementation.setShowSafeArea(v);}return this;};f.prototype.getShowSafeArea=function(){if(this._implementation){return this._implementation.getShowSafeArea();}return g.getShowSafeArea.call(this);};f.prototype.setCamera=function(v){g.setCamera.call(this,v);if(this._implementation){this._implementation.setCamera(v);return this;}return this;};f.prototype.getCamera=function(){if(this._implementation){return this._implementation.getCamera();}return g.getCamera.call(this);};f.prototype.setShouldRenderFrame=function(){if(this._implementation){this._implementation.setShouldRenderFrame();}return this;};f.prototype.shouldRenderFrame=function(){if(this._implementation){this._implementation.shouldRenderFrame();}};f.prototype.setRenderMode=function(v){if(this._implementation&&this._implementation.setRenderMode){this._implementation.setRenderMode(v);}return this;};f.prototype.getRenderMode=function(){if(this._implementation&&this._implementation.getRenderMode){return this._implementation.getRenderMode();}return R.Default;};f.prototype.setFreezeCamera=function(v){g.setFreezeCamera.call(this,v);if(this._implementation){this._implementation.setFreezeCamera(v);}return this;};f.prototype.showHotspots=function(n,c,m){if(this._implementation&&this._implementation.showHotspots){this._implementation.showHotspots(n,c,m);}return this;};f.prototype.addTool=function(t){this.addAssociation("tools",t);if(this._implementation){this._implementation.addTool(t);}};f.prototype.removeTool=function(t){this.removeAssociation("tools",t);if(this._implementation){this._implementation.removeTool(t);}};f.prototype.getTools=function(){if(this._implementation){return this._implementation.getTools();}return this.getAssociation("tools",[]);};f.prototype.removeAllTools=function(){this.removeAllAssociation("tools");if(this._implementation){this._implementation.removeAllTools();}};f.prototype.addContent=function(c){if(this._implementation){this._implementation.addContent(c);}else{this.addAggregation("content",c);}};f.prototype.removeContent=function(c){if(this._implementation){return this._implementation.removeContent(c);}return this.removeAggregation("content",c);};f.prototype.getContent=function(){if(this._implementation){return this._implementation.getContent();}return this.getAggregation("content");};f.prototype.removeAllContent=function(){if(this._implementation){return this._implementation.removeAllContent();}return this.removeAggregation("content");};f.prototype.setSafeArea=function(c){if(this._implementation){this._implementation.setSafeArea(c);}else{this.setAggregation("safeArea",c);}};f.prototype.getSafeArea=function(){if(this._implementation){return this._implementation.getSafeArea();}return this.getAggregation("safeArea");};f.prototype.removeSafeArea=function(){if(this._implementation){return this._implementation.removeAggregation("safeArea");}return this.removeAggregation("safeArea");};f.prototype.addAnnotation=function(c){if(this._implementation){this._implementation.addAnnotation(c);}else{this.addAggregation("annotations",c);}};f.prototype.destroyAnnotations=function(){if(this._implementation){return this._implementation.destroyAnnotations();}return this.destroyAggregation("annotations");};f.prototype.getAnnotations=function(){if(this._implementation){return this._implementation.getAnnotations();}return this.getAggregation("annotations");};f.prototype.indexOfAnnotation=function(c){if(this._implementation){return this._implementation.indexOfAnnotation(c);}return this.indexOfAggregation("annotations",c);};f.prototype.removeAllAnnotations=function(){if(this._implementation){return this._implementation.removeAllAnnotations();}return this.removeAggregation("annotations");};f.prototype.removeAnnotation=function(c){if(this._implementation){return this._implementation.removeAnnotation(c);}return this.removeAggregation("annotations",c);};f.prototype.insertAnnotation=function(c,m){if(this._implementation){return this._implementation.insertAnnotation(c,m);}return this.insertAggregation("annotations",c,m);};f.prototype.startAnimation=function(p){if(this._implementation&&this._implementation.startAnimation){this._implementation.startAnimation(p);}};f.prototype.stopAnimation=function(){if(this._implementation&&this._implementation.stopAnimation){this._implementation.stopAnimation();}};f.prototype.playProcedure=function(m,v,n){if(this._implementation&&this._implementation.playProcedure){this._implementation.playProcedure(m,v,n);}};f.prototype.getCurrentView=function(){if(this._implementation&&this._implementation.getCurrentView){return this._implementation.getCurrentView();}return null;};f.prototype.pan=function(c,m){if(this._implementation&&this._implementation.pan){this._implementation.pan(c,m);}};f.prototype.rotate=function(c,m){if(this._implementation&&this._implementation.rotate){this._implementation.rotate(c,m);}};f.prototype.zoom=function(c){if(this._implementation&&this._implementation.zoom){this._implementation.zoom(c);}};f.prototype.pauseAnimation=function(){if(this._implementation&&this._implementation.pauseAnimation){return this._implementation.pauseAnimation();}};f.prototype.resumeAnimation=function(){if(this._implementation&&this._implementation.resumeAnimation){return this._implementation.resumeAnimation();}};f.prototype.handleDragAnimation=function(c){if(this._implementation&&this._implementation.handleDragAnimation){this._implementation.handleDragAnimation(c);}};f.prototype.handleCompleteDraggingAnimation=function(c){if(this._implementation&&this._implementation.handleCompleteDraggingAnimation){this._implementation.handleCompleteDraggingAnimation(c);}};f.prototype.AddHandlersToAnimationSequenceEvents=function(c){if(this._implementation&&this._implementation.AddHandlersToAnimationSequenceEvents){this._implementation.AddHandlersToAnimationSequenceEvents(c);}};f.prototype._setContent=function(c){var m=null;var n=null;if(c){m=c;if(!(m instanceof S)){m=null;}n=c.camera;if(!(n instanceof e)){n=null;}}this._setScene(m);if(n){this.setCamera(n);}};f.prototype._onAfterUpdateContentConnector=function(){this._setContent(this._contentConnector.getContent());};f.prototype._onBeforeClearContentConnector=function(){if(g._onBeforeClearContentConnector){g._onBeforeClearContentConnector.call(this);}this._setScene(null);};f.prototype._handleContentReplaced=function(c){var m=c.getParameter("newContent");this._setContent(m);};f.prototype._setScene=function(c){if(c instanceof S){var m=c.getMetadata().getName(),n=this._implementation&&this._implementation.getMetadata().getName(),r=m==="sap.ui.vk.dvl.Scene"&&n==="sap.ui.vk.dvl.Viewport"||m==="sap.ui.vk.threejs.Scene"&&n==="sap.ui.vk.threejs.Viewport";if(!r){this._destroyImplementation();var o;var p=this.getCamera();if(m==="sap.ui.vk.dvl.Scene"){o="sap.ui.vk.dvl.Viewport";}else if(m==="sap.ui.vk.threejs.Scene"){o="sap.ui.vk.threejs.Viewport";}if(o){var t=O.get(o);this._implementation=new t({viewStateManager:this.getViewStateManager(),tools:this.getAssociation("tools"),content:this.getContent(),safeArea:this.getSafeArea(),showSafeArea:this.getShowSafeArea(),showDebugInfo:this.getShowDebugInfo(),width:this.getWidth(),height:this.getHeight(),backgroundColorTop:this.getBackgroundColorTop(),backgroundColorBottom:this.getBackgroundColorBottom(),selectionMode:this.getSelectionMode(),freezeCamera:this.getFreezeCamera(),contentConnector:this.getContentConnector()});if(p){this._camera=null;this._implementation.setCamera(p);}this._implementation.setParent(this);}this.invalidate();}}else{this._destroyImplementation();this.invalidate();}return this;};f.prototype._onAfterUpdateViewStateManager=function(){if(this._implementation){this._implementation.setViewStateManager(this._viewStateManager);}};f.prototype._onBeforeClearViewStateManager=function(){if(this._implementation){this._implementation.setViewStateManager(null);}};f.prototype.activateView=function(v,p,n){if(this._implementation){this._implementation.activateView(v,p,n);return this;}else{q.sap.log.error("no implementation");return this;}};f.prototype.resetCurrentView=function(){if(this._implementation&&this._implementation.resetCurrentView){this._implementation.resetCurrentView();return this;}else{q.sap.log.error("no implementation");return this;}};f.prototype.zoomTo=function(w,n,c,m){if(this._implementation){this._implementation.zoomTo(w,n,c,m);}else{q.sap.log.error("zoomTo: no implementation");}return this;};f.prototype.tap=function(x,y,c){if(this._implementation){this._implementation.tap(x,y,c);}return this;};f.prototype.tapObject=function(n){if(this._implementation&&this._implementation.tapObject){this._implementation.tapObject(n);}return this;};var s=function(c){c.camera={};};var h=function(c){if(typeof c.camera==="object"&&c.camera!==null){c.camera.matrices=false;}};var i=function(c){if(typeof c.camera==="object"&&c.camera!==null){c.camera.useTransitionCamera=false;}};var j=function(c){c.animation=true;};var k=function(c){c.visibility=false;};var l=function(c){if(typeof c.visibility==="object"&&c.visibility!==null){c.visibility.mode=d.Complete;}};f.prototype.getViewInfo=function(c){if(!this._implementation){q.sap.log.error("no implementation");return null;}var m={};if(typeof c!=="object"||c===null){s(m);h(m);i(m);j(m);k(m);l(m);}else{if(typeof c.camera==="object"&&c.camera!==null){m.camera={};if(typeof c.camera.matrices==="boolean"){m.camera.matrices=c.camera.matrices;}else if("matrices"in c.camera){m.camera.matrices=false;}else{h(m);}if(typeof c.camera.useTransitionCamera==="boolean"){m.camera.useTransitionCamera=c.camera.useTransitionCamera;}else if("useTransitionCamera"in c.camera){m.camera.useTransitionCamera=false;}else{i(m);}}else if(typeof c.camera==="boolean"){if(c.camera===true){m.camera={};h(m);i(m);}else{m.camera=false;}}else if("camera"in c){m.camera=false;}else{s(m);h(m);i(m);}if(typeof c.animation==="boolean"){m.animation=c.animation;}else if("animation"in c){m.animation=false;}else{j(m);}if(typeof c.visibility==="object"&&c.visibility!==null){m.visibility={};if(c.visibility.mode===d.Complete||c.visibility.mode===d.Differences){m.visibility.mode=c.visibility.mode;}else{l(m);}}else if(typeof c.visibility==="boolean"){if(c.visibility===true){m.visibility={};l(m);}else{m.visibility=false;}}else if("visibility"in c){m.visibility=false;}else{k(m);l(m);}}return this._implementation.getViewInfo(m);};f.prototype.setViewInfo=function(v,c){if(this._implementation){this._implementation.setViewInfo(v,c);}else{q.sap.log.error("no implementation");}return this;};f.prototype.getImage=function(w,c,t,m,n){if(this._implementation&&this._implementation.getImage){return this._implementation.getImage(w,c,t,m,n);}return null;};f.prototype.projectToScreen=function(x,y,z,c){if(this._implementation&&this._implementation.projectToScreen){return this._implementation.projectToScreen(x,y,z,c);}return g.projectToScreen(x,y,z,c);};f.prototype.normalizeRectangle=function(x,y,w,c){if(this._implementation&&this._implementation.normalizeRectangle){return this._implementation.normalizeRectangle(x,y,w,c);}return g.normalizeRectangle(x,y,w,c);};f.prototype.deNormalizeRectangle=function(x,y,w,c){if(this._implementation&&this._implementation.deNormalizeRectangle){return this._implementation.deNormalizeRectangle(x,y,w,c);}return g.deNormalizeRectangle(x,y,w,c);};C.injectMethodsIntoClass(f);a.injectMethodsIntoClass(f);return f;});
