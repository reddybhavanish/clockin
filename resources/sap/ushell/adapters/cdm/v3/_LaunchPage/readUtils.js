// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/Config","sap/base/util/deepClone"],function(r,a,b,u,C,d){"use strict";var c={};c.getVizData=function(s,v,U){var V=C.last("/core/spaces/vizInstantiation/enabled");if(v.isBookmark&&v.url){v=d(v);v.subTitle=v.subtitle;v.target=u.toTargetFromHash(v.url,U);}var e=this.getCdmParts(s,v);var o=r.get(s,b.getTileVizId(v))||{};var f={id:b.getTileId(v),vizId:b.getTileVizId(v)||"",vizType:r.getTypeId(o)||"",title:r.getTitle(e)||"",subtitle:r.getSubTitle(e)||"",icon:r.getIcon(e)||"",keywords:r.getKeywords(e)||[],info:r.getInfo(e)||"",target:v.target||r.getTarget(o)||{},indicatorDataSource:r.getIndicatorDataSource(o),isBookmark:v.isBookmark||false,_instantiationData:r.getInstantiationData(o)};f.targetURL=u.toHashFromVizData(f,s.applications,U);if(v.isBookmark&&!f.vizType){if(f.indicatorDataSource){f.vizType="sap.ushell.DynamicAppLauncher";}else{f.vizType="sap.ushell.StaticAppLauncher";}}if(!f._instantiationData||!Object.keys(f._instantiationData)){f._instantiationData={platform:"CDM",vizType:r.getType(s,f.vizType)};}if(!V&&f.isBookmark){f.url=f.targetURL;}return f;};c.getVizRef=function(v){return{id:v.id,vizId:v.vizId,title:v.title,subTitle:v.subtitle,icon:v.icon,keywords:v.keywords,info:v.info,target:v.target,indicatorDataSource:v.indicatorDataSource,isBookmark:v.isBookmark};};c.getCdmParts=function(s,t){var v=r.get(s,b.getTileVizId(t))||{};var V=r.getConfig(v);var A=r.getAppDescriptor(s,r.getAppId(v));var i=a.getInbound(A,r.getInboundId(v));return[t,V,i,A];};return c;},true);
