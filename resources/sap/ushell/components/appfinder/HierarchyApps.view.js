// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/ui/appfinder/AppBox","sap/ushell/ui/appfinder/PinButton","sap/ushell/resources","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/FlexBox","sap/m/library","sap/m/MessagePage","sap/ui/model/json/JSONModel","sap/m/Link","sap/m/Breadcrumbs","sap/m/Text","sap/m/Button"],function(A,P,r,a,F,m,M,J,L,B,T,b){"use strict";var c=m.ButtonType;var d=m.FlexWrap;sap.ui.jsview("sap.ushell.components.appfinder.HierarchyApps",{createContent:function(C){this.oController=C;function g(G,e,s,h,i){var R=r.i18n,t;if(s){var j=G?Array.prototype.indexOf.call(G,h):-1;var k=j!==-1?"removeAssociatedTileFromContextGroup":"addAssociatedTileToContextGroup";t=R.getText(k,i);}else{t=e?R.getText("EasyAccessMenu_PinButton_Toggled_Tooltip"):R.getText("EasyAccessMenu_PinButton_UnToggled_Tooltip");}return t;}var p=new P({icon:"sap-icon://pushpin-off",selected:{path:"easyAccess>bookmarkCount",formatter:function(e){return(!!e);}},tooltip:{parts:["associatedGroups","easyAccess>bookmarkCount","/groupContext/path","/groupContext/id","/groupContext/title"],formatter:function(G,e,s,h,i){return g(G,e,s,h,i);}},press:C.showSaveAppPopover.bind(C)});p.addCustomData(new a({key:"tabindex",value:"-1",writeToDom:true}));p.addStyleClass("sapUshellPinButton");this.oItemTemplate=new A({title:"{easyAccess>text}",subtitle:"{easyAccess>subtitle}",url:"{easyAccess>url}",icon:"{easyAccess>icon}",pinButton:p,tabindex:{path:"easyAccess>text"},press:[C.onAppBoxPressed,C]});this.oItemTemplate.addCustomData(new a({key:"tabindex",value:"-1",writeToDom:true}));this.layout=new F(this.getId()+"_hierarchyAppsLayout",{items:{path:"easyAccess>/apps",template:this.oItemTemplate},wrap:d.Wrap});this.layout.addDelegate({onAfterRendering:function(){var i=this.getItems();var u=function(e){if(e.getKey()==="tabindex"){e.setValue("0");}};if(i.length){i[0].getCustomData().forEach(u);i[0].getPinButton().getCustomData().forEach(u);}}.bind(this.layout)});this.oMessagePage=new M({visible:false,showHeader:false,text:r.i18n.getText("EasyAccessMenu_NoAppsToDisplayMessagePage_Text"),description:""});var f=[];if(this.getViewData()&&this.getViewData().navigateHierarchy){this.crumbsModel=new J({crumbs:[]});this.linkTemplate=new L({text:"{crumbs>text}",press:function(e){var h=e.oSource.getBinding("text").getContext().getObject();this.getViewData().navigateHierarchy(h.path,false);}.bind(this)});this.breadcrumbs=new B({links:{path:"crumbs>/crumbs",template:this.linkTemplate},currentLocationText:"{/text}"});this.breadcrumbs.setModel(this.crumbsModel,"crumbs");f.push(this.breadcrumbs);}else{this.resultText=new T({text:{parts:[{path:"easyAccessSystemsModel>/systemSelected"},{path:"easyAccess>/total"}],formatter:C.resultTextFormatter.bind(C)}}).addStyleClass("sapUshellEasyAccessSearchResultText");this.resultText.addCustomData(new a({key:"role",value:"heading",writeToDom:true}));this.resultText.addCustomData(new a({key:"aria-level",value:"3",writeToDom:true}));f.push(this.resultText);this.showMoreResultsLink=new b({text:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:C.showMoreResultsTextFormatter.bind(C)},press:this.getViewData().getMoreSearchResults,visible:{parts:[{path:"easyAccess>/apps"},{path:"easyAccess>/total"}],formatter:C.showMoreResultsVisibilityFormatter.bind(C)},type:c.Transparent});}f.push(this.oMessagePage);f.push(this.layout);if(this.showMoreResultsLink){f.push(this.showMoreResultsLink);}return f;},updateResultSetMessage:function(i,I){var e;if(I){e="noFilteredItems";}else{e="EasyAccessMenu_NoAppsToDisplayMessagePage_Text";}if(i){if(I){this.resultText.updateProperty("text");this.resultText.setVisible(true);}this.layout.setVisible(true);this.oMessagePage.setVisible(false);}else{if(I){this.resultText.setVisible(false);}this.layout.setVisible(false);this.oMessagePage.setVisible(true);var E=r.i18n.getText(e);this.oMessagePage.setText(E);}},setShowMoreResultsBusy:function(e){if(this.showMoreResultsLink){this.showMoreResultsLink.setBusy(e);}},getControllerName:function(){return"sap.ushell.components.appfinder.HierarchyApps";}});},true);
