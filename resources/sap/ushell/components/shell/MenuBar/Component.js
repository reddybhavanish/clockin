// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ushell/Config"],function(U,J,C){"use strict";return U.extend("sap.ushell.components.shell.MenuBar.Component",{metadata:{manifest:"json",library:"sap.ushell"},init:function(){U.prototype.init.apply(this,arguments);var m=new J();this.setModel(m,"menu");sap.ushell.Container.getServiceAsync("Menu").then(function(M){return Promise.all([M.isMenuEnabled(),M.getMenuEntries()]);}).then(function(r){var c;var i=r[0];var M=r[1];if(i){c=sap.ui.getCore().byId("menuBarComponentContainer");}if(c){m.setProperty("/",this._limitListDepth(M,3));c.setComponent(this);}if(C.last("/core/shell/model/currentState/stateName")!=="home"){c.setVisible(false);}}.bind(this));},_limitListDepth:function(l,d){if(d===0){return[];}return l.reduce(function(e,E){if(E.menuEntries){E.menuEntries=this._limitListDepth(E.menuEntries,d-1);}e.push(E);return e;}.bind(this),[]);}});});
