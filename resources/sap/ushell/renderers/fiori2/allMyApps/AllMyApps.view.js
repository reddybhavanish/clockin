// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/library","sap/ui/Device","sap/m/BusyIndicator","sap/m/SplitApp","sap/m/Label","sap/m/Link","sap/m/Text","sap/m/Page","sap/m/StandardListItem","sap/m/CustomListItem","sap/m/List","sap/m/VBox","sap/m/Bar","sap/m/ScrollContainer","sap/m/library","sap/ui/core/library","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/resources","sap/ushell/Config"],function(l,D,B,S,L,a,T,P,b,C,c,V,d,f,m,g,A,r,h){"use strict";var i=m.BarDesign,j=m.ListMode,k=m.ListType,n=m.SplitAppMode,o=g.TextAlign,p=l.AllMyAppsState;sap.ui.jsview("sap.ushell.renderers.fiori2.allMyApps.AllMyApps",{createContent:function(e){this.oMasterBusyIndicator=new B("allMyAppsMasterBusyIndicator",{size:"1rem"}).addStyleClass("sapUshellAllMyAppsBusyIndicator");this.oDetailBusyIndicator=new B("allMyAppsDetailBusyIndicator",{size:"1rem"}).addStyleClass("sapUshellAllMyAppsBusyIndicator");this.oSplitApp=new S("sapUshellAllMyAppsMasterDetail",{masterPages:[this.oMasterBusyIndicator,this.getMasterPartContent(e)],detailPages:[this.oDetailBusyIndicator,this.getEmptyDetailsContent(),this.getDetailsPartContent(e)],mode:{path:"/isPhoneWidth",formatter:function(I){return I?n.ShowHideMode:n.StretchCompressMode;}}}).addStyleClass("sapUshellAllMyAppsView");this.bAfterOpenHandlerCalled=false;return this.oSplitApp;},getEmptyDetailsContent:function(){var t,e;t=new L({text:r.i18n.getText("AllMyAppsEmptyText"),textAlign:o.Center}).addStyleClass("sapUshellAllMyAppsEmptyDetailsPageText");e=new P("sapUshellAllMyAppsEmptyDetailsPage",{content:[t],showHeader:false,enableScrolling:false});return e;},getMasterPartContent:function(e){var q;if(!this.oDataSourceList){this.oDataSourceListTemplate=new b({type:{parts:["allMyAppsModel>type","/allMyAppsMasterLevel"],formatter:function(t,s){var u=D.system.phone||((s===p.FirstLevel)&&(t!==sap.ushell.Container.getService("AllMyApps").getProviderTypeEnum().CATALOG));return u?k.Navigation:k.Active;}},title:"{allMyAppsModel>title}"});this._addCustomData(this.oDataSourceListTemplate,"aria-controls","sapUshellAllMyAppsDetailsPage");this.oDataSourceList=new c("sapUshellAllMyAppsDataSourcesList",{tooltip:"{i18n>catalogSelect_tooltip}",rememberSelections:true,mode:D.system.phone?j.None:j.SingleSelectMaster,items:{path:"allMyAppsModel>/AppsData",template:this.oDataSourceListTemplate},growingThreshold:100,showNoData:false,itemPress:[e.handleMasterListItemPress,e],selectionChange:[e.handleMasterListItemPress,e]});this._addCustomData(this.oDataSourceList,"role","navigation");}q=new P("sapUshellAllMyAppsMasterPage",{showHeader:false});q.addContent(this.oDataSourceList);return q;},getDetailsPartContent:function(q){var s=new V(),t=new L({text:"{allMyAppsModel>title}",tooltip:"{allMyAppsModel>title}"}),u=new L({text:"{allMyAppsModel>subTitle}",tooltip:"{allMyAppsModel>subTitle}",visible:{parts:["allMyAppsModel>subTitle"],formatter:function(e){return!!e;}}}),I,v,w;t.addStyleClass("sapUshellAllMyAppsItemTitle");u.addStyleClass("sapUshellAllMyAppsItemSubTitle");s.addItem(t);s.addItem(u);I=new C({content:s,type:k.Active,press:function(){q.onAppItemClick(this);}});I.addStyleClass("sapUshellAllMyAppsListItem");I.addEventDelegate({onsapenter:function(e){q.onAppItemClick(e.srcControl);},onsapspace:function(e){q.onAppItemClick(e.srcControl);}});this.oDetailsHeaderLabel=new L("sapUshellAllMyAppsDetailsHeaderLabel",{});v=new d("sapUshellDetailsPageHeaderBar",{contentLeft:this.oDetailsHeaderLabel,contentRight:[],contentMiddle:[],design:i.Header});this.oItemsContainerlist=new c("oItemsContainerlist",{items:{path:"allMyAppsModel>apps",template:I}});this.oItemsContainer=new f("allMyAppsScrollContainer",{horizontal:false,vertical:true,content:this.oItemsContainerlist}).addStyleClass("sapUshellAllMyAppsDetailsItemContainer");var x=[];this.oCustomLabel=new T({text:{path:"allMyAppsModel>sCustomLabel"}});x.push(this.oCustomLabel);if(h.last("/core/catalog/enabled")){this.oCustomLink=new a({text:{path:"allMyAppsModel>sCustomLink"},press:function(e){q.handleGroupPress(e);}});x.push(this.oCustomLink);}this.oCustomPanel=new V({visible:{parts:[{path:"allMyAppsModel>numberCustomTiles"}],formatter:function(e){return!!e;}},items:x});this.oCustomPanel.addStyleClass("sapUshellAllMyAppsCustomPanel");w=new P("sapUshellAllMyAppsDetailsPage",{content:[v,this.oItemsContainer,this.oCustomPanel],showHeader:false,enableScrolling:true});this._addCustomData(w,"role","applications");return w;},_afterOpen:function(){if(!this.bAfterOpenHandlerCalled){this.bAfterOpenHandlerCalled=true;if(D.system.desktop){this.getController().initKeyBoardNavigationHandling();}}},_addCustomData:function(I,K,v){I.addCustomData(new A({key:K,value:v,writeToDom:true}));},getControllerName:function(){return"sap.ushell.renderers.fiori2.allMyApps.AllMyApps";}});});
