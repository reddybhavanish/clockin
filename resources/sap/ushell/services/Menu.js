// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/utils"],function(U){"use strict";function M(){this._init.apply(this,arguments);}M.prototype._init=function(a){this.oAdapter=a;};M.prototype.isMenuEnabled=function(){return this.oAdapter.isMenuEnabled();};M.prototype.getMenuEntries=function(){if(!this._oMenuEntriesPromise){this._oMenuEntriesPromise=this.oAdapter.getMenuEntries().then(function(m){return m.map(function(o){o.uid=U.generateUniqueId([]);if(o.menuEntries){o.menuEntries.forEach(function(s){s.uid=U.generateUniqueId([]);});}return o;});});}return this._oMenuEntriesPromise;};M.prototype.getSpacesPagesHierarchy=function(){if(!this._oSpacesPagesHierarchyPromise){this._oSpacesPagesHierarchyPromise=this.getMenuEntries().then(function(m){return{spaces:m.reduce(function(s,o){var p;if(o.menuEntries&&o.menuEntries.length){p=this._getAccessiblePages(o.menuEntries);}else{p=this._getAccessiblePages([o]);}if(p.length){s.push({title:o.title,id:p[0].spaceId,pages:p.map(function(P){return{title:P.title,id:P.id};})});}return s;}.bind(this),[])};}.bind(this)).catch(function(){return{spaces:[]};});}return this._oSpacesPagesHierarchyPromise;};M.prototype._getAccessiblePages=function(m){return m.filter(function(o){return o&&o.type==="IBN"&&o.target&&o.target.semanticObject==="Launchpad"&&o.target.action==="openFLPPage";}).map(function(o){var s=o.target.parameters.find(function(P){return P.name==="spaceId";});var p=o.target.parameters.find(function(P){return P.name==="pageId";});return{title:o.title,id:p&&p.value,spaceId:s&&s.value};});};M.prototype.hasMultiplePages=function(s){return this.getSpacesPagesHierarchy().then(function(h){var S=h.spaces.find(function(a){return a.id===s;});return S&&S.pages.length>1;});};M.hasNoAdapter=false;return M;});
