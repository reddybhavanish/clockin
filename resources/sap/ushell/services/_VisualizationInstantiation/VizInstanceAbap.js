// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/services/_VisualizationInstantiation/VizInstance","sap/m/library"],function(V,m){"use strict";var L=m.LoadState;var a=V.extend("sap.ushell.ui.launchpad.VizInstanceAbap",{metadata:{library:"sap.ushell"},constructor:function(v){this._oVizData=v;V.prototype.constructor.call(this,v);},fragment:"sap.ushell.services._VisualizationInstantiation.VizInstanceAbap"});a.prototype.init=function(){this._oChipInstancePromise=sap.ushell.Container.getServiceAsync("PageBuilding").then(function(p){var f=p.getFactory();return f.createChipInstance({chipId:this._oVizData.instantiationData.chip.id,chip:this._oVizData.instantiationData.chip});}.bind(this));};a.prototype.load=function(i){return this._oChipInstancePromise.then(function(r){this._oChipInstance=r;return new Promise(this._oChipInstance.load);}.bind(this)).then(function(){if(i){var p=this._oChipInstance.getContract("preview");if(!p){return Promise.reject(new Error("The chip instance has no preview contract"));}p.setEnabled(true);}var v=this._oChipInstance.getImplementationAsSapui5();var w=parseInt(this._oChipInstance.getConfigurationParameter("col"),10)||1;var h=parseInt(this._oChipInstance.getConfigurationParameter("row"),10)||1;w=w*2;h=h*2;this.setWidth(w);this.setHeight(h);this._setContent(v);return Promise.resolve();}.bind(this)).catch(function(e){this.setState(L.Failed);return Promise.reject(e);}.bind(this));};a.prototype._setVisible=function(v){var o=this._oChipInstance&&!this._oChipInstance.isStub()&&this._oChipInstance.getContract("visible");if(o){o.setVisible(v);}};a.prototype.refresh=function(){if(this._oChipInstance){this._oChipInstance.refresh();}};a.prototype.setActive=function(b,r){this._setVisible(b);if(r){this.refresh();}return this.setProperty("active",b,false);};return a;});
