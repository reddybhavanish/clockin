// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/ushell/utils","sap/ui2/srvc/ODataWrapper","sap/ui2/srvc/ODataService"],function(i,O,q,u){"use strict";return function(){function c(j){var C;if(j&&!i(j)){C=JSON.stringify(j);return C.replace(/\{|\}|\\n|,/g,"\n");}return"";}this.createTicket=function(s){var d,b="/sap/opu/odata/UI2/INTEROP/",r="Messages",U,h,C,D;if(!s.text){throw new u.Error("Support Ticket data does not contain text member");}U=O.get("clientContext.navigationData.applicationInformation.url",s);h=O.get("clientContext.navigationData.navigationHash",s);C=O.get("clientContext.navigationData.tileDebugInfo",s);U=typeof U==="string"?U:"";h=typeof h==="string"?h:"";C=typeof C==="string"&&C.length>0?JSON.parse(C).catalogId||"":"";s.url=U;s.catalogId=C;s.hash=h;s.clientContext=c(s.clientContext);d=new q.Deferred();var o={baseUrl:b,"sap-language":sap.ushell.Container.getUser().getLanguage(),"sap-client":sap.ushell.Container.getLogonSystem().getClient()};D=new sap.ui2.srvc.createODataWrapper(o);sap.ui2.srvc.ODataService.call(this,D,function(){return false;});D.create(r,s,function(a){d.resolve(a.messageNumber);},function(e){d.reject(e);});return d.promise();};};},true);
