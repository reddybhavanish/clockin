//@ui5-bundle sap/ushell_abap/bootstrap/evo/core-min-0.js
sap.ui.predefine('sap/ushell/components/DestroyHelper',[],function(){"use strict";function d(t){var i;if(t&&t.content){for(i=0;i<t.content.length;i++){if(t.content[i].destroy){t.content[i].destroy();}}}}function a(t){var i;if(t){for(i=0;i<t.length;i++){d(t[i]);}}}function b(A){if(A){a(A.tiles);}}function c(A){var i;if(A){for(i=0;i<A.length;i++){b(A[i]);}}}return{destroyFLPAggregationModel:b,destroyFLPAggregationModels:c,destroyTileModel:d,destroyTileModels:a};});
sap.ui.predefine('sap/ushell/components/GroupsHelper',[],function(){'use strict';return{getIndexOfGroup:a,getModelPathOfGroup:g};function g(G,s){var i=a(G,s);if(i<0){return null;}return"/groups/"+i;}function a(G,s){for(var i=0;i<G.length;i++){if(G[i].groupId===s)return i;}return-1;}});
/*
 * ! OpenUI5
 * (c) Copyright 2009-2020 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.predefine('sap/ui/base/ManagedObjectObserver',['sap/ui/base/Object','sap/ui/base/ManagedObject','sap/ui/base/EventProvider',"sap/base/util/array/uniqueSort","sap/ui/thirdparty/jquery"],function(B,M,E,u,q){"use strict";var a=B.extend("sap.ui.base.ManagedObjectObserver",{constructor:function(C){if(!C&&typeof C!=="function"){throw new Error("Missing callback function in ManagedObjectObserver constructor");}this._fnCallback=C;}});a.prototype.observe=function(i,C){if(!(i instanceof M)){if(i==null){return;}throw new TypeError("ManagedObjectObserver can only handle ManagedObjects, but observe was called for "+i);}o(i,C);c(i,this,C);};a.prototype.unobserve=function(i,C){if(!(i instanceof M)){if(i==null){return;}throw new TypeError("ManagedObjectObserver can only handle ManagedObjects, but unobserve was called for "+i);}if(C){o(i,C);}r(i,this,C);};a.prototype.isObserved=function(i,C){if(!(i instanceof M)){if(i==null){return false;}throw new TypeError("ManagedObjectObserver can only handle ManagedObjects, but isObserved was called for "+i);}return d(i,this,C);};a.prototype.disconnect=function(){e(this);};a.prototype.getConfiguration=function(i){return g(i,this);};var O={},t=Object.create(null);O.propertyChange=function(i,n,v,N){h("properties",i,n,function(){return{type:"property",old:v,current:N};});};O.aggregationChange=function(i,n,s,v){h("aggregations",i,n,function(){return{type:"aggregation",mutation:s,children:Array.isArray(v)?v:null,child:!Array.isArray(v)?v:null};});};O.parentChange=function(i,n,s,p){h("parent",i,n,function(){return{type:"parent",mutation:s,parent:p};});var P=s==="unset"?"remove":"insert";O.aggregationChange(p,n,P,i);};O.associationChange=function(i,n,s,I){h("associations",i,n,function(){return{type:"association",mutation:s,ids:I};});};O.eventChange=function(i,n,s,L,F,D){h("events",i,n,function(){return{type:"event",mutation:s,listener:L,func:F,data:D};});};O.bindingChange=function(i,n,s,p,v){h("bindings",i,n,function(){return{type:"binding",mutation:s,bindingInfo:p,memberType:v};});};O.objectDestroyed=function(i){h("destroy",i,null,function(){return{type:"destroy"};});var I=i.getId();if(t[I]){i.detachEvent("EventHandlerChange",H);delete t[I];}delete i._observer;};function h(T,n,N,C){var I=n.getId(),p=t[I];if(p){var s;for(var i=0;i<p.listeners.length;i++){if(b(p.configurations[i],T,N)){if(!s){s=C();s.name=N;s.object=n;}var L=p.listeners[i];L._fnCallback(s);}}}}function b(C,T,n){if(C==null||!T){return false;}if(T!="destroy"&&T!="parent"&&!n){return false;}return C[T]===true||(Array.isArray(C[T])&&C[T].indexOf(n)>-1);}function c(T,L,C){f(T,L,C,false);}function g(T,L){var i=T.getId();var n=t[i];if(n&&n.listeners){var I=n.listeners.indexOf(L);if(I>=0){var C=q.extend(true,{},n.configurations[I]);return C;}}return null;}function r(T,L,C){C=C||g(T,L);f(T,L,C,true);}function d(T,L,C){var i=T.getId(),n=t[i];C=C||g(T,L);if(!n){return false;}var I=n.listeners.indexOf(L);if(I===-1){return false;}else{return l(n.configurations[I].properties,C.properties)&&l(n.configurations[I].aggregations,C.aggregations)&&l(n.configurations[I].associations,C.associations)&&l(n.configurations[I].bindings,C.bindings)&&l(n.configurations[I].events,C.events)&&m(n.configurations[I].destroy,C.destroy)&&m(n.configurations[I].parent,C.parent);}}function e(L){for(var n in t){var T=t[n];for(var i=0;i<T.listeners.length;i++){if(T.listeners[i]===L){T.listeners.splice(i,1);T.configurations.splice(i,1);}}if(T.listeners&&T.listeners.length===0){delete t[n];T.object._observer=undefined;}}}function f(T,L,C,R){var i=T.getId(),n=t[i],p,I;if(R){if(!n){return;}I=n.listeners.indexOf(L);if(I>=0){p=n.configurations[I];}}else{if(!n){n=t[i]={listeners:[],configurations:[],object:T};}I=n.listeners.indexOf(L);if(I===-1){n.listeners.push(L);n.configurations.push(C);}else{p=n.configurations[I];}}if(p){p.properties=p.properties||[];k(p.properties,C.properties,R);p.aggregations=p.aggregations||[];k(p.aggregations,C.aggregations,R);p.associations=p.associations||[];k(p.associations,C.associations,R);p.bindings=p.bindings||[];k(p.bindings,C.bindings,R);p.events=p.events||[];k(p.events,C.events,R);if(C.destroy!=null){if(R){delete p.destroy;}else{p.destroy=C.destroy;}}if(C.parent!=null){if(R){delete p.parent;}else{p.parent=C.parent;}}}var s=j(T,"events");if(T._observer&&R){if(!s&&E.hasListener(T,"EventHandlerChange",H)){T.detachEvent("EventHandlerChange",H);}if(!s&&!j(T,"properties")&&!j(T,"aggregations")&&!j(T,"associations")&&!j(T,"destroy")&&!j(T,"parent")&&!j(T,"bindings")){delete T._observer;delete t[i];}}else if(!T._observer&&!R){if(s&&!E.hasListener(T,"EventHandlerChange",H)){T.attachEvent("EventHandlerChange",H);}T._observer=O;}}function j(T,s){var i=T.getId(),n=t[i];if(n){var C=n.configurations.filter(function(p){return p.hasOwnProperty(s)&&p[s]&&(p[s]===true||p[s].length>0);});return C.length>0;}return false;}function H(i){var T=i.getSource(),s=i.mParameters.EventId;if(T.getMetadata().hasEvent(s)){if(i.mParameters.type==="listenerAttached"){O.eventChange(T,s,"insert",i.mParameters.listener,i.mParameters.func,i.mParameters.data);}else if(i.mParameters.type==="listenerDetached"){O.eventChange(T,s,"remove",i.mParameters.listener,i.mParameters.func,i.mParameters.data);}}}function k(n,A,R){if(!A){return;}for(var i=0;i<A.length;i++){var I=n.indexOf(A[i]);if(I>-1&&R){n.splice(I,1);}else if(I===-1&&!R){n.push(A[i]);}}}function l(F,s){if(!Array.isArray(s)||s.length==0){return true;}if(!Array.isArray(F)||F.length==0){return false;}var U=u(F.concat(s));return F.length===U.length;}function m(i,C){if(C==null){return true;}return i===C;}function o(i,C){var n=i.getMetadata(),p=Object.keys(n.getAllProperties()),A=Object.keys(n.getAllAggregations()),s=Object.keys(n.getAllAssociations()),v=u(p.concat(A)),w=Object.keys(n.getAllEvents());C.properties=C.properties===true?p:C.properties;C.aggregations=C.aggregations===true?A:C.aggregations;C.associations=C.associations===true?s:C.associations;C.bindings=C.bindings===true?v:C.bindings;C.events=C.events===true?w:C.events;C.destroy=(C.destroy==null)?false:C.destroy;C.parent=(C.parent==null)?false:C.parent;}return a;});
sap.ui.predefine('sap/ui/model/base/ManagedObjectModel',['../json/JSONModel','../json/JSONPropertyBinding','../json/JSONListBinding','sap/ui/base/ManagedObject','sap/ui/base/ManagedObjectObserver','../Context','../ChangeReason',"sap/base/util/uid","sap/base/Log","sap/base/util/isPlainObject","sap/base/util/deepClone"],function(J,a,b,M,c,C,d,u,L,e,f){"use strict";var g="@custom",I="--";function _(n,o,A,O){var p=A.get(o)||[],q,r;for(var i=0;i<p.length;i++){q=p[i];if(!(q instanceof M)){continue;}r=true;if(O){n._oObserver.observe(q,{properties:true,aggregations:true});}else{n._oObserver.unobserve(q,{properties:true,aggregations:true});}var s=q.getMetadata().getAllAggregations();for(var K in s){_(n,q,s[K],O);}}if(r){var K=o.getId()+"/@"+A.name;if(O){if(!n._mObservedCount.aggregations[K]){n._mObservedCount.aggregations[K]=0;}n._mObservedCount.aggregations[K]++;}else{delete n._mObservedCount.aggregations[K];}}}function h(n){var s,i=n.length-1,p=[];while(!(n[i].node instanceof M)){if(s){p.splice(0,0,s);}s=n[i].path;i--;}return[n[i].node,n[i+1],p,s];}function j(o){var D="",p;var t=typeof o;if(o==null||(t!="object"&&t!="function")){D=o;}else if(e(o)){D=JSON.stringify(o);}else if(o instanceof M){D=o.getId();for(p in o.mProperties){D=D+"$"+j(o.mProperties[p]);}}else if(Array.isArray(o)){for(var i=0;o.length;i++){D=D+"$"+j(o);}}else{L.warning("Could not stringify object "+o);D="$";}return D;}var k=b.extend("sap.ui.model.base.ManagedObjectModelAggregationBinding",{constructor:function(){b.apply(this,arguments);this._getOriginOfManagedObjectModelBinding();},_mightBeAffectedByChangesInside:function(o){while(o){if(o.getParent()===this._oOriginMO){return true;}o=o.getParent();}return false;},getEntryKey:function(o){var O=o.getObject();if(O instanceof M){return O.getId();}return b.prototype.getEntryKey.apply(this,arguments);},getEntryData:function(o){var O=o.getObject();if(O instanceof M){return j(O);}return b.prototype.getEntryData.apply(this,arguments);},_getContexts:function(s,i){var S;if(this._oAggregation){var o=this._oOriginMO.getBinding(this._sMember);if(o){var n=o.getModel();S=n.iSizeLimit;}var B=this._oOriginMO.getBindingInfo(this._sMember);if(B&&s>=0&&i&&S&&i>S){var U=false;if(s!=B.startIndex){B.startIndex=s;U=true;}if(i!=B.length){B.length=i;U=true;}if(U){this._oAggregation.update(this._oOriginMO,"change");}}}return b.prototype._getContexts.apply(this,arguments);},_getOriginOfManagedObjectModelBinding:function(){if(!this._oOriginMO){var o=this.oModel,n=[];o._getObject(this.sPath,this.oContext,n);var v=h(n);this._oOriginMO=v[0];this._aPartsInJSON=v[2];this._sMember=v[3];this._oAggregation=this._oOriginMO.getMetadata().getAggregation(this._sMember);}},getLength:function(){if(this._aPartsInJSON.length==0){var i=this._oOriginMO.getBinding(this._sMember);if(i&&i.isA("sap.ui.model.ListBinding")){return i.getLength();}}return b.prototype.getLength.apply(this,arguments);},isLengthFinal:function(){if(this._aPartsInJSON.length==0){var i=this._oOriginMO.getBinding(this._sMember);if(i&&i.isA("sap.ui.model.ListBinding")){return i.isLengthFinal();}}return true;}});var l=a.extend("sap.ui.model.base.ManagedObjectModelPropertyBinding");var m=J.extend("sap.ui.model.base.ManagedObjectModel",{constructor:function(o,D){if(!D&&typeof D!="object"){D={};}D[g]={};this._oObject=o;this._mObservedCount={properties:{},aggregations:{}};this.mListBinding={};J.apply(this,[D]);this._oObserver=new c(this.observerChanges.bind(this));}});m.prototype.getAggregation=J.prototype.getProperty;m.prototype.setData=function(D,i){var n={};n[g]=D;J.prototype.setData.apply(this,[n,i]);};m.prototype.getJSON=function(){return JSON.stringify(this.oData[g]);};m.prototype.setProperty=function(p,v,o,A){var r=this.resolve(p,o),n,O,P;if(!r){return false;}if(r.indexOf("/"+g)===0){return J.prototype.setProperty.apply(this,arguments);}n=r.lastIndexOf("/");O=r.substring(0,n||1);P=r.substr(n+1);var N=[],q=this._getObject(O,null,N);if(q){if(q instanceof M){var s=q.getMetadata().getManagedProperty(P);if(s){if(s.get(q)!==v){s.set(q,v);var F=function(B){var p=this.resolve(B.sPath,B.oContext);return p?p.startsWith(r):false;}.bind(this);this.checkUpdate(false,A,F);return true;}}else{L.warning("The setProperty method only supports properties, the path "+r+" does not point to a property",null,"sap.ui.model.base.ManagedObjectModel");}}else if(q[P]!==v){var V=h(N);var t=f(V[1].node),w=V[2];var x=t;for(var i=0;i<w.length;i++){x=x[w[i]];}x[P]=v;var y="/"+P;if(w.length>0){y="/"+w.join("/")+y;}var D=r.lastIndexOf(y);var z=r.substr(0,D);return this.setProperty(z,t,o);}}return false;};m.prototype.addBinding=function(B){J.prototype.addBinding.apply(this,arguments);if(B instanceof k){var A=B.sPath.replace("/","");this.mListBinding[A]=B;}B.checkUpdate(false);};m.prototype.removeBinding=function(B){J.prototype.removeBinding.apply(this,arguments);if(B instanceof k){var A=B.sPath.replace("/","");delete this.mListBinding[A];}this._observeBeforeEvaluating(B,false);};m.prototype.firePropertyChange=function(p){if(p.reason===d.Binding){p.resolvedPath=this.resolve(p.path,p.context);}J.prototype.firePropertyChange.call(this,p);};m.prototype.bindAggregation=function(p,o,P){return J.prototype.bindProperty.apply(this,arguments);};m.prototype.bindProperty=function(p,o,P){var B=new l(this,p,o,P);return B;};m.prototype.bindList=function(p,o,s,F,P){var B=new k(this,p,o,s,F,P);return B;};m.prototype.getManagedObject=function(p,o){if(p instanceof C){o=p;p=o.getPath();}var O=this.getProperty(p,o);if(O instanceof M){return O;}return null;};m.prototype.getRootObject=function(){return this._oObject;};m.prototype._observePropertyChange=function(o,p){if(!o||!p){return;}var K=o.getId()+"/@"+p.name;if(!this._oObserver.isObserved(o,{properties:[p.name]})){this._oObserver.observe(o,{properties:[p.name]});this._mObservedCount.properties[K]=1;}else{this._mObservedCount.properties[K]++;}};m.prototype._unobservePropertyChange=function(o,p){if(!o||!p){return;}var K=o.getId()+"/@"+p.name;this._mObservedCount.properties[K]--;if(this._mObservedCount.properties[K]==0){this._oObserver.unobserve(o,{properties:[p.name]});delete this._mObservedCount.properties[K];}};m.prototype._observeAggregationChange=function(o,A){if(!o||!A){return;}var K=o.getId()+"/@"+A.name;if(!this._oObserver.isObserved(o,{aggregations:[A.name]})){this._oObserver.observe(o,{aggregations:[A.name]});this._mObservedCount.aggregations[K]=1;_(this,o,A,true);}else{this._mObservedCount.aggregations[K]++;}};m.prototype._unobserveAggregationChange=function(o,A){if(!o||!A){return;}var K=o.getId()+"/@"+A.name;this._mObservedCount.aggregations[K]--;if(this._mObservedCount.aggregations[K]==0){this._oObserver.unobserve(o,{aggregations:[A.name]});delete this._mObservedCount.aggregations[K];}};m.prototype._createId=function(i){var o=this._oObject;if(typeof o.createId==="function"){return o.createId(i);}if(!i){return o.getId()+I+u();}if(i.indexOf(o.getId()+I)!=0){return o.getId()+I+i;}return i;};m.prototype._getSpecialNode=function(n,s,p,P){if(n instanceof M){if(s==="className"){if(n.getMetadata){return n.getMetadata().getName();}else{return typeof n;}}else if(s==="id"){return n.getId();}else if(s==="metadataContexts"){return n._oProviderData;}}else if(s==="binding"&&p&&P){return p.getBinding(P);}else if(s==="bound"&&p&&P){return p.isBound(P);}else if(s==="bindingInfo"&&p&&P){return p.getBindingInfo(P);}else if(Array.isArray(n)){if(s==="length"){return n.length;}else if(s.indexOf("id=")===0){var o=s.substring(3),F=null;for(var i=0;i<n.length;i++){if(n[i].getId()===this._createId(o)||n[i].getId()===o){F=n[i];break;}}return F;}}return null;};m.prototype._getObject=function(p,o,n){var N=this._oObject,r="",t=this;if(n){n.push({path:"/",node:N});}this.aBindings.forEach(function(B){if(!B._bAttached){t._observeBeforeEvaluating(B,true);}});if(typeof p==="string"&&p.indexOf("/")!=0&&!o){return null;}if(o instanceof M){N=o;r=p;}else if(!o||o instanceof C){r=this.resolve(p,o);if(!r){return N;}if(r.indexOf("/"+g)===0){return J.prototype._getObject.apply(this,[p,o]);}}else{N=o;r=p;}if(!N){return null;}var P=r.split("/"),i=0;if(!P[0]){i++;}var q=null,s=null,v;while(N!==null&&P[i]){v=P[i];if(v=="id"){v="@id";}if(v.indexOf("@")===0){N=this._getSpecialNode(N,v.substring(1),q,s);}else if(N instanceof M){var w=N.getMetadata();if(w.isInstanceOf("sap.ui.core.IDScope")&&v.indexOf("#")===0){N=N.byId(v.substring(1));}else{q=N;s=v;var x=w.getManagedProperty(v);if(x){N=x.get(N);}else{var A=w.getManagedAggregation(v);if(A){N=A.get(N);}else{if(N&&N[v]&&typeof N[v]==="function"){N=N[v]();}else{N=null;}}}}}else if(Array.isArray(N)||e(N)){N=N[v];}else{if(N&&N[v]&&typeof N[v]==="function"){N=N[v]();}else{N=null;}}if(n){n.push({path:v,node:N});}i++;}return N;};m.prototype.destroy=function(){for(var n in this._mAggregationObjects){var o=this._mAggregationObjects[n];if(o.object.invalidate.fn){o.object.invalidate=o.object.invalidate.fn;}}J.prototype.destroy.apply(this,arguments);};m.prototype._observeBeforeEvaluating=function(B,o){if(!B.isResolved()){return;}var p=B.getPath();var i=B.getContext(),n=this._oObject,r;if(i instanceof M){n=i;r=p;}else if(!i||i instanceof C){r=this.resolve(p,i);if(!r){return;}if(r.indexOf("/"+g)===0){return;}}else{return;}var P=r.split("/");if(!P[0]){P.shift();}var s=P[0];if(n.getMetadata().isInstanceOf("sap.ui.core.IDScope")&&s.indexOf("#")===0){n=n.byId(s.substring(1));s=P[1];}if(n instanceof M){var N=n.getMetadata(),q=N.getManagedProperty(s);if(q){if(o===true){this._observePropertyChange(n,q);}else if(o===false){this._unobservePropertyChange(n,q);}}else{var A=N.getAggregation(s)||N.getAllPrivateAggregations()[s];if(A){if(o===true){this._observeAggregationChange(n,A);}else if(o===false){this._unobserveAggregationChange(n,A);}}}B._bAttached=o;}};m.prototype.observerChanges=function(o){if(o.type=="aggregation"){var A={};if(o.child instanceof M){A=o.child.getMetadata().getAllAggregations();}if(o.mutation=="insert"){if(o.child instanceof M){this._oObserver.observe(o.child,{properties:true,aggregations:true});}for(var K in A){_(this,o.child,A[K],true);}if(this.mListBinding[o.name]){var i=this._oObject.getBinding(o.name);var n=this._oObject.getAggregation(o.name);if(i&&i.getCurrentContexts().length!=n.length){return;}}}else{if(o.child instanceof M){this._oObserver.unobserve(o.child,{properties:true,aggregations:true});}for(var K in A){_(this,o.child,A[K],false);}}}else if(o.type==="property"){this.aBindings.forEach(function(B){if(B._mightBeAffectedByChangesInside&&B._mightBeAffectedByChangesInside(o.object)){B.checkUpdate(true);}});}this.checkUpdate();};m.prototype.checkUpdate=function(F,A,i){if(A){if(!this.sUpdateTimer){this.sUpdateTimer=setTimeout(function(){this.checkUpdate(F,false,i);}.bind(this),0);}return;}if(this.sUpdateTimer){clearTimeout(this.sUpdateTimer);this.sUpdateTimer=null;}var B=this.aBindings.slice(0);B.forEach(function(o){if(!i||i(o)){o.checkUpdate(F);}});};return m;});
/*!
 * @copyright@
 */
sap.ui.predefine('sap/m/NumericContentRenderer',["sap/m/library"],function(l){"use strict";var N={};N.render=function(r,c){var s=c.getState();var w=c.getWithMargin();var W=w?"":"WithoutMargin";r.write("<div");r.writeControlData(c);var t=c.getTooltip_AsString();if(typeof t!=="string"){t="";}r.writeAttributeEscaped("aria-label",t);r.writeAttribute("role","img");if(s===l.LoadState.Failed||s===l.LoadState.Loading){r.writeAttribute("aria-disabled","true");}if(c.getAnimateTextChange()){r.addClass("sapMNCAnimation");}if(c.getWidth()){r.addStyle("width",c.getWidth());}r.writeStyles();r.addClass("sapMNC");r.addClass(W);if(c.hasListeners("press")){r.writeAttribute("tabindex","0");r.addClass("sapMPointer");}r.writeClasses();r.write(">");r.write("<div");r.addClass("sapMNCInner");r.addClass(W);r.writeClasses();r.write(">");this._renderValue(r,c,W);r.write("</div>");r.write("</div>");};N._prepareAndRenderIcon=function(r,c,i,n){if(i){var s,L=l.LoadState,C=c.getState();for(s in L){if(L.hasOwnProperty(s)&&s!==C){i.removeStyleClass(s);}else if(L.hasOwnProperty(s)&&s===C){i.addStyleClass(s);}}i.addStyleClass("sapMNCIconImage");var S={sapMNCLargeFontSize:false,sapMNCMediumFontSize:false,sapMNCSmallFontSize:false};S[n]=true;Object.keys(S).forEach(function(k){i.toggleStyleClass(k,S[k]);});r.renderControl(i);}};N._renderScaleAndIndicator=function(r,c,w,v,s,n){var i=l.DeviationIndicator.None!==c.getIndicator()&&v!=="";var S=s&&v;if(i||S){var a=c.getState();var C=c.getValueColor();r.write("<div");r.writeAttribute("id",c.getId()+"-indicator");r.addClass("sapMNCIndScale");r.addClass(w);r.addClass(C);r.addClass(a);if(n){r.addClass(n);}r.writeClasses();r.write(">");r.renderControl(c._oIndicatorIcon);if(S){r.write("<div");r.writeAttribute("id",c.getId()+"-scale");r.addClass("sapMNCScale");r.addClass(a);r.addClass(C);r.writeClasses();r.write(">");r.writeEscaped(s);r.write("</div>");}r.write("</div>");}};N._renderValue=function(r,c,w){var v=c.getValue();var s=c.getScale();if(c.getFormatterValue()){var f=c._parseFormattedValue(v);s=f.scale;v=f.value;}var e=c.getNullifyValue()?"0":"";r.write("<div");r.writeAttribute("id",c.getId()+"-value");r.addClass("sapMNCValue");r.addClass(w);r.addClass(c.getValueColor());r.addClass(c.getState());r.writeClasses();r.write(">");var m=c._getMaxDigitsData();this._prepareAndRenderIcon(r,c,c._oIcon,m.fontClass);var C=c.getTruncateValueTo()||m.maxLength;r.write("<span id=\""+c.getId()+"-value-inner\"");if(m.fontClass){r.addClass(m.fontClass);}r.writeClasses();r.write(">");if(v.length>=C&&(v[C-1]==="."||v[C-1]===",")){r.writeEscaped(v.substring(0,C-1));}else{r.writeEscaped(v?v.substring(0,C):e);}r.write("</span>");this._renderScaleAndIndicator(r,c,w,v,s,m.fontClass);r.write("</div>");};return N;},true);
sap.ui.predefine('sap/ui/generic/app/navigation/service/SelectionVariant',["./NavError","sap/ui/base/Object","sap/ui/thirdparty/jquery","sap/base/Log"],function(E,B,q,L){"use strict";var S=B.extend("sap.ui.generic.app.navigation.service.SelectionVariant",{_rVALIDATE_SIGN:new RegExp("[E|I]"),_rVALIDATE_OPTION:new RegExp("EQ|NE|LE|GE|LT|GT|BT|CP"),constructor:function(s){this._mParameters={};this._mSelectOptions={};this._sId="";if(s!==undefined){if(typeof s==="string"){this._parseFromString(s);}else if(typeof s==="object"){this._parseFromObject(s);}else{throw new E("SelectionVariant.INVALID_INPUT_TYPE");}}},getID:function(){return this._sId;},setID:function(i){this._sId=i;},setText:function(n){if(typeof n!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}this._sText=n;},getText:function(){return this._sText;},setParameterContextUrl:function(u){if(typeof u!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}this._sParameterCtxUrl=u;},getParameterContextUrl:function(){return this._sParameterCtxUrl;},getFilterContextUrl:function(){return this._sFilterCtxUrl;},setFilterContextUrl:function(u){if(typeof u!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}this._sFilterCtxUrl=u;},addParameter:function(n,v){if(typeof n!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(typeof v!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(n===""){throw new E("SelectionVariant.PARAMETER_WITHOUT_NAME");}if(this._mSelectOptions[n]){throw new E("SelectionVariant.PARAMETER_SELOPT_COLLISION");}this._mParameters[n]=v;return this;},removeParameter:function(n){if(typeof n!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(n===""){throw new E("SelectionVariant.PARAMETER_WITHOUT_NAME");}delete this._mParameters[n];return this;},renameParameter:function(n,N){if(typeof n!=="string"||typeof N!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(n===""||N===""){throw new E("SelectionVariant.PARAMETER_WITHOUT_NAME");}if(this._mParameters[n]!==undefined){if(this._mSelectOptions[N]){throw new E("SelectionVariant.PARAMETER_SELOPT_COLLISION");}if(this._mParameters[N]){throw new E("SelectionVariant.PARAMETER_COLLISION");}this._mParameters[N]=this._mParameters[n];delete this._mParameters[n];}return this;},getParameter:function(n){if(typeof n!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}return this._mParameters[n];},getParameterNames:function(){return Object.keys(this._mParameters);},addSelectOption:function(p,s,o,l,h){if(typeof p!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(p===""){throw new E("SelectionVariant.INVALID_PROPERTY_NAME");}if(typeof s!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(typeof o!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(typeof l!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(o==="BT"&&typeof h!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(!this._rVALIDATE_SIGN.test(s.toUpperCase())){throw new E("SelectionVariant.INVALID_SIGN");}if(!this._rVALIDATE_OPTION.test(o.toUpperCase())){throw new E("SelectionVariant.INVALID_OPTION");}if(this._mParameters[p]){throw new E("SelectionVariant.PARAMETER_SELOPT_COLLISION");}if(o!=="BT"){if((h!==undefined)&&(h!=="")&&(h!==null)){throw new E("SelectionVariant.HIGH_PROVIDED_THOUGH_NOT_ALLOWED");}}if(this._mSelectOptions[p]===undefined){this._mSelectOptions[p]=[];}var e={Sign:s.toUpperCase(),Option:o.toUpperCase(),Low:l};if(o==="BT"){e.High=h;}else{e.High=null;}for(var i=0;i<this._mSelectOptions[p].length;i++){var a=this._mSelectOptions[p][i];if(a.Sign===e.Sign&&a.Option===e.Option&&a.Low===e.Low&&a.High===e.High){return this;}}this._mSelectOptions[p].push(e);return this;},removeSelectOption:function(n){if(typeof n!=="string"){throw new E("SelectionVariant.SELOPT_WRONG_TYPE");}if(n===""){throw new E("SelectionVariant.SELOPT_WITHOUT_NAME");}delete this._mSelectOptions[n];return this;},renameSelectOption:function(n,N){if(typeof n!=="string"||typeof N!=="string"){throw new E("SelectionVariant.SELOPT_WRONG_TYPE");}if(n===""||N===""){throw new E("SelectionVariant.SELOPT_WITHOUT_NAME");}if(this._mSelectOptions[n]!==undefined){if(this._mSelectOptions[N]){throw new E("SelectionVariant.SELOPT_COLLISION");}if(this._mParameters[N]){throw new E("SelectionVariant.PARAMETER_SELOPT_COLLISION");}this._mSelectOptions[N]=this._mSelectOptions[n];delete this._mSelectOptions[n];}return this;},getSelectOption:function(p){if(typeof p!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}if(p===""){throw new E("SelectionVariant.INVALID_PROPERTY_NAME");}var e=this._mSelectOptions[p];if(!e){return undefined;}return JSON.parse(JSON.stringify(e));},getSelectOptionsPropertyNames:function(){return Object.keys(this._mSelectOptions);},getPropertyNames:function(){return this.getParameterNames().concat(this.getSelectOptionsPropertyNames());},massAddSelectOption:function(p,s){if(!Array.isArray(s)){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}for(var i=0;i<s.length;i++){var o=s[i];this.addSelectOption(p,o.Sign,o.Option,o.Low,o.High);}return this;},getValue:function(n){var v=this.getSelectOption(n);if(v!==undefined){return v;}var p=this.getParameter(n);if(p!==undefined){v=[{Sign:"I",Option:"EQ",Low:p,High:null}];return v;}return undefined;},isEmpty:function(){return this.getParameterNames().length===0&&this.getSelectOptionsPropertyNames().length===0;},toJSONObject:function(){var e={Version:{Major:"1",Minor:"0",Patch:"0"},SelectionVariantID:this._sId};if(this._sParameterCtxUrl){e.ParameterContextUrl=this._sParameterCtxUrl;}if(this._sFilterCtxUrl){e.FilterContextUrl=this._sFilterCtxUrl;}if(this._sText){e.Text=this._sText;}else{e.Text="Selection Variant with ID "+this._sId;}this._determineODataFilterExpression(e);this._serializeParameters(e);this._serializeSelectOptions(e);return e;},toJSONString:function(){return JSON.stringify(this.toJSONObject());},_determineODataFilterExpression:function(e){e.ODataFilterExpression="";},_serializeParameters:function(e){if(this._mParameters.length===0){return;}e.Parameters=[];q.each(this._mParameters,function(p,P){var o={PropertyName:p,PropertyValue:P};e.Parameters.push(o);});},_serializeSelectOptions:function(e){if(this._mSelectOptions.length===0){return;}e.SelectOptions=[];q.each(this._mSelectOptions,function(p,a){var s={PropertyName:p,Ranges:a};e.SelectOptions.push(s);});},_parseFromString:function(j){if(j===undefined){throw new E("SelectionVariant.UNABLE_TO_PARSE_INPUT");}if(typeof j!=="string"){throw new E("SelectionVariant.INVALID_INPUT_TYPE");}var i=JSON.parse(j);this._parseFromObject(i);},_parseFromObject:function(i){if(i.SelectionVariantID===undefined){L.warning("SelectionVariantID is not defined");i.SelectionVariantID="";}this.setID(i.SelectionVariantID);if(i.ParameterContextUrl!==undefined&&i.ParameterContextUrl!==""){this.setParameterContextUrl(i.ParameterContextUrl);}if(i.FilterContextUrl!==undefined&&i.FilterContextUrl!==""){this.setFilterContextUrl(i.FilterContextUrl);}if(i.Text!==undefined){this.setText(i.Text);}if(i.Parameters){this._parseFromStringParameters(i.Parameters);}if(i.SelectOptions){this._parseFromStringSelectOptions(i.SelectOptions);}},_parseFromStringParameters:function(p){q.each(p,q.proxy(function(i,e){this.addParameter(e.PropertyName,e.PropertyValue);},this));},_parseFromStringSelectOptions:function(s){q.each(s,q.proxy(function(i,o){if(!o.Ranges){L.warning("Select Option object does not contain a Ranges entry; ignoring entry");return true;}if(!Array.isArray(o.Ranges)){throw new E("SelectionVariant.SELECT_OPTION_RANGES_NOT_ARRAY");}q.each(o.Ranges,q.proxy(function(I,r){this.addSelectOption(o.PropertyName,r.Sign,r.Option,r.Low,r.High);},this));},this));}});return S;},true);
/*!
 * @license
 * Lodash (Custom Build) <https://lodash.com/>
 * Build: `lodash strict include="omit,uniq,uniqBy,uniqWith,intersection,intersectionBy,intersectionWith,pick,pickBy,debounce,throttle,max,min,castArray,curry,merge,mergeWith"`
 * Copyright JS Foundation and other contributors <https://js.foundation/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */
sap.ui.predefine('sap/base/util/restricted/_/lodash.custom',function(){'use strict';var u;var V='4.17.10';var L=200;var F='Expected a function';var H='__lodash_hash_undefined__';var M=500;var P='__lodash_placeholder__';var C=1,a=2,b=4;var c=1,d=2;var W=1,f=2,g=4,h=8,i=16,j=32,k=64,l=128,m=256,o=512;var p=800,q=16;var I=1/0,r=9007199254740991,s=1.7976931348623157e+308,N=0/0;var t=4294967295;var w=[['ary',l],['bind',W],['bindKey',f],['curry',h],['curryRight',i],['flip',o],['partial',j],['partialRight',k],['rearg',m]];var v='[object Arguments]',x='[object Array]',y='[object AsyncFunction]',z='[object Boolean]',A='[object Date]',B='[object Error]',D='[object Function]',E='[object GeneratorFunction]',G='[object Map]',J='[object Number]',K='[object Null]',O='[object Object]',Q='[object Promise]',R='[object Proxy]',S='[object RegExp]',T='[object Set]',U='[object String]',X='[object Symbol]',Y='[object Undefined]',Z='[object WeakMap]';var $='[object ArrayBuffer]',_='[object DataView]',a1='[object Float32Array]',b1='[object Float64Array]',c1='[object Int8Array]',d1='[object Int16Array]',e1='[object Int32Array]',f1='[object Uint8Array]',g1='[object Uint8ClampedArray]',h1='[object Uint16Array]',i1='[object Uint32Array]';var j1=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,k1=/^\w*$/,l1=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;var m1=/[\\^$.*+?()[\]{}|]/g;var n1=/^\s+|\s+$/g;var o1=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,p1=/\{\n\/\* \[wrapped with (.+)\] \*/,q1=/,? & /;var r1=/\\(\\)?/g;var s1=/\w*$/;var t1=/^[-+]0x[0-9a-f]+$/i;var u1=/^0b[01]+$/i;var v1=/^\[object .+?Constructor\]$/;var w1=/^0o[0-7]+$/i;var x1=/^(?:0|[1-9]\d*)$/;var y1={};y1[a1]=y1[b1]=y1[c1]=y1[d1]=y1[e1]=y1[f1]=y1[g1]=y1[h1]=y1[i1]=true;y1[v]=y1[x]=y1[$]=y1[z]=y1[_]=y1[A]=y1[B]=y1[D]=y1[G]=y1[J]=y1[O]=y1[S]=y1[T]=y1[U]=y1[Z]=false;var z1={};z1[v]=z1[x]=z1[$]=z1[_]=z1[z]=z1[A]=z1[a1]=z1[b1]=z1[c1]=z1[d1]=z1[e1]=z1[G]=z1[J]=z1[O]=z1[S]=z1[T]=z1[U]=z1[X]=z1[f1]=z1[g1]=z1[h1]=z1[i1]=true;z1[B]=z1[D]=z1[Z]=false;var A1=parseInt;var B1=typeof global=='object'&&global&&global.Object===Object&&global;var C1=typeof self=='object'&&self&&self.Object===Object&&self;var D1=B1||C1||Function('return this')();var E1=typeof exports=='object'&&exports&&!exports.nodeType&&exports;var F1=E1&&typeof module=='object'&&module&&!module.nodeType&&module;var G1=F1&&F1.exports===E1;var H1=G1&&B1.process;var I1=(function(){try{var n=F1&&F1.require&&F1.require('util').types;if(n){return n;}return H1&&H1.binding&&H1.binding('util');}catch(e){}}());var J1=I1&&I1.isMap,K1=I1&&I1.isSet,L1=I1&&I1.isTypedArray;function M1(e,n,Y5){switch(Y5.length){case 0:return e.call(n);case 1:return e.call(n,Y5[0]);case 2:return e.call(n,Y5[0],Y5[1]);case 3:return e.call(n,Y5[0],Y5[1],Y5[2]);}return e.apply(n,Y5);}function N1(e,B6){var n=-1,Y5=e==null?0:e.length;while(++n<Y5){if(B6(e[n],n,e)===false){break;}}return e;}function O1(e,n){var Y5=-1,I6=e==null?0:e.length,J6=0,K6=[];while(++Y5<I6){var L6=e[Y5];if(n(L6,Y5,e)){K6[J6++]=L6;}}return K6;}function P1(e,n){var Y5=e==null?0:e.length;return!!Y5&&V1(e,n,0)>-1;}function Q1(e,n,Y5){var I6=-1,J6=e==null?0:e.length;while(++I6<J6){if(Y5(n,e[I6])){return true;}}return false;}function R1(e,B6){var n=-1,Y5=e==null?0:e.length,I6=Array(Y5);while(++n<Y5){I6[n]=B6(e[n],n,e);}return I6;}function S1(e,n){var Y5=-1,I6=n.length,J6=e.length;while(++Y5<I6){e[J6+Y5]=n[Y5];}return e;}function T1(e,n){var Y5=-1,I6=e==null?0:e.length;while(++Y5<I6){if(n(e[Y5],Y5,e)){return true;}}return false;}function U1(e,n,Y5,I6){var J6=e.length,K6=Y5+(I6?1:-1);while((I6?K6--:++K6<J6)){if(n(e[K6],K6,e)){return K6;}}return-1;}function V1(e,n,Y5){return n===n?g2(e,n,Y5):U1(e,W1,Y5);}function W1(e){return e!==e;}function X1(e){return function(n){return n==null?u:n[e];};}function Y1(n,B6){var e=-1,Y5=Array(n);while(++e<n){Y5[e]=B6(e);}return Y5;}function Z1(e){return function(n){return e(n);};}function $1(e,n){return e.has(n);}function _1(e,n){var Y5=e.length,I6=0;while(Y5--){if(e[Y5]===n){++I6;}}return I6;}function a2(e,n){return e==null?u:e[n];}function b2(e){var n=-1,Y5=Array(e.size);e.forEach(function(I6,J6){Y5[++n]=[J6,I6];});return Y5;}function c2(e,n){return function(Y5){return e(n(Y5));};}function d2(e,n){var Y5=-1,I6=e.length,J6=0,K6=[];while(++Y5<I6){var L6=e[Y5];if(L6===n||L6===P){e[Y5]=P;K6[J6++]=Y5;}}return K6;}function e2(e,n){return n=='__proto__'?u:e[n];}function f2(e){var n=-1,Y5=Array(e.size);e.forEach(function(I6){Y5[++n]=I6;});return Y5;}function g2(e,n,Y5){var I6=Y5-1,J6=e.length;while(++I6<J6){if(e[I6]===n){return I6;}}return-1;}var h2=Array.prototype,i2=Function.prototype,j2=Object.prototype;var k2=D1['__core-js_shared__'];var l2=i2.toString;var m2=j2.hasOwnProperty;var n2=(function(){var e=/[^.]+$/.exec(k2&&k2.keys&&k2.keys.IE_PROTO||'');return e?('Symbol(src)_1.'+e):'';}());var o2=j2.toString;var p2=l2.call(Object);var q2=RegExp('^'+l2.call(m2).replace(m1,'\\$&').replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,'$1.*?')+'$');var r2=G1?D1.Buffer:u,s2=D1.Symbol,t2=D1.Uint8Array,u2=r2?r2.allocUnsafe:u,v2=c2(Object.getPrototypeOf,Object),w2=Object.create,x2=j2.propertyIsEnumerable,y2=h2.splice,z2=s2?s2.isConcatSpreadable:u,A2=s2?s2.toStringTag:u;var B2=(function(){try{var n=a5(Object,'defineProperty');n({},'',{});return n;}catch(e){}}());var C2=Object.getOwnPropertySymbols,D2=r2?r2.isBuffer:u,E2=c2(Object.keys,Object),F2=Math.max,G2=Math.min,H2=Date.now;var I2=a5(D1,'DataView'),J2=a5(D1,'Map'),K2=a5(D1,'Promise'),L2=a5(D1,'Set'),M2=a5(D1,'WeakMap'),N2=a5(Object,'create');var O2=M2&&new M2;var P2={};var Q2=I5(I2),R2=I5(J2),S2=I5(K2),T2=I5(L2),U2=I5(M2);var V2=s2?s2.prototype:u,W2=V2?V2.valueOf:u,X2=V2?V2.toString:u;function Y2(){}var Z2=(function(){function e(){}return function(n){if(!e6(n)){return{};}if(w2){return w2(n);}e.prototype=n;var Y5=new e;e.prototype=u;return Y5;};}());function $2(){}function _2(e){this.__wrapped__=e;this.__actions__=[];this.__dir__=1;this.__filtered__=false;this.__iteratees__=[];this.__takeCount__=t;this.__views__=[];}_2.prototype=Z2($2.prototype);_2.prototype.constructor=_2;function a3(e){var n=-1,Y5=e==null?0:e.length;this.clear();while(++n<Y5){var I6=e[n];this.set(I6[0],I6[1]);}}function b3(){this.__data__=N2?N2(null):{};this.size=0;}function c3(e){var n=this.has(e)&&delete this.__data__[e];this.size-=n?1:0;return n;}function d3(e){var n=this.__data__;if(N2){var Y5=n[e];return Y5===H?u:Y5;}return m2.call(n,e)?n[e]:u;}function e3(e){var n=this.__data__;return N2?(n[e]!==u):m2.call(n,e);}function f3(e,n){var Y5=this.__data__;this.size+=this.has(e)?0:1;Y5[e]=(N2&&n===u)?H:n;return this;}a3.prototype.clear=b3;a3.prototype['delete']=c3;a3.prototype.get=d3;a3.prototype.has=e3;a3.prototype.set=f3;function g3(e){var n=-1,Y5=e==null?0:e.length;this.clear();while(++n<Y5){var I6=e[n];this.set(I6[0],I6[1]);}}function h3(){this.__data__=[];this.size=0;}function i3(e){var n=this.__data__,Y5=E3(n,e);if(Y5<0){return false;}var I6=n.length-1;if(Y5==I6){n.pop();}else{y2.call(n,Y5,1);}--this.size;return true;}function j3(e){var n=this.__data__,Y5=E3(n,e);return Y5<0?u:n[Y5][1];}function k3(e){return E3(this.__data__,e)>-1;}function l3(e,n){var Y5=this.__data__,I6=E3(Y5,e);if(I6<0){++this.size;Y5.push([e,n]);}else{Y5[I6][1]=n;}return this;}g3.prototype.clear=h3;g3.prototype['delete']=i3;g3.prototype.get=j3;g3.prototype.has=k3;g3.prototype.set=l3;function m3(e){var n=-1,Y5=e==null?0:e.length;this.clear();while(++n<Y5){var I6=e[n];this.set(I6[0],I6[1]);}}function n3(){this.size=0;this.__data__={'hash':new a3,'map':new(J2||g3),'string':new a3};}function o3(e){var n=$4(this,e)['delete'](e);this.size-=n?1:0;return n;}function p3(e){return $4(this,e).get(e);}function q3(e){return $4(this,e).has(e);}function r3(e,n){var Y5=$4(this,e),I6=Y5.size;Y5.set(e,n);this.size+=Y5.size==I6?0:1;return this;}m3.prototype.clear=n3;m3.prototype['delete']=o3;m3.prototype.get=p3;m3.prototype.has=q3;m3.prototype.set=r3;function s3(e){var n=-1,Y5=e==null?0:e.length;this.__data__=new m3;while(++n<Y5){this.add(e[n]);}}function t3(e){this.__data__.set(e,H);return this;}function u3(e){return this.__data__.has(e);}s3.prototype.add=s3.prototype.push=t3;s3.prototype.has=u3;function v3(e){var n=this.__data__=new g3(e);this.size=n.size;}function w3(){this.__data__=new g3;this.size=0;}function x3(e){var n=this.__data__,Y5=n['delete'](e);this.size=n.size;return Y5;}function y3(e){return this.__data__.get(e);}function z3(e){return this.__data__.has(e);}function A3(e,n){var Y5=this.__data__;if(Y5 instanceof g3){var I6=Y5.__data__;if(!J2||(I6.length<L-1)){I6.push([e,n]);this.size=++Y5.size;return this;}Y5=this.__data__=new m3(I6);}Y5.set(e,n);this.size=Y5.size;return this;}v3.prototype.clear=w3;v3.prototype['delete']=x3;v3.prototype.get=y3;v3.prototype.has=z3;v3.prototype.set=A3;function B3(e,n){var Y5=$5(e),I6=!Y5&&Z5(e),J6=!Y5&&!I6&&b6(e),K6=!Y5&&!I6&&!J6&&k6(e),L6=Y5||I6||J6||K6,M6=L6?Y1(e.length,String):[],N6=M6.length;for(var O6 in e){if((n||m2.call(e,O6))&&!(L6&&(O6=='length'||(J6&&(O6=='offset'||O6=='parent'))||(K6&&(O6=='buffer'||O6=='byteLength'||O6=='byteOffset'))||m5(O6,N6)))){M6.push(O6);}}return M6;}function C3(e,n,Y5){if((Y5!==u&&!eq(e[n],Y5))||(Y5===u&&!(n in e))){H3(e,n,Y5);}}function D3(e,n,Y5){var I6=e[n];if(!(m2.call(e,n)&&eq(I6,Y5))||(Y5===u&&!(n in e))){H3(e,n,Y5);}}function E3(e,n){var Y5=e.length;while(Y5--){if(eq(e[Y5][0],n)){return Y5;}}return-1;}function F3(e,n){return e&&C4(n,s6(n),e);}function G3(e,n){return e&&C4(n,t6(n),e);}function H3(e,n,Y5){if(n=='__proto__'&&B2){B2(e,n,{'configurable':true,'enumerable':true,'value':Y5,'writable':true});}else{e[n]=Y5;}}function I3(e,n,Y5,I6,J6,K6){var L6,M6=n&C,N6=n&a,O6=n&b;if(Y5){L6=J6?Y5(e,I6,J6,K6):Y5(e);}if(L6!==u){return L6;}if(!e6(e)){return e;}var P6=$5(e);if(P6){L6=h5(e);if(!M6){return B4(e,L6);}}else{var Q6=e5(e),R6=Q6==D||Q6==E;if(b6(e)){return t4(e,M6);}if(Q6==O||Q6==v||(R6&&!J6)){L6=(N6||R6)?{}:i5(e);if(!M6){return N6?E4(e,G3(L6,e)):D4(e,F3(L6,e));}}else{if(!z1[Q6]){return J6?e:{};}L6=j5(e,Q6,M6);}}K6||(K6=new v3);var S6=K6.get(e);if(S6){return S6;}K6.set(e,L6);if(i6(e)){e.forEach(function(V6){L6.add(I3(V6,n,Y5,V6,e,K6));});return L6;}if(g6(e)){e.forEach(function(V6,I6){L6.set(I6,I3(V6,n,Y5,I6,e,K6));});return L6;}var T6=O6?(N6?V4:U4):(N6?t6:s6);var U6=P6?u:T6(e);N1(U6||e,function(V6,I6){if(U6){I6=V6;V6=e[I6];}D3(L6,I6,I3(V6,n,Y5,I6,e,K6));});return L6;}function J3(e,B6,n){var Y5=-1,I6=e.length;while(++Y5<I6){var J6=e[Y5],K6=B6(J6);if(K6!=null&&(L6===u?(K6===K6&&!j6(K6)):n(K6,L6))){var L6=K6,M6=J6;}}return M6;}function K3(e,n,Y5,I6,J6){var K6=-1,L6=e.length;Y5||(Y5=l5);J6||(J6=[]);while(++K6<L6){var M6=e[K6];if(n>0&&Y5(M6)){if(n>1){K3(M6,n-1,Y5,I6,J6);}else{S1(J6,M6);}}else if(!I6){J6[J6.length]=M6;}}return J6;}var L3=G4();function M3(e,n){n=s4(n,e);var Y5=0,I6=n.length;while(e!=null&&Y5<I6){e=e[H5(n[Y5++])];}return(Y5&&Y5==I6)?e:u;}function N3(e,n,Y5){var I6=n(e);return $5(e)?I6:S1(I6,Y5(e));}function O3(e){if(e==null){return e===u?Y:K;}return(A2&&A2 in Object(e))?b5(e):y5(e);}function P3(e,n){return e>n;}function Q3(e,n){return e!=null&&n in Object(e);}function R3(e,B6,n){var Y5=n?Q1:P1,I6=e[0].length,J6=e.length,K6=J6,L6=Array(J6),M6=Infinity,N6=[];while(K6--){var O6=e[K6];if(K6&&B6){O6=R1(O6,Z1(B6));}M6=G2(O6.length,M6);L6[K6]=!n&&(B6||(I6>=120&&O6.length>=120))?new s3(K6&&O6):u;}O6=e[0];var P6=-1,Q6=L6[0];outer:while(++P6<I6&&N6.length<M6){var R6=O6[P6],S6=B6?B6(R6):R6;R6=(n||R6!==0)?R6:0;if(!(Q6?$1(Q6,S6):Y5(N6,S6,n))){K6=J6;while(--K6){var T6=L6[K6];if(!(T6?$1(T6,S6):Y5(e[K6],S6,n))){continue outer;}}if(Q6){Q6.push(S6);}N6.push(R6);}}return N6;}function S3(e){return f6(e)&&O3(e)==v;}function T3(e,n,Y5,I6,J6){if(e===n){return true;}if(e==null||n==null||(!f6(e)&&!f6(n))){return e!==e&&n!==n;}return U3(e,n,Y5,I6,T3,J6);}function U3(e,n,Y5,I6,J6,K6){var L6=$5(e),M6=$5(n),N6=L6?x:e5(e),O6=M6?x:e5(n);N6=N6==v?O:N6;O6=O6==v?O:O6;var P6=N6==O,Q6=O6==O,R6=N6==O6;if(R6&&b6(e)){if(!b6(n)){return false;}L6=true;P6=false;}if(R6&&!P6){K6||(K6=new v3);return(L6||k6(e))?Q4(e,n,Y5,I6,J6,K6):R4(e,n,N6,Y5,I6,J6,K6);}if(!(Y5&c)){var S6=P6&&m2.call(e,'__wrapped__'),T6=Q6&&m2.call(n,'__wrapped__');if(S6||T6){var U6=S6?e.value():e,V6=T6?n.value():n;K6||(K6=new v3);return J6(U6,V6,Y5,I6,K6);}}if(!R6){return false;}K6||(K6=new v3);return S4(e,n,Y5,I6,J6,K6);}function V3(e){return f6(e)&&e5(e)==G;}function W3(e,n,Y5,I6){var J6=Y5.length,K6=J6,L6=!I6;if(e==null){return!K6;}e=Object(e);while(J6--){var M6=Y5[J6];if((L6&&M6[2])?M6[1]!==e[M6[0]]:!(M6[0]in e)){return false;}}while(++J6<K6){M6=Y5[J6];var N6=M6[0],O6=e[N6],P6=M6[1];if(L6&&M6[2]){if(O6===u&&!(N6 in e)){return false;}}else{var Q6=new v3;if(I6){var R6=I6(O6,P6,N6,e,n,Q6);}if(!(R6===u?T3(P6,O6,c|d,I6,Q6):R6)){return false;}}}return true;}function X3(e){if(!e6(e)||r5(e)){return false;}var n=c6(e)?q2:v1;return n.test(I5(e));}function Y3(e){return f6(e)&&e5(e)==T;}function Z3(e){return f6(e)&&d6(e.length)&&!!y1[O3(e)];}function $3(e){if(typeof e=='function'){return e;}if(e==null){return A6;}if(typeof e=='object'){return $5(e)?d4(e[0],e[1]):c4(e);}return D6(e);}function _3(e){if(!s5(e)){return E2(e);}var n=[];for(var Y5 in Object(e)){if(m2.call(e,Y5)&&Y5!='constructor'){n.push(Y5);}}return n;}function a4(e){if(!e6(e)){return x5(e);}var n=s5(e),Y5=[];for(var I6 in e){if(!(I6=='constructor'&&(n||!m2.call(e,I6)))){Y5.push(I6);}}return Y5;}function b4(e,n){return e<n;}function c4(e){var n=_4(e);if(n.length==1&&n[0][2]){return u5(n[0][0],n[0][1]);}return function(Y5){return Y5===e||W3(Y5,e,n);};}function d4(e,n){if(o5(e)&&t5(n)){return u5(H5(e),n);}return function(Y5){var I6=q6(Y5,e);return(I6===u&&I6===n)?r6(Y5,e):T3(n,I6,c|d);};}function e4(e,n,Y5,I6,J6){if(e===n){return;}L3(n,function(K6,L6){if(e6(K6)){J6||(J6=new v3);f4(e,n,L6,Y5,e4,I6,J6);}else{var M6=I6?I6(e2(e,L6),K6,(L6+''),e,n,J6):u;if(M6===u){M6=K6;}C3(e,L6,M6);}},t6);}function f4(e,n,Y5,I6,J6,K6,L6){var M6=e2(e,Y5),N6=e2(n,Y5),O6=L6.get(N6);if(O6){C3(e,Y5,O6);return;}var P6=K6?K6(M6,N6,(Y5+''),e,n,L6):u;var Q6=P6===u;if(Q6){var R6=$5(N6),S6=!R6&&b6(N6),T6=!R6&&!S6&&k6(N6);P6=N6;if(R6||S6||T6){if($5(M6)){P6=M6;}else if(a6(M6)){P6=B4(M6);}else if(S6){Q6=false;P6=t4(N6,true);}else if(T6){Q6=false;P6=y4(N6,true);}else{P6=[];}}else if(h6(N6)||Z5(N6)){P6=M6;if(Z5(M6)){P6=o6(M6);}else if(!e6(M6)||(I6&&c6(M6))){P6=i5(N6);}}else{Q6=false;}}if(Q6){L6.set(N6,P6);J6(P6,N6,I6,K6,L6);L6['delete'](N6);}C3(e,Y5,P6);}function g4(e,n){return h4(e,n,function(Y5,I6){return r6(e,I6);});}function h4(e,n,Y5){var I6=-1,J6=n.length,K6={};while(++I6<J6){var L6=n[I6],M6=M3(e,L6);if(Y5(M6,L6)){k4(K6,s4(L6,e),M6);}}return K6;}function i4(e){return function(n){return M3(n,e);};}function j4(e,n){return D5(z5(e,n,A6),e+'');}function k4(e,n,Y5,I6){if(!e6(e)){return e;}n=s4(n,e);var J6=-1,K6=n.length,L6=K6-1,M6=e;while(M6!=null&&++J6<K6){var N6=H5(n[J6]),O6=Y5;if(J6!=L6){var P6=M6[N6];O6=I6?I6(P6,N6,M6):u;if(O6===u){O6=e6(P6)?P6:(m5(n[J6+1])?[]:{});}}D3(M6,N6,O6);M6=M6[N6];}return e;}var l4=!O2?A6:function(e,n){O2.set(e,n);return e;};var m4=!B2?A6:function(e,n){return B2(e,'toString',{'configurable':true,'enumerable':false,'value':z6(n),'writable':true});};function n4(e,n,Y5){var I6=-1,J6=e.length;if(n<0){n=-n>J6?0:(J6+n);}Y5=Y5>J6?J6:Y5;if(Y5<0){Y5+=J6;}J6=n>Y5?0:((Y5-n)>>>0);n>>>=0;var K6=Array(J6);while(++I6<J6){K6[I6]=e[I6+n];}return K6;}function o4(e){if(typeof e=='string'){return e;}if($5(e)){return R1(e,o4)+'';}if(j6(e)){return X2?X2.call(e):'';}var n=(e+'');return(n=='0'&&(1/e)==-I)?'-0':n;}function p4(e,B6,n){var Y5=-1,I6=P1,J6=e.length,K6=true,L6=[],M6=L6;if(n){K6=false;I6=Q1;}else if(J6>=L){var N6=B6?null:N4(e);if(N6){return f2(N6);}K6=false;I6=$1;M6=new s3;}else{M6=B6?[]:L6;}outer:while(++Y5<J6){var O6=e[Y5],P6=B6?B6(O6):O6;O6=(n||O6!==0)?O6:0;if(K6&&P6===P6){var Q6=M6.length;while(Q6--){if(M6[Q6]===P6){continue outer;}}if(B6){M6.push(P6);}L6.push(O6);}else if(!I6(M6,P6,n)){if(M6!==L6){M6.push(P6);}L6.push(O6);}}return L6;}function q4(e,n){n=s4(n,e);e=A5(e,n);return e==null||delete e[H5(O5(n))];}function r4(e){return a6(e)?e:[];}function s4(e,n){if($5(e)){return e;}return o5(e,n)?[e]:G5(p6(e));}function t4(e,n){if(n){return e.slice();}var Y5=e.length,I6=u2?u2(Y5):new e.constructor(Y5);e.copy(I6);return I6;}function u4(e){var n=new e.constructor(e.byteLength);new t2(n).set(new t2(e));return n;}function v4(e,n){var Y5=n?u4(e.buffer):e.buffer;return new e.constructor(Y5,e.byteOffset,e.byteLength);}function w4(e){var n=new e.constructor(e.source,s1.exec(e));n.lastIndex=e.lastIndex;return n;}function x4(e){return W2?Object(W2.call(e)):{};}function y4(e,n){var Y5=n?u4(e.buffer):e.buffer;return new e.constructor(Y5,e.byteOffset,e.length);}function z4(e,n,Y5,I6){var J6=-1,K6=e.length,L6=Y5.length,M6=-1,N6=n.length,O6=F2(K6-L6,0),P6=Array(N6+O6),Q6=!I6;while(++M6<N6){P6[M6]=n[M6];}while(++J6<L6){if(Q6||J6<K6){P6[Y5[J6]]=e[J6];}}while(O6--){P6[M6++]=e[J6++];}return P6;}function A4(e,n,Y5,I6){var J6=-1,K6=e.length,L6=-1,M6=Y5.length,N6=-1,O6=n.length,P6=F2(K6-M6,0),Q6=Array(P6+O6),R6=!I6;while(++J6<P6){Q6[J6]=e[J6];}var S6=J6;while(++N6<O6){Q6[S6+N6]=n[N6];}while(++L6<M6){if(R6||J6<K6){Q6[S6+Y5[L6]]=e[J6++];}}return Q6;}function B4(e,n){var Y5=-1,I6=e.length;n||(n=Array(I6));while(++Y5<I6){n[Y5]=e[Y5];}return n;}function C4(e,n,Y5,I6){var J6=!Y5;Y5||(Y5={});var K6=-1,L6=n.length;while(++K6<L6){var M6=n[K6];var N6=I6?I6(Y5[M6],e[M6],M6,Y5,e):u;if(N6===u){N6=e[M6];}if(J6){H3(Y5,M6,N6);}else{D3(Y5,M6,N6);}}return Y5;}function D4(e,n){return C4(e,c5(e),n);}function E4(e,n){return C4(e,d5(e),n);}function F4(e){return j4(function(n,Y5){var I6=-1,J6=Y5.length,K6=J6>1?Y5[J6-1]:u,L6=J6>2?Y5[2]:u;K6=(e.length>3&&typeof K6=='function')?(J6--,K6):u;if(L6&&n5(Y5[0],Y5[1],L6)){K6=J6<3?u:K6;J6=1;}n=Object(n);while(++I6<J6){var M6=Y5[I6];if(M6){e(n,M6,I6,K6);}}return n;});}function G4(e){return function(n,B6,Y5){var I6=-1,J6=Object(n),K6=Y5(n),L6=K6.length;while(L6--){var M6=K6[e?L6:++I6];if(B6(J6[M6],M6,J6)===false){break;}}return n;};}function H4(e,n,Y5){var I6=n&W,J6=I4(e);function K6(){var fn=(this&&this!==D1&&this instanceof K6)?J6:e;return fn.apply(I6?Y5:this,arguments);}return K6;}function I4(e){return function(){var n=arguments;switch(n.length){case 0:return new e;case 1:return new e(n[0]);case 2:return new e(n[0],n[1]);case 3:return new e(n[0],n[1],n[2]);case 4:return new e(n[0],n[1],n[2],n[3]);case 5:return new e(n[0],n[1],n[2],n[3],n[4]);case 6:return new e(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new e(n[0],n[1],n[2],n[3],n[4],n[5],n[6]);}var Y5=Z2(e.prototype),I6=e.apply(Y5,n);return e6(I6)?I6:Y5;};}function J4(e,n,Y5){var I6=I4(e);function J6(){var K6=arguments.length,L6=Array(K6),M6=K6,N6=Y4(J6);while(M6--){L6[M6]=arguments[M6];}var O6=(K6<3&&L6[0]!==N6&&L6[K6-1]!==N6)?[]:d2(L6,N6);K6-=O6.length;if(K6<Y5){return M4(e,n,K4,J6.placeholder,u,L6,O6,u,u,Y5-K6);}var fn=(this&&this!==D1&&this instanceof J6)?I6:e;return M1(fn,this,L6);}return J6;}function K4(e,n,Y5,I6,J6,K6,L6,M6,N6,O6){var P6=n&l,Q6=n&W,R6=n&f,S6=n&(h|i),T6=n&o,U6=R6?u:I4(e);function V6(){var W6=arguments.length,X6=Array(W6),Y6=W6;while(Y6--){X6[Y6]=arguments[Y6];}if(S6){var Z6=Y4(V6),$6=_1(X6,Z6);}if(I6){X6=z4(X6,I6,J6,S6);}if(K6){X6=A4(X6,K6,L6,S6);}W6-=$6;if(S6&&W6<O6){var _6=d2(X6,Z6);return M4(e,n,K4,V6.placeholder,Y5,X6,_6,M6,N6,O6-W6);}var a7=Q6?Y5:this,fn=R6?a7[e]:e;W6=X6.length;if(M6){X6=B5(X6,M6);}else if(T6&&W6>1){X6.reverse();}if(P6&&N6<W6){X6.length=N6;}if(this&&this!==D1&&this instanceof V6){fn=U6||I4(fn);}return fn.apply(a7,X6);}return V6;}function L4(e,n,Y5,I6){var J6=n&W,K6=I4(e);function L6(){var M6=-1,N6=arguments.length,O6=-1,P6=I6.length,Q6=Array(P6+N6),fn=(this&&this!==D1&&this instanceof L6)?K6:e;while(++O6<P6){Q6[O6]=I6[O6];}while(N6--){Q6[O6++]=arguments[++M6];}return M1(fn,J6?Y5:this,Q6);}return L6;}function M4(e,n,Y5,I6,J6,K6,L6,M6,N6,O6){var P6=n&h,Q6=P6?L6:u,R6=P6?u:L6,S6=P6?K6:u,T6=P6?u:K6;n|=(P6?j:k);n&=~(P6?k:j);if(!(n&g)){n&=~(W|f);}var U6=[e,n,J6,S6,Q6,T6,R6,M6,N6,O6];var V6=Y5.apply(u,U6);if(q5(e)){C5(V6,U6);}V6.placeholder=I6;return E5(V6,e,n);}var N4=!(L2&&(1/f2(new L2([,-0]))[1])==I)?C6:function(e){return new L2(e);};function O4(e,n,Y5,I6,J6,K6,L6,M6){var N6=n&f;if(!N6&&typeof e!='function'){throw new TypeError(F);}var O6=I6?I6.length:0;if(!O6){n&=~(j|k);I6=J6=u;}L6=L6===u?L6:F2(m6(L6),0);M6=M6===u?M6:m6(M6);O6-=J6?J6.length:0;if(n&k){var P6=I6,Q6=J6;I6=J6=u;}var R6=N6?u:W4(e);var S6=[e,n,Y5,I6,J6,P6,Q6,K6,L6,M6];if(R6){w5(S6,R6);}e=S6[0];n=S6[1];Y5=S6[2];I6=S6[3];J6=S6[4];M6=S6[9]=S6[9]===u?(N6?0:e.length):F2(S6[9]-O6,0);if(!M6&&n&(h|i)){n&=~(h|i);}if(!n||n==W){var T6=H4(e,n,Y5);}else if(n==h||n==i){T6=J4(e,n,M6);}else if((n==j||n==(W|j))&&!J6.length){T6=L4(e,n,Y5,I6);}else{T6=K4.apply(u,S6);}var U6=R6?l4:C5;return E5(U6(T6,S6),e,n);}function P4(e){return h6(e)?u:e;}function Q4(e,n,Y5,I6,J6,K6){var L6=Y5&c,M6=e.length,N6=n.length;if(M6!=N6&&!(L6&&N6>M6)){return false;}var O6=K6.get(e);if(O6&&K6.get(n)){return O6==n;}var P6=-1,Q6=true,R6=(Y5&d)?new s3:u;K6.set(e,n);K6.set(n,e);while(++P6<M6){var S6=e[P6],T6=n[P6];if(I6){var U6=L6?I6(T6,S6,P6,n,e,K6):I6(S6,T6,P6,e,n,K6);}if(U6!==u){if(U6){continue;}Q6=false;break;}if(R6){if(!T1(n,function(T6,V6){if(!$1(R6,V6)&&(S6===T6||J6(S6,T6,Y5,I6,K6))){return R6.push(V6);}})){Q6=false;break;}}else if(!(S6===T6||J6(S6,T6,Y5,I6,K6))){Q6=false;break;}}K6['delete'](e);K6['delete'](n);return Q6;}function R4(e,n,Y5,I6,J6,K6,L6){switch(Y5){case _:if((e.byteLength!=n.byteLength)||(e.byteOffset!=n.byteOffset)){return false;}e=e.buffer;n=n.buffer;case $:if((e.byteLength!=n.byteLength)||!K6(new t2(e),new t2(n))){return false;}return true;case z:case A:case J:return eq(+e,+n);case B:return e.name==n.name&&e.message==n.message;case S:case U:return e==(n+'');case G:var M6=b2;case T:var N6=I6&c;M6||(M6=f2);if(e.size!=n.size&&!N6){return false;}var O6=L6.get(e);if(O6){return O6==n;}I6|=d;L6.set(e,n);var P6=Q4(M6(e),M6(n),I6,J6,K6,L6);L6['delete'](e);return P6;case X:if(W2){return W2.call(e)==W2.call(n);}}return false;}function S4(e,n,Y5,I6,J6,K6){var L6=Y5&c,M6=U4(e),N6=M6.length,O6=U4(n),P6=O6.length;if(N6!=P6&&!L6){return false;}var Q6=N6;while(Q6--){var R6=M6[Q6];if(!(L6?R6 in n:m2.call(n,R6))){return false;}}var S6=K6.get(e);if(S6&&K6.get(n)){return S6==n;}var T6=true;K6.set(e,n);K6.set(n,e);var U6=L6;while(++Q6<N6){R6=M6[Q6];var V6=e[R6],W6=n[R6];if(I6){var X6=L6?I6(W6,V6,R6,n,e,K6):I6(V6,W6,R6,e,n,K6);}if(!(X6===u?(V6===W6||J6(V6,W6,Y5,I6,K6)):X6)){T6=false;break;}U6||(U6=R6=='constructor');}if(T6&&!U6){var Y6=e.constructor,Z6=n.constructor;if(Y6!=Z6&&('constructor'in e&&'constructor'in n)&&!(typeof Y6=='function'&&Y6 instanceof Y6&&typeof Z6=='function'&&Z6 instanceof Z6)){T6=false;}}K6['delete'](e);K6['delete'](n);return T6;}function T4(e){return D5(z5(e,u,K5),e+'');}function U4(e){return N3(e,s6,c5);}function V4(e){return N3(e,t6,d5);}var W4=!O2?C6:function(e){return O2.get(e);};function X4(e){var n=(e.name+''),Y5=P2[n],I6=m2.call(P2,n)?Y5.length:0;while(I6--){var J6=Y5[I6],K6=J6.func;if(K6==null||K6==e){return J6.name;}}return n;}function Y4(e){var n=m2.call(Y2,'placeholder')?Y2:e;return n.placeholder;}function Z4(){var e=Y2.iteratee||B6;e=e===B6?$3:e;return arguments.length?e(arguments[0],arguments[1]):e;}function $4(e,n){var Y5=e.__data__;return p5(n)?Y5[typeof n=='string'?'string':'hash']:Y5.map;}function _4(e){var n=s6(e),Y5=n.length;while(Y5--){var I6=n[Y5],J6=e[I6];n[Y5]=[I6,J6,t5(J6)];}return n;}function a5(e,n){var Y5=a2(e,n);return X3(Y5)?Y5:u;}function b5(n){var Y5=m2.call(n,A2),I6=n[A2];try{n[A2]=u;var J6=true;}catch(e){}var K6=o2.call(n);if(J6){if(Y5){n[A2]=I6;}else{delete n[A2];}}return K6;}var c5=!C2?E6:function(e){if(e==null){return[];}e=Object(e);return O1(C2(e),function(n){return x2.call(e,n);});};var d5=!C2?E6:function(e){var n=[];while(e){S1(n,c5(e));e=v2(e);}return n;};var e5=O3;if((I2&&e5(new I2(new ArrayBuffer(1)))!=_)||(J2&&e5(new J2)!=G)||(K2&&e5(K2.resolve())!=Q)||(L2&&e5(new L2)!=T)||(M2&&e5(new M2)!=Z)){e5=function(e){var n=O3(e),Y5=n==O?e.constructor:u,I6=Y5?I5(Y5):'';if(I6){switch(I6){case Q2:return _;case R2:return G;case S2:return Q;case T2:return T;case U2:return Z;}}return n;};}function f5(e){var n=e.match(p1);return n?n[1].split(q1):[];}function g5(e,n,Y5){n=s4(n,e);var I6=-1,J6=n.length,K6=false;while(++I6<J6){var L6=H5(n[I6]);if(!(K6=e!=null&&Y5(e,L6))){break;}e=e[L6];}if(K6||++I6!=J6){return K6;}J6=e==null?0:e.length;return!!J6&&d6(J6)&&m5(L6,J6)&&($5(e)||Z5(e));}function h5(e){var n=e.length,Y5=new e.constructor(n);if(n&&typeof e[0]=='string'&&m2.call(e,'index')){Y5.index=e.index;Y5.input=e.input;}return Y5;}function i5(e){return(typeof e.constructor=='function'&&!s5(e))?Z2(v2(e)):{};}function j5(e,n,Y5){var I6=e.constructor;switch(n){case $:return u4(e);case z:case A:return new I6(+e);case _:return v4(e,Y5);case a1:case b1:case c1:case d1:case e1:case f1:case g1:case h1:case i1:return y4(e,Y5);case G:return new I6;case J:case U:return new I6(e);case S:return w4(e);case T:return new I6;case X:return x4(e);}}function k5(e,n){var Y5=n.length;if(!Y5){return e;}var I6=Y5-1;n[I6]=(Y5>1?'& ':'')+n[I6];n=n.join(Y5>2?', ':' ');return e.replace(o1,'{\n/* [wrapped with '+n+'] */\n');}function l5(e){return $5(e)||Z5(e)||!!(z2&&e&&e[z2]);}function m5(e,n){var Y5=typeof e;n=n==null?r:n;return!!n&&(Y5=='number'||(Y5!='symbol'&&x1.test(e)))&&(e>-1&&e%1==0&&e<n);}function n5(e,n,Y5){if(!e6(Y5)){return false;}var I6=typeof n;if(I6=='number'?(_5(Y5)&&m5(n,Y5.length)):(I6=='string'&&n in Y5)){return eq(Y5[n],e);}return false;}function o5(e,n){if($5(e)){return false;}var Y5=typeof e;if(Y5=='number'||Y5=='symbol'||Y5=='boolean'||e==null||j6(e)){return true;}return k1.test(e)||!j1.test(e)||(n!=null&&e in Object(n));}function p5(e){var n=typeof e;return(n=='string'||n=='number'||n=='symbol'||n=='boolean')?(e!=='__proto__'):(e===null);}function q5(e){var n=X4(e),Y5=Y2[n];if(typeof Y5!='function'||!(n in _2.prototype)){return false;}if(e===Y5){return true;}var I6=W4(Y5);return!!I6&&e===I6[0];}function r5(e){return!!n2&&(n2 in e);}function s5(e){var n=e&&e.constructor,Y5=(typeof n=='function'&&n.prototype)||j2;return e===Y5;}function t5(e){return e===e&&!e6(e);}function u5(e,n){return function(Y5){if(Y5==null){return false;}return Y5[e]===n&&(n!==u||(e in Object(Y5)));};}function v5(e){var n=V5(e,function(I6){if(Y5.size===M){Y5.clear();}return I6;});var Y5=n.cache;return n;}function w5(e,n){var Y5=e[1],I6=n[1],J6=Y5|I6,K6=J6<(W|f|l);var L6=((I6==l)&&(Y5==h))||((I6==l)&&(Y5==m)&&(e[7].length<=n[8]))||((I6==(l|m))&&(n[7].length<=n[8])&&(Y5==h));if(!(K6||L6)){return e;}if(I6&W){e[2]=n[2];J6|=Y5&W?0:g;}var M6=n[3];if(M6){var N6=e[3];e[3]=N6?z4(N6,M6,n[4]):M6;e[4]=N6?d2(e[3],P):n[4];}M6=n[5];if(M6){N6=e[5];e[5]=N6?A4(N6,M6,n[6]):M6;e[6]=N6?d2(e[5],P):n[6];}M6=n[7];if(M6){e[7]=M6;}if(I6&l){e[8]=e[8]==null?n[8]:G2(e[8],n[8]);}if(e[9]==null){e[9]=n[9];}e[0]=n[0];e[1]=J6;return e;}function x5(e){var n=[];if(e!=null){for(var Y5 in Object(e)){n.push(Y5);}}return n;}function y5(e){return o2.call(e);}function z5(e,n,Y5){n=F2(n===u?(e.length-1):n,0);return function(){var I6=arguments,J6=-1,K6=F2(I6.length-n,0),L6=Array(K6);while(++J6<K6){L6[J6]=I6[n+J6];}J6=-1;var M6=Array(n+1);while(++J6<n){M6[J6]=I6[J6];}M6[n]=Y5(L6);return M1(e,this,M6);};}function A5(e,n){return n.length<2?e:M3(e,n4(n,0,-1));}function B5(e,n){var Y5=e.length,I6=G2(n.length,Y5),J6=B4(e);while(I6--){var K6=n[I6];e[I6]=m5(K6,Y5)?J6[K6]:u;}return e;}var C5=F5(l4);var D5=F5(m4);function E5(e,n,Y5){var I6=(n+'');return D5(e,k5(I6,J5(f5(I6),Y5)));}function F5(e){var n=0,Y5=0;return function(){var I6=H2(),J6=q-(I6-Y5);Y5=I6;if(J6>0){if(++n>=p){return arguments[0];}}else{n=0;}return e.apply(u,arguments);};}var G5=v5(function(e){var n=[];if(e.charCodeAt(0)===46){n.push('');}e.replace(l1,function(Y5,I6,J6,K6){n.push(J6?K6.replace(r1,'$1'):(I6||Y5));});return n;});function H5(e){if(typeof e=='string'||j6(e)){return e;}var n=(e+'');return(n=='0'&&(1/e)==-I)?'-0':n;}function I5(n){if(n!=null){try{return l2.call(n);}catch(e){}try{return(n+'');}catch(e){}}return'';}function J5(e,n){N1(w,function(Y5){var I6='_.'+Y5[0];if((n&Y5[1])&&!P1(e,I6)){e.push(I6);}});return e.sort();}function K5(e){var n=e==null?0:e.length;return n?K3(e,1):[];}var L5=j4(function(e){var n=R1(e,r4);return(n.length&&n[0]===e[0])?R3(n):[];});var M5=j4(function(e){var B6=O5(e),n=R1(e,r4);if(B6===O5(n)){B6=u;}else{n.pop();}return(n.length&&n[0]===e[0])?R3(n,Z4(B6,2)):[];});var N5=j4(function(e){var n=O5(e),Y5=R1(e,r4);n=typeof n=='function'?n:u;if(n){Y5.pop();}return(Y5.length&&Y5[0]===e[0])?R3(Y5,u,n):[];});function O5(e){var n=e==null?0:e.length;return n?e[n-1]:u;}function P5(e){return(e&&e.length)?p4(e):[];}function Q5(e,B6){return(e&&e.length)?p4(e,Z4(B6,2)):[];}function R5(e,n){n=typeof n=='function'?n:u;return(e&&e.length)?p4(e,u,n):[];}var S5=function(){return D1.Date.now();};function T5(e,n,Y5){n=Y5?u:n;var I6=O4(e,h,u,u,u,u,u,n);I6.placeholder=T5.placeholder;return I6;}function U5(e,n,Y5){var I6,J6,K6,L6,M6,N6,O6=0,P6=false,Q6=false,R6=true;if(typeof e!='function'){throw new TypeError(F);}n=n6(n)||0;if(e6(Y5)){P6=!!Y5.leading;Q6='maxWait'in Y5;K6=Q6?F2(n6(Y5.maxWait)||0,n):K6;R6='trailing'in Y5?!!Y5.trailing:R6;}function S6(_6){var a7=I6,b7=J6;I6=J6=u;O6=_6;L6=e.apply(b7,a7);return L6;}function T6(_6){O6=_6;M6=setTimeout(W6,n);return P6?S6(_6):L6;}function U6(_6){var a7=_6-N6,b7=_6-O6,c7=n-a7;return Q6?G2(c7,K6-b7):c7;}function V6(_6){var a7=_6-N6,b7=_6-O6;return(N6===u||(a7>=n)||(a7<0)||(Q6&&b7>=K6));}function W6(){var _6=S5();if(V6(_6)){return X6(_6);}M6=setTimeout(W6,U6(_6));}function X6(_6){M6=u;if(R6&&I6){return S6(_6);}I6=J6=u;return L6;}function Y6(){if(M6!==u){clearTimeout(M6);}O6=0;I6=N6=J6=M6=u;}function Z6(){return M6===u?L6:X6(S5());}function $6(){var _6=S5(),a7=V6(_6);I6=arguments;J6=this;N6=_6;if(a7){if(M6===u){return T6(N6);}if(Q6){M6=setTimeout(W6,n);return S6(N6);}}if(M6===u){M6=setTimeout(W6,n);}return L6;}$6.cancel=Y6;$6.flush=Z6;return $6;}function V5(e,n){if(typeof e!='function'||(n!=null&&typeof n!='function')){throw new TypeError(F);}var Y5=function(){var I6=arguments,J6=n?n.apply(this,I6):I6[0],K6=Y5.cache;if(K6.has(J6)){return K6.get(J6);}var L6=e.apply(this,I6);Y5.cache=K6.set(J6,L6)||K6;return L6;};Y5.cache=new(V5.Cache||m3);return Y5;}V5.Cache=m3;function W5(e,n,Y5){var I6=true,J6=true;if(typeof e!='function'){throw new TypeError(F);}if(e6(Y5)){I6='leading'in Y5?!!Y5.leading:I6;J6='trailing'in Y5?!!Y5.trailing:J6;}return U5(e,n,{'leading':I6,'maxWait':n,'trailing':J6});}function X5(){if(!arguments.length){return[];}var e=arguments[0];return $5(e)?e:[e];}function eq(e,n){return e===n||(e!==e&&n!==n);}var Z5=S3(function(){return arguments;}())?S3:function(e){return f6(e)&&m2.call(e,'callee')&&!x2.call(e,'callee');};var $5=Array.isArray;function _5(e){return e!=null&&d6(e.length)&&!c6(e);}function a6(e){return f6(e)&&_5(e);}var b6=D2||F6;function c6(e){if(!e6(e)){return false;}var n=O3(e);return n==D||n==E||n==y||n==R;}function d6(e){return typeof e=='number'&&e>-1&&e%1==0&&e<=r;}function e6(e){var n=typeof e;return e!=null&&(n=='object'||n=='function');}function f6(e){return e!=null&&typeof e=='object';}var g6=J1?Z1(J1):V3;function h6(e){if(!f6(e)||O3(e)!=O){return false;}var n=v2(e);if(n===null){return true;}var Y5=m2.call(n,'constructor')&&n.constructor;return typeof Y5=='function'&&Y5 instanceof Y5&&l2.call(Y5)==p2;}var i6=K1?Z1(K1):Y3;function j6(e){return typeof e=='symbol'||(f6(e)&&O3(e)==X);}var k6=L1?Z1(L1):Z3;function l6(e){if(!e){return e===0?e:0;}e=n6(e);if(e===I||e===-I){var n=(e<0?-1:1);return n*s;}return e===e?e:0;}function m6(e){var n=l6(e),Y5=n%1;return n===n?(Y5?n-Y5:n):0;}function n6(e){if(typeof e=='number'){return e;}if(j6(e)){return N;}if(e6(e)){var n=typeof e.valueOf=='function'?e.valueOf():e;e=e6(n)?(n+''):n;}if(typeof e!='string'){return e===0?e:+e;}e=e.replace(n1,'');var Y5=u1.test(e);return(Y5||w1.test(e))?A1(e.slice(2),Y5?2:8):(t1.test(e)?N:+e);}function o6(e){return C4(e,t6(e));}function p6(e){return e==null?'':o4(e);}function q6(e,n,Y5){var I6=e==null?u:M3(e,n);return I6===u?Y5:I6;}function r6(e,n){return e!=null&&g5(e,n,Q3);}function s6(e){return _5(e)?B3(e):_3(e);}function t6(e){return _5(e)?B3(e,true):a4(e);}var u6=F4(function(e,n,Y5){e4(e,n,Y5);});var v6=F4(function(e,n,Y5,I6){e4(e,n,Y5,I6);});var w6=T4(function(e,n){var Y5={};if(e==null){return Y5;}var I6=false;n=R1(n,function(K6){K6=s4(K6,e);I6||(I6=K6.length>1);return K6;});C4(e,V4(e),Y5);if(I6){Y5=I3(Y5,C|a|b,P4);}var J6=n.length;while(J6--){q4(Y5,n[J6]);}return Y5;});var x6=T4(function(e,n){return e==null?{}:g4(e,n);});function y6(e,n){if(e==null){return{};}var Y5=R1(V4(e),function(I6){return[I6];});n=Z4(n);return h4(e,Y5,function(I6,J6){return n(I6,J6[0]);});}function z6(e){return function(){return e;};}function A6(e){return e;}function B6(e){return $3(typeof e=='function'?e:I3(e,C));}function C6(){}function D6(e){return o5(e)?X1(H5(e)):i4(e);}function E6(){return[];}function F6(){return false;}function G6(e){return(e&&e.length)?J3(e,A6,P3):u;}function H6(e){return(e&&e.length)?J3(e,A6,b4):u;}Y2.castArray=X5;Y2.constant=z6;Y2.curry=T5;Y2.debounce=U5;Y2.flatten=K5;Y2.intersection=L5;Y2.intersectionBy=M5;Y2.intersectionWith=N5;Y2.iteratee=B6;Y2.keys=s6;Y2.keysIn=t6;Y2.memoize=V5;Y2.merge=u6;Y2.mergeWith=v6;Y2.omit=w6;Y2.pick=x6;Y2.pickBy=y6;Y2.property=D6;Y2.throttle=W5;Y2.toPlainObject=o6;Y2.uniq=P5;Y2.uniqBy=Q5;Y2.uniqWith=R5;Y2.eq=eq;Y2.get=q6;Y2.hasIn=r6;Y2.identity=A6;Y2.isArguments=Z5;Y2.isArray=$5;Y2.isArrayLike=_5;Y2.isArrayLikeObject=a6;Y2.isBuffer=b6;Y2.isFunction=c6;Y2.isLength=d6;Y2.isMap=g6;Y2.isObject=e6;Y2.isObjectLike=f6;Y2.isPlainObject=h6;Y2.isSet=i6;Y2.isSymbol=j6;Y2.isTypedArray=k6;Y2.last=O5;Y2.max=G6;Y2.min=H6;Y2.stubArray=E6;Y2.stubFalse=F6;Y2.noop=C6;Y2.now=S5;Y2.toFinite=l6;Y2.toInteger=m6;Y2.toNumber=n6;Y2.toString=p6;Y2.VERSION=V;T5.placeholder=Y2;return Y2;});
// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.predefine('sap/ushell_abap/adapters/abap/AdapterContainer',["sap/base/util/ObjectPath","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/core/format/DateFormat"],function(O,L,q,D){"use strict";var c="PersContainers",a="yyyyMMddHHmmss",I=new Date(9999,1,1,0,0,0),s=new Date(9999,1,1,0,0,0,0),b="ADMIN#sap-ushell-container-expireUTCTimestamp",d="ADMIN#sap-ushell-container-storageUTCTimestamp",f="ADMIN#sap-ushell-container-scope";function r(C){var e="sap.ushell.personalization#";if(C.substring(0,e.length)!==e){L.error("Unexpected ContainerKey "+C);return C;}return C.substring(e.length,e.length+40);}var A=function(C,S,o,e){this._oService=S;this._oScope=o;this["sap-cache-id"]=O.get("_oService._oConfig.services.personalization.cacheId",this);this._sContainerKey=r(C);this._sAppName=e||"";var P=sap.ui.require("sap/ushell_abap/adapters/abap/PersonalizationAdapter");if(P){this._category=P.prototype._determineCategory(o);}this._oJSONContainer={"category":this._category,"clientExpirationTime":s,"appName":this._sAppName,"component":"","id":this._sContainerKey,PersContainerItems:[]};this._oPropertyBag={};this._aOperationQueue=[];};A.prototype._reset=function(){this._oJSONContainer.PersContainerItems=[];};A.prototype._obtainODataWrapper=function(){return this._oService._oWrapper;};A.prototype.load=function(){var o=new q.Deferred(),t=this,e=this._obtainODataWrapper(),R=c+"(category='"+this._category+"',id='"+encodeURIComponent(this._sContainerKey)+"')?$expand=PersContainerItems";if(this._category&&this._category==="P"&&this["sap-cache-id"]){R=R+"&sap-cache-id="+this["sap-cache-id"];}sap.ui2.srvc.ODataService.call(this,e,function(){return false;});e.read(R,function(h){t._oJSONContainer=h;t._oJSONContainer.category=t._category;t._oJSONContainer.id=t._sContainerKey;t._oJSONContainer.appName=t._sAppName;t._oJSONContainer.PersContainerItems=(t._oJSONContainer.PersContainerItems&&t._oJSONContainer.PersContainerItems.results)||[];o.resolve(t);},function(h){L.warning(h);t._reset();o.resolve(t);});return o.promise();};A.prototype.save=function(){var o=new q.Deferred(),t=this,e=this._obtainODataWrapper(),R=c;sap.ui2.srvc.ODataService.call(this,e,function(){return false;});e.create(R,this._oJSONContainer,function(){o.resolve(t);},function(h){o.reject(h);});return o.promise();};A.prototype.del=function(){var o=new q.Deferred(),t=this,e=this._obtainODataWrapper(),R=c+"(category='"+this._category+"',id='"+encodeURIComponent(this._sContainerKey)+"')";sap.ui2.srvc.ODataService.call(this,e,function(){return false;});e.del(R,function(h){o.resolve(t);},function(h){o.reject(h);});this._reset();return o.promise();};A.prototype.getItemKeys=function(){var e=[];this._oJSONContainer.PersContainerItems.forEach(function(m){if(m.category==="V"){e.push("VARIANTSET#"+m.id);}else if(m.category==="I"){e.push("ITEM#"+m.id);}});if(this._oJSONContainer.validity>=0){e.push(d);e.push(b);e.push(f);}return e;};A.prototype.containsItem=function(i){return this.getItemKeys().indexOf(i)>=0;};function g(e){if(e===undefined||e===null){return null;}var F=D.getDateInstance({pattern:a});return F.parse(JSON.parse(e),true);}function E(o){var F=D.getDateInstance({pattern:a});if(o===null){o=s;}if(typeof o==="string"){if(/\/Date\(([0-9]+)\)\//.exec(o)){o=new Date(parseInt(/\/Date\(([0-9]+)\)\//.exec(o)[1],10));}else{L.error("Expected Date format "+o);}}if(+o===+s){return undefined;}return F.format(o,true);}A.prototype._findItemIndex=function(e,C){var i;for(i=0;i<this._oJSONContainer.PersContainerItems.length;i=i+1){if(this._oJSONContainer.PersContainerItems[i].id===e&&this._oJSONContainer.PersContainerItems[i].category===C){return i;}}return undefined;};A.prototype._locateItem=function(i){var e={index:-1};if(i===b){return{containerProperty:"clientExpirationTime",initialValue:s,convToABAP:g,convFromABAP:E};}if(i===f){return{containerProperty:"validity",initialValue:0,convToABAP:function(o){if(!o){return null;}return JSON.parse(o).validity;},convFromABAP:function(v,o){if(v<=0){return undefined;}o=o||{};o.validity=v;return o;}};}if(i===d){return{containerProperty:" ignore",initialValue:I,convToABAP:g,convFromABAP:E};}if(i.indexOf("ITEM#")===0){e.trueItemKey=i.substring("ITEM#".length,"ITEM#".length+40);e.category="I";}else if(i.indexOf("VARIANTSET#")===0){e.trueItemKey=i.substring("VARIANTSET#".length,"VARIANTSET#".length+40);e.category="V";}else if(i.indexOf("ADMIN#")!==0){L.error("Unknown itemkey prefix"+i);}e.index=this._findItemIndex(e.trueItemKey,e.category);return e;};A.prototype.getItemValue=function(i){var h="",o,j=this._locateItem(i);if(j.containerProperty===" ignore"){return undefined;}if(j.index>=0){h=this._oJSONContainer.PersContainerItems[j.index].value;try{o=JSON.parse(h);}catch(e){if(h==="X"){o=true;}else{o=undefined;}}}if(j.containerProperty){if(typeof j.convFromABAP==="function"){return j.convFromABAP(this._oJSONContainer[j.containerProperty],o);}return this._oJSONContainer[j.containerProperty];}return o;};A.prototype.setItemValue=function(i,o){var e=JSON.stringify(o),h=this._locateItem(i);if(h.containerProperty===" ignore"){return;}if(h.containerProperty){if(typeof h.convToABAP==="function"){this._oJSONContainer[h.containerProperty]=h.convToABAP(e);}else{this._oJSONContainer[h.containerProperty]=e;}if(!h.trueItemKey){return;}}if(h.index>=0){this._oJSONContainer.PersContainerItems[h.index].value=e;return;}this._oJSONContainer.PersContainerItems.push({"value":e,"id":h.trueItemKey,"category":h.category,"containerId":this._sContainerKey,"containerCategory":this._category});};A.prototype.delItem=function(i){var o=this._locateItem(i);if(o.containerProperty===" ignore"){return;}if(o.containerProperty){this._oJSONContainer[o.containerProperty]=o.initialValue;return;}if(o.index>=0){this._oJSONContainer.PersContainerItems.splice(o.index,1);return;}};return A;},true);
sap.ui.predefine('sap/ushell_abap/adapters/abap/AppStateAdapter',["sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/utils","sap/ui2/srvc/ODataWrapper"],function(O,q,L,u){"use strict";var A=function(s,p,c){this._oConfig=c&&c.config;var a=(O.get("services.appState.baseUrl",c)||"/sap/opu/odata/UI2/INTEROP")+"/";var o={baseUrl:a,"sap-language":sap.ushell.Container.getUser().getLanguage(),"sap-client":sap.ushell.Container.getLogonSystem().getClient()};this._oWrapper=sap.ui2.srvc.createODataWrapper(o);function d(m){sap.ui2.srvc.Error(m,"sap.ushell_abap.adapters.abap.AppStateAdapter");}sap.ui2.srvc.ODataService.call(this,this._oWrapper,d);};A.prototype.saveAppState=function(k,s,v,a,c){var d=new q.Deferred(),r="GlobalContainers",p={"id":k,"sessionKey":s,"component":c,"appName":a,"value":v};this._oWrapper.create(r,p,function(){d.resolve();},function(e){d.reject(e);L.error(e);});return d.promise();};A.prototype.loadAppState=function(k){var d=new q.Deferred(),r="GlobalContainers(id='"+encodeURIComponent(k)+"')";if(!k){throw new u.Error("The sKey is mandatory to read the data from the persistence layer");}this._oWrapper.openBatchQueue();this._oWrapper.read(r,function(a){d.resolve(a.id,a.value);},function(e){L.error(e);d.reject(e);},false);this._oWrapper.submitBatchQueue(function(){},function(e){L.error(e);d.reject(e);});return d.promise();};return A;},true);
sap.ui.predefine('sap/ushell_abap/adapters/abap/ClientSideTargetResolutionAdapter',["sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/isPlainObject","sap/ushell/utils","sap/base/Log","sap/ui2/srvc/ODataWrapper"],function(q,O,a,u,L){"use strict";var S="sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter",n=["sap-wd-configId","SAP-WD-CONFIGID","sap-client","SAP-CLIENT","System","SYSTEM","sap-language","SAP-LANGUAGE","sap-wd-htmlrendermode","sap-wd-deltarendering","wdallowvaluesuggest","sap-wd-lightspeed","sap-wd-remotedesktop","sap-wd-flashdebug","sap-accessibility","sap-theme","sap-*","SAP-*","wd*","WD*"];var C=function(s,p,A){var t=this;this._oLocalSystemAlias={http:{id:"",host:"",port:"",pathPrefix:"/sap/bc/"},https:{id:"",host:"",port:"",pathPrefix:"/sap/bc/"},rfc:{id:"",systemId:"",host:"",service:0,loginGroup:"",sncNameR3:"",sncQoPR3:""},id:"",client:"",language:""};this.hasSegmentedAccess=true;this._oAdapterConfig=A&&A.config;this._wdLengthLimit=1800;this._oODataWrapper=undefined;this._getODataWrapper=function(){if(!this._oODataWrapper){this._oODataWrapper=sap.ui2.srvc.createODataWrapper("/sap/opu/odata/UI2/INTEROP/");}return this._oODataWrapper;};this._aTargetMappings=[];this._aInbounds=[];this._aInitialSegment=undefined;this._oSystemAliasBuffer=new u.Map();this._oURLTemplates={};this._storeFromFullStartupResponse=function(f){if(f){if(f.targetMappings){t._aTargetMappings=f.targetMappings;}if(f.systemAliases){t._writeUserSystemAliasesToBuffer(f.systemAliases);}if(f.urlTemplates){t._oURLTemplates=f.urlTemplates;}}};this._fallbackToFullStartupRequest=function(r,R){q.sap.log.debug("Falling back to full start_up request from adapter","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");t._requestAllTargetMappings().done(function(f){t._storeFromFullStartupResponse(f);r();}).fail(function(m){R(m);});};this._iTargetMappingsUnusedPromiseRejectCount=0;this._oInitialSegmentPromise=A&&A.config&&A.config.initialSegmentPromise||(new Promise(function(r,R){t._iTargetMappingsUnusedPromiseRejectCount++;if(t._iTargetMappingsUnusedPromiseRejectCount===2){t._fallbackToFullStartupRequest(r,R);}}));this._oNavTargetPromise=A&&A.config&&A.config.navTargetDataPromise||(new Promise(function(r,R){t._iTargetMappingsUnusedPromiseRejectCount++;if(t._iTargetMappingsUnusedPromiseRejectCount===2){t._fallbackToFullStartupRequest(r,R);}}));this._oInitialSegmentPromise.then(function(b){if(b===null){q.sap.log.debug("Initial target mappings segment promise resolved with 'null'","Will not process initial target mappings segments again (mostly likely because this is no longer needed)","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");return;}if(t._aTargetMappings.length===0){q.sap.log.debug("Segmented start_up response returned","storing system aliases and inbounds from segment","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");var r=b[0],T=b[1],c=b[2];if(b.length>3){t._oURLTemplates=b[3];}t._aTargetMappings=T;t._writeUserSystemAliasesToBuffer(c);t._aInitialSegment=r;}else{q.sap.log.debug("Segmented start_up response returned","ignoring response because the full target mapping response returned before","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");}}).catch(function(r){q.sap.log.error("Initial segment promise was rejected.",r,"sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");});this._oNavTargetPromise.then(function(f){q.sap.log.debug("Full start_up response returned","storing system aliases and inbounds","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");t._storeFromFullStartupResponse(f);});};C.prototype.resolveHashFragmentFallback=function(o,i,p){var s=this._constructShellHashForLpdCust(i,p),b=p&&p["sap-system"]&&p["sap-system"][0],d=new q.Deferred();this._resolveHashFragmentBE(s||o).done(function(r){if(r&&b){r["sap-system"]=r["sap-system"]||b;}d.resolve(r);}).fail(d.reject.bind(d));return d.promise();};C.prototype.getInbounds=function(s){var d=new q.Deferred(),t=this;this._oInitialSegmentPromise.then(function(i){if(i===null){return;}if(t._isInSegment(s,t._aInitialSegment)){q.sap.log.debug("Got inbounds from initial segment","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");t._aInbounds=t._formatDirectStart(t._aTargetMappings);d.resolve(t._aInbounds);}else{q.sap.log.debug("Did not get inbound in initial segment","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");}});this._oNavTargetPromise.then(function(){q.sap.log.debug("Got inbounds from full start_up response","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");t._aInbounds=t._formatDirectStart(t._aTargetMappings);t.getInbounds=function(){return new q.Deferred().resolve(t._aInbounds).promise();};d.resolve(t._aInbounds);},function(m){d.reject(m);});return d.promise();};C.prototype._isInSegment=function(s,b){if(!Array.isArray(b)||!Array.isArray(s)){return false;}return s.every(function(e){return!b.every(function(t){return!(e.semanticObject===t.semanticObject&&e.action===t.action);});});};C.prototype._requestAllTargetMappings=function(){var p=sap.ui2.srvc.getParameterMap();var d=new q.Deferred();var r="/sap/bc/ui2/start_up?so=%2A&action=%2A&",c=(O.create("services.targetMappings",this._oAdapterConfig).cacheId&&("&sap-cache-id="+O.create("services.targetMappings",this._oAdapterConfig).cacheId))||"";function b(N){var v=p[N];if(v){r+=N+"="+encodeURIComponent(v[0])+"&";}}b("sap-language");b("sap-client");sap.ui2.srvc.get(r+"&shellType="+sap.ushell_abap.getShellType()+"&depth=0"+c,false,function(N){var o=JSON.parse(N);if(!o){d.reject("Malformed Full TM Result");}d.resolve(o);},function(m){d.reject(m);});return d.promise();};C.prototype._formatDirectStart=function(d){var t=this;if(!d){this._aInitialSegment=undefined;return[];}function m(s,o){var T={};var M=s.match(/^([^-]+)-([^~]+)/);if(!M){q.sap.log.warning("The target mapping id "+s+" is not valid","this target mapping will be discarded","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");return undefined;}if(!o.hasOwnProperty("text")){o.text="";}T.semanticObject=M[1];T.action=M[2];T.id=s;T.title=o.text;T.permanentKey="X-SAP-UI2-PAGE:"+o.catalogId+":"+o.tmChipId;var f={};["applicationType","applicationDependencies","applicationData","postParameters","text","url","systemAlias"].forEach(function(p){f[p]=o[p];});T.resolutionResult=sap.ushell_abap.bootstrap.adjustNavTargetResult(f);T.resolutionResult.additionalInformation=T.resolutionResult.additionalInformation||"";T.resolutionResult.appId=T.permanentKey;var r=T.resolutionResult,b=r.applicationType;if(s.indexOf("Shell-startWCF")===0&&b==="URL"){T.resolutionResult.systemAliasSemantics="apply";}T.resolutionResult.applicationType=t._formatApplicationType(s,T.resolutionResult);T.resolutionResult.systemAlias=o.systemAlias||"";T.deviceTypes=o.formfactors;T.resolutionResult["sap.ui"]={};T.resolutionResult["sap.ui"].technology=T.resolutionResult.applicationType;if(T.resolutionResult["sap.ui"].technology==="SAPUI5"){T.resolutionResult["sap.ui"].technology="UI5";}if(T.resolutionResult["sap.ui"].technology==="TR"){T.resolutionResult["sap.ui"].technology="GUI";}if(!T.deviceTypes){T.deviceTypes=o.formFactors||{};}T.deviceTypes.desktop=T.deviceTypes.desktop||false;T.deviceTypes.phone=T.deviceTypes.phone||false;T.deviceTypes.tablet=T.deviceTypes.tablet||false;if(Array.isArray(o.signature)){T.signature={};T.signature.additionalParameters=o.allowParams?"allowed":"ignored";T.signature.parameters={};o.signature.forEach(function(B){var p={};var U;var N=B.name;if(B.defaultValue&&B.defaultValue.value){p.defaultValue={};p.defaultValue.value=B.defaultValue.value;p.defaultValue.format=B.defaultValue.format||"plain";U=t._extractUserDefaultValue(p.defaultValue.value);if(U){p.defaultValue={"value":U,"format":"reference"};}}if(B.filter&&B.filter.value){p.filter={};p.filter.value=B.filter.value;p.filter.format=B.filter.format||"plain";U=t._extractUserDefaultValue(p.filter.value);if(U){p.filter={"value":U,"format":"reference"};}}if(B.renameTo){p.renameTo=B.renameTo;}p.required=B.required||false;T.signature.parameters[N]=p;});}else{T.signature=q.extend(true,{parameters:{}},o.signature);T.signature.additionalParameters=T.signature.additionalParameters||(o.allowParams?"allowed":"ignored");Object.keys(T.signature.parameters).forEach(function(k){var p=T.signature.parameters[k];if(p.filter){p.filter.format=p.filter.format||"plain";}if(p.defaultValue){p.defaultValue.format=p.defaultValue.format||"plain";}p.required=p.required||false;if(p.filter&&p.filter.hasOwnProperty("format")&&!(p.filter.hasOwnProperty("value"))){delete p.filter;}if(p.defaultValue&&p.defaultValue.hasOwnProperty("format")&&!(p.defaultValue.hasOwnProperty("value"))){delete p.defaultValue;}});}var c=T.signature&&T.signature.parameters&&T.signature.parameters["sap-hide-intent-link"];if(c&&c.hasOwnProperty("defaultValue")){T.hideIntentLink=c.defaultValue.value==="true";}if(c&&!c.required&&c.hasOwnProperty("defaultValue")){delete T.signature.parameters["sap-hide-intent-link"];}if(typeof o.parameterMappings==="object"){Object.keys(o.parameterMappings).forEach(function(k){var e=o.parameterMappings[k];if(k&&e.target){T.signature.parameters[k]=T.signature.parameters[k]||{};T.signature.parameters[k].renameTo=e.target;}});}if(T.resolutionResult.applicationType==="URL"&&a(o.urlTemplate)){T.templateContext=t.getUrlTemplateContext(o);}return T;}var R=[];Object.keys(d).forEach(function(k){var r=m(k,d[k]);if(r){R.push(r);}});return R;};C.prototype._formatApplicationType=function(t,r){var A=r.applicationType,U=r.url||"";function l(N,d){q.sap.log.warning("Cannot detect application type for TargetMapping id '"+t+"', will default to "+d+" application type","TargetMapping URL is '"+U+"'",S);}if(A==="SAPUI5"){return"SAPUI5";}if(A==="URL"&&r.additionalInformation&&r.additionalInformation.indexOf("SAPUI5.Component=")===0){return"SAPUI5";}if(A==="WDA"||A==="TR"||A==="WCF"){return A;}if(t.indexOf("Shell-startWCF")===0&&A==="URL"){return"WCF";}if(A==="NWBC"){if(U.indexOf("/~canvas;window=app/wda")>=0){return"WDA";}if(U.indexOf("/~canvas;window=app/transaction")>=0){return"TR";}l(r,"TR");return"TR";}if(A!=="URL"){l(r,"URL");}return"URL";};C.prototype._extractUserDefaultValue=function(s){var r,b=new RegExp("^%%(UserDefault[.].+)%%$"),m=b.exec(s);return m?m[1]:r;};C.prototype._formatSignature=function(o,A){var t=this,r={"parameters":{},"additionalParameters":A===false?"ignored":"allowed"};if(!o.results){return r;}o.results.forEach(function(e){var p,E=e.name,s,U;if(Object.prototype.hasOwnProperty.call(r.parameters,E)){q.sap.log.error("Duplicate property name "+E+" in "+JSON.stringify(o),"sap.ui2.srvc.ClientSideTargetResolutionAdapter._formatSignature");}r.parameters[E]={"required":t._getObjectDefaulting(e,"required",false)};p=r.parameters[E];s=t._getObjectDefaulting(e,"value","");if(e.regexp===true){p.filter={"value":(s===""?".*":s),"format":"regexp"};return;}if(e.required===false){U=t._extractUserDefaultValue(s);if(U){p.defaultValue={"value":U,"format":"reference"};return;}if(s!==""){p.defaultValue={"value":s};}return;}if(e.required===true&&e.value){U=t._extractUserDefaultValue(s);if(U){p.filter={"value":U,"format":"reference"};return;}if(s!==""){p.filter={"value":s};}}});return r;};C.prototype._mergeParameterMappingsIntoSignature=function(s,o){var p=o.results;if(!p){return;}p.forEach(function(P){var b=P.source;var t=P.target;if(t){s.parameters[b]=s.parameters[b]||{};if(s.parameters[b].renameTo){q.sap.log.warning("duplicate parameter mapping for'"+b+"'","OData Parameter mappings is "+JSON.stringify(P,null,"   "),S);}s.parameters[b].renameTo=t;}});};C.prototype._formatDeviceTypes=function(f){var r={},t=this;["desktop","tablet","phone"].forEach(function(p){r[p]=t._getObjectDefaulting(f,p,false);});return r;};C.prototype._getObjectDefaulting=function(r,s,d){var o=O.get(s||"",r);return(o===undefined)?d:o;};C.prototype._constructShellHashForLpdCust=function(i,p){var l="",f,t=q.sap.getObject("resolutionResult._original",2,i);if(!a(t)){f="the given target mapping is not an object";}if(!f&&!t.hasOwnProperty("id")){f="no id found in target mapping _original object";}if(!f&&typeof t.id!=="string"){f="the target mapping id was not a string";}if(!f&&t.id.length===0){f="the target mapping id was an empty string";}if(f){q.sap.log.error("Cannot construct Shell Hash for LPD_CUST resolution",f,"sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");return undefined;}l+=t.id;var b=sap.ushell.Container.getService("URLParsing").paramsToString(p);if(b.length>0){l+="?"+b;}return l;};C.prototype._openBatchQueueUnlessOpen=function(o){if(o.isBatchQueueOpen()){return false;}o.openBatchQueue();return true;};C.prototype._getShellType=function(){if(sap&&sap.ushell_abap&&typeof sap.ushell_abap.getShellType==="function"){return sap.ushell_abap.getShellType();}return"FLP";};C.prototype._resolveHashFragmentBE=function(f){var d=new q.Deferred(),t=this,b,F=sap.ui2.srvc.getFormFactor();function e(U){return encodeURIComponent(U).replace(/'/g,"''");}b=this._openBatchQueueUnlessOpen(this._getODataWrapper());this._oODataWrapper.read("ResolveLink?linkId='"+e(f)+"'&shellType='"+t._getShellType()+"'"+(F?"&formFactor='"+e(F)+"'":""),function(r){var i,D="",A;if(r.results.length){if(r.results.length>1){for(i=0;i<r.results.length;i+=1){delete r.results[i].__metadata;D+=(i===0?"used target: ":"\nignored target: ")+JSON.stringify(r.results[i]);}q.sap.log.error("INTEROP service's ResolveLink operation "+"returned "+r.results.length+" targets for hash '#"+f+"', first one is used.",D,"sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");}r=r.results[0];A=sap.ushell_abap.bootstrap.adjustNavTargetResult(r);A.url=sap.ushell_abap.bootstrap.addPostParametersToNavTargetResultUrl(r.postParameters,A.url);if(A&&A.applicationType==="SAPUI5"){A.applicationType="URL";}t._compactTooLongWdaUrl(A).done(function(c){d.resolve(c);}).fail(function(m){d.reject("Could not resolve link '"+f+"' due to compactation failure"+m);});}else{d.reject("Could not resolve link '"+f+"'");}},function(m){d.reject(m);});if(b){t._getODataWrapper().submitBatchQueue(function(){},d.reject.bind(d));}return d.promise();};C.prototype._compactTooLongWdaUrl=function(r){var d=new q.Deferred();if(r&&r.applicationType==="NWBC"&&r.url&&r.url.indexOf("/ui2/nwbc/~canvas;window=")===0&&r.url.length>this._getWDAUrlShorteningLengthLimit()){this._compactUrl(r.url).done(function(c){r.url=c;d.resolve(r);}).fail(d.reject.bind(d));return d.promise();}return d.resolve(r).promise();};C.prototype._compactUrl=function(U){var m=U.match(/\?.*/);var o=sap.ushell.Container.getService("URLParsing");if(!(m&&m[0]&&m[0].length>this._getWDAUrlShorteningLengthLimit()-200)){return new q.Deferred().resolve(U).promise();}var p=o.parseParameters(m[0]);var d=new q.Deferred();sap.ushell.Container.getService("ShellNavigation").compactParams(p,n,undefined).done(function(c){var r=U.match(/^[^?]*/)[0]+"?"+o.paramsToString(c);d.resolve(r);}).fail(d.reject.bind(d));return d.promise();};C.prototype._getWDAUrlShorteningLengthLimit=function(){var N=u.getParameterValueBoolean("sap-ushell-nowdaurlshortening");if(N){return 6000000;}return this._wdLengthLimit;};C.prototype.resolveSystemAlias=function(s){var m,d=new q.Deferred(),t=this,o;o=this._readSystemAliasFromBuffer(s);if(o){q.sap.log.debug("System alias '"+s+"' was already buffered","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");window.setTimeout(function(){d.resolve(o);},0);}else{q.sap.log.debug("System alias '"+s+"' is not in buffer","","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");var r=function(){o=t._readSystemAliasFromBuffer(s);if(o){q.sap.log.debug("System alias '"+s+"' is now in buffer","Skipping INTEROP service call","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");d.resolve(o);}else{q.sap.log.debug("System alias '"+s+"' still not in buffer","Resolving via INTEROP service","sap.ushell_abap.adapters.abap.ClientSideTargetResolutionAdapter");t._readSystemAliasViaInterop(s).fail(function(e){d.reject(e);}).done(function(b){o=t._fixSystemAlias(b);if(o&&o.id){t._writeSystemAliasToBuffer(o);d.resolve(o);}else{m="Data returned for system alias is not valid";q.sap.log.warning("ClientSideTargetResolutionAdapter: "+m);d.reject(m);}});}};this._oInitialSegmentPromise.then(r,r);}return d.promise();};C.prototype._writeUserSystemAliasesToBuffer=function(s){var t=this;if(typeof s==="undefined"){return;}if(a(s)){Object.keys(s).forEach(function(b){t._writeSystemAliasToBuffer(t._fixSystemAlias(s[b]));});return;}s.forEach(function(o){t._writeSystemAliasToBuffer(t._fixSystemAlias(o));});};C.prototype._readSystemAliasFromBuffer=function(s){var r=this._oSystemAliasBuffer.get(s);if(!r&&s===""){return this._oLocalSystemAlias;}return r;};C.prototype._writeSystemAliasToBuffer=function(s){if(s&&s.id){this._oSystemAliasBuffer.put(s.id,s);}return s;};C.prototype._fixSystemAlias=function(s){s=s||{};delete s.__metadata;var f={};f.id=s.id||"";f.client=s.client||"";f.language=s.language||"";["http","https"].forEach(function(d){if(s.hasOwnProperty(d)){delete s[d].__metadata;if(s[d].id!==""){f[d]=q.extend({id:"",host:"",port:"",pathPrefix:""},s[d]);}}});if(s.hasOwnProperty("rfc")&&s.rfc.id){delete s.rfc.__metadata;f.rfc=q.extend({id:"",systemId:"",host:"",service:0,loginGroup:"",sncNameR3:"",sncQoPR3:""},s.rfc);}return f;};C.prototype._readSystemAliasViaInterop=function(s){var d=new q.Deferred(),r="SystemAliases(id='"+encodeURIComponent(s)+"')?$format=json";this._getODataWrapper().read(r,function(o){d.resolve(o);},function(m){d.reject(m);});return d.promise();};C.prototype.getSystemAliases=function(){return(this._oSystemAliasBuffer&&this._oSystemAliasBuffer.entries)||{};};C.prototype.getUrlTemplateContext=function(d){var U=this._oURLTemplates[d.urlTemplate.id];if(!U){L.error("No URL template found.");return null;}var s={systemAliases:this.getSystemAliases(),urlTemplates:this._oURLTemplates};return{payload:U.payload,site:s,siteAppSection:d};};return C;},true);
sap.ui.predefine('sap/ushell_abap/adapters/abap/ContainerAdapter',["sap/ui/thirdparty/jquery","sap/ushell/System","sap/ushell/User","sap/ushell/utils","sap/ushell_abap/bootstrap/evo/abap.bootstrap.utils","sap/ui2/srvc/ODataWrapper","sap/ui/thirdparty/URI","sap/ui/thirdparty/datajs","sap/base/util/ObjectPath"],function(q,S,U,u,a,O,b,c,d){"use strict";var C=function(s,p,P){var o,e="/sap/public/bc/icf/logoff";this._logoutViaHiddenIFrame=function(D,f){var F=document.createElement("iframe"),g=f.replace(/"/g,"\\\"");window.addEventListener("message",function(E){if(E.data===f){D.resolve();}});F.style.visibility="hidden";document.body.appendChild(F);var h=F.contentWindow.document;function i(){parent.postMessage(g,"*");}var I=h.createElement("img");I.src=f;I.addEventListener("load",i);I.addEventListener("error",i);h.body.appendChild(I);};this.getSystem=function(){return s;};this.getUser=function(){return o;};this._determineAccessibility=function(f){var A=u.getParameterValueBoolean("sap-accessibility");if(A!==undefined){return A;}A=f.accessibility;if(A!==undefined){return A;}return false;};this._setThemeAccessibilityFlags=function(f){if(f.userProfile&&f.userProfile.length){var g,h;g=f.userProfile.filter(function(i){return i.id&&i.id==="THEME";})[0];if(g&&g.value){f.setThemePermitted=(g.editState===3);}else{f.oUserProfileDataTheme=false;}h=f.userProfile.filter(function(i){return i.id&&i.id==="ACCESSIBILITY";})[0];if(h&&h.id){f.setAccessibilityPermitted=(h.editState===3);}else{f.setAccessibilityPermitted=false;}if(h&&h.value==="true"){f.accessibility=true;}if(h&&h.value==="false"){f.accessibility=false;}f.accessiblity=this._determineAccessibility(f);}};this._setUserProfileFlags=function(f){if(f.userProfile&&f.userProfile.length&&Array.isArray(f.userProfile)){var g={};f.setContentDensityPermitted=false;f.userProfile.forEach(function(h){if((h.id in g)){return;}g[h.id]=h.id;if(h.id==="CONTENT_DENSITY"){f.contentDensity=h.value;f.setContentDensityPermitted=(h&&h.editState===3)||false;}if(h.id==="TRACKING_USAGE_ANALYTICS"){if(typeof h.value==="string"){if(h.value.toLowerCase()==="true"||h.value.toLowerCase()==="false"){h.value=(h.value.toLowerCase()==="true")||false;}else{h.value=undefined;}}if(typeof h.value==="undefined"||typeof h.value==="boolean"){f.trackUsageAnalytics=h.value;}else{f.trackUsageAnalytics=undefined;}}});}};this.load=function(){var D=new q.Deferred(),f=P.config;f.alias=s.getAlias();f.platform=s.getPlatform();s=new S(f);this._setThemeAccessibilityFlags(f);this._setUserProfileFlags(f);o=new U(f);sap.ui2.srvc.ODataWrapper["sap-language"]=f.language;sap.ui2.srvc.ODataWrapper["sap-client"]=f.client;if(f.target){C.startUpApplication={adjustedInitialTarget:f.adjustedInitialTarget,target:f.target};}this._setUserImage(o);return D.resolve().promise();};this.addFurtherRemoteSystems=function(){var D=new q.Deferred(),f;f=sap.ushell.Container.getService("PageBuilding").getFactory().getPageBuildingService();f.readAllCatalogsForUser("type eq 'H' or type eq 'REMOTE'",function(g){var h=g.results,i="/sap/opu/odata/sap/SM_CATALOG_SRV/";if(h){h.forEach(function(j){var I=/^\/sap\/hba\//.test(j.baseUrl);if(j.type==="H"||j.baseUrl===i||I){sap.ushell.Container.addRemoteSystem(new S({alias:j.systemAlias,platform:(I||j.type==="H")?"hana":"abap",baseUrl:j.type==="H"?"":";o="}));}});}D.resolve();},function(E){q.sap.log.error("Reading REMOTE catalogs failed: "+E,null,"sap.ushell_abap.adapters.abap.ContainerAdapter");D.reject();});return D.promise();};this.getCurrentUrl=function(){return window.location.href;};this.sessionKeepAlive=function(){var f="/sap/opu/odata/UI2/PAGE_BUILDER_PERS";var x=a.createAndOpenXHR(f,null,"HEAD");x.onreadystatechange=function(){if(this.readyState===4){q.sap.log.debug("server session was extended");}};x.send();};this.logout=function(l){var D=new q.Deferred(),f;if(l){if(u.hasNativeLogoutCapability()){var F=(new b(e)).absoluteTo(this.getCurrentUrl()).search("").toString();window.external.getPrivateEpcm().doLogOff(F);}else{this.logoutRedirect();}q.sap.log.info("ABAP system logged out: "+s.getAlias(),null,"sap.ushell_abap.adapters.abap.ContainerAdapter");D.resolve();}else{f=s.adjustUrl(e);q.sap.log.info("Logging out from system '"+s.getAlias()+"' via hidden iframe");this._logoutViaHiddenIFrame(D,f);}return D.promise();};this.logoutRedirect=function(){var f=s.adjustUrl(e);this._setDocumentLocation(f);};this._setDocumentLocation=function(l){window.document.location=l;};this._setUserImage=function(o){function i(){var f=window["sap-ushell-config"],v=d.get("renderers.fiori2.componentData.config.enableUserImage",f);return!!v;}if(i()&&o&&o.isJamActive&&o.isJamActive()){c.read("/sap/bc/ui2/smi/rest_tunnel/Jam/api/v1/OData/Self?$format=json",function(r){var j=r.results.Id,J="/sap/bc/ui2/smi/rest_tunnel/Jam/api/v1/OData/Members('"+j+"')/ProfilePhoto/$value";o.setImage(J);},function(){q.sap.log.error("Could not recieve JAM user data");});}};};return C;},true);
sap.ui.predefine('sap/ushell_abap/adapters/abap/EndUserFeedbackAdapter',["sap/ui2/srvc/ODataWrapper","sap/ui2/srvc/ODataService","sap/ui/thirdparty/jquery"],function(O,a,q){"use strict";return function(s){var d={baseUrl:"/sap/opu/odata/UI2/INTEROP/","sap-language":sap.ushell.Container.getUser().getLanguage(),"sap-client":sap.ushell.Container.getLogonSystem().getClient()};var o=sap.ui2.srvc.createODataWrapper(d),l=false,L="";this.sendFeedback=function(e){var D,r="FeedbackHeaders",E={isAnonymous:e.isAnonymous,feedbackText:e.feedbackText,applicationType:e.applicationType||"<undefined>",additionalInformation:e.additionalInformation,url:e.url,navigationIntent:e.navigationIntent,formFactor:e.formFactor,eMail:e.eMail,userId:e.userId,Ratings:e.ratings};D=new q.Deferred();sap.ui2.srvc.ODataService.call(this,o,function(){return false;});o.create(r,E,function(b){D.resolve(b.feedbackCount);},function(b){D.reject(b);});return D.promise();};this.getLegalText=function(){var D,r="FeedbackLegalTexts('1')";D=new q.Deferred();if(l){sap.ui2.srvc.call(function(b){D.resolve(L);});return D.promise();}sap.ui2.srvc.ODataService.call(this,o,function(){return false;});o.read(r,function(b){L=b.legalText;l=true;D.resolve(b.legalText);},function(e){D.reject(e);});return D.promise();};this.isEnabled=function(){var D=new q.Deferred(),b=this.getLegalText();b.done(function(L){if(L){D.resolve();}else{D.reject();}});b.fail(function(e){D.reject();});return D.promise();};};},true);
sap.ui.predefine('sap/ushell_abap/adapters/abap/LaunchPageAdapter',["sap/ui/thirdparty/URI","sap/ushell/components/cards/ManifestPropertyHelper","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/util/isEmptyObject","sap/m/GenericTile","sap/ushell/Config","sap/ui2/srvc/chipinstance","sap/ui2/srvc/catalog","sap/ui2/srvc/chipdefinition"],function(U,M,q,O,a,G,C){"use strict";var c="sap.ushell_abap.adapters.abap.LaunchPageAdapter",d="/UI2/Fiori2LaunchpadHome",D="/UI2/FLPD_CATALOG",b="X-SAP-UI2-CHIP:/UI2/DYNAMIC_APPLAUNCHER",S="X-SAP-UI2-CHIP:/UI2/STATIC_APPLAUNCHER",f="X-SAP-UI2-CHIP:/UI2/CARD",g={catalogTileNotFound:"catalogTileNotFound",referenceTileNotFound:"referenceTileNotFound",noTargetMapping:"noTargetMapping",emptyConfiguration:"emptyConfiguration",tileIntentSupportException:"tileIntentSupportException"};var F="/UI2/FakePageId";var L=function(u,p,A){var h,P=false,o,j,t=new sap.ui2.srvc.Map(),k=(A&&A.config)||{},T=k.services&&k.services.targetMappings,l=k.services&&k.services.launchPage,E={},m=this;this._oCurrentPageSet=null;if(!T){throw new Error("Configuration for target mappings service not passed");}if(!T.baseUrl){throw new Error("baseUrl was not passed in Configuration for target mappings service");}if(!T.relativeUrl){throw new Error("relativeUrl was not passed in Configuration for target mappings service");}if(sap.ui2.srvc.contracts.preview.setEnvironmentType){sap.ui2.srvc.contracts.preview.setEnvironmentType("runtime");}function r(e,s,i){try{return e.getImplementationAsSapui5();}catch(n){q.sap.log.error(i+": "+(n.message||n),n.stack,c);return new sap.ushell.ui.tile.StaticTile({icon:"sap-icon://error",info:"",infoState:"Critical",subtitle:n.message||n,title:s}).addStyleClass("sapUshellTileError");}}sap.ui2.srvc.testPublishAt(m);function v(e,s,i){if(e.getBagIds().indexOf(s)>-1&&e.getBag(s).getTextNames().indexOf(i)>-1){return e.getBag(s).getText(i);}}sap.ui2.srvc.testPublishAt(m);function w(i,s,n){var x,e1;try{x=i.getConfigurationParameter(s);e1=JSON.parse(x);}catch(e){return;}if(e1[n]!==undefined){return e1[n];}}sap.ui2.srvc.testPublishAt(m);function y(e,s){var x=(e&&sap.ui2.srvc.isArray(e.order)?e.order:[]),e1={},f1=[],g1,h1,i,n;x=x.concat(e&&sap.ui2.srvc.isArray(e.linkOrder)?e.linkOrder:[]);for(i=0,n=s.length;i<n;i+=1){g1=s[i];e1[g1.getId()]=g1;}for(i=0,n=x.length;i<n;i+=1){h1=x[i];if(Object.prototype.hasOwnProperty.call(e1,h1)){f1.push(e1[h1]);delete e1[h1];}}for(i=0,n=s.length;i<n;i+=1){g1=s[i];if(Object.prototype.hasOwnProperty.call(e1,g1.getId())){f1.push(g1);}}return f1;}function z(e,i,s){if(s==="link"){return B(e.linkOrder,i.getId());}return B(e.order,i.getId());}function B(e,i){var s=e.indexOf(i);if(s<0){return s;}e.splice(s,1);return s;}function H(e,s,i,n){if(n==="link"){i=i-e.order.length;e.linkOrder.splice(i,0,s);}else{e.order.splice(i,0,s);}}function I(e,i){var n=i.getGroupTiles(e),s={order:[],linkOrder:[]};n.forEach(function(x){var e1=i.getTileType(x);if(e1==="link"){s.linkOrder.push(x.getId());}else{s.order.push(x.getId());}});return s;}function J(){var i;try{i=JSON.parse(m._oCurrentPageSet.getConfiguration());i.order.splice(0,0,m._oCurrentPageSet.getDefaultPage().getId());}catch(e){i={order:[m._oCurrentPageSet.getDefaultPage().getId()]};}return y(i,m._oCurrentPageSet.getPages());}this.hideGroups=function(e){var i,n=new q.Deferred();if(!e||!(e instanceof Array)){n.reject("Input parameter must be of type Array.");}else{i=JSON.parse(m._oCurrentPageSet.getConfiguration()||"{}");i.hiddenGroups=e;m._oCurrentPageSet.setConfiguration(JSON.stringify(i),n.resolve.bind(n),n.reject.bind(n));}return n.promise();};this.isGroupVisible=function(e){var s=m._oCurrentPageSet.getConfiguration(),n,x,i;if(!s){return true;}n=JSON.parse(s);if(!n||!n.hiddenGroups){return true;}x=n.hiddenGroups;for(i=0;i<x.length;i+=1){if(x[i]===e.getId()){return false;}}return true;};sap.ui2.srvc.testPublishAt(m);function K(e){function s(){if(e._loadingDeferred){e._loadingDeferred.resolve();}delete e._loadingDeferred;delete e.$loadingPromise;}function i(n){q.sap.log.error("Failed to load tile: "+n,e.toString(),c);if(e._loadingDeferred){e._loadingDeferred.reject();}delete e._loadingDeferred;delete e.$loadingPromise;}e.load(s,i);}this._loadApplaunchersAndDelayLoadingOfOtherChips=function(e,i){var n=0,s=[],x=[];function e1(){if(n<=0){i();}}function f1(h1){h1._loadingDeferred=new q.Deferred();h1.$loadingPromise=h1._loadingDeferred.promise();if(window["sap-ui-debug"]===true){K(h1);}else{sap.ui.require(["sap/ushell/EventHub"],function(i1){var j1=i1.on("CoreResourcesComplementLoaded");j1.do(function(k1){if(k1.status==="success"){K(h1);j1.off();}else{q.sap.log.error("Did not load custom tile as core resources where not loaded",null,c);}});});}}function g1(h1){function i1(){n-=1;e1();}n+=1;h1.load(i1,function(j1){q.sap.log.error("Failed to load tile: "+j1,h1.toString(),c);i1();});}e.forEach(function(h1){h1.getChipInstances().forEach(function(i1){if(Z(i1)){x.push(i1);}else if($(i1)){}else if(X(i1)||Y(i1)){g1(i1);}else{s.push(i1);}});});s.forEach(function(h1){f1(h1);});x.forEach(function(h1){f1(h1);});e1();};sap.ui2.srvc.testPublishAt(m,"readTargetMappings");function N(){var e=new q.Deferred(),i,s,n;function e1(g1){var h1=[];Object.keys(g1).forEach(function(i1){var x={};["semanticObject","semanticAction","formFactors"].forEach(function(j1){x[j1]=g1[i1][j1];});h1.push(x);});return h1;}if(O.get("compactTMPromise",k)){k.compactTMPromise.then(function(x){var g1=e1(x||{});e.resolve({results:g1});},function(x){e.reject(x);});return e.promise();}i=O.create("services.targetMappings",k);s=i.cacheId||"";n="/sap/bc/ui2/start_up?so=%2A&action=%2A&tm-compact=true&shellType="+m._getShellType()+"&depth=0";if(s){n+=(n.indexOf("?")<0?"?":"&")+"sap-cache-id="+s;}var f1=i.sUI2CacheDisable;if(f1){n+=(n.indexOf("?")<0?"?":"&")+"sap-ui2-cache-disable="+f1;}sap.ui2.srvc.get(n,false,function(x){var g1=JSON.parse(x),h1=g1.targetMappings||{},i1=e1(h1);e.resolve({results:i1});},function(x){e.reject(x);});return e.promise();}sap.ui2.srvc.testPublishAt(m);function Q(s,e){return s+"-"+e;}sap.ui2.srvc.testPublishAt(m);function R(e){return!e.getConfiguration();}function V(e){var i=[],n=sap.ushell.Container.getService("PageBuilding").getFactory();e.forEach(function(s){var x=s.getRemoteCatalog(),e1;if(s.getBaseChipId()==="X-SAP-UI2-CHIP:/UI2/ACTION"){return;}e1=n.createChipInstance({chipId:s.getId(),remoteCatalogId:x&&x.getId()});i.push(e1);});return i;}function W(){var e=m._oCurrentPageSet.getDefaultPage().getAllCatalogs(),n,s=e.getCatalogs(),x=[],i;for(i=0;i<s.length;i+=1){n=s[i];x.push({data:{},errorMessage:undefined,id:n.getId(),title:n.isStub()?n.getId():n.getTitle(),tiles:n.isStub()?[]:V(n.getChips()),ui2catalog:n});}return x;}function X(e){var s=e.getChip().getBaseChipId();return s===b||s===S;}function Y(e){var s=e.getChip().getBaseChipId();return f===s;}function Z(e){return!!e.getChip().getRemoteCatalog();}function $(e){return!Z(e)&&e.getChip().getBaseChipId()===undefined;}function _(e){var i,s=e.getConfigurationParameter("tileConfiguration");try{i=JSON.parse(s||"{}");}catch(n){q.sap.log.error("Tile with ID '"+e.getId()+"' has a corrupt configuration containing a 'tileConfiguration' value '"+s+"' which could not be parsed. If present, a (stringified) JSON is expected as value.",n.message,"sap.ushell_abap.adapters.abap.LaunchPageAdapter");return{};}return i;}function a1(e){var i={},n,s,x;try{n=JSON.parse(e.getChip()._getChipRawConfigurationString());s=JSON.parse(n&&n.tileConfiguration||"{}");x=JSON.parse(s&&s.TILE_PROPERTIES||"{}");if(x.semanticObject&&x.semanticAction){i.navigation_use_semantic_object=true;i.navigation_semantic_object=x.semanticObject;i.navigation_semantic_action=x.semanticAction;}}catch(e1){return{};}return i;}function b1(e){var s,i,n;if(e.getChip().getBaseChipId()==="X-SAP-UI2-CHIP:/UI2/AR_SRVC_NEWS"){return{navigation_use_semantic_object:true,navigation_semantic_object:"NewsFeed",navigation_semantic_action:"displayNewsList",navigation_semantic_parameters:"",navigation_target_url:"#NewsFeed-displayNewsList"};}s=a1(e);if(s.navigation_use_semantic_object){return s;}try{n=JSON.parse(e.getChip()._getChipRawConfigurationString());i=JSON.parse(n&&n.tileConfiguration||"{}");}catch(x){return{};}return i;}this._parseFullChipId=function(s){var e=s.split(":"),i=e.pop(),n=null;if(e.length>2){n=e.shift();}return{id:i,prefix:n,catalog:e.join(":")};};this.getTargetMappingSupport=function(){return t;};this._parseReferenceLost=function(s){var e,i=s||Object.prototype.toString.apply(i);if(!i.match(/^Reference lost: Note \d+ Page.+\s,\sInstance ID.+$/)){q.sap.log.warning("The string that describes a lost reference is in an unexpected format","This is expected to be a string exactly like 'Reference lost: Note <#> Page <CATALOG_ID> , Instance ID <CHIP_ID>' instead of the given '"+s+"'","sap.ushell_abap.adapters.abap.LaunchPageAdapter");return{id:"Unknown",catalog:"Unknown"};}e=i.split(" , ").map(function(n){return n.split(" ").pop();});return{id:e[1],catalog:e[0]};};this._flattenArray=function(i){var m=this;if(Object.prototype.toString.apply(i)!=="[object Array]"){return i;}return i.reduce(function(e,n){return e.concat(m._flattenArray(n));},[]);};this._findAndReportTileErrors=function(e,t){var i=this._getPossibleTileErrors(e,t);if(i.length>0){this._reportTileErrors(i);}};this._getPossibleTileErrors=function(e,t){var m=this;return e.map(function(i){return{group:{id:i.getId(),title:i.getTitle()},errors:m._getPossibleTileErrorsFromOnePage(i,t)};});};this._getPossibleTileErrorsFromOnePage=function(e,t){var m=this;var i=e.getChipInstances().reduce(function(n,s){var x,e1,f1,g1,h1,i1,j1,k1;k1=s.getChip();e1=m._parseFullChipId(k1.getId());if(!k1.isInitiallyDefined()){n.push({type:g.catalogTileNotFound,chipInstanceId:s.getId(),chipId:e1.id,chipCatalogId:e1.catalog});}else if(k1.isReference()&&k1.isBrokenReference()){h1=m._parseReferenceLost(k1.getTitle());n.push({type:g.referenceTileNotFound,chipInstanceId:s.getId(),referenceChipId:e1.id,referenceChipCatalogId:e1.catalog,missingReferredChipId:h1.id,missingReferredCatalogId:h1.catalog});}else{try{x=m._checkTileIntentSupport(s,t);}catch(l1){x={isSupported:false,reason:g.tileIntentSupportException,exception:l1};}if(!x.isSupported){g1=v(s,"tileProperties","display_title_text");f1=v(s,"tileProperties","display_subtitle_text");switch(x.reason){case g.noTargetMapping:if(X(s)){i1=_(s);}else{i1=b1(s);}n.push({type:g.noTargetMapping,chipInstanceId:s.getId(),chipInstanceTitle:g1||i1.display_title_text||s.getTitle(),chipInstanceSubtitle:f1||i1.display_subtitle_text,tileURL:i1.navigation_target_url||"#"+i1.navigation_semantic_object+"-"+i1.navigation_semantic_action+(i1.navigation_semantic_parameters?"?"+i1.navigation_semantic_parameters:"")});break;case g.emptyConfiguration:j1=s.getConfigurationParameter("tileConfiguration");n.push({type:g.emptyConfiguration,chipInstanceId:s.getId(),chipInstanceTitle:g1||s.getTitle(),chipInstanceSubtitle:f1||null,tileConfiguration:j1});break;case g.tileIntentSupportException:n.push({type:g.tileIntentSupportException,exception:x.exception,chipInstanceId:s.getId()});break;case g.referenceTileNotFound:break;default:}}}return n;},[]);return i;};this._formatTileError=function(e){switch(e.type){case g.catalogTileNotFound:return"comes from catalog tile with ID '"+e.chipId+"' but this cannot be found in catalog '"+e.chipCatalogId+"' (CATALOG TILE NOT FOUND).";case g.referenceTileNotFound:return"comes from reference tile '"+e.referenceChipId+"'"+" in catalog '"+e.referenceChipCatalogId+"'"+" which in turn refers to the tile '"+e.missingReferredChipId+"'"+" from catalog '"+e.missingReferredCatalogId+"', but this is missing (REFERENCED TILE NOT FOUND).";case g.noTargetMapping:return"was hidden because a target mapping for the tile URL '"+e.tileURL+"' was not found (TARGET MAPPING NOT FOUND).";case g.emptyConfiguration:return"the tile configuration '"+e.tileConfiguration+"' is empty or invalid (BAD CONFIGURATION).";case g.tileIntentSupportException:return"exception occurred while checking tile intent support: "+e.exception+" (EXCEPTION RAISED).";default:return"unknown error type '"+e.type+"' (UNKNOWN ERROR). Error data: "+JSON.stringify(e,null,3);}};this._reportTileErrors=function(e){var m=this;var n=[];var x=[];function e1(f1,g1){var h1=[f1,g1].map(function(s,i){return i===1&&s?"("+s+")":s;}).filter(function(s){return typeof s==="string"&&s.length>0;}).join(" ");return(h1.length>0)?"'"+h1+"'":"";}e.forEach(function(i){var f1="  in Group '"+i.group.title+"' with Group ID '"+i.group.id+"'",g1=[],h1=[];i.errors.forEach(function(i1){var j1=["  - tile instance",e1(i1.chipInstanceTitle,i1.chipInstanceSubtitle),"with ID '"+i1.chipInstanceId+"'"].filter(function(s){return s.length>0;}).join(" ");if(i1.type===g.noTargetMapping){h1.push([j1,"    "+m._formatTileError(i1)].join("\n"));}else{g1.push([j1,"    "+m._formatTileError(i1)].join("\n"));}});if(g1.length>0){x.push([f1,g1.join("\n")].join("\n"));}if(h1.length>0){n.push([f1,h1.join("\n")].join("\n"));}});if(x.length>0){x.unshift("Tile error(s) were detected:");q.sap.log.error(x.join("\n"),null,"sap.ushell_abap.adapters.abap.LaunchPageAdapter");}if(n.length>0){n.unshift("Tile warning(s) were detected:");q.sap.log.warning(n.join("\n"),null,"sap.ushell_abap.adapters.abap.LaunchPageAdapter");}};this.getGroups=function(){var m=this,e,i,n;if(P){return(new q.Deferred()).resolve(J()).promise();}if(!o){o=new q.Deferred();e=new q.Deferred();n=sap.ushell.Container.getService("PageBuilding");if(l&&l.cacheId){n.getFactory().getPageBuildingService().readPageSet.cacheBusterTokens.put(d,l.cacheId);}if(l&&l["sap-ui2-cache-disable"]&&n.getFactory().getPageBuildingService().readPageSet){var s=n.getFactory().getPageBuildingService().readPageSet.appendedParameters||{};s["sap-ui2-cache-disable"]=l["sap-ui2-cache-disable"];n.getFactory().getPageBuildingService().readPageSet.appendedParameters=s;}i=N().done(function(e1){var f1=sap.ui2.srvc.getFormFactor();e1.results.forEach(function(g1){var h1=Q(g1.semanticObject,g1.semanticAction);t.put(h1,t.get(h1)||!!(g1.formFactors&&g1.formFactors[f1]));});});if(C.last("/core/spaces/enabled")){sap.ushell.Container.getServiceAsync("PageBuilding").then(function(e1){var f1=e1.getFactory();var g1=new sap.ui2.srvc.Page(f1,{id:F});var h1={getDefaultPage:function(){return g1;},getPages:function(){return[g1];},appendPage:function(){throw new Error("Not implemented in Pages Runtime");},isPageRemovable:function(){return false;},removePage:function(){throw new Error("Not implemented in Pages Runtime");},isPageResettable:function(){return true;},resetPage:function(){},getConfiguration:function(){return"{}";},setConfiguration:function(){},filter:function(){}};m._oCurrentPageSet=h1;o.resolve([]);});}else{var x=n.getPageSet(d);x.fail(e.reject.bind(e)).done(function(e1){m._oCurrentPageSet=e1;m._oCurrentPageSet.filter([d],[D]);m._loadApplaunchersAndDelayLoadingOfOtherChips(e1.getPages(),e.resolve.bind(e,e1));});q.when(i,e).done(function(e1,f1){P=true;if(q.sap.log.getLevel()>=q.sap.log.Level.DEBUG){m._findAndReportTileErrors(f1.getPages(),t);}o.resolve(J());}).fail(o.reject.bind(o));}}return o.promise();};this.getDefaultGroup=function(){var e=new q.Deferred();this.getGroups().done(function(){e.resolve(m._oCurrentPageSet.getDefaultPage());}).fail(e.reject.bind(e));return e.promise();};this.getGroupTitle=function(e){return e.getTitle();};this.getGroupId=function(e){return e.getId();};this.getGroupTiles=function(i){var n;try{n=JSON.parse(i.getLayout());}catch(e){q.sap.log.warning("Group "+i.getId()+": invalid layout: "+i.getLayout(),null,c);}return y(n,i.getChipInstances());};this.addGroup=function(s){var e=new q.Deferred();m._oCurrentPageSet.appendPage(s,D,e.resolve.bind(e),e.reject.bind(e,J()));return e.promise();};this.removeGroup=function(e){var i=new q.Deferred();if(m._oCurrentPageSet.isPageRemovable(e)){m._oCurrentPageSet.removePage(e,i.resolve.bind(i),i.reject.bind(i,J()));}else{i.reject(J());}return i.promise();};this.resetGroup=function(e){var i=new q.Deferred(),m=this;if(m._oCurrentPageSet.isPageRemovable(e)){i.reject(J());}else if(m._oCurrentPageSet.isPageResettable(e)){m._oCurrentPageSet.resetPage(e,function(){m._loadApplaunchersAndDelayLoadingOfOtherChips([e],i.resolve.bind(i,e));},i.reject.bind(i,J()));}else{i.resolve(e);}return i.promise();};this.isGroupRemovable=function(e){return m._oCurrentPageSet.isPageRemovable(e);};this.isGroupLocked=function(e){return e.isPersonalizationLocked();};this.isLinkPersonalizationSupported=function(e){if(!e){return true;}if(!e.isStub()){var i=e.getContract&&e.getContract("types"),n=i&&i.getAvailableTypes()||[];return n.indexOf("link")!==-1;}return false;};this.isTileIntentSupported=function(e){var i,s,n,x,e1=this._checkTileIntentSupport(e,t);if(!e1.isSupported&&e1.reason===g.noTargetMapping){if(X(e)){i=_(e);}else{i=b1(e);}x=v(e,"tileProperties","display_title_text")||i.display_title_text;n=v(e,"tileProperties","display_subtitle_text")||i.display_subtitle_text;s=i.navigation_target_url;q.sap.log.warning("Group tile with ID '"+e.getId()+"' is filtered out as the current user has no target mapping assigned for the intent '"+s+"'","\nGroup Tile ID: '"+e.getId()+"'\n"+"Title: '"+x+"'\n"+"Subtitle: '"+n+"'\n"+"Intent: '"+s+"' - ","sap.ushell_abap.adapters.abap.LaunchPageAdapter");}return e1.isSupported;};this._checkTileIntentSupport=function(e,t){var i,n;var s=Q;if(!X(e)){i=b1(e);if(!i.navigation_use_semantic_object||!i.navigation_semantic_object||!i.navigation_semantic_action){return{isSupported:true};}n=t.get(s(i.navigation_semantic_object,i.navigation_semantic_action));if(!n){n=t.get(s("*",i.navigation_semantic_action));}if(!n){return{isSupported:false,reason:g.noTargetMapping};}return{isSupported:true};}if(e.isStub()){throw new sap.ui2.srvc.Error("Applauncher Tile not loaded completely","sap.ushell_abap.adapters.abap.LaunchPageAdapter");}if(e.getChip()&&typeof e.getChip().isBrokenReference==="function"&&e.getChip().isBrokenReference()){return{isSupported:false,reason:g.referenceTileNotFound};}i=_(e);if(a(i)){return{isSupported:false,reason:g.emptyConfiguration};}if(!i.navigation_use_semantic_object){return{isSupported:true};}n=t.get(s(i.navigation_semantic_object,i.navigation_semantic_action));if(n){return{isSupported:true};}return{isSupported:false,reason:g.noTargetMapping};};this.moveGroup=function(e,n){var i=new q.Deferred();function s(x){var e1,f1=[];x.forEach(function(g1){f1.push(g1.getId());});e1=JSON.parse(m._oCurrentPageSet.getConfiguration()||"{}");e1.order=f1;m._oCurrentPageSet.setConfiguration(JSON.stringify(e1),i.resolve.bind(i),i.reject.bind(i,J()));}this.getGroups().done(function(x){var e1=x.indexOf(e);x.splice(e1,1);x.splice(n,0,e);s(x);});return i.promise();};this.setGroupTitle=function(e,n){var i=new q.Deferred();e.setTitle(n,i.resolve.bind(i),function(){i.reject(e.getTitle());});return i.promise();};this.addTile=function(e,i){var n=new q.Deferred(),s=e.getChip();if(e.isStub()){n.reject(J(),"Tile was not added to the group as the tile failed loading");}else{if(!i){i=m._oCurrentPageSet.getDefaultPage();}i.addChipInstance(s,n.resolve.bind(n),n.reject.bind(n,J()));}return n.promise();};this.removeTile=function(e,i){var n=q.Deferred();e.removeChipInstance(i,n.resolve.bind(n),n.reject.bind(n,J()));return n.promise();};this.moveTile=function(e,s,i,n,x,e1){var f1=new q.Deferred(),g1=R(e),h1,i1=new sap.ui2.srvc.Map(),j1,k1,l1,m1,n1,o1=f1.reject.bind(f1,J()),p1=2,q1;function r1(s1){p1-=1;j1=j1||s1;if(p1<=0){f1.resolve(j1);}}if(!x){x=n;}l1=I(n,this);m1=I(x,this);q1=this.getTileType(e);s=z(l1,e,q1);if(s<0){q.sap.log.error("moveTile: tile not found in source group",null,c);o1();return f1.promise();}if(n===x){H(l1,e.getId(),i,e1);n.setLayout(JSON.stringify(l1),f1.resolve.bind(f1,e),o1);}else{h1=sap.ushell.Container.getService("PageBuilding").getFactory().getPageBuildingService();k1=e.getBagIds();k1.forEach(function(s1){var t1={texts:[],properties:[]},u1=e.getBag(s1);u1.getOwnTextNames().forEach(function(v1){t1.texts.push({name:v1,value:u1.getText(v1)});});u1.getOwnPropertyNames().forEach(function(v1){t1.properties.push({name:v1,value:u1.getProperty(v1)});});if(t1.texts.length>0||t1.properties.length>0){i1.put(s1,t1);}});h1.openBatchQueue();n1=this.getGroupTiles(x);x.addChipInstance(g1?e.getChip():e,function(s1){var t1,u1;n1.splice(i,0,s1);k1.forEach(function(v1){u1=i1.get(v1);if(u1){t1=s1.getBag(v1);u1.texts.forEach(function(w1){t1.setText(w1.name,w1.value);});u1.properties.forEach(function(w1){t1.setProperty(w1.name,w1.value);});t1.save(function(){},function(){q.sap.log.error("Bag "+v1+": could not be saved",null,c);});}});H(m1,s1.getId(),i,e1);x.setLayout(JSON.stringify(m1),r1.bind(this,s1),o1);},o1,e.isStub());n.removeChipInstance(e,r1,o1);n.setLayout(JSON.stringify(l1),undefined,o1);h1.submitBatchQueue(undefined,o1);}return f1.promise();};this.getTileId=function(e){return e.getId();};this.getTileType=function(i){var n=i.getPage(),s;try{s=JSON.parse(n.getLayout());if(s.linkOrder&&s.linkOrder.indexOf(i.getId())>-1){return"link";}}catch(e){q.sap.log.warning("Group "+n.getId()+": invalid layout: "+n.getLayout(),null,c);}if(i.isStub()===false){var x=i.getContract("types");if(x&&x.getAvailableTypes().indexOf("card")>-1){return"card";}}return"tile";};this.getCardManifest=function(e){var s,i,n;try{s=e.getConfigurationParameter("cardManifest");i=JSON.parse(s);n=M.getCardData(e);i=M.mergeCardData(i,n);return i;}catch(x){q.sap.log.error("Manifest of card with id '"+e.getId()+"' could not be read. "+x.message);}};this.getTileTitle=function(e){return e.getTitle();};this.getTileView=function(e){var m=this,i=new q.Deferred(),n;function s(){var e1,f1;n=e.getContract("types");if(n){e1=m.getTileType(e);n.setType(e1);}f1=e.getImplementationAsSapui5();if(e1==="link"){var g1=f1.getModel(),h1=f1.getController(),i1=new G({mode:"{view>/mode}",header:"{view>/config/display_title_text}",subheader:"{view>/config/display_subtitle_text}",sizeBehavior:"{view>/sizeBehavior}",size:"Auto",press:[h1.onPress,h1]});i1.setModel(g1,"view");i.resolve(i1);return;}i.resolve(f1);}function x(e1){i.reject("Tile not successfully loaded"+(e1?(": "+e1):""));}if(!e.$loadingPromise){if(!e.isStub()){sap.ui2.srvc.call(s,x,!X(e));}else{x();}}else{e.$loadingPromise.fail(x).done(function(){try{s();}catch(ex){x((ex.message||ex));}});}return i.promise();};this.getTileSize=function(e){var i=(!e.isStub()&&e.getConfigurationParameter("row"))||"1",n=(!e.isStub()&&e.getConfigurationParameter("col"))||"1";return i+"x"+n;};this.refreshTile=function(e){e.refresh();};this.setTileVisible=function(e,n){var i=!e.isStub()&&e.getContract("visible"),s,x;if(i){i.setVisible(n);return;}if(e.isStub()&&e.$loadingPromise){s=this.getTileId(e);x=E[s];E[s]=n;if(x===undefined){e.$loadingPromise.done(function(){var i=e.getContract("visible");if(i){i.setVisible(E[s]);}});}return;}};this.getTileActions=function(e){var i=!e.isStub()&&e.getContract("actions");if(i){return i.getActions();}return[];};this.getTileTarget=function(){return null;};this.getTileDebugInfo=function(e){var s,i=e.getChip(),n=i.getCatalog(),x={chipId:i.getId(),chipInstanceId:e.getId(),completelyLoaded:!e.isStub()};if(n){x.catalogId=n.getId();}s=JSON.stringify(x);return s;};this.getCatalogs=function(){var e,i=j,n=h===false;function s(){var g1=0,h1=W();h1.forEach(function(i1){var j1=i1.ui2catalog;if(j1.isStub()||j1.getType()==="H"||j1.getType()==="REMOTE"){g1+=1;j1.refresh(function(){i1.title=j1.getTitle();i1.tiles=V(j1.getChips());e.notify(i1);g1-=1;if(g1<=0){e.resolve(h1);}},function(k1){q.sap.log.error("Failed to load catalog: "+k1,j1.toString(),c);i1.errorMessage=k1||"Error";e.notify(i1);g1-=1;if(g1<=0){e.resolve(h1);}});}else{e.notify(i1);e.$notified=true;}});if(g1<=0){e.resolve(h1);}}function x(){var g1=W();g1.forEach(function(h1){e.notify(h1);});e.resolve(g1);}function e1(g1){var h1=m._oCurrentPageSet.getDefaultPage().getAllCatalogs();if(h1.isStub()){h1.load(s,e.reject.bind(e),"type eq 'CATALOG_PAGE' or type eq 'H' or type eq 'SM_CATALOG'"+" or type eq 'REMOTE'",true,"title",true);}else{sap.ui2.srvc.call(n?s:x,e.reject.bind(e),g1);}}function f1(g1){if(T&&T.cacheId){var h1=sap.ushell.Container.getService("PageBuilding").getFactory().getPageBuildingService().readAllCatalogs.cacheBusterTokens;h1.put(d,T.cacheId);if(C.last("/core/spaces/enabled")){h1.put(F,T.cacheId);}}if(P){e1(g1);}else{m.getGroups().done(e1).fail(e.reject.bind(e));}}if(j&&!j.$notified&&!n){e=j;}else{e=j=new q.Deferred();e.done(function(){if(e===j){h=true;}}).always(function(){if(e===j){j=null;}});if(i){if(n){h=undefined;}i.always(f1);}else{f1(true);}}return e.promise();};this.isCatalogsValid=function(){return!!h;};this.getCatalogData=function(e){return e.ui2catalog.getCatalogData();};this.getCatalogError=function(e){return e.errorMessage;};this.getCatalogId=function(e){return e.id;};this.getCatalogTitle=function(e){return e.title;};this.getCatalogTiles=function(e){var i,n,s=new q.Deferred(),x=0;function e1(){x-=1;if(x===0){s.resolve(e.tiles);}}function f1(g1,h1){q.sap.log.error("Failed to load catalog tile: "+h1,g1.toString(),c);e1();}for(i=0;i<e.tiles.length;i+=1){n=e.tiles[i];if(n.isStub()){x+=1;n.load(e1,f1.bind(null,n));}}if(x===0){s.resolve(e.tiles);}return s.promise();};this.getCatalogTileId=function(e){var i=e.getChip(),s=i.getId();if(i.getCatalog()&&i.getCatalog().getCatalogData()&&i.getCatalog().getCatalogData().systemAlias){s+="_"+i.getCatalog().getCatalogData().systemAlias;}return s;};this.getCatalogTileTitle=function(e){return e.getChip().getTitle();};this.getCatalogTileSize=function(e){return this.getTileSize(e);};this.getCatalogTileView=function(e,i){i=typeof i!=="undefined"?i:true;var s=this.getCatalogTileTitle(e);if(e.isStub()){q.sap.log.warning("CHIP (instance) is just a stub!",e.toString(true),c);return new sap.ushell.ui.tile.StaticTile({icon:"sap-icon://hide",info:"",infoState:"Critical",subtitle:"",title:s}).addStyleClass("sapUshellTileError");}if(i){var n=e.getContract("preview");if(n){n.setEnabled(true);}else{return new sap.ushell.ui.tile.StaticTile({title:s,subtitle:"",info:"",infoState:"Neutral",icon:"sap-icon://folder-full"});}}return r(e,s,"Cannot get catalog tile view as SAPUI5");};this.getCatalogTileTargetURL=function(e){var s=w(e,"tileConfiguration","navigation_target_url");return s||(!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getTargetUrl())||undefined;};this.getCatalogTilePreviewSubtitle=function(e){var s=v(e,"tileProperties","display_subtitle_text");return s||(!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getPreviewSubtitle())||undefined;};this.getCatalogTilePreviewTitle=function(e){var s=v(e,"tileProperties","display_title_text");return s||(!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getPreviewTitle())||undefined;};this.getCatalogTilePreviewInfo=function(e){return v(e.getChip(),"tileProperties","display_info_text");};this.getCatalogTilePreviewIndicatorDataSource=function(e){var i;var n=_(e);if(X(e)&&n&&n.service_url){i={path:n.service_url,refresh:n.service_refresh_interval};}return i;};this.getCatalogTilePreviewIcon=function(e){var s=w(e,"tileConfiguration","display_icon_url");return s||(!e.isStub()&&e.getContract("preview")&&e.getContract("preview").getPreviewIcon())||undefined;};this.getCatalogTileKeywords=function(e){var i={},s=e.getTitle(),n=this.getCatalogTilePreviewSubtitle(e),x=e.getChip().getDescription();function e1(i,j1){if(sap.ui2.srvc.isArray(j1)){j1.forEach(function(k1){if(i.hasOwnProperty(k1)){return;}i[k1]=null;});}}function f1(e){var j1=v(e,"tileProperties","display_search_keywords");if(!sap.ui2.srvc.isString(j1)||j1===""){return[];}return j1.trim().split(/\s*,\s*/g);}function g1(e){var j1=v(e,"tileProperties","display_info_text");if(j1){return[j1];}return[];}function h1(e){var j1=w(e,"tileConfiguration","display_number_unit");if(j1){return[j1];}return[];}function i1(e){var j1;if(e.isStub()){return[];}j1=e.getContract("search");if(j1){return j1.getKeywords();}return[];}e1(i,f1(e));e1(i,g1(e));e1(i,h1(e));e1(i,i1(e));if(s){e1(i,[s]);}if(n){e1(i,[n]);}if(x){e1(i,[x]);}return Object.keys(i);};this.addBookmark=function(i,n){var s=S,x={display_icon_url:i.icon||"",display_info_text:i.info||"",display_subtitle_text:i.subtitle||"",display_title_text:i.title,navigation_target_url:i.url,navigation_use_semantic_object:false},e1=new q.Deferred(),f1=sap.ushell.Container.getService("PageBuilding").getFactory(),g1,h1=new U(),i1,j1,k1=f1.getPageBuildingService(),l1,m1=Q;function n1(l1,x,e1){l1.getBag("tileProperties").setText("display_title_text",x.display_title_text||"");l1.getBag("tileProperties").setText("display_subtitle_text",x.display_subtitle_text||"");l1.getBag("tileProperties").setText("display_info_text",x.display_info_text||"");l1.getBag("tileProperties").save(function(){e1.resolve();},function(o1){e1.reject(o1);});}i1=new U(i.url);if(i.url&&(i.url[0]==="#"||i1.host()+i1.path()===h1.host()+h1.path())){g1=sap.ushell.Container.getService("URLParsing");j1=g1.parseShellHash(g1.getShellHash(i.url));if(j1&&t.get(m1(j1.semanticObject,j1.action))!==undefined){x.navigation_use_semantic_object=true;x.navigation_semantic_object=j1.semanticObject;x.navigation_semantic_action=j1.action;x.navigation_semantic_parameters=g1.paramsToString(j1.params);}}if(i.serviceUrl){s=b;x.display_number_unit=i.numberUnit;x.service_refresh_interval=i.serviceRefreshInterval||0;x.service_url=i.serviceUrl;}if(n&&!(n instanceof sap.ui2.srvc.Page)){e1.reject("The given object is not a group");return e1.promise();}if(P){n=n||m._oCurrentPageSet.getDefaultPage();l1=f1.createChipInstance({chipId:s,pageId:n.getId(),title:i.title,configuration:JSON.stringify({tileConfiguration:JSON.stringify(x)}),layoutData:""});n.addChipInstance(l1,function(o1){n1(o1,x,e1);},e1.reject.bind(e1),undefined);}else{try{k1.createPageChipInstanceFromRawData({chipId:s,configuration:JSON.stringify({tileConfiguration:JSON.stringify(x)}),pageId:"/UI2/Fiori2LaunchpadHome",title:i.title},function(o1){f1.createChipInstance(o1,function(p1){n1(p1,x,e1);},e1.reject.bind(e1),undefined);},e1.reject.bind(e1));}catch(e){e1.reject(e.toString());}}return e1.promise();};sap.ui2.srvc.testPublishAt(m);function c1(e,s){return X(e)&&(_(e).navigation_target_url===s);}sap.ui2.srvc.testPublishAt(m);function d1(s,e){var i=[],n=new q.Deferred();m.getGroups().fail(n.reject.bind(n)).done(function(x){var e1=0;x.forEach(function(f1){f1.getChipInstances().forEach(function(g1){if(c1(g1,s)){e1+=1;if(e){i.push(e(g1));}}});});if(i.length===0){n.resolve(e1);}else{q.when.apply(q,i).fail(function(f1){n.reject(f1);}).done(function(){n.resolve(e1);});}});return n.promise();}this.countBookmarks=function(s){return d1(s);};this.deleteBookmarks=function(s){return d1(s,function(e){var i=new q.Deferred();e.remove(i.resolve.bind(i),i.reject.bind(i));return i.promise();});};this.updateBookmarks=function(s,e){return d1(s,function(i){var n=_(i),x=new q.Deferred(),e1=false;function f1(){i.getContract("configuration").fireConfigurationUpdated(["tileConfiguration"]);h1();}function g1(){i.getContract("bag").fireBagsUpdated(["tileProperties"]);x.resolve();}function h1(){if(typeof n.display_title_text==="string"){i.getBag("tileProperties").setText("display_title_text",n.display_title_text);e1=true;}if(typeof n.display_subtitle_text==="string"){i.getBag("tileProperties").setText("display_subtitle_text",n.display_subtitle_text);e1=true;}if(typeof n.display_info_text==="string"){i.getBag("tileProperties").setText("display_info_text",n.display_info_text);e1=true;}if(e1){i.getBag("tileProperties").save(g1,x.reject.bind(x));}else{x.resolve();}}n.display_icon_url=e.icon||n.display_icon_url;n.display_info_text=e.info||n.display_info_text;n.display_subtitle_text=e.subtitle||n.display_subtitle_text;n.display_title_text=e.title||n.display_title_text;n.navigation_target_url=e.url||n.navigation_target_url;n.display_number_unit=e.numberUnit||n.display_number_unit;n.service_refresh_interval=e.serviceRefreshInterval||n.service_refresh_interval;n.service_url=e.serviceUrl||n.service_url;i.updateConfiguration({tileConfiguration:JSON.stringify(n)},f1,x.reject.bind(x));return x.promise();});};this.onCatalogTileAdded=function(){h=false;};this.isCustomTile=function(e){return!X(e);};};L.prototype._getShellType=function(){if(sap&&sap.ushell_abap&&typeof sap.ushell_abap.getShellType==="function"){return sap.ushell_abap.getShellType();}return"FLP";};L.prototype._getCatalogTileIndex=function(){this._oCatalogTileIndexPromise=sap.ushell.Container.getServiceAsync("PageBuilding").then(function(p){var u=p.getFactory().getPageBuildingService();return new Promise(function(r,e){u.readAllCatalogs("/UI2/FakePageId",r,e,"type eq 'CATALOG_PAGE' or type eq 'H' or type eq 'SM_CATALOG' or type eq 'REMOTE'","title",true);});}).then(function(r){var o={};r.results.forEach(function(e){e.Chips.results.forEach(function(h){if(!o[h.id]){o[h.id]=h;}});});return o;}).catch(function(){return{};});return this._oCatalogTileIndexPromise;};return L;},true);
sap.ui.predefine('sap/ushell_abap/adapters/abap/MenuAdapter',["sap/ushell/Config","sap/base/Log"],function(C,L){"use strict";var M=function(){};M.prototype.isMenuEnabled=function(){var s=C.last("/core/spaces/enabled");var a=this._getAssignedSpaces().length;return Promise.resolve(s&&a>0);};M.prototype.getMenuEntries=function(){var m=this._getAssignedSpaces().filter(function(s){if(!s.pages||s.pages.length===0){L.warning("FLP space "+s.id+" without page omitted in FLP menu.","","sap.ushell_abap.adapters.abap.MenuAdapter");return false;}return true;}).map(function(s){var t={title:s.title||s.id,description:s.description,icon:undefined,type:"IBN",target:{semanticObject:"Launchpad",action:"openFLPPage",parameters:[{name:"spaceId",value:s.id},{name:"pageId",value:s.pages[0].id}],innerAppRoute:undefined},menuEntries:[]};var S=s.pages.map(function(p){return{title:p.title||p.id,description:p.description,icon:undefined,type:"IBN",target:{semanticObject:"Launchpad",action:"openFLPPage",parameters:[{name:"spaceId",value:s.id},{name:"pageId",value:p.id}],innerAppRoute:undefined},menuEntries:[]};});if(S.length>1){t.menuEntries=S;}return t;});return Promise.resolve(m);};M.prototype._getAssignedSpaces=function(){var m=document.querySelector("meta[name='sap.ushell.assignedSpaces']");if(!m){return[];}return JSON.parse(m.getAttribute("content"));};return M;},true);
sap.ui.predefine('sap/ushell_abap/adapters/abap/NavTargetResolutionAdapter',[],function(){"use strict";return function(u){};},true);
sap.ui.predefine('sap/ushell_abap/adapters/abap/PageBuildingAdapter',["sap/base/util/ObjectPath","sap/ui2/srvc/factory","sap/ui2/srvc/PageBuildingService","sap/ui2/srvc/RemoteCatalogService","sap/ui2/srvc/pageset","sap/ushell/System"],function(O){"use strict";return function(s,p,P){var f,S="PERS",a="/sap/opu/odata/UI2/PAGE_BUILDER_PERS/",r=P.config.remoteCatalogServices||{},c=O.get("config.services.pageBuilding.baseUrl",P);this.getFactory=function(){return f;};p=p?p.toUpperCase():"";if(p==="CONF"||p==="CUST"){S=p;a="/sap/opu/odata/UI2/PAGE_BUILDER_"+S+"/";}else if(c&&O.get("config.services.pageBuilding.relativeUrl",P)){a=c;}f=sap.ui2.srvc.createFactory(a,undefined,S==="PERS");["/sap/hba/apps/kpi/s/odata/hana_chip_catalog.xsodata/","/sap/hba/r/sb/core/odata/modeler/SMART_BUSINESS.xsodata/","/sap/hba/r/sb/core/odata/runtime/SMART_BUSINESS.xsodata/","/sap/opu/odata/sap/SM_CATALOG_SRV/"].forEach(function(b){if(!Object.prototype.hasOwnProperty.call(r,b)){r[b]="sap.ui2.srvc.RemoteCatalogService";}});Object.keys(r).forEach(function(b){var R=r[b];jQuery.sap.require(R);f.addRemoteCatalogService(b,new(O.get(R))());});};},true);
sap.ui.predefine('sap/ushell_abap/adapters/abap/PagePersistenceAdapter',["sap/base/util/ObjectPath","sap/ui/model/odata/v2/ODataModel","sap/ushell/resources"],function(O,a,r){"use strict";function g(){var s=(window["sap-ushell-config"].services&&window["sap-ushell-config"].services.PagePersistence)||{};return(O.get("config.serviceUrl",s.adapter)||"").replace(/\/?$/,"/");}var o=new a({serviceUrl:g(),headers:{"sap-language":sap.ushell.Container.getUser().getLanguage(),"sap-client":sap.ushell.Container.getLogonSystem().getClient()},defaultCountMode:"None",skipMetadataAnnotationParsing:true,useBatch:false});var m=new Promise(function(b,c){o.attachMetadataLoaded(b);o.attachMetadataFailed(c);});var P=function(){this.S_COMPONENT_NAME="sap.ushell_abap.adapters.abap.PagePersistenceAdapter";};P.prototype.getODataModel=function(){return o;};P.prototype.getMetadataPromise=function(){return m;};P.prototype.getPage=function(p){return this._readPage(p).then(this._convertODataToReferencePage).catch(this._rejectWithError.bind(this));};P.prototype.getPages=function(p){return this._readPages(p).then(function(b){return b.results.map(this._convertODataToReferencePage);}.bind(this)).catch(this._rejectWithError.bind(this));};P.prototype._readPage=function(p){return this.getMetadataPromise().then(function(){return new Promise(function(b,c){this.getODataModel().read("/pageSet('"+encodeURIComponent(p)+"')",{urlParameters:{"$expand":"sections/viz"},success:b,error:c});}.bind(this));}.bind(this));};P.prototype._readPages=function(p){return this.getMetadataPromise().then(function(){return new Promise(function(b,c){sap.ui.require(["sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(F,d){var e=[],f;for(var i=0;i<p.length;i++){f=new F({path:"id",operator:d.EQ,value1:p[i],and:false});e.push(f);}this.getODataModel().read("/pageSet",{urlParameters:{"$expand":"sections/viz"},filters:e,success:b,error:c});}.bind(this));}.bind(this));}.bind(this));};P.prototype._convertODataToReferencePage=function(p){return{id:p.id,title:p.title,description:p.description,createdBy:p.createdBy,createdByFullname:p.createdByFullname||p.createdBy,modifiedBy:p.modifiedBy,modifiedByFullname:p.modifiedByFullname||p.modifiedBy,sections:p.sections.results.map(function(s){return{id:s.id,sectionIndex:s.sectionIndex,title:s.title,viz:s.viz.results.map(function(v){return{catalogTileId:v.catalogTileId,id:v.id,itemIndex:v.itemIndex,targetMappingId:v.targetMappingId,vizId:v.catalogTileId,inboundPermanentKey:v.targetMappingId};}).sort(function(f,b){return f.itemIndex-b.itemIndex;})};}).sort(function(f,s){return f.sectionIndex-s.sectionIndex;})};};P.prototype._rejectWithError=function(e){var E={component:this.S_COMPONENT_NAME,description:r.i18n.getText("PagePersistenceAdapter.CannotLoadPage"),detail:e};return Promise.reject(E);};return P;},true);
sap.ui.predefine('sap/ushell_abap/adapters/abap/PersonalizationAdapter',["sap/ushell_abap/adapters/abap/AdapterContainer","sap/ushell/services/Personalization","sap/ushell/services/_Personalization/constants","sap/ui2/srvc/ODataWrapper","sap/ui2/srvc/ODataService","sap/base/util/ObjectPath"],function(A,P,c,O,a,b){"use strict";var d=function(s,p,C){this._oConfig=C&&C.config;var e=(b.get("config.services.personalization.baseUrl",C)||"/sap/opu/odata/UI2/INTEROP")+"/";var o={baseUrl:e,"sap-language":sap.ushell.Container.getUser().getLanguage(),"sap-client":sap.ushell.Container.getLogonSystem().getClient()};this._oWrapper=sap.ui2.srvc.createODataWrapper(o);function D(m){sap.ui2.srvc.Error(m,"sap.ushell_abap.adapters.abap.PersonalizationAdapter");}sap.ui2.srvc.ODataService.call(this,this._oWrapper,D);};d.prototype.supportsGetWithoutSubsequentLoad=true;d.prototype.getAdapterContainer=function(C,s,e){return new A(C,this,s,e);};d.prototype.delAdapterContainer=function(C,s){return this.getAdapterContainer(C,s).del();};sap.ui2.srvc.testPublishAt(d);d.prototype._determineCategory=function(s){if(!s){return"U";}var C=c;if(s.keyCategory&&s.keyCategory===C.keyCategory.FIXED_KEY&&s.writeFrequency&&s.writeFrequency===C.writeFrequency.LOW&&s.clientStorageAllowed&&s.clientStorageAllowed===true){return"P";}return"U";};return d;},true);
sap.ui.predefine('sap/ushell_abap/adapters/abap/UserInfoAdapter',["sap/ui2/srvc/ODataWrapper","sap/ui2/srvc/ODataService","sap/ui/thirdparty/datajs","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/resources"],function(O,a,b,q,L,r){"use strict";var d;var D="default";return function(){this._updateODataObjectBasedOnDatatype=function(v,o){if(q.type(v)==="string"){o.value=v.toString();o.dataType="Edm.String";}if(q.type(v)==="boolean"){o.value=v.toString();o.dataType="Edm.Boolean";}return o;};this.getThemeList=function(){var o=new q.Deferred(),u="/sap/opu/odata/UI2/INTEROP/Themes";b.read({requestUri:u},function(c,R){var i,t=[];for(i=0;i<c.results.length;i=i+1){t.push(c.results[i]);}o.resolve({options:t});},function(e){L.error(e.message,null,"sap.ushell_abap.adapters.abap.UserInfoAdapter");o.reject(e.message);});return o.promise();};this.getLanguageList=function(){var o=new q.Deferred(),u=encodeURI("/sap/opu/odata/UI2/INTEROP/UserProfilePropertyValues?$filter=id eq 'PREFERRED_LOGON_LANGUAGE'");b.read({requestUri:u},function(c){var R=[{"text":r.i18n.getText("userSettings.browserLanguage"),"key":D}];var l=c.results.map(function(e){return{"text":e.description,"key":e.value};}).sort(function(e,f){return e.text.localeCompare(f.text);});R=R.concat(l);o.resolve(R);},function(e){L.error(e.message,null,"sap.ushell_abap.adapters.abap.UserInfoAdapter");o.reject(e.message);});return o.promise();};this._createWrapper=function(B){return sap.ui2.srvc.createODataWrapper(B,false,function(e){});};this.updateUserPreferences=function(u){var t=this,o,R,U,i,c,s=function(){i-=1;if(i===0){o.resolve();}},f=function(e){o.reject(e);};d=this._createWrapper("/sap/opu/odata/UI2/INTEROP/");o=new q.Deferred();d.openBatchQueue();U=u.getChangedProperties()||[];i=U.length;U.forEach(function(e){var n=e.name,g=e.newValue;if(n.toUpperCase()==="LANGUAGE"){n="PREFERRED_LOGON_LANGUAGE";g=g===D?undefined:g;}R="UserProfileProperties("+["id='"+n+"'","shellType='FLP')"].join(",");c={id:n,shellType:"FLP",value:g};t._updateODataObjectBasedOnDatatype(g,c);d.put(R,c,s,f);});d.submitBatchQueue(function(){if(i===0){o.resolve();}},f);return o.promise();};};},true);
sap.ui.predefine('sap/ushell_abap/library',["sap/ui/core/library","sap/m/library"],function(c,l){"use strict";sap.ui.getCore().initLibrary({name:"sap.ushell_abap",version:"1.78.0",dependencies:["sap.ui.core","sap.m"],noLibraryCSS:true,extensions:{"sap.ui.support":{diagnosticPlugins:["sap/ushell_abap/support/plugins/app-infra/AppInfraOnSapNetWeaverSupportPlugin"]}}});return sap.ushell_abap;},true);
// Copyright (c) 2009-2020 SAP SE, All Rights Reserved
sap.ui.predefine('sap/ushell/ApplicationType',["sap/ui/thirdparty/URI","sap/base/Log","sap/ushell/utils","sap/ushell/URLTemplateProcessor","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ushell/_ApplicationType/wdaResolution","sap/ushell/_ApplicationType/guiResolution","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ushell/Config"],function(U,L,u,a,A,s,w,g,p,C){"use strict";function b(z,B,E){var I=z.inbound;var R=I&&I.resolutionResult;if(!(!I||!R||!(R["sap.wda"]))){return w.constructFullWDAResolutionResult(z,B,E);}if(!(!I||!R)){return w.constructWDAResolutionResult(z,B,E);}}function c(z,B,E){var D=new U(B),I=z.inbound,F=I&&I.resolutionResult,G=jQuery.extend(true,{},z.mappedIntentParamsPlusSimpleDefaults),S,H;if(G["sap-system"]){S=G["sap-system"][0];delete G["sap-system"];}if(G["sap-system-src"]){H=G["sap-system-src"][0];delete G["sap-system-src"];}return new Promise(function(R,J){s.spliceSapSystemIntoURI(D,F.systemAlias,S,H,"WCF",F.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,E).done(function(K){var P=A.getURLParsing().paramsToString(G),N=A.appendParametersToUrl(P,K.toString());var O={url:N,text:F.text||"",additionalInformation:F.additionalInformation||"",applicationType:"WCF",fullWidth:true};R(O);}).fail(function(K){J(K);});});}function d(z,B,E){var I=z.inbound,D,S,F,G,R={};["applicationType","additionalInformation","applicationDependencies"].forEach(function(P){if(I.resolutionResult.hasOwnProperty(P)){R[P]=I.resolutionResult[P];}});R.url=B;if(R.applicationDependencies&&typeof R.url==="undefined"){R.url="";}if(typeof R.url==="undefined"){return Promise.reject("Cannot resolve intent: url was not specified in matched inbound");}G=jQuery.extend(true,{},z.mappedIntentParamsPlusSimpleDefaults);R.reservedParameters={};var H={"sap-ui-fl-max-layer":true,"sap-ui-fl-control-variant-id":true,"sap-ui-fl-version":true};Object.keys(H).forEach(function(N){var V=G[N];if(V){delete G[N];R.reservedParameters[N]=V;}});z.mappedDefaultedParamNames=z.mappedDefaultedParamNames.filter(function(J){return!H[J];});if(z.mappedDefaultedParamNames.length>0){G["sap-ushell-defaultedParameterNames"]=[JSON.stringify(z.mappedDefaultedParamNames)];}S=G["sap-system"]&&G["sap-system"][0];F=G["sap-system-src"]&&G["sap-system-src"][0];R["sap-system"]=S;if(typeof F==="string"){R["sap-system-src"]=F;}z.effectiveParameters=G;D=A.getURLParsing().paramsToString(G);if(D){R.url=R.url+((R.url.indexOf("?")<0)?"?":"&")+D;}if(typeof I.resolutionResult.ui5ComponentName!=="undefined"){R.ui5ComponentName=I.resolutionResult.ui5ComponentName;}R.text=I.title;return Promise.resolve(R);}function e(){var H=new U().fragment();var z=H.lastIndexOf("&/");if(z>0){return H.substr(z+1);}}function f(z){var B=z.targetNavigationMode;if(B===undefined||B===""){B="inplace";}return B;}function h(){var z=sap.ushell.Container.getService("UserInfo");var B=z.getUser();var D=sap.ui.getCore().getConfiguration();var E=u.getUi5Version();var F=B.getContentDensity();var T=B.getTheme();if(T.indexOf("sap_")!==0){var G=sap.ushell.User.prototype.constants.themeFormat.THEME_NAME_PLUS_URL;T=B.getTheme(G);}var H;var I;if(D){I=D.getLanguage&&D.getLanguage();H=D.getSAPLogonLanguage&&D.getSAPLogonLanguage();}var J=window.location.protocol+"//"+window.location.host+"/comsapuitheming.runtime/themeroot/v1";var K=0;if(C.last("/core/shell/sessionTimeoutIntervalInMinutes")>0){K=C.last("/core/shell/sessionTimeoutIntervalInMinutes");}return{language:I,logonLanguage:H,theme:T,themeServiceRoot:J,isDebugMode:!!window["sap-ui-debug"],ui5Version:E,contentDensity:F,sapPlugins:j(),innerAppState:i(),sessionTimeout:K};}function i(){var H=window.hasher&&window.hasher.getHash(),K="",P;if(H&&H.length>0&&H.indexOf("sap-iapp-state=")>0){P=/(?:sap-iapp-state=)([^&/\\]+)/.exec(H);if(P&&P.length===2){K=P[1];}}return K;}function j(){var S=sap.ushell.Container.getService("PluginManager");if(S){return S._getNamesOfPluginsWithAgents();}else{return"";}}function k(z,B,E){var I=z.inbound;var T=I.templateContext;var R={innerAppRoute:e()||z.parsedIntent.appSpecificRoute,targetNavMode:f(z),defaultParameterNames:z.mappedDefaultedParamNames,startupParameter:z.mappedIntentParamsPlusSimpleDefaults,env:h()};var D=a.expand(T.payload,T.site,R,T.siteAppSection,"startupParameter");var F={applicationType:"URL",text:I.title,appCapabilities:l(T.payload.capabilities||{},T.siteAppSection),url:D,extendedInfo:o(z,D)};return q(D).then(function(G){F.url=G;return F;},function(){return F;});}function l(T,S){var z=u.clone(T);z.navigationMode=m(T.navigationMode,S);return z;}function m(T,S){var z=n(T);var B=u.getMember(S,"sap|integration.navMode");switch(B){case"inplace":return"embedded";case"explace":if(z==="embedded"){return"newWindowThenEmbedded";}if(["newWindowThenEmbedded","newWindow"].indexOf(z)>=0){return z;}L.error("App-defined navigation mode was ignored","Application requests to be opened in a new window but no expected navigation mode was defined on the template","sap.ushell.ApplicationType");default:return z;}}function n(z){var I;switch(z){case"inplace":I="embedded";break;case"explace":I="newWindow";break;default:I=z||"newWindow";}return I;}function o(z){var I={};I.appParams={};if(z.mappedIntentParamsPlusSimpleDefaults){I.appParams=JSON.parse(JSON.stringify(z.mappedIntentParamsPlusSimpleDefaults));}return I;}function q(z){return new Promise(function(R,B){var D=new U(z);var P=D.query(true);sap.ushell.Container.getService("ShellNavigation").compactParams(P,["sap-language","sap-theme","sap-ui-app-id","transaction"],undefined,true).done(function(E){if(!E.hasOwnProperty("sap-intent-param")){R(z);return;}D.query(E);var F=D.toString();R(F);}).fail(function(E){B(E);});});}function r(z,B,E){var I=z.inbound,D=I&&I.resolutionResult,R={};var F=new U(B);var G=jQuery.extend(true,{},z.mappedIntentParamsPlusSimpleDefaults);if(z.inbound&&z.inbound.action==="launchURL"&&z.inbound.semanticObject==="Shell"){delete G["sap-external-url"];}var S=G["sap-system"]&&G["sap-system"][0];var H=G["sap-system-src"]&&G["sap-system-src"][0];R["sap-system"]=S;delete G["sap-system"];if(typeof H==="string"){R["sap-system-src"]=H;delete G["sap-system-src"];}return(new Promise(function(J,K){if(A.absoluteUrlDefinedByUser(F,D.systemAlias,D.systemAliasSemantics)){J(B);}else{s.spliceSapSystemIntoURI(F,D.systemAlias,S,H,"URL",D.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(K).done(function(N){var O=N.toString();J(O);});}})).then(function(J){var P=A.getURLParsing().paramsToString(G);var K=C.last("/core/navigation/flpURLDetectionPattern");var N=new RegExp(K);return N.test(J)?A.appendParametersToIntentURL(G,J):A.appendParametersToUrl(P,J);},Promise.reject.bind(Promise)).then(function(J){["additionalInformation","applicationDependencies"].forEach(function(P){if(I.resolutionResult.hasOwnProperty(P)){R[P]=I.resolutionResult[P];}});R.url=J;R.text=I.title;R.applicationType="URL";return Promise.resolve(R);},Promise.reject.bind(Promise));}var t={URL:{type:"URL",defaultFullWidthSetting:true,generateResolutionResult:function(z){var B=z.inbound.hasOwnProperty("templateContext");return B?k.apply(null,arguments):r.apply(null,arguments);},easyAccessMenu:{intent:"Shell-startURL",resolver:null,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:false,systemSelectionPriority:1}},WDA:{type:"WDA",defaultFullWidthSetting:true,generateResolutionResult:b,easyAccessMenu:{intent:"Shell-startWDA",resolver:w.resolveEasyAccessMenuIntentWDA,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:2}},TR:{type:"TR",defaultFullWidthSetting:true,generateResolutionResult:g.generateTRResolutionResult,easyAccessMenu:{intent:"Shell-startGUI",resolver:g.resolveEasyAccessMenuIntentWebgui,showSystemSelectionInUserMenu:true,showSystemSelectionInSapMenu:true,systemSelectionPriority:3}},NWBC:{type:"NWBC",defaultFullWidthSetting:true},WCF:{type:"WCF",generateResolutionResult:c,defaultFullWidthSetting:true},SAPUI5:{type:"SAPUI5",generateResolutionResult:d,defaultFullWidthSetting:false}};function v(){return Object.keys(t).map(function(z){return t[z];}).filter(function(z){return typeof z.easyAccessMenu==="object";});}function x(){var E={};v().forEach(function(z){E[z.easyAccessMenu.intent]=z.easyAccessMenu.resolver;});return function(z,R){if(E[z]&&(!R||R!=="SAPUI5")){return E[z];}return null;};}function y(z){if(!t[z]){return false;}return t[z].defaultFullWidthSetting;}Object.defineProperty(t,"enum",{value:Object.keys(t).reduce(function(z,B){if(t[B].type){z[B]=t[B].type;}return z;},{})});var M={getEasyAccessMenuResolver:x(),getEasyAccessMenuDefinitions:v,getDefaultFullWidthSetting:y};Object.keys(M).forEach(function(z){Object.defineProperty(t,z,{value:M[z]});});return t;},true);
sap.ui.predefine('sap/ushell/Config',["sap/ushell/EventHub","sap/ushell/bootstrap/common/common.create.configcontract.core","sap/ushell/_Config/utils"],function(E,C,c){"use strict";var o=C.createConfigContract(window["sap-ushell-config"]);var f=E.createChannel(o);var a=Object.keys(f).reduce(function(a,m){a[m]=function(){if(!f){f=E.createChannel(o);}return f[m].apply(f,arguments);};return a;},{_reset:function(){f=null;},registerConfiguration:function(O,b){o=b;},createModel:function(p,b){if(!f){f=E.createChannel(o);}return c.createModel(f,o,p,b);}});return a;},false);
sap.ui.predefine('sap/ushell/Fiori20Adapter',["sap/ui/base/Object","sap/ui/core/Component","sap/ui/core/UIComponent","sap/ui/model/resource/ResourceModel","sap/m/Fiori20Adapter","sap/ui/thirdparty/hasher"],function(B,C,U,R,S,h){"use strict";var u;U._fnOnInstanceDestroy=function(c){if(c._fioriAdapter){c._fioriAdapter.destroy();}};var A=B.extend("AppInfo",{constructor:function(c){B.call(this);this._oComponent=c;},getDefaultTitle:function(){var t,r,m=this._oComponent.getMetadata();var a=m.getManifestEntry("sap.app");if(a&&a.title){t=a.title;if(this._isLocalizationKey(t)){r=(a.i18n||"i18n/i18n.properties");return this._getLocalized(t,r);}return t;}var o=m.getManifestEntry("sap.ui5");if(o&&o.config&&o.config.resourceBundle&&o.config.titleResource){t=o.config.titleResource;r=o.config.resourceBundle;return this._getLocalized(t,r);}return;},_getLocalized:function(t,r){var m=new R({bundleUrl:jQuery.sap.getModulePath(this._oComponent.getMetadata().getComponentName())+"/"+r});return m.getResourceBundle().getText(t.replace(/^{{/,"").replace(/}}$/,""));},_isLocalizationKey:function(t){return(t.indexOf("{{")===0)&&(t.indexOf("}}")>0);}});var H=B.extend("HeaderInfo",{constructor:function(c,o,a){B.call(this);this._oConfig=o;this._oAppInfo=a;this._aHierarchy=[];this._defaultTitle=this._oAppInfo.getDefaultTitle();this._oCurrentViewInfo={oTitleInfo:{text:this._defaultTitle}};},registerView:function(v){if(this._oConfig.bMoveTitle===true){if(!v.oTitleInfo&&v.oSubTitleInfo){v.oTitleInfo=v.oSubTitleInfo;}this._oCurrentViewInfo=v;var t=this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:undefined;if(t!==u.getTitle()){u.setTitle(t);}this._updateHierarchy();}this._setBackNavigation(v.oBackButton,v.oAdaptOptions);},_setBackNavigation:function(b,a){if(a&&a.bHideBackButton===false){return;}var f;if(b){f=b.firePress.bind(b);}u.setBackNavigation(f);},_updateHierarchy:function(){if(this._oConfig.bHierarchy===false){return;}if(!this._oCurrentViewInfo){return;}var n=true,s="#"+h.getHash();for(var i=this._aHierarchy.length-1;i>=0;i--){var e=this._aHierarchy[i],k=(e.id===this._oCurrentViewInfo.sViewId),K=(e.intent===s);if(k||K){n=false;e=this._updateHierarchyEntry(e);this._aHierarchy[i]=e;this._aHierarchy=this._aHierarchy.slice(0,i+1);if(k){e.intent=s;}break;}}if(n){this._aHierarchy.push(this._createHierarchyEntry());}var N=[];for(var j=this._aHierarchy.length-2;j>=0;j--){N.push(this._aHierarchy[j]);}u.setHierarchy(this._deleteUndefinedProperties(N));},_createHierarchyEntry:function(){var s="#"+h.getHash(),e={id:this._oCurrentViewInfo.sViewId,title:this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:this._defaultTitle,subtitle:this._oCurrentViewInfo.oSubTitleInfo?this._oCurrentViewInfo.oSubTitleInfo.text:undefined,intent:s};return e;},_updateHierarchyEntry:function(e){e.id=this._oCurrentViewInfo.sViewId;e.title=this._oCurrentViewInfo.oTitleInfo?this._oCurrentViewInfo.oTitleInfo.text:this._defaultTitle;e.subtitle=this._oCurrentViewInfo.oSubTitleInfo?this._oCurrentViewInfo.oSubTitleInfo.text:undefined;return e;},_deleteUndefinedProperties:function(o){o.forEach(function(O){for(var p in O){if(O.hasOwnProperty(p)&&!O[p]&&p!=="title"){delete O[p];}}});return o;}});var F=B.extend("sap.ushell.Fiori20Adapter",{constructor:function(c,o){B.call(this);this._oComponent=c;this._oConfig=o;this._oHeaderInfo=new H(c,o,new A(c));if(S){S.attachViewChange(this._onViewChange,this);}},init:function(){if(!S){return;}jQuery.sap.measure.start("Fiori20Adapter");var c=jQuery.extend({},this._oConfig);S.traverse(this._oComponent.getAggregation("rootControl"),c);jQuery.sap.measure.end("Fiori20Adapter");},destroy:function(){if(S){S.detachViewChange(this._onViewChange,this);}},_onViewChange:function(e){this._oHeaderInfo.registerView(e.getParameters());}});F.applyTo=function(c,o,a,s){var O=c instanceof U?c:C.getOwnerComponentFor(c);if(!O){O=o;}if(O&&!O._fioriAdapter){u=s;O._fioriAdapter=new F(O,a);O._fioriAdapter.init();}};return F;});
sap.ui.predefine('sap/ushell/Fiori20AdapterTest',["sap/base/util/UriParameters","sap/ui/core/UIComponent","sap/ushell/Fiori20Adapter","sap/ui/core/library","sap/ui/core/service/ServiceFactoryRegistry"],function(U,a,F,c,S){"use strict";var b={I_DEFAULT_SEARCH_DEPTH:5,B_DEFAULT_LATE_ADAPTATION:false,S_FIORI20ADAPTER_URL_PARAM_NAME:"sap-ui-xx-fiori2Adaptation",S_FIORI20ADAPTER_METADATA_PARAM_NAME:"sapFiori2Adaptation",A_WHITELIST:["fin.*","ssuite.fin.*","fscm.*","sap.fin.*","cus.sd.*","cus.o2c.*","sap.apf.*","tl.ibp.*","ux.fnd.apf.o2c.*","fnd.apf.*","fnd.pob.o2c.*","fcg.sll.*","ux.fnd.generic-apf-application.*","hpa.cei.*","query.viewbrowser.s1.*","ssuite.vdm.viewbrowser.s1.*","ssuite.smartbusiness.kpi.s1.*","ssuite.smartbusiness.evaluation.s1.*","ssuite.smartbusiness.association.s1.*","ssuite.smartbusiness.drilldown.s1.*","ssuite.smartbusiness.tile.s1.*","ssuite.smartbusiness.tile.ce.s1.*","ssuite.smartbusiness.workspace.s1.*","ssuite.smartbusiness.runtime.s1.*","gs.fin.customersummarycn.display.*","gs.fin.financialstatement.structure.manage.*","gs.fin.financialstatement.display.*","uipsm.*","publicservices.her.*"],getConfiguration:function(C){var o=this._getURLParamConfiguration();if(!o){o=this._getMetadataConfiguration(C);}if(!o){o=this._getDefaultConfiguration(C);}o.iSearchDepth=o.iSearchDepth||b.I_DEFAULT_SEARCH_DEPTH;if((typeof o.iSearchDepth==="string")&&!isNaN(o.iSearchDepth)){o.iSearchDepth=parseInt(o.iSearchDepth,10);}return o;},_getURLParamConfiguration:function(){if(typeof sap.ui.getCore().getConfiguration().getFiori2Adaptation!=="function"){return;}if(!this._isURLParameterSpecified(b.S_FIORI20ADAPTER_URL_PARAM_NAME)){return;}var u=sap.ui.getCore().getConfiguration().getFiori2Adaptation(),d,s;if(typeof(u)==="boolean"){d=u;}else if(u&&(u.length>=1)){s=u;}if(!s&&(d===undefined)){return;}return{bStylePage:s?s.indexOf("style")>-1:d,bMoveTitle:s?s.indexOf("title")>-1:d,bHideBackButton:s?s.indexOf("back")>-1:d,bCollapseHeader:s?s.indexOf("collapse")>-1:d,bHierarchy:s?s.indexOf("hierarchy")>-1:d};},_getMetadataConfiguration:function(C){var A=C.getMetadata("config").getConfig(b.S_FIORI20ADAPTER_METADATA_PARAM_NAME),d,e;if(typeof(A)==="boolean"){d=A;}else if((typeof A==="object")&&!jQuery.isEmptyObject(A)){e=A;}if(!e&&(d===undefined)){return;}return{bStylePage:e?this._isSgnTrue(e.style):d,bMoveTitle:e?this._isSgnTrue(e.title):d,bHideBackButton:e?this._isSgnTrue(e.back):d,bCollapseHeader:e?this._isSgnTrue(e.collapse):d,bHierarchy:e?this._isSgnTrue(e.hierarchy):d,bLateAdaptation:e?this._isSgnTrue(e.lateAdaptation):b.B_DEFAULT_LATE_ADAPTATION};},_getDefaultConfiguration:function(C){var e=this._hasMinVersionSmallerThan(C,"1.42")&&this._isWhitelisted(C);return{bStylePage:e,bMoveTitle:e,bHideBackButton:e,bCollapseHeader:e,bHierarchy:e};},_isURLParameterSpecified:function(p){var u=new U(window.location.href),A=u.mParams&&u.mParams[p];return A&&(A.length>0);},_isWhitelisted:function(C){var s=C.getMetadata().getName();for(var i=0;i<b.A_WHITELIST.length;i++){var n=b.A_WHITELIST[i].substring(0,b.A_WHITELIST[i].length-2);if(this._isPrefixedString(s,n)){return true;}}return false;},_isAdaptationRequired:function(A){for(var o in A){if(A[o]===true){return true;}}return false;},_isPrefixedString:function(s,p){return s&&p&&(s.substring(0,p.length)===p);},_hasMinVersionSmallerThan:function(C,v){var i=C.getMetadata().getManifestEntry("sap.ui5"),m=true;if(i&&i.dependencies&&i.dependencies.minUI5Version){var M=new jQuery.sap.Version(i.dependencies.minUI5Version);m=M.compareTo(new jQuery.sap.Version(v))<0;}return m;},_isSgnTrue:function(v){return(v===true)||(v==="true");}};a._fnOnInstanceInitialized=function(C){var o=C.getAggregation("rootControl");if(!o||o.getId()==="navContainerFlp"||C.getId().indexOf("application-")!==0){return;}var d=b.getConfiguration(C);if(!b._isAdaptationRequired(d)){return;}if(!c.service||!S||typeof S.get!=="function"){jQuery.sap.log.warning("Fiori20Adapter not loaded because static FactoryRegistry is not available","sap.ui.core.service.ServiceFactoryRegistry should be a function","sap.ushell.Fiori20AdapterTest");return;}var D={onBeforeRendering:function(){o.removeEventDelegate(D);var s=S.get("sap.ushell.ui5service.ShellUIService"),e=s&&s.createInstance();if(!s||!e){jQuery.sap.log.warning("Fiori20Adapter not loaded because ShellUIService is not available","sap.ushell.ui5service.ShellUIService should be declared by configuration","sap.ushell.Fiori20AdapterTest");return;}e.then(function(s){if(s&&(s.getUxdVersion()===2)){F.applyTo(o,C,d,s);}},function(E){jQuery.sap.log.warning("Fiori20Adapter not loaded as ShellUIService is not available",E,"sap.ushell.Fiori20AdapterTest");});}};o.addEventDelegate(D);};});
sap.ui.predefine('sap/ushell/TechnicalParameters',["sap/ushell/utils/type"],function(t){"use strict";var T={"sap-navigation-scope":{injectFrom:"inboundParameter",sticky:true,stickyName:"sap-navigation-scope-filter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A));}else{S(b(p,o));}});}},"sap-fiori-id":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A)||a("/sap.fiori/registrationIds",A));}else{S(b(p,o));}});}},"sap-ui-fl-max-layer":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-fl-control-variant-id":{injectFrom:"startupParameter",isIntentParameter:false,getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-fl-version":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A){return Promise.resolve().then(g.bind(null,p,A));}},"sap-ui-app-id-hint":{injectFrom:"startupParameter",isIntentParameter:true,getValue:d},"sap-ach":{injectFrom:"startupParameter",isIntentParameter:true,getValue:function(p,A,o,s){return new Promise(function(S,F){if(s==="UI5"){S(g(p,A)||a("/sap.app/ach",A));}else{S(b(p,o));}});}},"sap-prelaunch-operations":{injectFrom:"inboundParameter",isIntentParameter:true,getValue:d}};function d(p){return Promise.reject(p+" is reserved for shell internal usage only");}function g(p,A){var j=A.getComponentData().technicalParameters||{};return j[p];}function a(p,A){var m=A.getMetadata()?A.getMetadata():undefined;var v=m.getManifestEntry(p);if(!t.isArray(v)){v=[v];}return v;}function b(p,A){var r=A.getReservedParameters();return r&&r[p];}function c(p,A,o,s){if(!T[p]){return Promise.reject(p+" is not a known technical parameter");}return T[p].getValue(p,A,o,s);}function e(F){if(!F){F={};}return Object.keys(T).filter(function(o){var p=T[o];return Object.keys(F).every(function(s){var D=F[s];var H=p.hasOwnProperty(s);if(H){return p[s]===D;}return false;});}).map(function(m){return Object.keys(T[m]).reduce(function(p,P){p[P]=T[m][P];return p;},{name:m});});}function f(){return Object.keys(T);}function i(p){return T.hasOwnProperty(p);}function h(p,A,o,s){if(s==="UI5"){return g(p,A);}return b(p,o);}return{getParameterValue:c,getParameterValueSync:h,getParameters:e,getParameterNames:f,isTechnicalParameter:i};},false);
sap.ui.predefine('sap/ushell/URLTemplateProcessor',["sap/ui/thirdparty/URI","sap/ui/thirdparty/URITemplate","sap/ushell/utils/type","sap/ushell/utils/clone","sap/ushell/_URLTemplateProcessor/utils","sap/ushell/_URLTemplateProcessor/Resolvers","sap/ushell/_URLTemplateProcessor/DependencyGraph","sap/ushell/_URLTemplateProcessor/TemplateParameterParser"],function(U,u,t,c,a,r,d,T){"use strict";function l(s){jQuery.sap.log.debug(s,"sap.ushell.URLTemplateProcessor");}function f(v){if(typeof v==="undefined"){return"<undefined>";}if(typeof v==="string"){if(v===""){return"<empty string>";}return"'"+v+"'";}if(typeof v==="number"){return"(number) "+v;}if(typeof v==="boolean"){return"(bool) "+v;}var s;if(typeof v==="object"){s=JSON.stringify(v);if(s.length>255){s=s.substr(0,255)+"...";}}else{s="{other type}";}return s;}function m(h,i){var j=c(h);var k=c(i);return Object.keys(k).reduce(function(o,O){o[O]=k[O];return o;},j);}function b(p,s,D){var M=p&&Array.isArray(p.mergeWith);var P=p&&p.names;if(!M){return P;}return p.mergeWith.reduce(function(o,h){var i=T.parsePath(D,h);if(i.pathType==="relative"){throw new Error("Please only specify absolute paths via mergeWith");}i.value.forEach(function(k){if(k.type!=="literal"){throw new Error("Please do not specify references in mergeWith paths");}});var j=r.resolvePath(i,{},s,{},{});return m(j,o);},P);}function e(p){var P=Object.keys(p).filter(function(s){return typeof p[s]==="object"&&(p[s].hasOwnProperty("renameTo"));});var o=[];P.forEach(function(s){var h=p[s];if(h.hasOwnProperty("renameTo")){o.push(function(i,j){var R=j;R=j.replace(new RegExp(s+"=","g"),h.renameTo+"=");return R;});}});return o;}function g(o,s,R,A,D){l("[TEMPLATE EXPANSION] "+o.urlTemplate);var h=b(o.parameters,s,D)||{};var i=a.removeArrayParameterNotation(R[D]||{});var j=T.parseTemplateParameterSet(h,D);var k=T.parseTemplateParameterSetAsLiterals(i);var p=m(k,j);l("- parsed template parameters: "+JSON.stringify(p,null,3));var G=d.buildDependencyGraph(p);l("- created dependency graph: "+JSON.stringify(G,null,3));var n=d.getDependencyResolutionOrder(G);l("- resolving in order: "+n.join(" > "));var q=r.resolveAllParameters(p,n,s,R,A,D);Object.keys(q).forEach(function(x){var y=q[x];l(x+" --> "+f(y));});var P=e(h||{});var v=o.urlTemplate;var w=U.expand(v,q).toString();l("- created URL: "+w);P.forEach(function(O){w=O(v,w);});if(P.length>0){l("- created URL (post expansion): "+w);}return w;}return{expand:g};},false);
sap.ui.predefine('sap/ushell/User',["sap/ui/thirdparty/URI","sap/ui/base/EventProvider","sap/ui/core/LocaleData"],function(U,E,L){"use strict";function c(o){if(o===undefined){return undefined;}return jQuery.extend(true,{},o);}function g(u){var o;if(u.host&&typeof u.host==="function"&&u.host()){o=u.host();if(typeof u.protocol==="function"&&u.protocol()){o=u.protocol()+"://"+o;}return o;}return"";}function i(t){return t.indexOf("sap_")===0;}var a=function(C){var b=[],B,s,o,S,e=new E();this.getEmail=function(){return C.email;};this.getFirstName=function(){return C.firstName;};this.getFullName=function(){return C.fullName;};this.getId=function(){return C.id;};this.getLanguage=function(){return C.language;};this.getLanguageBcp47=function(){return C.languageBcp47;};this.getLanguageText=function(){var l=sap.ui.getCore().getConfiguration().getLocale(),d=new L(l),f=sap.ui.getCore().getConfiguration().getLanguageTag();f=f.replace("-","_");var h=d.getLanguages(),j=h[f]||this.getLanguage().toUpperCase();return j;};this.getLastName=function(){return C.lastName;};this.getImage=function(){return C.image;};this.setImage=function(u){C.image=u;e.fireEvent("onSetImage",u);};this.attachOnSetImage=function(f,d){e.attachEvent("onSetImage",f,d);};this.isJamActive=function(){return C.isJamActive===true;};this.isLanguagePersonalized=function(){return C.isLanguagePersonalized===true;};this.getTheme=function(t){if(t===a.prototype.constants.themeFormat.ORIGINAL_THEME){return S.originalTheme.theme;}if(t===a.prototype.constants.themeFormat.THEME_NAME_PLUS_URL){return o.theme+(o.locationPath?"@"+o.locationOrigin+o.locationPath:"");}if(t===a.prototype.constants.themeFormat.NWBC){if(i(o.theme)){return o.theme;}return this.getTheme(a.prototype.constants.themeFormat.THEME_NAME_PLUS_URL);}return o.theme;};this.getThemeRoot=function(t){if(C.ranges&&C.ranges.theme&&C.ranges.theme[t]&&C.ranges.theme[t].themeRoot){return C.ranges.theme[t].themeRoot;}return"";};this.setTheme=function(n){if(this.isSetThemePermitted()===false){var d="setTheme not permitted";jQuery.sap.log.error(d);throw new Error(d);}o=this._amendTheme({theme:n,root:this.getThemeRoot(n)},s);if(n!==S.originalTheme.theme){this.setChangedProperties({propertyName:"theme",name:"THEME"},S.originalTheme.theme,n);S=o;}this.applyTheme(n);};this.applyTheme=function(n){var t=this;var T=this._amendTheme({theme:n,root:this.getThemeRoot(n)},s),N;o=T;if(T.suppliedRoot){sap.ui.getCore().applyTheme(T.theme,T.suppliedRoot+"/UI5/");}else if(T.path){sap.ui.getCore().applyTheme(T.theme,T.path+"/UI5/");}else{sap.ui.getCore().applyTheme(T.theme);}sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(A){N=t.getTheme(a.prototype.constants.themeFormat.NWBC);A.postMessageToIframeApp("sap.ushell.appRuntime","themeChange",{"currentThemeId":N,"themeServiceRoute":window.location.protocol+"//"+window.location.host+"/comsapuitheming.runtime/themeroot/v1"});});};this.setLanguage=function(n){if(n){this.setChangedProperties({propertyName:"language",name:"LANGUAGE"},C.language,n);C.language=n;}};this.getAccessibilityMode=function(){return C.accessibility;};this.setAccessibilityMode=function(A){if(this.isSetAccessibilityPermitted()===false){var d="setAccessibilityMode not permitted";jQuery.sap.log.error(d);throw new Error(d);}C.accessibility=A;};this.isSetAccessibilityPermitted=function(){return C.setAccessibilityPermitted;};this.isSetThemePermitted=function(){return C.setThemePermitted;};this.getContentDensity=function(){return C.contentDensity;};this.setContentDensity=function(d){if(this.isSetContentDensityPermitted()===false){var f="setContentDensity not permitted";jQuery.sap.log.error(f);throw new Error(f);}this.setChangedProperties({propertyName:"contentDensity",name:"CONTENT_DENSITY"},C.contentDensity,d);C.contentDensity=d;};this.isSetContentDensityPermitted=function(){return C.setContentDensityPermitted;};this.getChangedProperties=function(){return jQuery.extend(true,[],b);};this.setChangedProperties=function(p,d,n){b.push({propertyName:p.propertyName,name:p.name,oldValue:d,newValue:n});};this.resetChangedProperties=function(){b=[];};this.resetChangedProperty=function(p){b=b.filter(function(P){return!(p===P.propertyName);});};this.getTrackUsageAnalytics=function(){return C.trackUsageAnalytics;};this.setTrackUsageAnalytics=function(t){this.setChangedProperties({propertyName:"trackUsageAnalytics",name:"TRACKING_USAGE_ANALYTICS"},C.trackUsageAnalytics,t);C.trackUsageAnalytics=t;};this.setImageConsent=function(d){this.setChangedProperties({propertyName:"isImageConsent",name:"ISIMAGECONSENT"},C.isImageConsent,d);C.isImageConsent=d;};this.getImageConsent=function(){return C.isImageConsent;};s={locationPathUi5:(new U(jQuery.sap.getModulePath(""))).absoluteTo(document.location).pathname(),locationPathCustom:C.themeRoot||"",locationOrigin:g(new U(document.location))};if(!s.locationPathUi5){jQuery.sap.log.warning("User: Could not set UI5 location path");}if(!s.locationPathCustom){jQuery.sap.log.warning("User: Could not set location path for custom themes");}if(!s.locationOrigin){jQuery.sap.log.warning("User: Could not set front-end server location origin");}B=C.bootTheme||{theme:"",root:""};o=this._amendTheme(B,s);S=o;};a.prototype._amendTheme=function(t,s){var T={},b,r;function d(R,s){var u,o,p={};u=new U(R);o=g(u);if(o){p.locationOrigin=o;p.locationPath=u.path();}else{p.locationOrigin=s.locationOrigin;p.locationPath=R;}return p;}if(!t||!t.theme||!s){return{originalTheme:{theme:"",root:""},theme:"",suppliedRoot:"",path:"",locationPath:"",locationOrigin:""};}T.originalTheme=c(t);if(T.originalTheme.theme.indexOf("@")>0){b=T.originalTheme.theme.split("@",2);T.theme=b[0];T.suppliedRoot=b[1];r=d(b[1],s);T.locationPath=r.locationPath;T.path=T.locationPath;T.locationOrigin=r.locationOrigin;return T;}T.theme=T.originalTheme.theme;if(T.originalTheme.root){T.suppliedRoot=T.originalTheme.root;r=d(T.originalTheme.root,s);T.locationPath=r.locationPath;T.path=T.locationPath;T.locationOrigin=r.locationOrigin;return T;}T.suppliedRoot="";if(i(T.theme)){T.locationOrigin=s.locationOrigin;T.locationPath=s.locationPathUi5;T.path="";return T;}T.locationOrigin=s.locationOrigin;T.locationPath=s.locationPathCustom;T.path=T.locationPath;return T;};a.prototype.constants={themeFormat:{ORIGINAL_THEME:"O",THEME_NAME_PLUS_URL:"N+U",NWBC:"NWBC"}};return a;},true);
sap.ui.predefine('sap/ushell/UserActivityLog',["sap/ushell/utils","sap/ushell/ui/launchpad/Tile","sap/ushell/EventHub"],function(u,T,E){"use strict";var U=function(){};U.prototype={_maxLoggedMessages:30,_maxMessageByteSize:2048,_maxQueueByteSize:30720,_isActive:false,_observedLaunchpadActions:["createGroupAt","deleteGroup","resetGroup","changeGroupTitle","moveGroup","addTile","deleteTile","movetile","externalSearch","addBookmarkTile"],_observedGeneralActions:["openApp"],_observedEventHubEvents:["showCatalog"],_aDoableObjects:[],messageType:{ACTION:0,ERROR:1},_tileOntapOrigFunc:undefined,activate:function(){if(this._isActive){return;}this._isActive=true;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(b,i,c){e.subscribe("launchpad",b,t._handleAction,t);});e.subscribe("sap.ushell","appOpened",t._handleAction,t);this._observedGeneralActions.forEach(function(b,i,c){e.subscribe(b,t._handleAction,t);});this._observedEventHubEvents.forEach(function(b,i,c){t._aDoableObjects.push(E.on(b).do(t._handleActionEventHub.bind(t)));});jQuery.sap.log.addLogListener(this);jQuery.sap.log.debug("requiring sap.ushell.ui.launchpad.Tile",new Error().stack,"sap.ushell.UserActivityLog");t._tileOntapOrigFunc=T.prototype.ontap;sap.ushell.ui.launchpad.Tile.prototype.ontap=t._tileOnTapDecorator(t._tileOntapOrigFunc);},deactivate:function(){if(!this._isActive){return;}this._isActive=false;var e=sap.ui.getCore().getEventBus(),t=this;this._observedLaunchpadActions.forEach(function(b,i,c){e.unsubscribe("launchpad",b,t._handleAction,t);});e.unsubscribe("sap.ushell","appOpened",t._handleAction,t);this._observedGeneralActions.forEach(function(b,i,c){e.unsubscribe(b,t._handleAction,t);});this._aDoableObjects.forEach(function(d){d.off();});jQuery.sap.log.removeLogListener(this);sap.ushell.ui.launchpad.Tile.prototype.ontap=this._tileOntapOrigFunc;},addMessage:function(t,m,b){if(this._isActive){this._addMessageInternal(t,m,b);}},getLog:function(){return this._getLoggingQueueFromStorage();},getMessageInfo:function(){var r={userDetails:this._getUserDetails(),shellState:this._getShellState(),navigationData:this._getLastNavActionFromStorage(),userLog:this.getLog(),formFactor:u.getFormFactor()};return r;},getMessageInfoAsString:function(s){return JSON.stringify(this.getMessageInfo(s));},onLogEntry:function(d){var e=(typeof d.details!=="undefined"&&(d.details!==""))?(d.message+" , "+d.details):d.message;this.addMessage(this.messageType.ERROR,e);},onAttachToLog:function(){},onDetachFromLog:function(){},_tileOnTapDecorator:function(o){var t=this,n,l,b,c,d,e;return function(){var f=this.getMetadata().getName();if(f=="sap.ushell.ui.launchpad.PlusTile"){t.addMessage(t.messageType.ACTION,"Open Catalog for empty group "+this.getGroupId());}else if(f=="sap.ushell.ui.launchpad.Tile"){n=hasher.getHash();if(n){var g=sap.ushell.Container.getService("URLParsing");var h=g.parseShellHash(n);n="#"+g.constructShellHash({target:{semanticObject:h.semanticObject,action:h.action}});}l=t._getLastNavActionFromStorage();l.time=new Date();l.navigationHash=n;l.tileDebugInfo=this.getDebugInfo();b=sap.ui.getCore().byId(this.getId());c=b.getModel();d=this.getBindingContext();e=d.getPath();l.tileTitle=d.getModel().getProperty(e).title;t._putInSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));t.addMessage(t.messageType.ACTION,"Click on Tile: "+c.getData().title+" Tile debugInfo: "+this.getDebugInfo());}o.apply(this,arguments);};},_addMessageInternal:function(t,m,b){var l=this._getLoggingQueueFromStorage(),c={type:null},p;for(p in this.messageType){if(t==this.messageType[p]){c.type=p;break;}}if(c.type===null){return;}jQuery.extend(c,{messageID:b,messageText:m,time:new Date(),toString:function(){var d=[this.type,this.time];if(typeof this.messageID!=="undefined"){d.push(this.messageID);}d.push(this.messageText);return d.join(" :: ");}});l.push(c);if(l.length>this._maxLoggedMessages){l.shift();}this._putInSessionStorage("sap.ushell.UserActivityLog.loggingQueue",JSON.stringify(l));},_handleActionEventHub:function(e){this._handleAction("",e.sId,e.oData);},_handleAction:function(c,e,d){var m;switch(e){case"deleteTile":m="Delete Tile "+(d.tileId||"");break;case"moveTile":m="Move Tile "+(d.sTileId||"")+" to Group "+(d.toGroupId||"");break;case"createGroupAt":m="Create Group";break;case"changeGroupTitle":m="Change Group Title of "+(d.groupId||"")+" to "+(d.newTitle||"");break;case"deleteGroup":m="Delete Group "+(d.groupId||"");break;case"addTile":var t=d.catalogTileContext.oModel.oData,s=d.catalogTileContext.sPath,b=this._findInModel(s,t),f=b.id,g=d.groupContext.getObject(),h=g.groupId;m="Add Tile "+(f||"")+" to Group "+(h||"");break;case"moveGroup":m="Move Group from index "+(d.fromIndex||"")+" to index "+(d.toIndex||"");break;case"appOpened":m="Open application "+d.action;var l=this._getLastNavActionFromStorage();l.applicationInformation={};["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(p){l.applicationInformation[p]=d[p];});if(!this._hashSegmentsEqual(l.navigationHash,d.sShellHash)){l.tileDebugInfo="";}l.navigationHash=d.sShellHash;this._putInSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData",JSON.stringify(l));break;case"addBookmarkTile":m="Add Bookmark "+(d.title||"")+" "+(d.subtitle||"")+" for URL: "+(d.url||"");break;case"showCatalog":m="Show Catalog";break;default:break;}this.addMessage(this.messageType.ACTION,m);},_findInModel:function(p,m){var b,c=m,i,d;try{b=p.split("/");for(i=0;i<b.length;i=i+1){if(d!==b[i]){continue;}c=c[d];}}catch(e){return undefined;}return c;},_getUserDetails:function(){var b=sap.ushell.Container.getUser();return{fullName:b.getFullName()||"",userId:b.getId()||"",eMail:b.getEmail()||"",Language:b.getLanguage()||""};},_getShellState:function(){var v=sap.ui.getCore().byId("viewPortContainer"),m,r="";if(v!==undefined){m=v.getModel();r=m.getProperty("/currentState/stateName");}return r;},_getLoggingQueueFromStorage:function(){var l=this._getFromSessionStorage("sap.ushell.UserActivityLog.loggingQueue");var q=[];if(l){try{q=JSON.parse(l);}catch(e){}}return q;},_getLastNavActionFromStorage:function(){var l=this._getFromSessionStorage("sap.ushell.UserActivityLog.lastNavigationActionData");return(l?JSON.parse(l):{});},_hashSegmentsEqual:function(b,c){if((!b)||(!c)){return false;}return(this._getHashSegment(b)===this._getHashSegment(c));},_getHashSegment:function(b){var i=b.indexOf("~"),c;if(i>-1){return b.substring(0,i);}c=b.indexOf("?");if(c>-1){return b.substring(0,c);}return b;},_getFromSessionStorage:function(k){var r=null;try{r=sessionStorage.getItem(k);}catch(e){}return r;},_putInSessionStorage:function(k,v){try{sessionStorage.setItem(k,v);}catch(e){}}};var a=new U();return a;},true);
sap.ui.predefine('sap/ushell/_ApplicationType/guiResolution',["sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ui/thirdparty/jquery"],function(U,a,S,c,p,q){"use strict";function r(O,K){K.forEach(function(s){delete O[s];});}function i(P,I){return I&&I.signature&&I.signature&&I.signature.parameters&&I.signature.parameters[P]&&I.signature.parameters[P].required===true;}function g(E,I){var y=i("DYNP_OKCODE",I)||i("DYNP_NO1ST",I);var B=[];if(y){return[];}var z=b(E);function A(s){return s.toUpperCase();}var N=Object.keys(z).map(A).sort();function C(s,D){if(s.length!==D.length){return false;}return s.every(function(F,G){return s[G]==D[G];});}if(C(["DYNP_NO1ST","DYNP_OKCODE"],N)||C(["DYNP_OKCODE"],N)||C(["DYNP_NO1ST"],N)){B=Object.keys(z);}return B;}function b(P){var B=c.filterObject(P,d);return B;}function d(N,V){var s;if(arguments.length===1){s=N.split(/[=](.+)?/);if(s.length>1){return d.apply(null,s);}}return!(N.indexOf("sap-")===0||N.charAt(0)==="~");}function e(M,B,E){var I=M.inbound;var R=I&&I.resolutionResult;if(!(!I||!R||!(R["sap.gui"])||!(R.applicationType==="TR"))){return l(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/~canvas;")>=0)||!(R.url.indexOf("app/transaction/APB_LPD_CALL_")===-1))){return n(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/~canvas;")>=0)||!(R.url.indexOf("app/transaction/APB_LPD_CALL_")>=0))){return m(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/its/webgui")>=0)||!(R.url.indexOf("APB_LPD_CALL_")===-1))){return o(M,B,E);}if(!(!I||!R||!(R.applicationType==="TR")||!(R.url.indexOf("/its/webgui")>=0)||!(R.url.indexOf("APB_LPD_CALL_")!==-1))){return k(M,B,E);}throw new Error("Cannot generate TR resolution result");}function f(T,s,y,E){var z,A;z="/gui/sap/its/webgui?%7etransaction="+T+"&%7enosplash=1";A=new U(z);return S.spliceSapSystemIntoURI(A,S.LOCAL_SYSTEM_ALIAS,s,y,"NATIVEWEBGUI",S.SYSTEM_ALIAS_SEMANTICS.apply,E);}function h(Q,P,s,y){var I,z="P_OBJECT"+y,M=132;var A=a.getURLParsing().privparamsToString(P,"%25","%21");if(!A){return Q;}var B="";j("P_OBJECT",Q,s,y,function(E){var F=E.replace(z,"");B=decodeURIComponent(F);if(B.length>0){B=B+"%25";}return z;});A=B+A;var C={pObjX:"",pObject:""};A.match(new RegExp(".{1,"+M+"}","g")).map(function(E){return encodeURIComponent(E);}).forEach(function(E,G){var F="P_OBJECT";var H="pObject";if(G>0){F="P_OBJ"+G;H="pObjX";}var J=C[H].length===0?"":s;C[H]=C[H]+J+F+y+E;});I=[C.pObjX,C.pObject].filter(function(E){return E.length>0;}).join(s);var D=j("P_OBJECT",Q,s,y,function(F){return I;});if(D.found){return D.query;}return Q+(Q.length===0?"":s)+I;}function j(T,Q,s,y,A){var F=false,P=T+y;var z=Q.split(s).map(function(B){if(B.indexOf(P)!==0){return B;}F=true;return A(B);}).filter(function(B){return typeof B!=="undefined";}).join(s);return{found:F,query:z};}function k(M,B,E){var I=M.inbound,s=I&&I.resolutionResult,R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}return new Promise(function(C,D){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"NATIVEWEBGUI",s.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(D).done(function(W){var P=W.search();var F=P.split("&").map(function(Q){var G;if(Q.indexOf("?%7etransaction")===0||Q.indexOf("%7etransaction")===0){G=h(Q,y,"%3b","%3d");return G;}return Q;}).join("&");W.search(F);["additionalInformation","applicationDependencies"].forEach(function(G){if(I.resolutionResult.hasOwnProperty(G)){R[G]=I.resolutionResult[G];}});R.url=W.toString();R.text=I.title;R.applicationType="TR";C(R);});});}function l(M,B,E){var I=M.inbound,s=I&&I.resolutionResult,y=M.mappedIntentParamsPlusSimpleDefaults||{};var z=s.systemAlias;if(y["sap-system"]){z=y["sap-system"][0];}var A;if(y["sap-system-src"]){A=y["sap-system-src"][0];}return new Promise(function(R,C){f(I.resolutionResult["sap.gui"].transaction,z,A,E).done(function(D){p.mapParameterNamesAndRemoveObjects(M);var F=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,D);if(F&&M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.platform.runtime"]){F["sap.platform.runtime"]=M.inbound.resolutionResult["sap.platform.runtime"];}F["sap-system"]=z;R(F);}).fail(C);});}function m(M,B,E){var I=M.inbound,s=I&&I.resolutionResult;var R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}return new Promise(function(C,D){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"WEBGUI",s.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(D).done(function(W){var P=W.search();P=h(P,y,"&","=");W.search(P);["additionalInformation","applicationDependencies"].forEach(function(F){if(I.resolutionResult.hasOwnProperty(F)){R[F]=I.resolutionResult[F];}});R.url=W.toString();R.text=I.title;R.applicationType="NWBC";C(R);});});}function n(M,B,E){var I=M.inbound,s=I&&I.resolutionResult;var R={};var W=new U(B);var y=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var z=y["sap-system"]&&y["sap-system"][0];var A=y["sap-system-src"]&&y["sap-system-src"][0];R["sap-system"]=z;delete y["sap-system"];if(typeof A==="string"){R["sap-system-src"]=A;delete y["sap-system-src"];}var C=g(y,I||{});r(y,C);return new Promise(function(D,F){S.spliceSapSystemIntoURI(W,s.systemAlias,z,A,"WEBGUI",R.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(F).done(function(W){var G=a.getURLParsing().paramsToString(y);var P=W.search();if(G){P=P+((P.indexOf("?")<0)?"?":"&")+G;}W.search(P);["additionalInformation","applicationDependencies"].forEach(function(H){if(I.resolutionResult.hasOwnProperty(H)){R[H]=I.resolutionResult[H];}});R.url=W.toString();R.text=I.title;R.applicationType="NWBC";D(R);});});}function o(M,B,E){var I=M.inbound,R=I&&I.resolutionResult,F={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true,"sap-system-src":true};var W=new U(B);var s=q.extend(true,{},M.mappedIntentParamsPlusSimpleDefaults);var y=s["sap-system"]&&s["sap-system"][0];var z=s["sap-system-src"]&&s["sap-system-src"][0];Object.keys(s).forEach(function(P){if(F[P.toLowerCase()]){delete s[P];}});return new Promise(function(A,C){S.spliceSapSystemIntoURI(W,R.systemAlias,y,z,"NATIVEWEBGUI",R.systemAliasSemantics||S.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(C).done(function(W){var R=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,W);A(R);});});}function t(I,M,W){var F={"sap-wd-run-sc":true,"sap-wd-auto-detect":true,"sap-ep-version":true,"sap-system":true};var R={};var E=q.extend(true,{},M);var s=E["sap-system"]&&E["sap-system"][0];var y=E["sap-system-src"]&&E["sap-system-src"][0];R["sap-system"]=s;if(typeof y==="string"){R["sap-system-src"]=y;}Object.keys(E).forEach(function(D){if(F[D.toLowerCase()]){delete E[D];}});var z=g(E,I||{});r(E,z);var A=u(E);r(E,Object.keys(A));var P=W.search();var B=P.split("&").map(function(Q){var N;if(!d(Q)){if(Q.indexOf("=")>=0){N=Q.split("=");if(!A.hasOwnProperty(N[0])){A[N[0]]=N[1];}}else{q.sap.log.error("Found no '=' separator of Webgui non-business parameter. Parameter will be skipped.","'"+Q+"'","sap.ushell.services.ClientSideTargetResolution");}return undefined;}var D;if(Q.indexOf("?%7etransaction")===0||Q.indexOf("%7etransaction")===0){D=w(Q,E,"%3b","%3d");return D;}return Q;}).filter(function(D){return typeof D!=="undefined";}).join("&");var C=a.getURLParsing().paramsToString(A);B=[B,C.replace("~","%7e")].join("&");W.search(B);["additionalInformation","applicationDependencies","sap.platform.runtime"].forEach(function(D){if(I.resolutionResult.hasOwnProperty(D)){R[D]=I.resolutionResult[D];}});R.url=W.toString();R.text=I.title;R.applicationType="TR";return R;}function u(P){var N;N=c.filterObject(P,function(K,V){return!d(K,V);});return N;}function v(T){var s="^(.+?)(%20|(%20)(.+))?$",y=new RegExp(s,"i"),z,P={hasParameters:null,transactionParamName:"",transactionCode:"",parameters:[]};var A=T.split("=");if(A.length>2){return{"error":"Found more than one assignment ('=') in the transaction query parameter","details":"Only one '=' sign is expected in "+T};}if(A.length<2||typeof A[1]==="undefined"||A[1].length===0){return{"error":"The transaction query parameter must specify at least the transaction name","details":"Got "+T+" instead."};}P.transactionParamName=A[0];z=A[1];var M=z.match(y);if(!M){return{"error":"Cannot parse ~transaction query parameter value.","details":z+" should match /"+s+"/"};}P.transactionCode=M[1];if(M[2]&&M[2]!=="%20"){var B=M[4]||"";B.split("%3b").forEach(function(N){var C=N.split("%3d"),D=C[0];if(D&&typeof D==="string"&&D.length>0){P.parameters.push({name:D,value:C[1]});}});}P.hasParameters=false;if(P.parameters.length>0){P.hasParameters=true;P.transactionCode=P.transactionCode.replace(/^[*]/,"");}return P;}function w(T,P){var s=v(T);if(s.error){q.sap.log.error(s.error,s.details,"sap.ushell.services.ClientSideTargetResolution");return T;}var y=s.parameters.map(function(B){return B.name.toUpperCase()+"%3d"+B.value;});var z={};Object.keys(P).forEach(function(K){z[K.toUpperCase()]=P[K];});var A=a.getURLParsing().privparamsToString(z,"%3b","%3d");if(A){y.push(A);}var H=y.length>0;return s.transactionParamName+"="+(H?"*":"")+s.transactionCode+(H?"%20":"")+y.join("%3b");}function x(I,M,E){return new Promise(function(R,s){var y;if(I.params["sap-system-src"]){y=I.params["sap-system-src"][0];}var z=I.params["sap-system"]?I.params["sap-system"][0]:undefined;var A=I.params["sap-ui2-tcode"]?I.params["sap-ui2-tcode"][0]:undefined;f(A,z,y,E).done(function(B){delete M.intentParamsPlusAllDefaults["sap-ui2-tcode"];p.mapParameterNamesAndRemoveObjects(M);var C=t(M.inbound,M.mappedIntentParamsPlusSimpleDefaults,B);if(C&&M.inbound&&M.inbound.resolutionResult&&M.inbound.resolutionResult["sap.platform.runtime"]){C["sap.platform.runtime"]=M.inbound.resolutionResult["sap.platform.runtime"];}C["sap-system"]=z;C.text=A;R(C);}).fail(function(B){s(B);});});}return{generateTRResolutionResult:e,resolveEasyAccessMenuIntentWebgui:x,injectEffectiveParametersIntoWebguiQueryParam:w,injectEffectiveParametersIntoWebguiPobjectParam:h,amendGuiParam:j,parseWebguiTransactionQueryParam:v,getWebguiNonBusinessParameters:u,getWebguiBusinessParameters:b,isWebguiBusinessParameter:d,buildNativeWebGuiURI:f,constructFullWebguiResolutionResult:l};},false);
sap.ui.predefine('sap/ushell/_ApplicationType/systemAlias',["sap/ui/thirdparty/URI","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject"],function(U,u,q,i){"use strict";var S="";var O={apply:"apply",applied:"applied"};function a(o){return(o.protocol()||"").length>0;}function r(l,m,E){var n=typeof m==="string";var o=[l];if(n){o.unshift(m);}var K=u.generateLocalStorageKey("sap-system-data",o);var L=u.getLocalStorage();var p=L.getItem(K);var t={};if(p){try{t=JSON.parse(p);}catch(w){return new q.Deferred().reject("Cannot parse system data from local storage at key '"+K+"'. Data: "+p);}return new q.Deferred().resolve(t).promise();}else if(n){return new q.Deferred().reject("Cannot find data for system '"+l+"' in local storage using key '"+K+"'");}if(!E){return new q.Deferred().reject("fallback: the adapter does not implement resolveSystemAlias").promise();}return E(l);}function b(l,m,o,n,E){var N=o,D=new q.Deferred();r(l,m,E).fail(function(p){D.reject(p);}).done(function(R){var V=v(R);if(!V.isValid){h(V);D.reject("Invalid system alias definition");return D;}var p=g(R,new U(window.location.toString()).protocol()),t=R[p],Q,L,w;if(l===S&&t.host===""&&(t.port===0||t.port==="")){p="";}N.protocol(p);N.hostname(t.host);N.port(t.port);k(N,n,t.pathPrefix,E).fail(function(x){D.reject(x);}).done(function(N){Q=N.query();if(typeof R.client==="string"&&R.client!==""){Q=Q+(Q.length>0?"&":"")+"sap-client="+R.client;}if(typeof R.language==="string"&&R.language!==""){L=R.language;}else{w=sap.ushell.Container.getUser();if(!w){q.sap.log.error("Cannot retieve the User object via sap.ushell.Container while determining sap-language","will default to 'en' language","sap.ushell.services.ClientSideTargetResolution");L="en";}else{L=w.getLanguage();}}Q=Q+(Q.length>0?"&":"")+"sap-language="+L;N.query(Q);if(R.hasOwnProperty("rfc")&&n==="NATIVEWEBGUI"){var W=d(R.rfc,t.host,N);var P=N.path()+";"+W;N.path(P);o._parts.path=P;}D.resolve(N);});});return D.promise();}function s(o,l,m,n,p,t,E){var D=new q.Deferred();if(t!==O.apply&&t!==O.applied){throw new Error("Invalid system alias semantic was provided: '"+t+"'");}if(t===O.applied&&((typeof m==="undefined"||l===m))){return D.resolve(o).promise();}if(t===O.apply&&typeof l==="undefined"&&typeof m==="undefined"){return D.resolve(o).promise();}if(p==="URL"&&t==O.applied){return c(o,l,m,n,E);}(new Promise(function(R){if(t===O.apply){R({targetUri:o,alias:m||l,sapSystemSrc:m?n:undefined});return;}e(o,l,undefined,p,E).fail(function(w){D.reject(w);}).done(function(w){R({targetUri:w,alias:m});});})).then(function(A){b(A.alias,A.sapSystemSrc,A.targetUri,p,E).fail(function(w){D.reject(w);}).done(function(I){D.resolve(I);});});return D.promise();}function c(o,l,m,n,E){var D=new q.Deferred();if(l===S||typeof l==="undefined"){if(a(o)){return D.resolve(o);}b(m,n,o,"URL",E).fail(function(p){D.reject(p);}).done(function(p){D.resolve(p);});return D.promise();}r(l,n,E).fail(function(p){D.reject(p);}).done(function(R){var p=g(R,new U(window.location.toString()).protocol()),t=R[p],w;if((o.protocol()||"").toLowerCase()===p&&(o.hostname()||"")===t.host&&(o.path().indexOf(t.pathPrefix)===0)){o.protocol("");o.hostname("");w=o.path().replace(t.pathPrefix,"");o.path(w);j(o,["sap-language","sap-client"]);b(m,n,o,"URL",E).fail(function(x){D.reject(x);}).done(function(x){D.resolve(x);});}else{D.resolve(o);}});return D.promise();}function d(l,m){var R,n,I,t,p;I=!!l.systemId;if(I){t=[l.systemId&&("~sysid="+l.systemId),l.loginGroup&&("~loginGroup="+l.loginGroup),l.sncNameR3&&("~messageServer="+encodeURIComponent(l.sncNameR3)),l.sncNameR3&&("~sncNameR3="+encodeURIComponent(l.sncNameR3)),l.sncQoPR3&&("~sncQoPR3="+l.sncQoPR3)].filter(function(o){return(typeof o==="string")&&(o!=="");});}else{p=(l.host||"");n=p.toLowerCase()===m.toLowerCase();R=/^[/][HGMR][/].*/.test(p);if(p.length>0&&!n&&!R){q.sap.log.error("Invalid connect string provided in 'host' field of system alias","Data for rfc destination provided are: "+JSON.stringify(l,null,3),"sap.ushell.services.ClientSideTargetResolution");}t=[p&&!R&&!n&&("~rfcHostName="+p),R&&("~connectString="+encodeURIComponent(p)),l.service&&("~service="+l.service),l.sncNameR3&&("~sncNameR3="+encodeURIComponent(l.sncNameR3)),l.sncQoPR3&&("~sncQoPR3="+l.sncQoPR3)].filter(function(o){return(typeof o==="string")&&(o!=="");});}return t.join(";").replace(/(%[A-F0-9]{2})/g,function(E){return E.toLowerCase();});}function e(o,l,m,n,E){var D=new q.Deferred();if(typeof l==="undefined"){f(o,l,n,undefined,E).fail(function(p){D.reject(p);}).done(function(N){D.resolve(N);});return D.promise();}r(l,m,E).fail(function(p){D.reject(p);}).done(function(R){f(o,l,n,R,E).fail(function(p){D.reject(p);}).done(function(N){D.resolve(N);});});return D.promise();}function f(o,l,m,R,E){var n,p,t,w,D=new q.Deferred(),P=new q.Deferred();o.protocol("");o.hostname("");o.port("");j(o,["sap-client","sap-language"]);if(!i(R)||typeof l!=="string"){return D.resolve(o).promise();}p=g(R,new U(window.location.toString()).protocol());n=R[p];w=(typeof n.pathPrefix==="string")&&n.pathPrefix;if(w!==""){P.resolve(w);}else{r("",undefined,E).fail(function(x){D.reject(x);}).done(function(x){var y=x[p];P.resolve(y.pathPrefix);});}P.fail(function(x){D.reject(x);}).done(function(w){if(w&&w.length>0){t=o.path();t=t.replace(w,"");if(t.indexOf("/")!==0){t="/"+t;}o.path(t);}if(m==="NATIVEWEBGUI"&&R.hasOwnProperty("rfc")){t=o.path();t=t.split(";").filter(function(x){return x.indexOf("~sysid=")!==0&&x.indexOf("~service=")!==0&&x.indexOf("~loginGroup=")!==0&&x.indexOf("~messageServer=")!==0&&x.indexOf("~sncNameR3=")!==0&&x.indexOf("~sncQoPR3=")!==0;}).join(";");o.path(t);}D.resolve(o);});return D.promise();}function g(o,B){if(o.hasOwnProperty("https")){return"https";}if(o.hasOwnProperty("http")){return"http";}q.sap.log.error("Cannot select which system alias to pick between http/https","make sure they are provided in the given system alias collection","sap.ushell.services.ClientSideTargetResolution");return undefined;}function h(V){q.sap.log.error("Invalid system alias definition: "+V.debug,"ERRORS:"+V.errors.map(function(E){return"\n - "+E;}).join(""),"sap.ushell.ApplicationType");}function v(R){function l(F){var E=[];if(typeof F.host!=="string"){E.push("host field must be a string");}if(typeof F.port!=="number"&&typeof F.port!=="string"){E.push("port field must be a number or a string");}if(typeof F.pathPrefix!=="string"){E.push("pathPrefix field must be a string");}return E;}var E=[],H=R.hasOwnProperty("https"),m=R.hasOwnProperty("http");if(!m&&!H){E.push("at least one of 'http' or 'https' fields must be defined");}if(H){l(R.https).forEach(function(n){E.push("https>"+n);});}if(m){l(R.http).forEach(function(n){E.push("http>"+n);});}if(E.length>0){return{isValid:false,errors:E,debug:JSON.stringify(R,null,3)};}return{isValid:true};}function j(o,p){var B={},t;p.forEach(function(P){B[P]=true;});t=o.query();t=t.split("&").filter(function(P){var l=(P.split("=")[0]||"").toLowerCase();return!B.hasOwnProperty(l);}).join("&");o.query(t);}function k(o,l,p,E){var D=new q.Deferred(),t;if(l==="URL"&&p.length===0){return D.resolve(o).promise();}function m(P){var R=P+o.path();o.path(R.replace(/\/+/g,"/"));D.resolve(o);}r("",undefined,E).fail(function(n){D.reject(n);}).done(function(R){var n=g(R,new U(window.location.toString()).protocol());var L=R[n].pathPrefix;var P=p===L;if(p.length>0&&!P){if((l==="WDA"||l==="WEBGUI")&&o.path().indexOf("~canvas")>=0){t=o.path();t="/~canvas"+t.split("~canvas")[1];o.path(t);}}if(p.length===0){m(L);}else{m(p);}});return D.promise();}return{LOCAL_SYSTEM_ALIAS:S,SYSTEM_ALIAS_SEMANTICS:O,spliceSapSystemIntoURI:s,isAbsoluteURI:a,stripURI:e,selectSystemAliasDataName:g,constructNativeWebguiParameters:d};},false);
sap.ui.predefine('sap/ushell/_ApplicationType/utils',["sap/ui/thirdparty/URI","sap/ushell/utils","sap/ushell/_ApplicationType/systemAlias"],function(U,u,s){"use strict";var a;function g(){if(!a){a=sap.ushell.Container.getService("URLParsing");}return a;}function b(o,S,e){if(!e||e===s.SYSTEM_ALIAS_SEMANTICS.applied){return s.isAbsoluteURI(o)&&!S;}if(e===s.SYSTEM_ALIAS_SEMANTICS.apply){return s.isAbsoluteURI(o);}throw new Error("Invalid system alias semantics: '"+e+"'");}function c(p,e){var S,f;if(p){var h=e.match(/#.*/);if(h){f=h;S=e.replace(h,"");}else{S=e;f="";}e=S+((e.indexOf("?")<0)?"?":"&")+p+f;}return e;}function d(p,e){var a=g();var f=e.match(/#.*/);var h=f&&f[0];if(!h){var P=a.paramsToString(p);return c(P,e);}var i=a.parseShellHash(h);Object.keys(p).forEach(function(m){var n=p[m];i.params[m]=[n];});var j=Object.keys(i.params).reduce(function(o,K){var v=i.params[K];var V=v.map(function(m){return encodeURIComponent(m);});o[encodeURIComponent(K)]=V;return o;},{});i.params=j;var k=e.replace(h,"");var l=a.constructShellHash(i);return k+"#"+l;}return{getURLParsing:g,appendParametersToUrl:c,appendParametersToIntentURL:d,absoluteUrlDefinedByUser:b};},false);
sap.ui.predefine('sap/ushell/_ApplicationType/wdaResolution',["sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/utils","sap/ushell/_ApplicationType/systemAlias","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath"],function(U,a,s,q,O){"use strict";function c(p,m){return new Promise(function(R,j){var E=q.extend(true,{},p);if(m.length>0){E["sap-ushell-defaultedParameterNames"]=[JSON.stringify(m)];}delete E["sap-system"];sap.ushell.Container.getService("ShellNavigation").compactParams(E,["sap-xapp-state","sap-ushell-defaultedParameterNames","sap-intent-params"],undefined,true).fail(function(k){j(k);}).done(function(o){var k=a.getURLParsing().paramsToString(o);R(k);});});}function b(u,j){var p=u.search();if(j){p=p+((p.indexOf("?")<0)?"?":"&")+j;}return u.search(p).toString();}function d(A,C,I,o,E){var S,j,u,k,l,m=q.extend(true,{},o);if(C){m["sap-wd-configId"]=C;}if(m["sap-system"]){S=m["sap-system"][0];delete m["sap-system"];}if(m.hasOwnProperty("sap-system-src")){j=m["sap-system-src"][0];delete m["sap-system-src"];}l=a.getURLParsing().paramsToString(m);if(I){u=e(A,l);}else{u=f(A,l);}k=new U(u);return s.spliceSapSystemIntoURI(k,s.LOCAL_SYSTEM_ALIAS,S,j,"WDA",s.SYSTEM_ALIAS_SEMANTICS.apply,E);}function e(A,u){return"/ui2/nwbc/~canvas;window=app/wda/"+A+"/"+"?"+u;}function f(n,u){var N=n.indexOf("/")!==0;if(N){n="sap/"+n;}return"/webdynpro/"+n+"?"+u;}function g(I,F,S,j){var R={"sap-system":S,url:F,text:I.title,applicationType:"NWBC"};if(typeof j==="string"){R["sap-system-src"]=j;}["additionalInformation","applicationDependencies"].forEach(function(p){if(I.resolutionResult.hasOwnProperty(p)){R[p]=I.resolutionResult[p];}});return R;}function h(m,B,E){var I=O.get("inbound.resolutionResult",m),M=m.mappedIntentParamsPlusSimpleDefaults||{};var S=I.systemAlias;if(M["sap-system"]){S=M["sap-system"][0];}var j;if(M["sap-system-src"]){j=M["sap-system-src"][0];}var o={"sap-system":[S]};if(typeof j==="string"){o["sap-system-src"]=[j];}var C=I["sap.wda"].compatibilityMode;if(C===undefined){C=true;}return new Promise(function(R,k){d(I["sap.wda"].applicationId,I["sap.wda"].configId,C,o,E).done(function(w){var M=m.mappedIntentParamsPlusSimpleDefaults;c(M,m.mappedDefaultedParamNames).then(function(u){var F=b(w,u);var S=M["sap-system"]&&M["sap-system"][0];var j=M["sap-system-src"]&&M["sap-system-src"][0];var l=g(m.inbound,F,S,j);R(l);},function(l){k(l);});}).fail(function(l){k(l);});});}function i(m,B,E){var I=m.inbound,o=I&&I.resolutionResult,M=m.mappedIntentParamsPlusSimpleDefaults;var w=new U(B);var S=M["sap-system"]&&M["sap-system"][0];var j=M["sap-system-src"]&&M["sap-system-src"][0];return Promise.all([(new Promise(function(D,R){s.spliceSapSystemIntoURI(w,o.systemAlias,S,j,"WDA",o.systemAliasSemantics||s.SYSTEM_ALIAS_SEMANTICS.applied,E).fail(R).done(D);})),c(M,m.mappedDefaultedParamNames)]).then(function(R){var W=R[0];var u=R[1];var F=b(W,u);var k=g(I,F,S,j);return k;},function(k){return Promise.reject(k);});}function r(I,m,E){var C,A,o,j=true;A=I.params["sap-ui2-wd-app-id"][0];C=(O.get("params.sap-ui2-wd-conf-id",I)||[])[0];o=Object.keys(I.params).reduce(function(R,p){if(p!=="sap-ui2-wd-app-id"&&p!=="sap-ui2-wd-conf-id"){R[p]=I.params[p];}return R;},{});return new Promise(function(R,k){d(A,C,j,o,E).done(function(u){var S=I.params.hasOwnProperty("sap-system-src")&&I.params["sap-system-src"][0];var l=I.params.hasOwnProperty("sap-system")&&I.params["sap-system"][0];var n={url:u.toString(),applicationType:"NWBC",text:A,additionalInformation:"","sap-system":l};if(typeof S==="string"){n["sap-system-src"]=S;}if(m&&m.inbound&&m.inbound.resolutionResult&&m.inbound.resolutionResult["sap.platform.runtime"]){n["sap.platform.runtime"]=m.inbound.resolutionResult["sap.platform.runtime"];}R(n);}).fail(function(l){k(l);});});}return{resolveEasyAccessMenuIntentWDA:r,constructFullWDAResolutionResult:h,constructWDAResolutionResult:i};},false);
sap.ui.predefine('sap/ushell/_Config/utils',[],function(){"use strict";function i(p,C){var e=[];var n=[];var o=C;var f=false;var P=p.split("/");P.shift();P.forEach(function(g){if(!f&&o.hasOwnProperty(g)){o=o[g];e.push(g);return;}f=true;n.push(g);});return{contractPart:"/"+e.join("/"),nonContractPart:n};}function a(v){return v&&v.isA&&v.isA("sap.ui.model.Context");}function w(C,p,o,v){var D=o;p.forEach(function(P,I){if(I===p.length-1){D[P]=v;return;}if(!D.hasOwnProperty(P)){throw new Error("Cannot find "+P+" inside "+C);}D=D[P];});}function c(p){var P=function(e){return p+e;};if(typeof p==="object"){var S="/";P=function(e){var f=e.split(S);f.shift();var F=f.shift();return p[F]+(f.length>0?S+f.join(S):"");};}return P;}function b(p,m,P){var f=c(P);var F=f(p);if(a(m)&&p.charAt(0)!=="/"){var r=m.getPath()+"/"+p;F=f(r);}return F;}function s(f,C,m,p){m.setData=function(P,D){throw new Error("not yet implemented");};m.setProperty=function(P,D,M){var F=b(P,M,p);var I=i(F,C);if(I.nonContractPart.length===0){f.emit(I.contractPart,D);return;}var B=f.last(I.contractPart);w(I.contractPart,I.nonContractPart,B,D);f.emit(I.contractPart,B);};return m;}function d(f,C,p,e){var m,S,g,P;if(typeof p==="string"){var h=p;P=h;var I=f.last(h);if(Object.prototype.toString.apply(I)!=="[object Object]"){throw new Error("Cannot bind on leaf property of Configuration: '"+h+"'");}m=new e(I);g=m.setData.bind(m);f.on(h).do(function(v){g(v);});return s(f,C,m,P);}if(Object.prototype.toString.apply(p)==="[object Object]"){var D=p;var M=Object.keys(D).reduce(function(M,k){var j=D[k];M[k]=f.last(j);f.on(j).do(function(k,v){S("/"+k,v);}.bind(null,k));return M;},{});m=new e(M);S=m.setProperty.bind(m);return s(f,C,m,D);}throw new Error("Invalid parameter provided to createModel. Must be an object or a string.");}return{createModel:d};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/DependencyGraph',["sap/ushell/utils/clone"],function(c){"use strict";function i(n){return typeof n==="string"||n.type==="wildcard"||n.type==="literal"||n.type==="intentParameter"||n.type==="reference";}function a(n){return n.type==="reference"&&!n.namespace;}function b(G,p,n){if(!G.hasOwnProperty(p)){G[p]=[];}if(a(n)){G[p].push(n.value);}}function d(p){var D={};var A=b.bind(null,D);Object.keys(p).forEach(function(P){var n=p[P];v(n,P,A);});return D;}function e(n){var N=n.type;if(N==="expression"){return[n.value];}if(N==="function"){return(n.args||[]).concat(n.params||[]);}if(N==="pipe"||N==="path"){return n.value;}throw new Error("Unknown type encountered while building dependency graph: '"+N+"'");}function v(n,p,A){A(p,n);if(i(n)){return;}var N=e(n);N.forEach(function(n){v(n,p,A);});}function g(D){var o=c(D);var n,N,r=[],R={};do{var f=Object.keys(o);n=f.length;f.forEach(function(s){if(o[s].length>0){o[s]=o[s].filter(function(h){var w=!R[h];var m=o.hasOwnProperty(h);return w&&m;});}if(o[s].length===0){delete o[s];r.push(s);R[s]=true;}});N=Object.keys(o).length;}while(n!==N);if(N!==0){throw new Error("Graph of dependencies contains cyclic references");}return r;}return{buildDependencyGraph:d,getDependencyResolutionOrder:g};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/Functions',["sap/ushell/utils/type","sap/ushell/utils/clone","sap/ushell/_URLTemplateProcessor/utils","sap/ui/thirdparty/URI"],function(t,c,u,U){"use strict";var O={url:{args:["urlPart?"],minValues:0,maxValues:0,fn:function(A){var o=new U();var k=["protocol","scheme","username","password","hostname","port","host","userinfo","authority","origin","subdomain","domain","tld","pathname","path","directory","filename","suffix","search","query","hash","fragment","resource"];var m="toString";if(A.urlPart){if(k.indexOf(A.urlPart)===-1){throw new Error("The URL part '"+A.urlPart+"' is not valid. Please use one of "+k.join(", "));}m=A.urlPart;}return o[m]();}},if:{args:["trueCondition"],minValues:1,maxValues:2,fn:function(A,v){var V=g(v);if(i(A.trueCondition)){return V.length===1?undefined:V.pop();}return V[0];}},and:{args:["emptyCondition?"],minValues:1,fn:function(A,v){var V=g(v);if(typeof A.emptyCondition==="undefined"&&A.length>0){return undefined;}if(typeof A.emptyCondition!=="undefined"&&i(A.emptyCondition)){return undefined;}var l=V.pop();var k=V.every(u.hasValue);return k?l:undefined;}},or:{args:["emptyCondition?"],minValues:1,fn:function(A,v){var V=g(v);if(typeof A.emptyCondition==="undefined"&&A.length>0){return undefined;}if(typeof A.emptyCondition!=="undefined"&&i(A.emptyCondition)){return undefined;}return V.reduce(function(P,n){if(u.hasValue(P)){return P;}return u.hasValue(n)?n:undefined;});}},join:{args:["macroSeparator?","microSeparator?"],minValues:1,fnPipe:function(A,v){var V=[v];return O.join.fn.call(this,A,V);},fn:function(A,v){var m=A.macroSeparator||"";var M=A.microSeparator||"";v=v.map(function(s){if(!t.isPlainObject(s)&&!t.isArray(s)){return s;}var T=Object.prototype.toString.apply(s);if(T==="[object Object]"){var S=u.removeArrayParameterNotation(s);return Object.keys(S).sort().map(function(k){return k+M+s[k];}).join(m);}if(T==="[object Array]"){return s.join(m);}});return v.join(m);}},match:{args:["strRegex"],minValues:1,fnPipe:function(A,v){var s=A.strRegex;var k=new RegExp(s);return Object.keys(v).reduce(function(o,n){if(k.exec(n)){o[n]=v[n];}return o;},{});},fn:function(A,v){if(v===undefined){return undefined;}var s=A.strRegex;var k=new RegExp(s);var m=v.filter(function(V){var I;if(t.isPlainObject(V)){I=Object.keys(V);}else if(t.isArray(V)){I=V;}else{I=[""+V];}return I.some(k.exec.bind(k));});return m.length===v.length?true:undefined;}},not:{args:[],minValues:1,fnPipe:function(A,v){return Object.keys(v).length>0?undefined:"";},fn:function(A,v){var E=O.and.fn(A,v);return E===undefined?"":undefined;}},encodeURIComponent:{args:[],minValues:1,maxValues:1,fnPipe:function(A,v){return Object.keys(v).reduce(function(o,k){o[k]=encodeURIComponent(v[k]);return o;},{});},fn:function(A,v){var T=v.map(function(V){return encodeURIComponent(V);});return T;}}};function i(v){if(typeof v==="undefined"){return true;}if(typeof v==="string"){return v==="";}if(typeof v==="object"){return Object.keys(v).length===0;}if(typeof v==="number"){return v===0;}if(typeof v==="boolean"){return v===false;}throw new Error("Unexpected type for value");}function g(v){var V;if(t.isArray(v)){V=v;}else if(t.isPlainObject(v)){V=[v];}else if(v===undefined){return[];}else{throw new Error("Unexpected type");}return V;}function a(F,o,v){if(v!==undefined&&!t.isPlainObject(v)){throw new Error("Invalid value type passed to '"+F+"' in pipe context. An object is expected.");}}function b(F,o,v){if(v!==undefined&&!t.isArray(v)){throw new Error("Invalid value type passed to '"+F+"' in value context. An array is expected.");}var n=t.isArray(v)?v.length:0;if(u.hasValue(o.maxValues)&&n>o.maxValues){throw new Error("Too many values were passed to '"+F+"'. Please pass maximum "+o.maxValues+" values.");}if(u.hasValue(o.minValues)&&n<o.minValues){throw new Error("Too few values were passed to '"+F+"'. Please pass minimum "+o.minValues+" values.");}}function d(A){var E=false;A.map(e).reduce(function(R,n){if(!R&&n){E=true;}return n;},true);return E;}function e(A){return A.charAt(A.length-1)!=="?";}function r(A){return A.substr(0,A.length-1);}function p(F,A){var k=c(O[F].args);if(d(k)){throw new Error("Invalid argument signature. Make sure all optional arguments appear in the end.");}var o={length:A.length};var R=k.filter(e);var m=R>A.length;if(m){throw new Error(F+" requires "+R+" arguments but "+A.length+" was specified");}A.forEach(function(v){var n=k.shift();var I=!e(n);if(I){n=r(n);}if(A.length>0){o[n]=v;}});return o;}function f(P,F,k,I){if(!O.hasOwnProperty(F)){throw"Invalid function: "+F;}var o=p(F,k);if(P){a(F,O[F],I);}else{b(F,O[F],I);}if(P){if(!O[F].fnPipe){throw new Error("The function '"+F+"' cannot be executed in pipe context");}return O[F].fnPipe(o,I);}return O[F].fn(o,I);}function h(s){return s.split("").map(function(k){if(k==="["){return"[\\[]";}return"["+k+"]";}).join("");}function j(){var A=Object.keys(O);return A.map(h).join("|");}return{getPossibleFunctionsRegExpString:j,applyFunctionInValueContext:f.bind(null,false),applyFunctionInPipeContext:f.bind(null,true),_setURIDependency:function(F){U=F;}};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/Resolvers',["sap/ushell/_URLTemplateProcessor/Functions","sap/ushell/utils/type","sap/ushell/utils/clone","sap/ushell/_URLTemplateProcessor/utils"],function(f,t,c,u){"use strict";var O={"literal":r,"expression":g,"reference":h,"function":e,"path":b,"pipe":d};function a(s,p,k){var C=null;var P=[];var F=false;var l=p.join("/");C=s;if(typeof C==="undefined"){F=true;}p.forEach(function(m,I){if(F){return;}P.push(m);if(!C.hasOwnProperty(m)){C=undefined;F=true;return;}if(!C.hasOwnProperty(m)){throw new Error("Cannot find path '"+l+"' in given structure: '"+m+"' seems to be missing in the object.");}C=C[m];});return C;}function r(p){return p.value;}function b(p,R,s,A,o,D){var k=p.value.map(function(P){return i(P,R,s,A,o,D);});var I=p.pathType==="relative";var l=I?A:s;return a(l,k,R);}function d(p,R,s,A,o,D){var P=p.value;if(P[0].type!=="wildcard"){throw new Error("Leading wildcard expected in pipe expression");}if(P[0].value!=="*"){throw new Error("Unsupported wildcard expression: "+P[0].value);}return P.slice(1).reduce(function(v,k){if(k.type!=="function"){throw new Error("Invalid operation specified in pipe expression");}return f.applyFunctionInPipeContext(k.name,k.args.map(function(l){return i(l,R,s,A,o,D);}),v);},c(o[D]||{}));}function e(p,R,s,A,o,D){var F=p.name;var k=p.args.map(function(P){return i(P,R,s,A,o,D);});var v=p.params.map(function(P){return i(P,R,s,A,o,D);});return f.applyFunctionInValueContext(F,k,v);}function g(p,R,s,A,o,D){var E=p.value;if(O[E.type]){return i(E,R,s,A,o,D);}throw new Error("unknown expression type: "+E.type);}function h(p,R,s,A,o,D){var v=p.value;if(!p.hasOwnProperty("namespace")){return R[v];}var n=p.namespace;var E="The template attemps to take the value '"+v+"' from '"+n+"' namespace.";if(!o.hasOwnProperty(n)){throw new Error(E+" However this value was not defined at runtime. The template should reference only defined values.");}var N=o[n];var k=v===".";if(k){return N;}if(typeof N!=="object"){throw new Error(E+" However the runtime did not define the namespace as an object. The template cannot access the desired value using the object notation in this case.");}return N[v];}function i(p,R,s,A,o,D){var P=p.type;if(O[P]){return O[P](p,R,s,A,o,D);}throw new Error("Cannot resolve unknown parameter type: '"+P+"'");}function j(p,R,s,o,A,D){var k={};R.forEach(function(P){var l=p[P];var m=i(l,k,s,A,o,D);k[P]=m;});return k;}return{resolveLiteral:r,resolveExpression:g,resolveReference:h,resolveFunction:e,resolvePath:b,resolvePipe:d,resolveParameterValue:i,resolveAllParameters:j};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/TemplateParameterParser',["sap/ushell/utils/clone","sap/ushell/_URLTemplateProcessor/Functions"],function(c,f){"use strict";function p(D,E){var s=m();var v=s.exec(E);if(v===null){throw new Error("Cannot parse expression: '"+E+"'");}var S=r(E);if(S.indexOf("*")===0){return a(D,S);}var A="^("+f.getPossibleFunctionsRegExpString()+")[^a-z]";var w=new RegExp(A);if(w.exec(S)){return i(D,S);}return e(D,S);}function a(D,P){var s=j(D,P,"|");var w=s.shift();return{type:"pipe",value:[{type:"wildcard",value:w}].concat(s.map(i.bind(null,D)))};}function b(R){var s=R.substr(1);var N;if(s.indexOf(":")>=0){var v=s.split(":");N=v[0];s=v[1];}var w={type:"reference",value:s};if(N){w.namespace=N;}return w;}function d(D,P){var s=P.split("/");var v="relative";if(s[0]===""){v="absolute";s.shift();}if(s[0]==="."){s.shift();}return{type:"path",pathType:v,value:s.map(g.bind(null,D))};}function e(D,L){if(L.charAt(0)==="{"&&L.charAt(L.length-1)==="}"){return e(D,r(L));}if(L.indexOf(".")===0||L.indexOf("/")===0){return d(D,L);}if(L.charAt(0)==="'"&&L.charAt(L.length-1)==="'"){return h(r(L));}if(L.charAt(0)==="&"){return b(L);}return{type:"reference",value:L,namespace:D};}function g(D,P){if(P.charAt(0)==="{"&&P.charAt(P.length-1)==="}"){return e(D,r(P));}return{type:"literal",value:P};}function h(L){return{type:"literal",value:L};}function i(D,F){var v=F.split(/[(\s]/)[0];var R=o(F,v);R=R.replace(/^\s+/,"");var w="";if(R.charAt(0)==="("){var x=R.search(/([)]\s)|([)]$)/);if(x===-1){throw new Error("Cannot find termination of function '"+R+"' in '"+F+"'");}w=R.substr(1,x-1);R=o(R,"("+w+")");R=R.replace(/^\s+/,"");}var y=R;return{type:"function",name:v,args:j(D,w,",").map(function(s){return s.charAt(0)==="{"?r(s):"'"+s+"'";}).map(e.bind(null,D)),params:j(D,y,",").map(e.bind(null,D))};}function j(D,L,s){if(!L){return[];}var S=L.split(s).reduce(function(A,N,I){if(I===0){A.push(N);return A;}var v=A.length-1;var P=A[v];var M=P.length>0&&P.charAt(P.length-1)==="\\";var w="";if(M){w=A.pop();w=w.substr(0,w.length-1)+s;}A.push(w+N);return A;},[]);return S;}function k(D,P){var s=P;var R=null;if(Object.prototype.toString.apply(P)==="[object Object]"){s=P.value;R=P.renameTo;}var I=q(s);if(I){return h(s);}var T="expression";var v=p(D,s);var w={type:T,value:v};if(R){v.renameTo=R;}return w;}function l(s){var E=s.indexOf("{")===0;var v=m();var G=v.exec(s);if(!G){if(E){throw new Error("Expression was expected. But "+s+" does not look like a valid expression");}return null;}return G[1];}function m(){var O="[a-zA-Z0-9]+?:";var v="((&("+O+")?)?[.a-zA-Z0-9_-]+?)";var Q="('(.*?)')";var U="([^' ]*?)";var V="{("+v+")}";var P="("+"[.]?([/]("+v+"|"+V+"))+"+")";var L="("+P+"|"+Q+"|"+v+"|"+V+")";var s="("+L+"(,"+L+")*)";var F="("+U+"|"+V+")";var w="("+F+"(,"+F+")*)";var x="("+"[(]"+w+"[)]"+")?";var A=f.getPossibleFunctionsRegExpString();var y="("+"("+A+")"+"("+x+")"+")";var W="([*]([|]"+y+")*)";var E="^{("+W+"|"+"(("+y+")([ ]("+s+"))?)"+"|"+"("+L+")"+")}$";var z=new RegExp(E);return z;}function n(s){return l(s)!==null;}function r(s){var C=s.split("");C.shift();C.pop();return C.join("");}function o(T,P){if(T.indexOf(P)===0){return T.substr(P.length);}throw new Error("Given string does not start with prefix '"+P+"'");}function q(s){return typeof s==="string"&&!n(s);}function t(P,D){return Object.keys(P).reduce(function(s,N){var v=P[N];s[N]=k(D,v);return s;},{});}function u(P,D){return Object.keys(P).reduce(function(s,N){var v=P[N];s[N]=h(v);return s;},{});}return{parseTemplateParameterSet:t,parseTemplateParameterSetAsLiterals:u,parsePath:d,_isExpression:n,_parseList:j,_parseParameterValue:k};},false);
sap.ui.predefine('sap/ushell/_URLTemplateProcessor/utils',["sap/ushell/utils/type"],function(t){"use strict";function h(v){return v!==null&&typeof v!=="undefined";}function r(p){return Object.keys(p).reduce(function(o,P){var v=p[P];if(Object.prototype.toString.apply(v)==="[object Array]"){o[P]=v[0];}else if(typeof v==="string"){o[P]=v;}else{throw new Error("Parameters should be passed as strings or array of strings");}return o;},{});}return{hasValue:h,removeArrayParameterNotation:r};},false);
sap.ui.predefine('sap/ushell/adapters/cdm/PagesCommonDataModelAdapter',["sap/base/Log","sap/ushell/adapters/cdm/util/cdmSiteUtils","sap/ushell/utils/clone","sap/base/util/Version"],function(L,c,a,V){"use strict";var P=function(){this._oCDMPagesRequests={};this._sComponent="sap/ushell/adapters/cdm/PagesCommonDataModelAdapter";this.oSitePromise=new Promise(function(r,b){this.fnSiteResolve=r;this.fnSiteReject=b;}.bind(this));};P.prototype.getSite=function(){var d=new jQuery.Deferred();Promise.all([sap.ushell.Container.getServiceAsync("NavigationDataProvider"),sap.ushell.Container.getServiceAsync("VisualizationDataProvider")]).then(function(s){return Promise.all([s[0].getNavigationData(),s[1].getVisualizationData(),sap.ushell.Container.getServiceAsync("URLParsing")]);}).then(function(r){var n=r[0];var v=r[1];var u=r[2];var N={};var I=n.inbounds;for(var i=0;i<I.length;i++){var s=I[i].permanentKey||I[i].id;N[s]=I[i];}var S={_version:"3.1.0",site:{},catalogs:{},groups:{},visualizations:c.getVisualizations(v,u),applications:c.getApplications(N),vizTypes:c.getVizTypes(),systemAliases:a(n.systemAliases),pages:{}};this.fnSiteResolve(S);return S;}.bind(this)).then(d.resolve).catch(function(e){d.reject(e);this.fnSiteReject(e);}.bind(this));return d.promise();};P.prototype.getPage=function(p){if(!p){var e="PagesCommonDataModelAdapter: getPage was called without a pageId";L.fatal(e,null,this._sComponent);return Promise.reject(e);}return this.oSitePromise.then(function(s){if(s.pages[p]){return s.pages[p];}return Promise.all([sap.ushell.Container.getServiceAsync("PagePersistence"),sap.ushell.Container.getServiceAsync("NavigationDataProvider")]).then(function(S){var o=S[0];var n=S[1];return Promise.all([o.getPage(p),n.getNavigationData()]);}).then(function(r){var o=r[0];var n=r[1];this._addPageToSite(s,o,n);return s.pages[o.id];}.bind(this)).catch(function(E){L.fatal("PagesCommonDataModelAdapter encountered an error while fetching required services: ",E,this._sComponent);return Promise.reject(E);}.bind(this));}.bind(this));};P.prototype._addPageToSite=function(s,p,n){var N={};var I=n.inbounds;for(var i=0;i<I.length;i++){var b=I[i].permanentKey||I[i].id;N[b]=I[i];}var o=s.pages[p.id]={identification:{id:p.id,title:p.title},payload:{layout:{sectionOrder:p.sections.map(function(f){return f.id;})},sections:{}}};var S;var d;for(var j=0;j<p.sections.length;j++){S=p.sections[j];d=o.payload.sections[S.id]={id:S.id,title:S.title,layout:{vizOrder:S.viz.map(function(v){return v.id;})},viz:{}};var v;for(var k=0;k<S.viz.length;k++){v=S.viz[k];if(!s.visualizations[v.vizId]){var e=d.layout.vizOrder;e.splice(e.indexOf(v.id),1);L.error("Tile "+v.id+" with vizId "+v.vizId+" has no matching visualization. As the tile cannot be used to start an app it is removed from the page.");continue;}d.viz[v.id]={id:v.id,vizId:v.vizId};}}};P.prototype.getPages=function(p){if(!(p&&Array.isArray(p)&&p.length!==0)){var e="PagesCommonDataModelAdapter: getPages is not an array or does not contain any Page id";L.fatal(e,null,this._sComponent);return Promise.reject(e);}return this.oSitePromise.then(function(s){var b=[],d;for(var i=0;i<p.length;i++){d=p[i];if(!s.pages[d]){b.push(p[i]);}}if(b.length===0){return s.pages;}return Promise.all([sap.ushell.Container.getServiceAsync("PagePersistence"),sap.ushell.Container.getServiceAsync("NavigationDataProvider")]).then(function(S){var o=S[0];var n=S[1];return Promise.all([o.getPages(b),n.getNavigationData()]);}).then(function(r){var f=r[0];var n=r[1];for(var j=0;j<f.length;j++){this._addPageToSite(s,f[j],n);}return s.pages;}.bind(this)).catch(function(E){L.fatal("PagesCommonDataModelAdapter encountered an error while fetching required services: ",E,this._sComponent);return Promise.reject(E);}.bind(this));}.bind(this));};P.prototype.getPersonalization=function(C){var d=new jQuery.Deferred();sap.ushell.Container.getServiceAsync("Personalization").then(function(p){var o;var b=new V(C);o={container:"sap.ushell.cdm.personalization",item:"data"};if(b.inRange("3.1.0","4.0.0")){o={container:"sap.ushell.cdm3-1.personalization",item:"data"};}var s={validity:"Infinity",keyCategory:p.constants.keyCategory.GENERATED_KEY,writeFrequency:p.constants.writeFrequency.HIGH,clientStorageAllowed:false};p.getPersonalizer(o,s).getPersData().done(function(e){d.resolve(e||{});}).fail(d.reject);}).catch(function(){d.reject("Personalization Service could not be loaded");});return d.promise();};P.prototype.setPersonalization=function(p){var d=new jQuery.Deferred();sap.ushell.Container.getServiceAsync("Personalization").then(function(o){var b;var C=new V(p.version);b={container:"sap.ushell.cdm.personalization",item:"data"};if(C.inRange("3.1.0","4.0.0")){b={container:"sap.ushell.cdm3-1.personalization",item:"data"};}var s={validity:"Infinity",keyCategory:o.constants.keyCategory.GENERATED_KEY,writeFrequency:o.constants.writeFrequency.HIGH,clientStorageAllowed:false};o.getPersonalizer(b,s).setPersData(p).done(function(){d.resolve(p);}).fail(d.reject);}).catch(function(){d.reject("Personalization Service could not be loaded");});return d.promise();};return P;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/util/AppForInbound',["sap/base/util/ObjectPath","sap/base/Log"],function(O,L){"use strict";var A={};A.get=function(i,a){var o={};switch(a.resolutionResult.applicationType){case"SAPUI5":o=this._getUI5App(i,a);break;case"TR":o=this._getTRApp(i,a);break;case"WDA":o=this._getWDAApp(i,a);break;case"URL":o=this._getURLApp(i,a);break;case"WCF":o=this._getWCFApp(i,a);break;default:L.error("Unable to get CDM app for inbound: Application type '"+a.resolutionResult.applicationType+"' of app '"+i+"' is unknown and not supported.");throw new Error("Unknown application type: "+a.applicationType);}if(a.resolutionResult.systemAlias){O.set(["sap.app","destination"],{name:a.resolutionResult.systemAlias,semantics:"applied"},o);}return o;};A._getURLApp=function(i,a){return{"sap.app":{"id":i,"crossNavigation":{"inbounds":{"Shell-launchURL":{"semanticObject":"Shell","action":"launchURL","signature":{"parameters":{"sap-external-url":{"required":true,"filter":{"value":a.resolutionResult.url,"format":"plain"}}}}}}}},"sap.ui":{"technology":"URL","deviceTypes":a.deviceTypes},"sap.url":{"uri":a.resolutionResult.url}};};A._getUI5App=function(i,a){return{"sap.app":{"id":i,"title":a.resolutionResult.text,"subTitle":a.resolutionResult.information,"crossNavigation":{"inbounds":this._getApplicationInbound(a)}},"sap.ui5":{"componentName":a.resolutionResult.ui5ComponentName},"sap.ui":{"technology":"UI5","deviceTypes":a.deviceTypes},"sap.platform.runtime":{"componentProperties":{"url":a.resolutionResult.url}}};};A._getApplicationInbound=function(i){var a={};a[i.id]={"semanticObject":i.semanticObject,"action":i.action,"signature":i.signature};return a;};A._getTRApp=function(i,a){var t,T=a.resolutionResult.url.match(/transaction=(.+?)[&?]/);if(T){t=T[1];}else{L.error("Unable to determine ABAP transaction from inbound URL of app '"+i+"': "+a.resolutionResult.url+".");}return{"sap.app":{"id":i,"title":a.resolutionResult.text,"subTitle":a.resolutionResult.information,"crossNavigation":{"inbounds":this._getApplicationInbound(a)}},"sap.ui":{"technology":"GUI","deviceTypes":a.deviceTypes},"sap.flp":{"type":"application"},"sap.gui":{"transaction":t}};};A._getWDAApp=function(i,a){return{"sap.app":{"id":i,"title":a.resolutionResult.text,"subTitle":a.resolutionResult.information,"crossNavigation":{"inbounds":this._getApplicationInbound(a)}},"sap.ui":{"technology":"URL","deviceTypes":a.deviceTypes},"sap.url":{"uri":a.resolutionResult.url}};};A._getWCFApp=function(i,a){return{"sap.app":{"id":i,"title":a.resolutionResult.text,"subTitle":a.resolutionResult.information,"crossNavigation":{"inbounds":this._getApplicationInbound(a)}},"sap.ui":{"technology":"URL","deviceTypes":a.deviceTypes},"sap.url":{"uri":a.resolutionResult.url}};};return A;});
sap.ui.predefine('sap/ushell/adapters/cdm/util/cdmSiteUtils',["sap/ushell/adapters/cdm/util/AppForInbound","sap/base/Log","sap/ushell/adapters/cdm/v3/utilsCdm"],function(A,L,u){"use strict";var c={_VISUALIZATION_TYPES:{STATIC_TILE:"sap.ushell.StaticAppLauncher",DYNAMIC_TILE:"sap.ushell.DynamicAppLauncher",PLATFORM_VISUALIZATION:"sap.ushell.PlatformVisualization"}};c.getVisualizations=function(v,a){var V={};Object.keys(v).forEach(function(b){var o=v[b];var s;if(o.isCustomTile){s=this._VISUALIZATION_TYPES.PLATFORM_VISUALIZATION;}else if(o.indicatorDataSource){s=this._VISUALIZATION_TYPES.DYNAMIC_TILE;}else{s=this._VISUALIZATION_TYPES.STATIC_TILE;}var d={vizType:s,vizConfig:{"sap.app":{title:o.title,subTitle:o.subTitle,info:o.info},"sap.ui":{icons:{icon:o.icon}},"sap.flp":{tileSize:o.size,indicatorDataSource:o.indicatorDataSource,_instantiationData:o._instantiationData}}};d.vizConfig["sap.flp"].target=u.toTargetFromHash(o.url,a);V[b]=d;}.bind(this));return V;};c.getApplications=function(n){return Object.keys(n).reduce(function(a,b){var i=n[b],I=i.permanentKey||i.id;try{a[I]=A.get(b,i);}catch(e){L.error("Unable to dereference app '"+b+"' of CDM page.");a[b]={};}return a;},{});};c.getVizTypes=function(){var v={};v[this._VISUALIZATION_TYPES.PLATFORM_VISUALIZATION]={"sap.app":{"id":this._VISUALIZATION_TYPES.PLATFORM_VISUALIZATION,"type":"platformVisualization"}};return v;};return c;});
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications',["sap/base/util/ObjectPath"],function(O){"use strict";var r={};r.getId=function(a){return O.get(["sap.app","id"],a);};r.getTitle=function(a){return O.get(["sap.app","title"],a);};r.getSubTitle=function(a){return O.get(["sap.app","subTitle"],a);};r.getIcon=function(a){return O.get(["sap.ui","icons","icon"],a);};r.getInfo=function(a){return O.get(["sap.app","info"],a);};r.getKeywords=function(a){return O.get(["sap.app","tags","keywords"],a);};r.getInbounds=function(a){return O.get(["sap.app","crossNavigation","inbounds"],a);};r.getInbound=function(a,i){return O.get(["sap.app","crossNavigation","inbounds",i],a);};r.getInboundTarget=function(a,A,i){var o=O.get([A],a)||{};var I=this.getInbound(o,i);if(!o||!I){return;}return{semanticObject:I.semanticObject,action:I.action};};return r;});
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readHome',["sap/ushell/utils/type","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications"],function(t,r){"use strict";var a={};a.getGroupsArrayFromSite=function(s){var l=[];s.site.payload.groupsOrder.forEach(function(g,i){var G=s.groups[g];if(G){G.payload=G.payload||{};l.push(G);}});return l;};a.getGroupsMapFromSite=function(s){return s.groups;};a.getGroupIdsFromSite=function(s){return s.site.payload.groupsOrder;};a.getGroupFromSite=function(s,g){return s.groups[g];};a.getDefaultGroup=function(g){var d=g.filter(function(G){return G.payload.hasOwnProperty("isDefaultGroup");});if(d.length>0){return d[0];}};a.getGroupId=function(g){return g.identification&&g.identification.id;};a.getGroupTitle=function(g){return g.identification.title;};a.isGroupPreset=function(g){if(!g.payload.hasOwnProperty("isPreset")){return true;}return!!g.payload.isPreset;};a.isGroupLocked=function(g){return!!g.payload.locked;};a.isGroupVisible=function(g){return!!(g.identification.isVisible===undefined||g.identification.isVisible===true);};a.getGroupTiles=function(g){if(g.payload.tiles&&t.isArray(g.payload.tiles)&&g.payload.tiles.length>0){return g.payload.tiles;}return[];};a.getGroupLinks=function(g){if(g.payload.links&&t.isArray(g.payload.links)&&g.payload.links.length>0){return g.payload.links;}return[];};a.getTileId=function(T){return T.id;};a.getTileVizId=function(T){return T.vizId;};a.getTileTitle=function(R,T){var o;if(T&&T.isBookmark){return T.title;}o=R[T.id];if(o){return T.title||o.tileResolutionResult.title;}};a.getTileSubtitle=function(R,T){var o;if(T.isBookmark){return T.subTitle;}o=R[T.id];if(o){return T.subTitle||o.tileResolutionResult.subTitle;}};a.getTileInfo=function(R,T){var o;if(T.isBookmark){return T.info;}o=R[T.id];if(o){return T.info||o.tileResolutionResult.info;}};a.getTileIcon=function(R,T){var o;if(T.isBookmark){return T.icon;}o=R[T.id];if(o){return T.icon||o.tileResolutionResult.icon;}};a.getTileIndicatorDataSource=function(R,T){var o;if(T.isBookmark){return T.icon;}o=R[T.id];if(o){return T.icon||o.tileResolutionResult.icon;}};a.getTileSize=function(R,T){var o=R[T.id];if(o&&o.tileResolutionResult&&o.tileResolutionResult.size){return o.tileResolutionResult.size;}};a.isLink=function(R,T){var o=R[T.id];if(o){return!!o.isLink;}return false;};a.isCard=function(R,i){var o=R[i.id];if(o){return!!o.tileResolutionResult.isCard;}return false;};a.isGroupTile=function(T){return!!(T&&T.id&&!T.isCatalogTile);};a.supportsFormFactor=function(A,f){return A.deviceTypes&&A.deviceTypes[f];};a.getInbound=function(A,i){var I=r.getInbound(A,i);return I&&{key:i,inbound:I};};return a;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readUtils',["sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications","sap/ushell/adapters/cdm/v3/_LaunchPage/readHome","sap/ushell/adapters/cdm/v3/utilsCdm","sap/ushell/Config","sap/base/util/deepClone"],function(r,a,b,u,C,d){"use strict";var c={};c.getVizData=function(s,v,U){var V=C.last("/core/spaces/vizInstantiation/enabled");if(v.isBookmark&&v.url){v=d(v);v.subTitle=v.subtitle;v.target=u.toTargetFromHash(v.url,U);}var e=this.getCdmParts(s,v);var o=r.get(s,b.getTileVizId(v))||{};var f={id:b.getTileId(v),vizId:b.getTileVizId(v)||"",vizType:r.getTypeId(o)||"",title:r.getTitle(e)||"",subtitle:r.getSubTitle(e)||"",icon:r.getIcon(e)||"",keywords:r.getKeywords(e)||[],info:r.getInfo(e)||"",target:v.target||r.getTarget(o)||{},indicatorDataSource:r.getIndicatorDataSource(o),isBookmark:v.isBookmark||false,_instantiationData:r.getInstantiationData(o)};f.targetURL=u.toHashFromVizData(f,s.applications,U);if(v.isBookmark&&!f.vizType){if(f.indicatorDataSource){f.vizType="sap.ushell.DynamicAppLauncher";}else{f.vizType="sap.ushell.StaticAppLauncher";}}if(!f._instantiationData||!Object.keys(f._instantiationData)){f._instantiationData={platform:"CDM",vizType:r.getType(s,f.vizType)};}if(!V&&f.isBookmark){f.url=f.targetURL;}return f;};c.getVizRef=function(v){return{id:v.id,vizId:v.vizId,title:v.title,subTitle:v.subtitle,icon:v.icon,keywords:v.keywords,info:v.info,target:v.target,indicatorDataSource:v.indicatorDataSource,isBookmark:v.isBookmark};};c.getCdmParts=function(s,t){var v=r.get(s,b.getTileVizId(t))||{};var V=r.getConfig(v);var A=r.getAppDescriptor(s,r.getAppId(v));var i=a.getInbound(A,r.getInboundId(v));return[t,V,i,A];};return c;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations',["sap/ushell/utils","sap/base/util/ObjectPath"],function(u,O){"use strict";var r={};r.getMap=function(s){return s.visualizations;};r.get=function(s,i){return s.visualizations[i];};r.getTypeMap=function(s){return s.vizTypes;};r.getType=function(s,i){return s.vizTypes[i];};r.getTypeId=function(v){return v.vizType;};r.isStandardVizType=function(v){return v==="sap.ushell.StaticAppLauncher"||v==="sap.ushell.DynamicAppLauncher";};r.getConfig=function(v){return v.vizConfig;};r.getTarget=function(v){var V=this.getConfig(v);return V&&V["sap.flp"]&&V["sap.flp"].target;};r.getAppId=function(v){var t=this.getTarget(v);return t&&t.appId;};r.getInboundId=function(v){var t=this.getTarget(v);return t&&t.inboundId;};r.getOutbound=function(v,i){var o;o={semanticObject:i.semanticObject,action:i.action,parameters:this.getTarget(v).parameters||{}};o.parameters["sap-ui-app-id-hint"]={value:{format:"plain",value:this.getAppId(v)}};return o;};r.startsExternalUrl=function(v){var t=this.getTarget(v);return t&&t.type==="URL";};r.getAppDescriptor=function(s,i){return s.applications&&s.applications[i];};r.getKeywords=function(c){var C=u.clone(c);C.splice(2,1);C.splice(0,1);return u.getNestedObjectProperty(C,["sap|app.tags.keywords","sap|app.tags.keywords"]);};r.getTitle=function(c){return u.getNestedObjectProperty(c,["title","sap|app.title","title","sap|app.title"]);};r.getSubTitle=function(c){return u.getNestedObjectProperty(c,["subTitle","sap|app.subTitle","subTitle","sap|app.subTitle"]);};r.getIcon=function(c){return u.getNestedObjectProperty(c,["icon","sap|ui.icons.icon","icon","sap|ui.icons.icon"]);};r.getInfo=function(c){return u.getNestedObjectProperty(c,["info","sap|app.info","info","sap|app.info"]);};r.getShortTitle=function(c){var C=u.clone(c);C.splice(0,1);return u.getNestedObjectProperty(C,["sap|app.shortTitle","shortTitle","sap|app.shortTitle"]);};r.getInstantiationData=function(v){return O.get(["vizConfig","sap.flp","_instantiationData"],v);};r.getIndicatorDataSource=function(v){return O.get(["vizConfig","sap.flp","indicatorDataSource"],v);};return r;},true);
sap.ui.predefine('sap/ushell/adapters/cdm/v3/utilsCdm',["sap/ushell/utils","sap/ushell/adapters/cdm/v3/_LaunchPage/readVisualizations","sap/ui/thirdparty/jquery","sap/base/util/isEmptyObject","sap/base/util/ObjectPath","sap/ushell/adapters/cdm/v3/_LaunchPage/readApplications"],function(u,a,q,i,O,b){"use strict";var c={};c.getMember=function(o,A){return u.getMember(o,A);};c.getNestedObjectProperty=function(o,A,d){return u.getNestedObjectProperty(o,A,d);};c.mapOne=function(k,s,A,v,V,S){var I=false,d=false;s=u.clone(s);A=u.clone(A);v=v||{};V=V||{};var o={};o.semanticObject=this.getMember(s,"semanticObject");o.action=this.getMember(s,"action");var e=a.getConfig(v);o.title=a.getTitle([undefined,e,s,A]);o.info=a.getInfo([undefined,e,s,A]);o.icon=a.getIcon([undefined,e,s,A]);o.subTitle=a.getSubTitle([undefined,e,s,A]);o.shortTitle=a.getShortTitle([undefined,e,s,A]);o.deviceTypes=this.getMember(A,"sap|ui.deviceTypes")||{};["desktop","tablet","phone"].forEach(function(M){if(Object.prototype.hasOwnProperty.call(this.getMember(s,"deviceTypes")||{},M)){o.deviceTypes[M]=s.deviceTypes[M];}if(!Object.prototype.hasOwnProperty.call(o.deviceTypes,M)){o.deviceTypes[M]=true;}o.deviceTypes[M]=!!o.deviceTypes[M];}.bind(this));o.signature=this.getMember(s,"signature")||{};o.signature.parameters=this.getMember(o,"signature.parameters")||{};o.signature.additionalParameters=this.getMember(s,"signature.additionalParameters")||"allowed";var f=this.getMember(A,"sap|platform|runtime");o.resolutionResult=q.extend(true,{},f);if(f){o.resolutionResult["sap.platform.runtime"]=q.extend(true,{},f);}if(this.getMember(A,"sap|ui.technology")==="GUI"){o.resolutionResult["sap.gui"]=this.getMember(A,"sap|gui");}if(this.getMember(A,"sap|ui.technology")==="WDA"){o.resolutionResult["sap.wda"]=this.getMember(A,"sap|wda");}if(this.getMember(A,"sap|ui.technology")==="URL"){if(A["sap.url"]){o.resolutionResult["sap.platform.runtime"]=o.resolutionResult["sap.platform.runtime"]||{};o.resolutionResult.url=A["sap.url"].uri;o.resolutionResult["sap.platform.runtime"].url=A["sap.url"].uri;}else if(f&&f.uri){o.resolutionResult["sap.platform.runtime"].url=f.uri;o.resolutionResult.url=f.uri;}}if(!o.resolutionResult["sap.ui"]){o.resolutionResult["sap.ui"]={};}o.resolutionResult["sap.ui"].technology=this.getMember(A,"sap|ui.technology");o.resolutionResult.applicationType=this._formatApplicationType(o.resolutionResult,A);o.resolutionResult.systemAlias=o.resolutionResult.systemAlias||this.getMember(s,"systemAlias");o.resolutionResult.systemAliasSemantics="apply";o.resolutionResult.text=o.title;o.resolutionResult.appId=this.getMember(A,"sap|app.id");var t,g;var h=this.getMember(v,"vizConfig.sap|flp.indicatorDataSource");var T={};if(!i(V)){var j=this.getMember(V,"sap|app.type");if(j==="card"){I=true;T=q.extend(true,{},V,v.vizConfig);}else if(j==="platformVisualization"){d=true;}else{T.componentName=this.getMember(V,"sap|ui5.componentName");var C=this.getMember(V,"sap|platform|runtime.componentProperties");if(C){T.componentProperties=C;}if(this.getMember(V,"sap|platform|runtime.includeManifest")){T.componentProperties=T.componentProperties||{};T.componentProperties.manifest=q.extend(true,{},V);delete T.componentProperties.manifest["sap.platform.runtime"];}}}if(this.getMember(A,"sap|app.type")==="plugin"||this.getMember(A,"sap|flp.type")==="plugin"){return undefined;}var l=this.getNestedObjectProperty([e,A,V],"sap|flp.tileSize");var m=this.getNestedObjectProperty([e,A,V],"sap|app.description");if(this.getMember(A,"sap|ui.technology")==="GUI"&&this.getMember(A,"sap|gui.transaction")){t=this.getMember(A,"sap|gui.transaction");}if(this.getMember(A,"sap|ui.technology")==="WDA"&&this.getMember(A,"sap|wda.applicationId")){t=this.getMember(A,"sap|wda.applicationId");}var D=this.getNestedObjectProperty([e,A,V],"sap|app.dataSources");if(this.getMember(A,"sap|app.id")){g=this.getMember(A,"sap|app.id");}o.tileResolutionResult={appId:g,title:o.title,subTitle:o.subTitle,icon:o.icon,size:l,info:o.info,tileComponentLoadInfo:T,indicatorDataSource:h,dataSources:D,description:m,runtimeInformation:f,technicalInformation:t,deviceTypes:o.deviceTypes,isCard:I,isPlatformVisualization:d};var n=this.getMember(A,"sap|integration.urlTemplateId");var p=this.getTemplatePayloadFromSite(n,S);if(p){o.templateContext={payload:p,site:S,siteAppSection:A};}return o;};c.getTemplatePayloadFromSite=function(t,s){if(!s||typeof t!=="string"){return null;}var T=t.replace(/[.]/g,"|");return this.getMember(s.urlTemplates,T+".payload");};c._formatApplicationType=function(r,A){var s=r.applicationType;if(s){return s;}var C=this.getMember(A,"sap|platform|runtime.componentProperties.self.name")||this.getMember(A,"sap|ui5.componentName");if(this.getMember(A,"sap|flp.appType")==="UI5"||this.getMember(A,"sap|ui.technology")==="UI5"){r.applicationType="SAPUI5";r.additionalInformation="SAPUI5.Component="+C;r.url=this.getMember(A,"sap|platform|runtime.componentProperties.url");r.applicationDependencies=this.getMember(A,"sap|platform|runtime.componentProperties");return"SAPUI5";}if(this.getMember(A,"sap|ui.technology")==="GUI"){r.applicationType="TR";r["sap.gui"]=this.getMember(A,"sap|gui");r.systemAlias=this.getMember(A,"sap|app.destination.name");return"TR";}if(this.getMember(A,"sap|ui.technology")==="WDA"){r.applicationType="WDA";r["sap.wda"]=this.getMember(A,"sap|wda");r.systemAlias=this.getMember(A,"sap|app.destination.name");return"WDA";}if(this.getMember(A,"sap|ui.technology")==="URL"){r.applicationType="URL";r.systemAlias=this.getMember(A,"sap|app.destination.name");}return"URL";};c.formatSite=function(s){var t=this;if(!s){return[];}var I=[];try{var S=Object.keys(s.applications||{}).sort();S.forEach(function(A){try{var o=s.applications[A];var d=this.getMember(o,"sap|app.crossNavigation.inbounds");if(d){var l=Object.keys(d).sort();l.forEach(function(f){var g=d[f];var r=t.mapOne(f,g,o,undefined,undefined,s);if(r){I.push(r);}});}}catch(E){q.sap.log.error("Error in application "+A+": "+E,E.stack);}}.bind(this));}catch(e){q.sap.log.error(e);q.sap.log.error(e.stack);return[];}return I;};c.toHashFromInbound=function(I){var s,p,C;s={target:{semanticObject:I.semanticObject,action:I.action},params:{}};p=O.get("signature.parameters",I)||{};Object.keys(p).forEach(function(k){if(p[k].filter&&Object.prototype.hasOwnProperty.call(p[k].filter,"value")&&(p[k].filter.format===undefined||p[k].filter.format==="plain")){s.params[k]=[p[k].filter.value];}if(p[k].launcherValue&&Object.prototype.hasOwnProperty.call(p[k].launcherValue,"value")&&(p[k].launcherValue.format===undefined||p[k].launcherValue.format==="plain")){s.params[k]=[p[k].launcherValue.value];}});C=sap.ushell.Container.getService("URLParsing").constructShellHash(s);if(!C){return undefined;}return C;};c.toHashFromOutbound=function(o){var s,p,C;s={target:{semanticObject:o.semanticObject,action:o.action},params:{}};p=o.parameters||{};Object.keys(p).forEach(function(k){if(p.hasOwnProperty(k)&&typeof p[k].value==="object"){s.params[k]=[p[k].value.value];}});C=sap.ushell.Container.getService("URLParsing").constructShellHash(s);if(!C){return undefined;}return C;};c.toHashFromVizData=function(v,A,U){var V,t;if(!v.target){return;}V=v.target;if(V.type==="URL"){return V.url;}var s=V.appId;var I=V.inboundId;if(s&&I){var o=b.getInboundTarget(A,s,I);t={};if(o){t.semanticObject=o.semanticObject;t.action=o.action;t.parameters=V.parameters||[];t.parameters.push({name:"sap-ui-app-id-hint",value:s});t.appSpecificRoute=V.appSpecificRoute||"";}}else if(V.semanticObject&&V.action){t=V;}return c.toHashFromTarget(t,U);};c.toHashFromTarget=function(t,U){try{var p={};var r=O.get("parameters",t)||[];r.forEach(function(P){if(P.name&&P.value){p[P.name]=[P.value];}});var h={target:{semanticObject:t.semanticObject,action:t.action},params:p,appSpecificRoute:t.appSpecificRoute};return"#"+U.constructShellHash(h);}catch(e){return;}};c.toTargetFromHash=function(h,U){var t;if(U.isIntentUrl(h)){t=U.parseShellHash(h);var p=t.params||{};if(Object.keys(p).length>0){t.parameters=[];Object.keys(p).forEach(function(k){var P={name:k,value:p[k]};t.parameters.push(P);});}delete t.params;}else{t={type:"URL",url:h};}return t;};return c;},true);
sap.ui.predefine('sap/ushell/adapters/local/NavTargetResolutionAdapter',["sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/utils"],function(v,O,q,L,u){"use strict";var N=function(U,p,a){var A=O.create("config.applications",a);var V=v.getInbounds();b(V,A);function b(V,A){V.forEach(function(i){var I=i.semanticObject+"-"+i.action;A[I]=i.resolutionResult;});}this.resolveHashFragment=function(h){var d=new q.Deferred(),i,r,R,P;if(h&&h.charAt(0)!=="#"){throw new u.Error("Hash fragment expected","sap.ushell.renderers.minimal.Shell");}h=h.substring(1);if(!h&&!A[h]){d.resolve(undefined);}else{L.info("Hash Fragment: "+h);i=h.indexOf("?");if(i>=0){P=h.slice(i+1);h=h.slice(0,i);}r=A[h];if(r){R={additionalInformation:r.additionalInformation,applicationType:r.applicationType,url:r.url,text:r.text,fullWidth:r.fullWidth};if(P){R.url+=(R.url.indexOf("?")<0)?"?":"&";R.url+=P;}if(r.navigationMode!==undefined){R.navigationMode=r.navigationMode;}d.resolve(R);}else{d.reject("Could not resolve link '"+h+"'");}}return d.promise();};this.getSemanticObjectLinks=function(s,P){var I,r=[],i=0,d=new q.Deferred(),c;if(!s){setTimeout(function(){d.resolve([]);},0);}else{c=sap.ushell.Container.getService("URLParsing").paramsToString(P);L.info("getSemanticObjectLinks: "+s);for(I in A){if(A.hasOwnProperty(I)&&I.substring(0,I.indexOf("-"))===s){r[i]=A[I];r[i].id=I;r[i].text=r[i].text||r[i].description||"no text";r[i].intent="#"+I;if(c!==""){if(r[i].intent.indexOf("?")!==-1){r[i].intent+="&"+c;}else{r[i].intent+="?"+c;}}i+=1;}}if(r){setTimeout(function(){d.resolve(r);},0);}else{setTimeout(function(){d.reject("Could not get links for  '"+s+"'");},0);}}return d.promise();};this.isIntentSupported=function(I){var d=new q.Deferred(),s={},D=[],t=this;function c(i,S){s[i]={supported:S};}I.forEach(function(e,i){var o=new q.Deferred();D.push(o.promise());t.resolveHashFragment(e).fail(function(E){c(e,false);o.resolve();}).done(function(f){c(e,true);o.resolve();});});if(I.length>0){q.when.apply(q,D).always(function(){d.resolve(s);});}else{d.resolve(s);}return d.promise();};};return N;},true);
sap.ui.predefine('sap/ushell/adapters/local/UserDefaultParameterPersistenceAdapter',["sap/ui/thirdparty/jquery"],function(q){"use strict";var U=function(s,p,c){this._oConfig=c&&c.config;};U.prototype._getPersonalizationService=function(){return sap.ushell.Container.getService("Personalization");};U.prototype.saveParameterValue=function(p,v){var d=new q.Deferred();if(!(typeof p==="string"&&p.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(p))){q.sap.log.error("Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}this._getUDContainer().done(function(c){c.setItemValue(p,v);c.saveDeferred(50).done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(function(m){q.sap.log.error(m);d.reject(m);});return d.promise();};U.prototype.deleteParameter=function(p,v){var d=new q.Deferred();if(!(typeof p==="string"&&p.length<=40&&/^[A-Za-z0-9.-_]+$/.exec(p))){q.sap.log.error("Illegal Parameter Key, less than 40 characters and [A-Za-z0-9.-_]+ :\""+p+"\"");}this._getUDContainer().done(function(c){c.delItem(p);c.save().done(d.resolve.bind(d)).fail(d.reject.bind(d));}).fail(function(m){q.sap.log.error(m);d.reject(m);});return d.promise();};U.prototype.loadParameterValue=function(p){var d=new q.Deferred();this._getUDContainer().done(function(c){var v=c.getItemValue(p);if(v){d.resolve(v);}else{d.reject("no value ");}}).fail(function(m){q.sap.log.error(m);d.reject(m);});return d.promise();};U.prototype.getStoredParameterNames=function(){var d=new q.Deferred();this._getUDContainer().done(function(c){var v=c.getItemKeys();d.resolve(v);}).fail(function(m){q.sap.log.error(m);d.reject(m);});return d.promise();};U.prototype._getUDContainer=function(){var p=this._getPersonalizationService();if(this._oPromise){return this._oPromise;}this._oPromise=p.getContainer("sap.ushell.UserDefaultParameter",{keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true});return this._oPromise;};return U;},true);
sap.ui.predefine('sap/ushell/adapters/local/UserInfoAdapter',["sap/ui/thirdparty/jquery","sap/ushell/services/Container","sap/ushell/services/Personalization","sap/base/util/ObjectPath"],function(q,C,P,O){"use strict";var U=function(u,p,a){var o;function g(A){var d=[{id:"sap_belize",name:"SAP Belize"}],e=O.get("config.themes",A);return e===undefined?d:e;}this.updateUserPreferences=function(b){var d=new q.Deferred();function l(e){var E="Failed to update user preferences: "+(e&&e.message?e.message:e);q.sap.log.error(E,e&&e.stack,"com.sap.ushell.adapters.local.UserInfo");}sap.ushell.Container.getServiceAsync("Personalization").then(function(c){var s={keyCategory:c.constants.keyCategory.FIXED_KEY,writeFrequency:c.constants.writeFrequency.LOW,clientStorageAllowed:true};function e(f,b){var h=b.getChangedProperties()||[];h.forEach(function(i){f.setItemValue(i.propertyName,i.newValue);});}c.getContainer("sap.ushell.UserProfile",s,undefined).done(function(f){e(f,b);f.save().fail(function(E){l(E);d.reject(E);}).done(function(){d.resolve();});}).fail(function(E){l(E);d.reject(E);});});return d.promise();};this.getThemeList=function(){var d=new q.Deferred();if(o===undefined){o=g(a);}if(o.length===0){d.reject("no themes were configured");}else{d.resolve({options:o});}return d.promise();};this.getLanguageList=function(){var d=new q.Deferred();d.resolve([{"text":"Browser Language","key":"default"},{"text":"American English","key":"en-US"},{"text":"British English","key":"en-GB"},{"text":"English","key":"en"},{"text":"German","key":"de"},{"text":"Hebrew","key":"he"},{"text":"Russian","key":"ru"}]);return d.promise();};};return U;},true);
sap.ui.predefine('sap/ushell/appRuntime/ui5/AppCommunicationMgr',["sap/ushell/appRuntime/ui5/AppRuntimePostMessage","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/Log","sap/ui/thirdparty/URI"],function(A,q,O,L,U){"use strict";var C="sap.ushell.appRuntime.ui5.AppCommunicationMgr";var s,t={},T={},a=0,b=[],p=0;function c(){this.init=function(){var d=this;s=A.getHandlers();A.registerCommunicationHandler("sap.ushell.PostMessage",{oInboundActions:{"callTunnelFunction":{executeServiceCallFn:function(S){var e=S.oMessageData.body.content,f=d.restoreArray(e.arguments);t[e.UUID].fnCallback.apply(this,Object.values(f));return new q.Deferred().resolve().promise();}}}});d.handleMessageEvent=c.prototype._handleMessageEvent.bind(d,d);addEventListener("message",d.handleMessageEvent);};this.restoreArray=function(o){var d=[],i=0;while(o[i]){d.push(o[i]);i++;}return d;};this.destroy=function(){removeEventListener("message",this.handleMessageEvent);};this._handleMessageResponse=function(m){if(m.request_id&&b[m.request_id]){var r=b[m.request_id];if(m.status==="success"){r.resolve(m.body.result);}else{r.reject();}}};this._handleMessageRequest=function(o,m,M){var d=this,P=O.create("sap-ushell-config.services.PostMessage.config"),S=M&&M.service,e,f,g,h,i;L.debug("App Runtime received post message request from origin '"+m.origin+"': "+JSON.stringify(M),null,C);if(!S){return;}if(P&&P.enabled===false){L.warning("App Runtime received message for "+f+", but this "+"feature is disabled. It can be enabled via launchpad configuration "+"property 'services.PostMessage.config.enabled: true'",undefined,C);this.sendResponseMessage(m,M,"error",{message:"feature disabled"});return;}if(!this._isTrustedPostMessageSource(o,m)){L.warning("App Runtime received message from untrusted origin '"+m.origin+"': "+JSON.stringify(m.data),null,C);this.sendResponseMessage(m,M,"error",{message:"Invalid request"});return;}if(S.indexOf(".")>0){e=S.split(".");g=e[e.length-1];f=S.substr(0,S.length-g.length-1);}else{this.sendResponseMessage(m,M,"error",{message:"Invalid service name: '"+S+"'"});return;}var j={oMessage:m,oMessageData:M,oContainer:o};try{h=s[f];i=h&&h.oInboundActions[g];if(i&&i.executeServiceCallFn){i.executeServiceCallFn(j).done(function(r){d.sendResponseMessage(m,M,"success",{result:r});}).fail(function(k){d.sendResponseMessage(m,M,"error",{message:k});});}else{this.sendResponseMessage(m,M,"error",{message:"Unknown service name: '"+M.service+"'"});}}catch(E){this.sendResponseMessage(m,M,"error",{message:E.message});}};this._getCFLPWindow=function(){return window.parent;};this._isTrustedPostMessageSource=function(o,m){var d=false,P=o._getCFLPWindow();if(P){d=(m.source===P);}return d;};this.sendResponseMessage=function(m,M,S,B){var r=this.stringify({type:"response",service:M.service,request_id:M.request_id,status:S,body:B});L.debug("Sending post message response to origin ' "+m.origin+"': "+r,null,C);if(typeof m.source!=="object"||m.source===null){L.debug("Cannot send response message to origin ' "+m.origin,"`source` member of request message is not an object",C);return;}m.source.postMessage(r,m.origin);};this._getTargetWindow=function(){return window.parent;};this.postMessage=function(m){var d,e=this._getTargetWindow();if(m){try{if(m.type==="request"&&!m.request_id){m.request_id=this.getId();}d=this.stringify(m);e.postMessage(d,"*");}catch(f){L.error("Message '"+m+"' cannot be posted: "+f,"sap.ui5Isolation.AppCommunicationMgr");}}};this.sendMessageToOuterShell=function(m,P,r){var d=new q.Deferred(),M={"type":"request","service":m,"body":(P||{}),"request_id":r};this.postMessage(M);b[M.request_id]=d;return d.promise();};this.getId=function(){return"SAPUI5_APPRUNTIME_MSGID_"+(++p);};}c.prototype._handleMessageEvent=function(o,m){if(m===undefined){return;}var M=m.data;if(typeof M==="string"){try{M=this.parse(m.data,this);}catch(e){L.debug("Message received from origin '"+m.origin+"' cannot be parsed: "+e,M,C);return;}}if(M.type==="request"){return o._handleMessageRequest(o,m,M);}else if(M.type==="response"){return o._handleMessageResponse(M);}};c.prototype.stringify=function(d){var e=function(g){if(t[g]){return{type:"tunnel",UUID:t[g]};}a++;t[a]={fnCallback:g};t[g]=a;return{type:"tunnel",UUID:a};},f=[],r=JSON.stringify(d,function(k,v){if(v!==null){if(typeof v==='object'||typeof v==="function"){if(f.indexOf(v)!==-1){return;}f.push(v);}}if(typeof v==="function"){var n=T[v];if(n){return{type:"reversetunnel",UUID:n};}return e(v);}return v;});return r;};c.prototype.parse=function(d,o){return JSON.parse(d,function(k,v){if(v&&v.type==="tunnel"){var e=function(){return o.sendMessageToOuterShell("sap.ushell.PostMessage.callTunnelFunction",{"content":{UUID:v.UUID,arguments:arguments}});};T[e]=v.UUID;return e;}else if(v&&v.type==="reversetunnel"){return t[v.UUID].fnCallback;}return v;});};return new c();},false);
sap.ui.predefine('sap/ushell/appRuntime/ui5/AppRuntimePostMessage',["sap/ui/thirdparty/jquery"],function(q){"use strict";var a={};function A(){this.getHandlers=function(){return a;};this.registerCommHandlers=function(c){var i=[];Object.keys(c).forEach(function(k){var C=c[k];if(C.oInboundActions){Object.keys(C.oInboundActions).forEach(function(b){i.push({action:b,service:k});});}});q.extend(a,c);return i;};this.registerCommunicationHandler=function(k,c){var C=a[k],i=[];if(!C){C=a[k]={oInboundActions:{}};}if(c.oInboundActions){Object.keys(c.oInboundActions).forEach(function(b){C.oInboundActions[b]=c.oInboundActions[b];i.push({action:b,service:k});});}return i;};this._getPostMesageInterface=function(s,i){var c=a[s],I;if(c&&c.oRequestCalls&&c.oRequestCalls[i]){I=c.oRequestCalls[i];}return I;};}return new A();});
sap.ui.predefine('sap/ushell/appRuntime/ui5/AppRuntimeService',["sap/ushell/appRuntime/ui5/AppCommunicationMgr"],function(A){"use strict";function a(){this.sendMessageToOuterShell=function(m,p,r){return A.sendMessageToOuterShell(m,p,r);};}return new a();},false);
sap.ui.predefine('sap/ushell/bootstrap/SchedulingAgent',["sap/ushell/bootstrap/_SchedulingAgent/FLPScheduler","sap/ushell/bootstrap/_SchedulingAgent/EventProcessor","sap/ushell/bootstrap/_SchedulingAgent/FLPLoader","sap/ushell/bootstrap/_SchedulingAgent/logger","sap/ushell/bootstrap/_SchedulingAgent/state","sap/ushell/EventHub"],function(F,E,a,l,s,b){"use strict";var L={CONTINUE_ON_EVENT:"continueOnEvent",BY_EVENT:"byEvent",BY_COMPONENT_CREATE:"byComponentCreate",BY_REQUIRE:"byRequire",WAIT_IN_MS:"waitInMs"};var S={WAIT:"wait",ERROR:"error",DONE:"done",STEP:"step",BLOCKDONE:"blockDone",SKIPPED:"skip"};var c={oComponentsLoading:{},oPathsLoading:{},_initialize:function(){s.clear();l.clearHistory();s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Initializing,"Scheduling Agent starting");var d=F.initializeSchedule();d.then(function(e){if(!e){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.FatalError,"Configuration error!");return;}E.initializeStepDoneListener(this);s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Initialized,"Scheduling Agent ready");this.eventReceived();}.bind(this));},_processStepConfiguration:function(d){var o={sStepType:"",oData:{},sStepName:"",bConfigOk:false};if(d.oConfig.loadingMode===L.CONTINUE_ON_EVENT){o.sStepType=L.CONTINUE_ON_EVENT;o.sStepName=d.oContent.LoadingStep;o.oData.eventName=d.oConfig.continueOnEvent&&d.oConfig.continueOnEvent.eventName;o.oData.stepName=d.oContent.LoadingStep;o.bConfigOk=!!(o.oData.eventName&&o.oData.stepName);}else if(d.oConfig.loadingMode===L.BY_EVENT){o.sStepType=L.BY_EVENT;o.sStepName=d.oContent.LoadingStep;o.oData.eventName=d.oConfig.byEvent&&d.oConfig.byEvent.eventName;o.oData.eventData={};o.oData.eventData.data=d.oConfig.byEvent.eventData;o.oData.eventData.stepName=d.oContent.LoadingStep;o.bConfigOk=!!(o.oData.eventName);}else if(d.oConfig.loadingMode===L.BY_COMPONENT_CREATE){o.sStepType=L.BY_COMPONENT_CREATE;o.sStepName=d.oContent.LoadingStep;o.oData=d.oConfig.byComponentCreate&&d.oConfig.byComponentCreate.ui5ComponentOptions||{};o.bConfigOk=!!o.oData;}else if(d.oConfig.loadingMode===L.BY_REQUIRE){o.sStepType=L.BY_REQUIRE;o.sStepName=d.oContent.LoadingStep;o.oData={};o.oData.sPath=d.oConfig.byRequire.path;o.oData.sStepName=d.oContent.LoadingStep;o.bConfigOk=!!o.oData.sPath;}else if(d.oConfig.loadingMode===L.WAIT_IN_MS){o.sStepType=L.WAIT_IN_MS;o.sStepName=d.oContent.LoadingStep;o.oData.iWaitingTime=d.oConfig.waitInMs&&d.oConfig.waitInMs.waitingTime;o.oData.sStepName=d.oContent.LoadingStep;o.bConfigOk=!!(o.oData.iWaitingTime&&o.oData.sStepName);}return o;},dumpState:function(){s.dump();},dumpHistory:function(){l.dumpHistory();},dumpSchedule:function(){F.dumpSchedule();},dumpAll:function(){l.dumpHistory();F.dumpSchedule();s.dump();},eventReceived:function(){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Working,"Agent is active");var n;do{n=F.getNextLoadingStep();if(n.sStatus===S.ERROR){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.FatalError,"Fatal loading error. Loading aborted.");E.unregisterStepDoneListener();b.emit("FLPLoadingDone");return;}if(n.sStatus===S.DONE){s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Done,"Loading finished");E.unregisterStepDoneListener();b.emit("FLPLoadingDone");return;}if(n.sStatus===S.BLOCKDONE){}if(n.sStatus===S.SKIPPED){}if(n.sStatus===S.STEP){var o=this._processStepConfiguration(n);if(!o.bConfigOk){s.setForLoadingStep(o.sStepName,s.id.loadingStep.Abort,"","Step configuration error");s.setForLoadingStep(o.sStepName,s.id.loadingStep.Skipped,"","Step configuration error");s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.FatalError,o,"Step configuration error!");}else if(o.sStepType===L.CONTINUE_ON_EVENT){E.listenToEvent(o.oData);s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData.eventName,"continueOnEvent step sent to Event Processor");}else if(o.sStepType===L.BY_EVENT){a.loadComponentByEvent(o.oData);s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData,"byEvent step sent to FLP Loader");}else if(o.sStepType===L.WAIT_IN_MS){a.waitInMs(o.oData);s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData.iWaitingTime+"ms","WaitInMs step sent to FLP Loader");}else if(o.sStepType===L.BY_REQUIRE){var p=a.loadComponentByRequire(o.oData.sPath);this.oPathsLoading[o.sStepName]=p;s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData.sPath,"byRequire step sent to FLP Loader");var d=o.sStepName;p.then(function(){s.setForLoadingStep(d,s.id.loadingStep.InProgress,"","Step's promise has resolved");delete this.oPathsLoading[d];b.emit("StepDone",d);}.bind(this),function(){s.setForLoadingStep(d,s.id.loadingStep.FatalError,"","Step's promise failed");delete this.oPathsLoading[d];b.emit("StepFailed",d);}.bind(this));}else if(o.sStepType===L.BY_COMPONENT_CREATE){var P=a.loadComponentByComponentCreate(o.oData);this.oComponentsLoading[o.sStepName]=P;s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,o.oData,"byComponentCreate step sent to FLP Loader");P.then(function(){s.setForLoadingStep(o.sStepName,s.id.loadingStep.InProgress,"","Step's promise has resolved");delete this.oComponentsLoading[o.sStepName];b.emit("StepDone",o.sStepName);}.bind(this),function(){s.setForLoadingStep(o.sStepName,s.id.loadingStep.FatalError,"","Step's promise failed");delete this.oComponentsLoading[o.sStepName];b.emit("StepFailed",o.sStepName);}.bind(this));}}}while(n.sStatus!==S.WAIT);s.setForModule(s.id.module.schedulingAgent.id,s.id.module.schedulingAgent.Waiting,"Agent waits");}};return c;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/EventProcessor',["sap/ushell/bootstrap/_SchedulingAgent/state","sap/ushell/EventHub"],function(I,E){"use strict";var a={SchedulingAgent:{},aDoableObjects:[],initializeStepDoneListener:function(b){this.SchedulingAgent=b;this.aDoableObjects=[E.on("StepDone").do(function(s){I.setForLoadingStep(s,I.id.loadingStep.Done,"","Step event received");this.SchedulingAgent.eventReceived();}.bind(this)),E.on("StepFailed").do(function(s){I.setForLoadingStep(s,I.id.loadingStep.Skipped,"","Step event received");this.SchedulingAgent.eventReceived();}.bind(this))];},listenToEvent:function(e){E.once(e.eventName).do(function(){I.setForLoadingStep(e.stepName,I.id.loadingStep.Done,e.eventName,"Event received");this.SchedulingAgent.eventReceived();}.bind(this));},unregisterStepDoneListener:function(){this.aDoableObjects.forEach(function(d){d.off();});},setTimeOut:function(){}};return a;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/FLPLoader',["sap/ushell/EventHub","sap/ui/core/Component"],function(E,C){"use strict";var F={loadComponentByEvent:function(c){E.emit(c.eventName,c.eventData);},loadComponentByComponentCreate:function(c){return C.create(c);},loadComponentByRequire:function(p){return new Promise(function(r,R){sap.ui.require([p],function(d){r(d);});});},waitInMs:function(w){setTimeout(function(){E.emit("StepDone",w.sStepName);},w.iWaitingTime);},directLoading:function(){}};return F;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/FLPScheduler',["sap/ushell/bootstrap/_SchedulingAgent/state","sap/base/util/LoaderExtensions","sap/base/Log","sap/ushell/Config"],function(s,L,a,C){"use strict";var S={Loaded:"loaded",Wait:"wait",Step:"step",Error:"error",BlockDone:"blockDone",Start:"start",Done:"done",Skipped:"skipped"};var b="sap/ushell/bootstrap/_SchedulingAgent/LoadingConfiguration.json";var c="sap/ushell/bootstrap/_SchedulingAgent/StepConfiguration.json";function g(){return C.last("/core/shell/model/currentState/stateName");}var F={oSchedule:{iBlockIndex:0,aBlocksLoading:[]},initializeSchedule:function(){var p=L.loadResource(c,{async:true});var d=L.loadResource(b,{async:true});var P=Promise.all([p,d]).then(function(v){var o=v[0];var l=v[1];var e=this._validateConfig(l,o);if(e){this.oSchedule.oBlocks=l.LoadingBlocks;this.oSchedule.oSteps=o;this.oSchedule.aBlockOrder=l.OrderOfLoadingBlocks;this.oSchedule.iBlockIndex=0;s.setForModule(s.id.module.flpScheduler.id,s.id.module.flpScheduler.Initialized,"Schedule validated");}else{s.setForModule(s.id.module.flpScheduler.id,s.id.module.flpScheduler.WrongConfiguration,"Configuration error");}return e;}.bind(this));return P;},getNextLoadingStep:function(){var o={sStatus:S.Start,oContent:{}};if(this.oSchedule.aBlocksLoading.length===0){var l=this._startLoadingBlock();if(l){o.sStatus=S.Done;return o;}}var d=this.oSchedule.aBlocksLoading[this.oSchedule.aBlocksLoading.length-1];var e=this.oSchedule.aBlockOrder.indexOf(d);var n=this.oSchedule.aBlockOrder[e+1];if(this.oSchedule.oBlocks[d].bCanBeLoadedConcurrently&&n){this._startLoadingBlock();}var A=true;var f=false;var h,j,k,m,p,q,I,r,t;for(var i=0;i<this.oSchedule.aBlocksLoading.length;i++){h=this.oSchedule.aBlocksLoading[i];j=this.oSchedule.oBlocks[h];k=j.iStepIndex;m=j.LoadingSteps[k];p=k===j.LoadingSteps.length-1;q=this._checkAndUpdateAsyncQueue(j);t=s.isStepLoaded(m.LoadingStep)||s.isStepSkipped(m.LoadingStep);r=s.isStepLoading(m.LoadingStep);A=q.bAllStepsDone&&t;f=q.bAStepIsLoading||r;if((r&&!m.canBeLoadedAsync)||(f&&p)){o.sStatus=S.Wait;continue;}if(!p||!t&&!r){if(t||(m.canBeLoadedAsync&&r)){k+=1;}o=this._prepareStepForLoading(j,h,k);}if(A&&p){I=this.oSchedule.aBlocksLoading.indexOf(h);this.oSchedule.aBlocksLoading.splice(I,1);o.sStatus=S.BlockDone;s.setForLoadingBlock(h,s.id.loadingBlock.Done,"","Block removed from loading queue");}if(o.sStatus!==S.wait){break;}}return o;},dumpSchedule:function(){a.debug(JSON.stringify(this.oSchedule));},_loadingIsEnabled:function(d){var e;if(Array.isArray(d.oConfig.excludedFLPStates)){if(d.oConfig.excludedFLPStates.indexOf(g())>-1){return false;}}if(Array.isArray(d.oConfig.mandatoryFLPStates)&&d.oConfig.mandatoryFLPStates.length!==0){if(d.oConfig.mandatoryFLPStates.indexOf(g())===-1){return false;}}function f(o){return o.path&&C.last(o.path)!==o.assertionValue;}if(d.oConfig.configSwitch){e=[].concat(d.oConfig.configSwitch);if(e.some(f)){return false;}}return true;},_checkAndUpdateAsyncQueue:function(d){var t=[];var e,f,h;var A=true;var j=false;for(var i=0;i<d.aAsyncStepsLoading.length;i++){h=d.aAsyncStepsLoading[i];e=s.isStepLoaded(h)||s.isStepSkipped(h);f=s.isStepLoading(h);if(f){t.push(h);}A=A&&e;j=j||f;}d.aAsyncStepsLoading=t;return{bAllStepsDone:A,bAStepIsLoading:j};},_startLoadingBlock:function(){var l=false;if(this.oSchedule.iBlockIndex<this.oSchedule.aBlockOrder.length){var n=this.oSchedule.aBlockOrder[this.oSchedule.iBlockIndex];this.oSchedule.aBlocksLoading.push(n);this.oSchedule.oBlocks[n].iStepIndex=0;this.oSchedule.oBlocks[n].aAsyncStepsLoading=[];this.oSchedule.iBlockIndex+=1;s.setForLoadingBlock(n,s.id.loadingBlock.Prepared,"","Block added to the loading queue.");}else{l=true;}return l;},_prepareStepForLoading:function(d,e,f){var h;var o={sStatus:S.Step,oContent:d.LoadingSteps[f],oConfig:this.oSchedule.oSteps[d.LoadingSteps[f].LoadingStep]};if(!this._loadingIsEnabled(o)){o.sStatus=S.Skipped;d.iStepIndex=f;s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.Skipped,"","Step set to skipped");return o;}var D=this._checkDependencies(o,e);if(D.bMissing){o.sStatus=S.Error;}else if(D.bAllLoaded){s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.Prepared,"","Step prepared for control unit");h=o.oContent.canBeLoadedAsync;d.iStepIndex=f;if(h){s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.Prepared,"","Step set on the async loading queue");d.aAsyncStepsLoading.push(o.oContent.LoadingStep);}}else{o.sStatus=S.Wait;s.setForLoadingStep(o.oContent.LoadingStep,s.id.loadingStep.WaitingForDependencies,"","Step missing dependencies");}return o;},_checkDependencies:function(d,e){var D={bAllLoaded:true,bMissing:false};if(d.oConfig.Dependencies){for(var i=0;i<d.oConfig.Dependencies.length;i++){D.bAllLoaded=D.bAllLoaded&&s.isStepLoaded(d.oConfig.Dependencies[i]);if(!s.isStepLoaded(d.oConfig.Dependencies[i])&&!s.isStepLoading(d.oConfig.Dependencies[i])){s.setForLoadingStep(d.oContent.LoadingStep,s.id.loadingStep.Aborted,d.oConfig.Dependencies[i],"Missing a dependency");s.setForLoadingBlock(e,s.id.loadingBlock.Aborted,d.oConfig.Dependencies[i],"A step is missing a dependency");s.setForModule(s.id.module.flpScheduler.id,s.id.module.flpScheduler.LoadingAborted,"Dependencies can not be resolved: a dependency isn't loading before it is required.");D.bMissing=true;D.bAllLoaded=false;break;}}}return D;},_validateConfig:function(l,d){var e=l&&l.OrderOfLoadingBlocks&&l.LoadingBlocks&&l.OrderOfLoadingBlocks.length&&d;if(!e){return false;}var B=l.OrderOfLoadingBlocks.reduce(function(f,h){f=f&&l.LoadingBlocks[h];if(f){var o=l.LoadingBlocks[h];var i=true;if(o.LoadingSteps){var k;for(var j=0;j<o.LoadingSteps.length;j++){k=o.LoadingSteps[j].LoadingStep;i=i&&d[k];}}f=f&&i;}return!!f;},true);return B;}};return F;},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/logger',["sap/base/Log"],function(B){"use strict";var h=[];var v=true;var C="FLPScheduler";return{getHistory:function(){return h;},verboseOn:function(){v=true;return(v===true);},verboseOff:function(){v=false;return(v===false);},isVerboseOn:function(){return(v===true);},clearHistory:function(){h.length=0;},dumpHistory:function(i){var _;if(i){_=h.filter(function(e){return e.id===i;});console.table(_);}else{console.table(h);}return _||h;},logError:function(e){B.error(this.stateToString(e),undefined,C);h.push(e);return true;},logWarning:function(w){if(v){B.warning(this.stateToString(w),C);h.push(w);}return v;},logStatus:function(s){if(v){B.info(this.stateToString(s),C);h.push(s);}return v;},stateToString:function(s){return"FLP Bootstrap Scheduling Agent :: "+s.type+" '"+s.id+"' /"+s.status+((s.remark)?"/ : "+s.remark:"/");}};},false);
sap.ui.predefine('sap/ushell/bootstrap/_SchedulingAgent/state',["sap/ushell/bootstrap/_SchedulingAgent/logger","sap/base/util/now","sap/base/util/deepClone"],function(l,n,c){"use strict";var i={module:{schedulingAgent:{id:"schedulingAgent",FatalError:"FATAL_ERROR",Idle:"IDLE",Initialized:"INITIALIZED",Initializing:"INITIALIZING",Waiting:"WAITING",WokeUp:"WOKE_UP",Working:"WORKING"},state:{id:"state",FatalError:"FATAL_ERROR",Available:"AVAILABLE"},flpScheduler:{id:"flpScheduler",Initialized:"INITIALIZED",WrongConfiguration:"WRONG_CONFIGURATION",LoadingAborted:"LOADING_ABORTED"},flpLoader:{id:"flpLoader"},logger:{id:l,Block:"BLOCK",Step:"STEP",Module:"MODULE"}},loadingStep:{Prepared:"STEP_PREPARED",WaitingForDependencies:"STEP_WAITING_FOR_DEPENDENCIES",InProgress:"STEP_IN_PROGRESS",Done:"STEP_DONE",Aborted:"STEP_ABORTED",Skipped:"STEP_SKIPPED"},loadingBlock:{Prepared:"BLOCK_PREPARED",WaitingForDependencies:"BLOCK_WAITING_FOR_DEPENDENCIES",InProgress:"BLOCK_IN_PROGRESS",TimedOut:"BLOCK_TIMEDOUT",Done:"BLOCK_DONE",Aborted:"BLOCK_ABORTED"}};var s={id:i,oState:{ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}},clear:function(){this.oState={ofLoadingBlock:{},ofLoadingStep:{},ofModule:{}};},getIdBase:function(){return i;},setForLoadingBlock:function(a,b,p,r,d){this.oState.ofLoadingBlock[a]={time:n(),status:b,parameter:p,remark:r,byModule:d};l.logStatus({time:this.oState.ofLoadingBlock[a].time,type:i.module.logger.Block,id:a,status:b,parameter:p,remark:r,byModule:d});},getForLoadingBlock:function(a){return this.oState.ofLoadingBlock[a];},setForLoadingStep:function(a,b,p,r,d){this.oState.ofLoadingStep[a]={time:n(),status:b,parameter:p,remark:r,byModule:d};l.logStatus({time:this.oState.ofLoadingStep[a].time,type:i.module.logger.Step,id:a,status:b,parameter:p,remark:r,byModule:d});},getForLoadingStep:function(a){return this.oState.ofLoadingStep[a];},setForModule:function(a,b,r){this.oState.ofModule[a]={time:n(),status:b,remark:r,byModule:undefined};l.logStatus({time:this.oState.ofModule[a].time,type:i.module.logger.Module,id:a,status:b,parameter:undefined,remark:r,byModule:undefined});},getForModule:function(a){return this.oState.ofModule[a];},isBlockWaitingForDependencies:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.WaitingForDependencies);},isBlockLoading:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.InProgress);},isBlockLoaded:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.Done);},isBlockLoadingAborted:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.Aborted);},hasBlockLoadingTimedOut:function(a){var S=this.getForLoadingBlock(a);return!!(S&&S.status===i.loadingBlock.TimedOut);},isStepWaitingForDependencies:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.WaitingForDependencies);},isStepLoading:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.InProgress);},isStepLoaded:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Done);},isStepLoadingAborted:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Sborted);},isStepSkipped:function(a){var S=this.getForLoadingStep(a);return!!(S&&S.status===i.loadingStep.Skipped);},isAgentIdle:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.Idle);},isAgentWaiting:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.Waiting);},agentWokeUp:function(){var S=this.getForModule(i.module.schedulingAgent.id);return!!(S&&S.status===i.module.schedulingAgent.WokeUp);},dump:function(){console.log(JSON.parse(JSON.stringify(this.oState)));var S=c(this.oState);return S;},iStartingTime:n()};s.setForModule(i.module.state.id,i.module.state.Available);return s;},false);
sap.ui.predefine('sap/ushell/bootstrap/common/common.create.configcontract.core',["sap/ui/thirdparty/URI"],function(U){"use strict";var d={};function c(m){var G={};function a(M,p){var P=p.split("/");var s=P.slice(0,P.length-1).join("/");var l=P.pop();if(M.hasOwnProperty(s)){return M[s][l];}var D=P.reduce(function(o,h){if(!o||!o.hasOwnProperty(h)){return{};}return o[h];},m);M[s]=D;return D[l];}function b(p,D){var s=a(G,p);d[p]=D;return s!==undefined?s:D;}function e(p,o){var E=b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined);var P=b("renderers/fiori2/componentData/config/applications/Shell-home/"+p,undefined);var O=b("renderers/fiori2/componentData/config/applications/Shell-home/"+o,undefined);P=(E===false)?false:P;P=(P!==undefined)?P:E;if(E===undefined||E){if(P===false){return false;}return(O!==undefined)?O:P;}return false;}function f(){var p="renderers/fiori2/componentData/config/enableBackGroundShapes";var E=a(G,p);if(E===undefined){E=!b("ushell/spaces/enabled",false);}d[p]=!!E;return!!E;}var C={core:{extension:{enableHelp:b("renderers/fiori2/componentData/config/enableHelp",false),EndUserFeedback:b("services/EndUserFeedback/config/enabled",true),SupportTicket:b("services/SupportTicket/config/enabled",false)},navigation:{enableInPlaceForClassicUIs:{GUI:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/GUI",false),WDA:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WDA",false),WCF:b("services/ClientSideTargetResolution/config/enableInPlaceForClassicUIs/WCF",true)},enableWebguiLocalResolution:true,enableWdaLocalResolution:true,flpURLDetectionPattern:b("services/ClientSideTargetResolution/config/flpURLDetectionPattern","[/]FioriLaunchpad.html[^#]+#[^-]+?-[^-]+")},spaces:{enabled:b("ushell/spaces/enabled",false),configurable:b("ushell/spaces/configurable",false),vizInstantiation:{enabled:b("ushell/spaces/vizInstantiation/enabled",true)}},darkMode:{enabled:b("ushell/darkMode/enabled",false),supportedThemes:b("ushell/darkMode/supportedThemes",[{dark:"sap_fiori_3_dark",light:"sap_fiori_3"}])},productSwitch:{enabled:!!b("ushell/productSwitch/url",""),url:b("ushell/productSwitch/url","")},shellHeader:{application:{},centralAreaElement:null,headEndItems:[],headItems:[],headerVisible:true,showLogo:false,ShellAppTitleState:undefined,rootIntent:b("renderers/fiori2/componentData/config/rootIntent",""),title:""},userPreferences:{dialogTitle:"Settings",isDetailedEntryMode:false,activeEntryPath:null,entries:[],profiling:[]},shell:{cacheConfiguration:b("renderers/fiori2/componentData/config/cacheConfiguration",{}),enableAbout:b("renderers/fiori2/componentData/config/enableAbout",true),enablePersonalization:b("renderers/fiori2/componentData/config/enablePersonalization",b("renderers/fiori2/componentData/config/applications/Shell-home/enablePersonalization",true)),enableRecentActivity:b("renderers/fiori2/componentData/config/enableRecentActivity",true),enableRecentActivityLogging:b("renderers/fiori2/componentData/config/enableRecentActivityLogging",true),enableFiori3:true,sessionTimeoutIntervalInMinutes:b("renderers/fiori2/componentData/config/sessionTimeoutIntervalInMinutes",-1),model:{enableSAPCopilotWindowDocking:undefined,enableBackgroundShapes:f(),personalization:undefined,contentDensity:undefined,setTheme:undefined,userDefaultParameters:undefined,disableHomeAppCache:undefined,enableHelp:undefined,enableTrackingActivity:undefined,searchAvailable:false,searchFiltering:true,showEndUserFeedback:false,searchTerm:"",isPhoneWidth:false,enableNotifications:b("services/Notifications/config/enabled",false),enableNotificationsUI:false,notificationsCount:0,currentViewPortState:"Center",migrationConfig:undefined,allMyAppsMasterLevel:undefined,userStatus:undefined,userStatusUserEnabled:true,shellAppTitleData:{currentViewInPopover:"navigationMenu",enabled:false,showGroupsApps:false,showCatalogsApps:false,showExternalProvidersApps:false},userImage:{personPlaceHolder:"sap-icon://person-placeholder",account:"sap-icon://account"},currentState:{stateName:"blank",showCurtain:false,showCatalog:false,showPane:false,showRightFloatingContainer:false,showRecentActivity:true,search:"",paneContent:[],actions:[],floatingActions:[],subHeader:[],toolAreaItems:[],RightFloatingContainerItems:[],toolAreaVisible:false,floatingContainerContent:[]}}},home:{animationRendered:false,disableSortedLockedGroups:b("renderers/fiori2/componentData/config/applications/Shell-home/disableSortedLockedGroups",false),draggedTileLinkPersonalizationSupported:true,editTitle:false,enableHomePageSettings:b("renderers/fiori2/componentData/config/applications/Shell-home/enableHomePageSettings",true),enableRenameLockedGroup:b("renderers/fiori2/componentData/config/applications/Shell-home/enableRenameLockedGroup",false),enableTileActionsIcon:b("renderers/fiori2/componentData/config/enableTileActionsIcon",b("renderers/fiori2/componentData/config/applications/Shell-home/enableTileActionsIcon",false)),enableTilesOpacity:b("services/ClientSideTargetResolution/config/enableTilesOpacity",b("renderers/fiori2/componentData/config/applications/Shell-home/enableTilesOpacity",true)),enableTransientMode:b("ushell/home/enableTransientMode",false),featuredGroup:{enable:b("ushell/home/featuredGroup/enable",false),frequentCard:b("ushell/home/featuredGroup/frequentCard",true)&&b("ushell/home/featuredGroup/enable",false),recentCard:b("ushell/home/featuredGroup/recentCard",true)&&b("ushell/home/featuredGroup/enable",false)},gridContainer:b("ushell/home/gridContainer",false),homePageGroupDisplay:b("renderers/fiori2/componentData/config/applications/Shell-home/homePageGroupDisplay","scroll"),isInDrag:false,optimizeTileLoadingThreshold:b("renderers/fiori2/componentData/config/applications/Shell-home/optimizeTileLoadingThreshold",100),sizeBehavior:b("renderers/fiori2/componentData/config/sizeBehavior","Responsive"),sizeBehaviorConfigurable:b("renderers/fiori2/componentData/config/sizeBehaviorConfigurable",false),wrappingType:b("ushell/home/tilesWrappingType","Normal"),segments:b("renderers/fiori2/componentData/config/applications/Shell-home/segments",undefined),tileActionModeActive:false},catalog:{enabled:b("renderers/fiori2/componentData/config/enablePersonalization",b("renderers/fiori2/componentData/config/applications/Shell-home/enablePersonalization",true))||b("renderers/fiori2/componentData/config/enableAppFinder",false),appFinderDisplayMode:b("renderers/fiori2/componentData/config/applications/Shell-home/appFinderDisplayMode",undefined),easyAccessNumbersOfLevels:b("renderers/fiori2/componentData/config/applications/Shell-home/easyAccessNumbersOfLevels",undefined),enableCatalogSearch:b("renderers/fiori2/componentData/config/enableSearchFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableSearchFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSearch",true))),enableCatalogSelection:b("renderers/fiori2/componentData/config/enableCatalogSelection",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogSelection",true)),enableCatalogTagFilter:b("renderers/fiori2/componentData/config/enableTagFiltering",b("renderers/fiori2/componentData/config/applications/Shell-home/enableCatalogTagFilter",true)),enableEasyAccess:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined),enableEasyAccessSAPMenu:(b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)===false)?false:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessSAPMenu",b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)),enableEasyAccessSAPMenuSearch:e("enableEasyAccessSAPMenu","enableEasyAccessSAPMenuSearch"),enableEasyAccessUserMenu:(b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)===false)?false:b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccessUserMenu",b("renderers/fiori2/componentData/config/applications/Shell-home/enableEasyAccess",undefined)),enableEasyAccessUserMenuSearch:e("enableEasyAccessUserMenu","enableEasyAccessUserMenuSearch"),enableHideGroups:b("renderers/fiori2/componentData/config/enableHideGroups",b("renderers/fiori2/componentData/config/applications/Shell-home/enableHideGroups",true)),sapMenuServiceUrl:undefined,userMenuServiceUrl:b("renderers/fiori2/componentData/config/applications/Shell-home/userMenuServiceUrl",undefined)},esearch:{defaultSearchScopeApps:b("renderers/fiori2/componentData/config/esearch/defaultSearchScopeApps",false),searchBusinessObjects:b("renderers/fiori2/componentData/config/esearch/searchBusinessObjects",true),searchScopeWithoutAll:b("renderers/fiori2/componentData/config/esearch/searchScopeWithoutAll",false)}}};return C;}function g(){return d;}return{createConfigContract:c,getDefaultConfiguration:g};},false);
sap.ui.predefine('sap/ushell/bootstrap/common/common.load.model',["sap/ushell/Config","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/ui/Device"],function(C,J,q,D){"use strict";var _;function a(){var s=C.last("/core"),i={groups:[],rtl:sap.ui.getCore().getConfiguration().getRTL(),personalization:s.shell.enablePersonalization,tagList:[],selectedTags:[],userPreferences:{entries:[]},enableHelp:s.extension.enableHelp,enableTileActionsIcon:D.system.desktop?s.home.enableTileActionsIcon:false};i=q.extend({},s.catalog,s.home,i);_=new J(i);_.setSizeLimit(10000);}function b(m){_.setProperty("/isPhoneWidth",!m.matches);}function c(){var m=window.matchMedia("(min-width: 800px)");if(m.addListener){m.addListener(b);b(m);}}return{getModel:function(){if(!_){a();c();}return _;},_resetModel:function(){if(_!=undefined){_.destroy();_=undefined;}}};},true);
sap.ui.predefine('sap/ushell/components/CatalogsManager',["sap/ui/base/Object","sap/ushell/ui/launchpad/TileState","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/ushell/components/HomepageManager","sap/ushell/resources","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/Log"],function(B,T,e,u,d,g,m,H,r,q,M,L){"use strict";var C=B.extend("sap.ushell.components.CatalogsManager",{metadata:{publicMethods:["createGroup","createGroupAndSaveTile","createTile","deleteCatalogTileFromGroup","notifyOnActionFailure","resetAssociationOnFailure"]},analyticsConstants:{PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"},_aDoableObjects:[],constructor:function(i,s){this.oLaunchPageService=sap.ushell.Container.getService("LaunchPage");this.aPendingCatalogQueue=[];this.oTileCatalogToGroupsMap={};this.skippedProcessCatalogs=0;this.tagsPool=[];this.oModel=s.model;var h={model:this.oModel};if(typeof sap.ushell.components.getHomepageManager==="function"){this.oHomepageManager=sap.ushell.components.getHomepageManager();}else{this.oHomepageManager=new H("dashboardMgr",h);}sap.ushell.components.getCatalogsManager=(function(v){return function(){return v;};}(this.getInterface()));this.registerEvents();},registerEvents:function(){var E=sap.ui.getCore().getEventBus();E.subscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoableObjects=[e.on("showCatalog").do(this.updateTilesAssociation.bind(this)),e.on("updateGroups").do(this.updateTilesAssociation.bind(this))];},unregisterEvents:function(){var E=sap.ui.getCore().getEventBus();E.unsubscribe("renderCatalog",this.loadAllCatalogs,this);this._aDoableObjects.forEach(function(D){D.off();});},getModel:function(){return this.oModel;},loadAllCatalogs:function(){var G=new q.Deferred(),t=this,s;G.resolve();s=function(){G.done(function(){var a=t.getModel().getProperty("/groups");if(a&&a.length!==0){t.updateTilesAssociation();}});};if(!this.oModel.getProperty("/catalogs")){if(!this.oModel.getProperty("/groups")||this.oModel.getProperty("/groups").length===0){G=this.oHomepageManager.loadPersonalizedGroups();}d.destroyFLPAggregationModels(this.oModel.getProperty("/catalogs"));d.destroyTileModels(this.oModel.getProperty("/catalogTiles"));this.oModel.setProperty("/catalogs",[]);this.oModel.setProperty("/catalogSearchEntity",{appBoxes:[],customTiles:[]});this.aPromises=[];M.start("FLP:DashboardManager.GetCatalogsRequest","GetCatalogsRequest","FLP");M.start("FLP:DashboardManager.getCatalogTiles","getCatalogTiles","FLP");M.pause("FLP:DashboardManager.getCatalogTiles");M.start("FLP:DashboardManager.BuildCatalogModelWithRendering","BuildCatalogModelWithRendering","FLP");M.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");this.oLaunchPageService.getCatalogs().done(function(c){M.end("FLP:DashboardManager.GetCatalogsRequest");M.end("FLP:DashboardManager.getCatalogTiles");q.when.apply(q,this.aPromises).then(function(){t.onDoneLoadingCatalogs(c);});s();}.bind(this)).fail(m.showLocalizedErrorHelper("fail_to_load_catalog_msg")).progress(this.addCatalogToModel.bind(this));}else{s();}},updateTilesAssociation:function(){this.mapCatalogTilesToGroups();this.updateCatalogTilesToGroupsMap();},mapCatalogTilesToGroups:function(){this.oTileCatalogToGroupsMap={};var G=this.oModel.getProperty("/groups"),i,o,t,a,b,c,f,h=this;for(i=0;i<G.length;i++){o=G[i];["tiles","links"].forEach(function(A){a=o[A];if(a){for(t=0;t<a.length;++t){b=encodeURIComponent(h.oLaunchPageService.getCatalogTileId(a[t].object));c=h.oTileCatalogToGroupsMap[b]||[];f=h.oLaunchPageService.getGroupId(o.object);if(c.indexOf(f)===-1&&(typeof(o.isGroupVisible)==="undefined"||o.isGroupVisible)&&!o.isGroupLocked){c.push(f);}h.oTileCatalogToGroupsMap[b]=c;}}});}},updateCatalogTilesToGroupsMap:function(){var c=this.getModel().getProperty("/catalogs"),i,t,a,G,b,f,h,j,A,o;if(c){for(i=0;i<c.length;i++){f=c[i].appBoxes;if(f){for(j=0;j<f.length;j++){A=f[j];t=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(A.src));G=this.oTileCatalogToGroupsMap[t];a=(G||[]);A.associatedGroups=a;}}b=c[i].customTiles;if(b){for(h=0;h<b.length;h++){o=b[h];t=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(o.src));G=this.oTileCatalogToGroupsMap[t];a=(G||[]);o.associatedGroups=a;}}}}this.getModel().setProperty("/catalogs",c);},addCatalogToModel:function(c){var o={title:this.oLaunchPageService.getCatalogTitle(c),id:this.oLaunchPageService.getCatalogId(c),numberTilesSupportedOnCurrectDevice:0,static:false,customTiles:[],appBoxes:[]},p;M.resume("FLP:DashboardManager.getCatalogTiles");p=this.oLaunchPageService.getCatalogTiles(c);this.aPromises.push(p);p.done(function(a){M.pause("FLP:DashboardManager.getCatalogTiles");if(!a.length){return;}this.aPendingCatalogQueue.push({oCatalogEntry:a,oCatalogModel:o});if(this.skippedProcessCatalogs<10){clearTimeout(this.oprocessCatalogsTimer);this.skippedProcessCatalogs++;this.oprocessCatalogsTimer=setTimeout(function(){this.processPendingCatalogs();if(this.oModel.getProperty("/enableCatalogTagFilter")===true){this.getTagList();}}.bind(this),20);}}.bind(this)).fail(m.showLocalizedErrorHelper("fail_to_load_catalog_tiles_msg"));},getTagList:function(c){var i={},f=0,t=[],h,o,s;if(this.oModel.getProperty("/tagList")&&this.oModel.getProperty("/tagList").length>0){this.tagsPool.concat(this.oModel.getProperty("/tagList"));}for(f=0;f<this.tagsPool.length;f++){o=this.tagsPool[f];if(i[o]){i[o]++;}else{i[o]=1;}}for(h in i){t.push({tag:h,occ:i[h]});}s=t.sort(function(a,b){return b.occ-a.occ;});if(c){this.oModel.setProperty("/tagList",s.slice(0,c));}else{this.oModel.setProperty("/tagList",s);}},processPendingCatalogs:function(){var c=this.oModel.getProperty("/catalogs"),p,o,a,E,i,b,f,h=sap.ui.getCore().getEventBus(),A,j=this.oModel.getProperty("/masterCatalogs")||[{title:m.getLocalizedText("all")}];M.resume("FLP:DashboardManager.BuildCatalogModelWithRendering");this.skippedProcessCatalogs=0;while(this.aPendingCatalogQueue.length>0){p=this.aPendingCatalogQueue.shift();o=p.oCatalogEntry;a=p.oCatalogModel;E=this.searchModelCatalogByTitle(a.title);if(E.result){b=this.oModel.getProperty("/catalogs")[E.indexOfPreviousInstanceInModel];i=false;}else{i=true;b=a;}o.forEach(function(o,k){if(this._getIsIntentSupported(o)){if(this._getIsAppBox(o)){A=this.createCatalogAppBoxes(o,true);b.appBoxes.push(A);}else{f=this.createCatalogTiles(o);b.customTiles.push(f);if(!this.aFnToGetTileView){this.aFnToGetTileView=[];}}}}.bind(this));if(b.appBoxes.length>0||b.customTiles.length>0){if(i){c.push(a);j.push({title:a.title});}}}this.oModel.setProperty("/masterCatalogs",j);this.oModel.setProperty("/catalogs",c);h.publish("launchpad","afterCatalogSegment");setTimeout(function(){u.setPerformanceMark("FLP-TTI-AppFinder",{bUseUniqueMark:true});},0);M.pause("FLP:DashboardManager.BuildCatalogModelWithRendering");},loadCustomTilesKeyWords:function(){var f;if(this.aFnToGetTileView){while(this.aFnToGetTileView.length>0){f=this.aFnToGetTileView.pop();f();}}},searchModelCatalogByTitle:function(c){var a=this.oModel.getProperty("/catalogs"),b=false,i,n=0,G=false;q.each(a,function(f,t){if(t.title===r.i18n.getText("catalogsLoading")){G=true;}else if(c===t.title){i=f;n=t.numberOfTiles;b=true;return false;}});return{result:b,indexOfPreviousInstanceInModel:i,indexOfPreviousInstanceInPage:G?i-1:i,numOfTilesInCatalog:n};},createCatalogAppBoxes:function(c,G){var a=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(c)),b=this.oTileCatalogToGroupsMap[a]||[],t=this.oLaunchPageService.getCatalogTileTags(c)||[];if(t.length>0){this.tagsPool=this.tagsPool.concat(t);}var n;if(c.tileResolutionResult){n=c.tileResolutionResult.navigationMode;}return{id:a,associatedGroups:b,src:c,title:this.oLaunchPageService.getCatalogTilePreviewTitle(c),subtitle:this.oLaunchPageService.getCatalogTilePreviewSubtitle(c),icon:this.oLaunchPageService.getCatalogTilePreviewIcon(c),keywords:G?(this.oLaunchPageService.getCatalogTileKeywords(c)||[]).join(","):[],tags:t,navigationMode:n,url:this.oLaunchPageService.getCatalogTileTargetURL(c)};},onDoneLoadingCatalogs:function(c){var i,a=[],t=this;for(i=0;i<c.length;i++){a.push(this.oLaunchPageService.getCatalogTiles(c[i]));}Promise.all(a).then(function(R){var I,n=true;for(I=0;I<R.length;I++){if(R[I].length!==0){n=false;break;}}if(n||!c.length){t.oModel.setProperty("/catalogsNoDataText",r.i18n.getText("noCatalogs"));}});var E=sap.ui.getCore().getEventBus();E.publish("launchpad","catalogContentLoaded");var l=c.filter(function(o){var s=t.oLaunchPageService.getCatalogError(o);if(s){L.error("A catalog could not be loaded",s,"sap.ushell.components.CatalogsManager");}return!s;});if(l.length!==c.length){m.showLocalizedError("partialCatalogFail");}u.handleTilesVisibility();},createCatalogTiles:function(c){var t,a,b=encodeURIComponent(this.oLaunchPageService.getCatalogTileId(c)),f=this.oTileCatalogToGroupsMap[b]||[],h=this.oLaunchPageService.getCatalogTileTags(c)||[];if(h.length>0){this.tagsPool=this.tagsPool.concat(h);}t=new T({state:"Loading"});a=this.oLaunchPageService.getCatalogTilePreviewTitle(c);if(!a){a=this.oLaunchPageService.getCatalogTileTitle(c);}return{associatedGroups:f,src:c,catalog:c.title,catalogId:c.id,title:a,tags:h,keywords:(this.oLaunchPageService.getCatalogTileKeywords(c)||[]).join(","),id:b,size:this.oLaunchPageService.getCatalogTileSize(c),content:[t],isTileIntentSupported:this.oLaunchPageService.isTileIntentSupported(c),tileType:c.tileType};},createGroupAndSaveTile:function(D){var t=this,c=D.catalogTileContext,n=D.newGroupName,a=q.Deferred(),R={};if(u.validHash(n)&&c){this.createGroup(n).then(function(o){var p=t.createTile({catalogTileContext:c,groupContext:o});p.done(function(b){R={group:b.group,status:1,action:"addTileToNewGroup"};a.resolve(R);}).fail(function(b){R={group:b.group,status:0,action:"addTileToNewGroup"};a.resolve(R);});});}return a.promise();},createGroup:function(t){var a=this,D=q.Deferred();if(!u.validHash(t)){return D.reject({status:0,action:"createNewGroup"});}var R=this.oLaunchPageService.addGroup(t);R.done(function(G){var o=a.oHomepageManager.addGroupToModel(G);D.resolve(o);});R.fail(function(){m.showLocalizedError("fail_to_create_group_msg");var o={status:0,action:"createNewGroup"};D.resolve(o);});return D.promise();},createTile:function(D){var t=this,c=D.catalogTileContext,o=D.groupContext,G=this.oModel.getProperty(o.getPath()),s=G.groupId,R,a=q.Deferred(),b={},E;E=sap.ui.getCore().getEventBus();E.publish("launchpad","addTile",{catalogTileContext:c,groupContext:o});if(!c){L.warning("CatalogsManager: Did not receive catalog tile object. Abort.",this);b={group:G,status:0,action:"add"};return Promise.resolve(b);}R=this.oLaunchPageService.addTile(c.getProperty("src"),o.getProperty("object"));R.done(function(f){var h=t.oModel.getProperty("/groups"),i=g.getModelPathOfGroup(h,s),j=t.oLaunchPageService.getTileTitle(f);t.oHomepageManager.addTileToGroup(i,f);b={group:G,status:1,action:"add"};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent(t.analyticsConstants.PERSONALIZATION,t.analyticsConstants.ADD_TILE,[G.title,j]);a.resolve(b);}).fail(function(){m.showLocalizedError("fail_to_add_tile_msg");b={group:G,status:0,action:"add"};a.resolve(b);});return a.promise();},deleteCatalogTileFromGroup:function(D){var t=this,s=decodeURIComponent(D.tileId),G=D.groupIndex,o=this.oModel.getProperty("/groups/"+G),a=q.Deferred(),b=[],R=[],p,c;["tiles","links"].forEach(function(A){o[A].forEach(function(f){var h=t.oLaunchPageService.getCatalogTileId(f.object);if(h===s){p=q.Deferred();c=t.oLaunchPageService.removeTile(o.object,f.object);c.done((function(a){return function(){R.push(f.uuid);a.resolve({status:true});};})(p));c.fail((function(a){return function(){a.resolve({status:false});};})(p));b.push(p);}});});q.when.apply(q,b).done(function(f){var S=b.length===R.length;t.oHomepageManager.deleteTilesFromGroup(o.groupId,R);t.updateTilesAssociation();a.resolve({group:o,status:S,action:"remove"});});return a.promise();},calculateCatalogTileIndex:function(c,n,t){var a=parseInt(c*100000,10);a+=(n!==undefined?n:0)+t;return a;},notifyOnActionFailure:function(s,p){m.showLocalizedError(s,p);},resetAssociationOnFailure:function(s,p){this.notifyOnActionFailure(s,p);this.updateTilesAssociation();},_getIsIntentSupported:function(c){return!!(this.oLaunchPageService.isTileIntentSupported(c));},_getIsAppBox:function(c){var a,i;if(!sap.ushell.Container){return false;}a=this.oModel.getProperty("/appFinderDisplayMode");if(a==="tiles"){i=false;}else{i=!!(this.oLaunchPageService.getCatalogTileTargetURL(c)&&(this.oLaunchPageService.getCatalogTilePreviewTitle(c)||this.oLaunchPageService.getCatalogTilePreviewSubtitle(c)));}return i;},destroy:function(){this.unregisterEvents();}});return C;});
sap.ui.predefine('sap/ushell/components/ComponentKeysHandler',["sap/ushell/Config","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery","sap/base/Log"],function(C,A,K,q,L){"use strict";var a=function(){};a.prototype={keyCodes:K,tileFocusCustomData:new A({key:"tabindex",value:"0",writeToDom:true}),goToTileContainer:function(){if(this.oModel.getProperty("/tileActionModeActive")){this.goToFirstVisibleTileContainer();}else{this.goToLastVisitedTile();}},goToFirstVisibleTileContainer:function(){var j=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),t=this.oModel.getProperty("/topGroupInViewPortIndex");if(j.length){var b=q(j.get(t));if(b.length){this._setTileContainerSelectiveFocus(b);}}},goToLastVisitedTile:function(j,l){var b,d,e=q(".sapUshellTile, .sapMGTLineMode, .sapFCard");if(l){var f=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),t=this.oModel.getProperty("/topGroupInViewPortIndex");var g=j||q(f.get(t));var h=g.find(".sapUshellTile, .sapMGTLineMode, .sapFCard");b=h.filter(":visible").eq(0);d=h.filter("[tabindex=0]:visible").eq(0);if(!b.length){b=e.filter(":visible").eq(0);}}else{b=e.filter(":visible").eq(0);d=e.filter("[tabindex=0]:visible").eq(0);}if(d.length){this.moveScrollDashboard(d);}else if(b.length){b.attr("tabindex","0");this.moveScrollDashboard(b);}else{sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell();}},_goToFirstTileOfNextGroup:function(d,e){this._preventDefault(e);var i=this._getGroupAndTilesInfo();if(i){var n=this._getNextGroup(d,i.oGroup,false,true);if(n){this._goToTileOfGroup("first",n);}}},_goToTileOfGroup:function(p,g){if(g){var b=g.getTiles();if(this.oModel.getProperty("/tileActionModeActive")){b.push(g.oPlusTile);}b=b.concat(g.getLinks());p=p==="first"?0:p;p=p==="last"?b.length-1:p;var t=b[p];if(t&&t.getDomRef()){var j=q(t.getDomRef());if(j.length===1){this.moveScrollDashboard(j);return true;}}}return false;},_moveTile:function(d){var i=this._getGroupAndTilesInfo(),D=this._getNextTile(d,true,i);if(D){var o=D.getParent();if(C.last("/core/home/gridContainer")&&o.getParent().getId()!=="dashboardGroups"){o=o.getParent();}var s=D.getMode?D.getMode():"ContentMode",b=i.oCurTile.getMode?i.oCurTile.getMode():"ContentMode",e=s==="LineMode"?o.getLinks():o.getTiles(),n=0;if(i.oGroup===o){n=e.indexOf(D);if(b==="LineMode"&&s==="ContentMode"&&d==="left"){n=e.length;}}else if(d==="left"||d==="up"){n=e.length;}var E,f,t=this;if(b===s){var g=q(".sapUshellDashboardView").control(0);E="movetile";f={sTileId:g.getController()._getTileUuid(i.oCurTile),toGroupId:o.getGroupId?o.getGroupId():o.groupId,toIndex:n,sToItems:b==="LineMode"?"links":"tiles",sFromItems:b==="LineMode"?"links":"tiles",sTileType:b==="LineMode"?"link":"tile"};if(s==="LineMode"){f.callBack=function(){setTimeout(function(){e=s==="LineMode"?o.getLinks():o.getTiles();t.moveScrollDashboard(e[n].$());},10);};}else{setTimeout(function(){e=s==="LineMode"?o.getLinks():o.getTiles();t.moveScrollDashboard(e[n].$());},10);}}else{E="convertTile";f={toGroupId:o.getGroupId?o.getGroupId():o.groupId,srcGroupId:i.oGroup.getGroupId?i.oGroup.getGroupId():i.oGroup.groupId,toIndex:n,callBack:function(){setTimeout(function(){e=s==="LineMode"?o.getLinks():o.getTiles();t.moveScrollDashboard(e[n].$());},10);},tile:i.oCurTile,longDrop:false};}sap.ui.getCore().getEventBus().publish("launchpad",E,f);}},callbackSetFocus:function(t){var b=this;setTimeout(function(){if(t.oParent&&t.oParent instanceof sap.ushell.ui.launchpad.Tile){b.moveScrollDashboard(q(t.oParent.getDomRef()));}else{b.moveScrollDashboard(t.$());}});},_getTileCenter:function(d,t,T){if(!(T instanceof HTMLElement)){var j=T.$().find(".sapMGTLineStyleHelper");if(T.isLink&&j&&j.length>1){if(d==="down"){return t.right;}return t.left;}}return t.right-((t.right-t.left)/2);},_getTileRect:function(d,t){if(t instanceof HTMLElement){return t.getBoundingClientRect();}var j=t.$().find(".sapMGTLineStyleHelper");if(t.isLink&&j&&j.length){if(d==="down"){return j.get(j.length-1).getBoundingClientRect();}return j.get(0).getBoundingClientRect();}if(t.getDomRef()){return t.getDomRef().getBoundingClientRect();}},_findClosestTile:function(d,t,o){var b=this._getTileRect(d,o),n=this._getTileCenter(d,b,o);var e,f=Infinity,g=d==="down"?1:-1,h=t.indexOf(o)+g,i;for(;;h+=g){var T=t[h];if(!T){return e;}if(!e){if(d==="down"&&h===t.length-1){return T;}if(d==="up"&&h===0){return T;}}var j=this._getTileRect(d,T);if(!j){return e;}if(d==="down"&&b.bottom+5>=j.bottom){continue;}if(d==="up"&&b.top-5<=j.top){continue;}if(e&&i!==j.top){return e;}i=j.top;var k=Math.min(Math.abs(j.left-n),Math.abs(j.right-n));if(f>k){f=k;e=T;}else{return e;}}},_getNextTile:function(d,m,g){var i=g||this._getGroupAndTilesInfo(),l=true;var n;var N;var G;var b;if(!i||(m&&i.oGroup.getProperty("isGroupLocked"))){return null;}if(m){var t=i.oCurTile.getBindingContext().getObject().object;l=sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported(t);}if(d==="right"||d==="left"){var f=i.oCurTile.isLink?i.aLinks:i.aTiles,e=f.indexOf(i.oCurTile),h=d==="right"?e+1:e-1;if(f[h]&&f[h].getDomRef()){if(m&&f[h]===i.oGroup.oPlusTile){}else{return f[h];}}if(d==="right"&&!i.oCurTile.isLink&&i.aLinks.length&&l){return i.aLinks[0];}if(d==="left"&&i.oCurTile.isLink&&i.aTiles.length){return i.oGroup.getShowPlaceholder()?i.oGroup.oPlusTile:i.aTiles[i.aTiles.length-1];}}var o=this._getNextGroup(d,i.oGroup,m,l);if(o){n=o.getTiles();N=o.getLinks();if(d==="right"){if(n.length===0&&N.length===0){return o.oPlusTile;}else if(n.length===0){return N[0];}return n[0];}if(d==="left"){if(n.length===0&&N.length===0){return o.oPlusTile;}else if(N.length===0){return n[n.length-1];}return N[N.length-1];}}if(d==="down"||d==="up"){G=l?i.aTiles.concat(i.aLinks):i.aTiles;b=[];if(o){var j=o.getTiles(),k=o.getLinks();b=l?j.concat(k):j;if(b.length===0){b.push(o.oPlusTile);}}var J=(d==="down")?G.concat(b):b.concat(G);return this._findClosestTile(d,J,i.oCurTile);}},_getNextGroup:function(d,o,m,l){var n,g=o.getParent().getGroups(),b=g.indexOf(o),e=b;if(d==="down"||d==="right"){n=1;}else{n=-1;}e+=n;while(g[e]){var N=g[e],f=N.getTiles(),h=N.getLinks();var i=l?f.concat(h):f;var I=N.getVisible()&&!(N.getIsGroupLocked()&&m)&&!(N.getIsGroupLocked()&&i.length===0)&&!(i.length===0&&!(m||this.oModel.getProperty("/tileActionModeActive")));if(I){return N;}e+=n;}},_getGroupAndTilesInfo:function(){var j=this._getFocusOnTile(q(document.activeElement));if(!j||!j.length){return null;}var o=j.control(0);o.isLink=j.hasClass("sapUshellLinkTile")||j.hasClass("sapMGTLineMode");var g=j.closest(".sapUshellTileContainer").control(0);if(!g){return null;}var t=g.getTiles();if(g.getShowPlaceholder()){t.push(g.oPlusTile);}return{oCurTile:o,oGroup:g,aTiles:t,aLinks:g.getLinks()};},_goToSiblingElementInTileContainer:function(d,j){var b=j.closest(".sapUshellTileContainer"),e,f,g;e=j.closest(".sapUshellTileContainerBeforeContent");if(e.length){if(d==="up"||d==="left"){this._goToNextTileContainer(e,d);}else{g=b.find(".sapUshellTileContainerHeader").eq(0);this._setTabIndexOnTileContainerHeader(g);g.focus();}return;}e=j.closest(".sapUshellTileContainerHeader");if(e.length){if(d==="up"){this._setTabIndexOnTileContainerHeader(g);if(!this._goToTileContainerBeforeContent(b)){this._goToNextTileContainer(e,d);}}else if(d==="down"){f=b.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(f.length){this.moveScrollDashboard(f);}else{this._goToNextTileContainer(e,d);}}else if(d==="left"){if(j.hasClass("sapUshellTileContainerHeader")){if(!this._goToTileContainerBeforeContent(b)){this._goToNextTileContainer(e,"left");}}else{g=j.closest(".sapUshellTileContainerHeader");g.focus();}}else if(d==="right"){var h=j.hasClass("sapMInputBaseInner");if(!h){f=b.find(".sapUshellTile, .sapUshellLinkTile, .sapFCard").eq(0);if(f.length){this.moveScrollDashboard(f);}else{this._goToNextTileContainer(e,"down");}}}return;}e=this._getFocusOnTile(j);if(e){this._goFromFocusedTile(d,e,true);return;}e=j.closest(".sapUshellTileContainerAfterContent");if(e.length){if(d==="up"||d==="left"){this._goToTileOfGroup("first",e.control(0));}else{this._goToNextTileContainer(e,d);}}},_goToNextTileContainer:function(j,d){var b=j.closest(".sapUshellTileContainer");if(b.length===1){var e=q(".sapUshellTileContainer").filter(":visible"),n=(d==="down")?1:-1,f=q(e[e.index(b)+n]);if(f.length===1){var g=f.find(".sapUshellTileContainerHeader");if(d==="down"){if(!this._goToTileContainerBeforeContent(f)){this._setTabIndexOnTileContainerHeader(g);this._setTileContainerSelectiveFocus(f);}}else if(!this._goToTileContainerAfterContent(f)){if(d==="up"||d==="left"){var s=d==="up"?"first":"last";if(!this._goToTileOfGroup(s,f.control(0))){this._setTabIndexOnTileContainerHeader(g);g.focus();}}}}}},_goToTileContainerBeforeContent:function(j){var b=j.hasClass("sapUshellTileContainer")?j:j.closest(".sapUshellTileContainer"),d=b.find(".sapUshellTileContainerBeforeContent button").filter(":visible");if(d.length){d.focus();return true;}return false;},_goToTileContainerAfterContent:function(j){var b=j.hasClass("sapUshellTileContainer")?j:j.closest(".sapUshellTileContainer"),d=b.find(".sapUshellTileContainerAfterContent button").filter(":visible");if(d.length){d.focus();return true;}return false;},_goFromFocusedTile:function(d,$,i){var n=this._getNextTile(d);if(n){var N=n.$(),b=$.closest(".sapUshellTileContainer"),e=N.closest(".sapUshellTileContainer");if(i&&(b.get(0).id!==e.get(0).id)){if(d==="down"||d==="right"){if(!this._goToTileContainerAfterContent(b)){this._setTabIndexOnTileContainerHeader(e.find(".sapUshellTileContainerHeader"));this._setTileContainerSelectiveFocus(e);}}else if(d==="up"||d==="left"){var f=b.find(".sapUshellTileContainerHeader");this._setTabIndexOnTileContainerHeader(f);f.focus();}}else{this.moveScrollDashboard(N);}}},_setTabIndexOnTileContainerHeader:function(j){q(".sapUshellTileContainerHeader").attr("tabindex",-1);q(".sapUshellTileContainerHeader .sapUshellContainerTitle").attr("tabindex",-1);q(".sapUshellTileContainerHeader .sapUshellContainerHeaderActions button").attr("tabindex",-1);if(j){var b=j.find(".sapUshellContainerTitle").eq(0),d=j.find(".sapUshellContainerHeaderActions").eq(0);j.attr("tabindex",0);b.attr("tabindex",0);d.find("button").attr("tabindex",0);}},_setTileContainerSelectiveFocus:function(j){var b=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),d=j.find(".sapUshellTileContainerBeforeContent button"),e=j.find(".sapUshellTileContainerHeader").eq(0),B=d.length&&d.is(":visible");if(B){d.focus();}else if(j.get(0)===b.get(0)){this.goToLastVisitedTile();}else if(e.length){this._setTabIndexOnTileContainerHeader(e);e.focus();}},setTileFocus:function(j){if(!j.hasClass("sapUshellPlusTile")){if(j.parents("#catalogView").length>0){this.setFocusOnCatalogTile(j.find("[tabindex]").eq(0));}}var b=q(".sapUshellTile, .sapMGTLineMode, .sapUshellLinkTile, .sapMGT, .sapFCard").filter("[tabindex=0]").get();for(var i=0;i<b.length;i++){b[i].setAttribute("tabindex","-1");}if(j.length>0){j.attr("tabindex",0);if(j.prop("tagName")==="DIV"&&q(j).hasClass("sapUshellLinkTile")&&j.getMode===undefined){j=j.find("a").length?j.find("a")[0]:j;}j.focus();if(j[0]&&j[0].id){var t=sap.ui.getCore().byId(j[0].id);var d=this.tileFocusCustomData.getParent&&this.tileFocusCustomData.getParent();if(d){d.removeAggregation("customData",this.tileFocusCustomData,true);}if(t&&sap.ui.getCore().byId(t.getId())&&this.tileFocusCustomData&&sap.ui.getCore().byId(this.tileFocusCustomData.getId())){t.addAggregation("customData",this.tileFocusCustomData,true);}}}},setFocusOnCatalogTile:function(j){var p=q(".sapUshellTile[tabindex=0]"),b,v;if(p.length){q(".sapUshellTileContainerContent [tabindex=0]").get().forEach(function(h){q(h).attr("tabindex",-1);});b=p.find("[tabindex], a").andSelf().filter("[tabindex], a");b.attr("tabindex",-1);}if(!j){v=q(".sapUshellTile, .sapUshellAppBox").filter(":visible");if(v.length){j=q(v[0]);}else{return;}}j.attr("tabindex",0);j.find("button").attr("tabindex",0);j.focus();},moveScrollDashboard:function(t){if(!t.length){return;}var f=t[0].parentElement.firstChild;var d=document.getElementById("dashboardGroups");var y=f.getBoundingClientRect().top-d.getBoundingClientRect().top;document.getElementById("sapUshellDashboardPage-cont").scrollTop=y;this.setTileFocus(t);},_moveGroupFromDashboard:function(d,j){var b,t=q(".sapUshellDashboardGroupsContainerItem"),i,e;b=j.closest(".sapUshellDashboardGroupsContainerItem");i=t.index(b);e=d==="up"||d==="left"?i-1:i+1;this._moveGroup(i,e);},_moveGroup:function(f,t){if(t<0||t>=q(".sapUshellDashboardGroupsContainerItem").length||t<q(".sapUshellDisableDragAndDrop").length){return;}sap.ui.getCore().getEventBus().publish("launchpad","moveGroup",{fromIndex:f,toIndex:t});var b=this;setTimeout(function(){var d=q(".sapUshellTileContainerHeader")[t];b._setTabIndexOnTileContainerHeader(q(d));q(d).focus();},100);},_getFocusOnTile:function(j){var b;[".sapUshellTile",".sapUshellLinkTile",".sapFCard"].forEach(function(s){var d=j.closest(s);if(d.length){b=d;}});return b;},_renameGroup:function(j){if(j.closest(".sapUshellTileContainerHeader").length===1){j=j[0].tagName==="H2"?j:j.find("h2");j.click();}},_arrowsButtonsHandler:function(d,e,j){this._preventDefault(e);if(j.hasClass("sapUshellAnchorItem")){this._handleAnchorNavigationItemsArrowKeys(d,j);return;}var b=this._getFocusOnTile(j),i=this.oModel.getProperty("/tileActionModeActive");if(e.ctrlKey===true&&this.oModel.getProperty("/personalization")){var f=j.closest(".sapUshellTileContainerHeader");if(b){this._moveTile(d,b);}else if(f.length){var g=f.closest(".sapUshellTileContainerContent");if(!g.hasClass("sapUshellTileContainerDefault")||!g.hasClass("sapUshellTileContainerLocked")){this._moveGroupFromDashboard(d,f);}}}else if(i){this._goToSiblingElementInTileContainer(d,j);}else if(b){this._goFromFocusedTile(d,b,i);}else{this.goToLastVisitedTile();}},_handleAnchorNavigationItemsArrowKeys:function(d,j){var b=q(".sapUshellAnchorItem").filter(":visible"),n=b.index(j),N=j;if(d==="left"||d==="up"){if(n>0){N=b.get(n-1);}}else if(d==="right"||d==="down"){if(n<b.length-1){N=b.get(n+1);}}this._setAnchorItemFocus(q(N));},_setAnchorItemFocus:function(j){q(".sapUshellAnchorItem").get().forEach(function(h){q(h).attr("tabindex",-1);});j.attr("tabindex",0);j.focus();},_appFinderHomeEndButtonsHandler:function(d,e,j){var v=q(".sapUshellTile, .sapUshellAppBox").filter(":visible"),b;if(v.length){if(d==="home"){b=q(v.get(0));}if(d==="end"){b=q(v.get(v.length-1));}}if(b){this._preventDefault(e);this._appFinderFocusAppBox(j,b);}},_homeEndButtonsHandler:function(s,e,j){if(j.hasClass("sapUshellAnchorItem")){this._preventDefault(e);this._setAnchorItemFocus(q(".sapUshellAnchorItem").filter(":visible:"+s));}else if(e.ctrlKey===true){this._preventDefault(e);var b=q(".sapUshellTile, .sapFCard").filter(":visible")[s]();this.moveScrollDashboard(b);}else{var d=j.closest(".sapUshellTileContainer");if(d){var g=d.control(0);if(g){this._preventDefault(e);this._goToTileOfGroup(s,g);}}}},_deleteButtonHandler:function(j){if(this.oModel.getProperty("/personalization")&&this.oModel.getProperty("/tileActionModeActive")){var b=this._getFocusOnTile(j);if(b&&!b.hasClass("sapUshellLockedTile")&&!b.hasClass("sapUshellPlusTile")){var i=this._getGroupAndTilesInfo();if(i){var d=q(".sapUshellDashboardView").control(0),t=d.getController()._getTileUuid(i.oCurTile),e=this;setTimeout(function(){if(i.oCurTile.getDomRef()){e.moveScrollDashboard(i.oCurTile.$());}else{e.moveScrollDashboard(i.oGroup.oPlusTile.$());}},100);sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",{tileId:t},this);}}}},_ctrlPlusArrowKeyButtonsHandler:function(d){var j=q(document.activeElement),b=j.closest(".sapUshellTileContainerHeader");if(this._getFocusOnTile(j)){this._moveTile(d);}else if(b.length){var e=b.closest(".sapUshellTileContainerContent");if(!e.hasClass("sapUshellTileContainerDefault")||!e.hasClass("sapUshellTileContainerLocked")){this._moveGroupFromDashboard(d,b);}}},_spaceButtonHandler:function(e,j){var b=this._getFocusOnTile(j);if(!b||!b.length){j.click();return;}e.preventDefault();if(b.hasClass("sapFCard")){b.control(0).getCardHeader().firePress();return;}b.control(0).firePress();},goToSelectedAnchorNavigationItem:function(){this._setAnchorItemFocus(q(".sapUshellAnchorItemSelected"));return q(document.activeElement).hasClass("sapUshellAnchorItemSelected");},handleFocusOnMe:function(e,f){var r=sap.ushell.Container.getRenderer("fiori2"),h=c;if(r){var s=r.getCurrentCoreView();if(s==="home"&&!C.last("/core/spaces/enabled")){if(f){if(e.shiftKey){var d=window.document.getElementById("sapUshellDashboardFooterDoneBtn");if(d){d.focus();}else{h.goToLastVisitedTile();}}else if(!h.goToSelectedAnchorNavigationItem()){h.goToLastVisitedTile();}}else{var t=document.activeElement?document.activeElement.tagName:"";if(t==="INPUT"||t==="TEXTAREA"){if(e.keyCode===h.keyCodes.ENTER){var j=q(document.activeElement).closest(".sapUshellTileContainerHeader");if(j.length){setTimeout(function(){j=q("#"+j[0].id);h._setTabIndexOnTileContainerHeader(j);j.focus();},10);}}}else{h._dashboardKeydownHandler(e);}}}if(s==="appFinder"){if(f){if(e.shiftKey){h.setFocusOnCatalogTile();}else{var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o&&o.getVisible()){o.focus();}else{h.appFinderFocusMenuButtons(e);}}}else{h._appFinderKeydownHandler(e);}}}},_groupHeaderNavigation:function(j){var b;if(j.hasClass("sapUshellTileContainerHeader")){b=j.find(".sapUshellContainerTitle");b.focus();}else if(j.closest(".sapUshellTileContainerHeader")){b=j.closest(".sapUshellTileContainerHeader");b.focus();}},_appFinderFocusAppBox:function(j,b){if(j&&b){j.attr("tabindex","-1").find(".sapUshellPinButton").attr("tabindex","-1");b.attr("tabindex","0").focus();b.find(".sapUshellPinButton").attr("tabindex","0");}},_preventDefault:function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();},_getNextCatalog:function(d,j){var b;if(d==="down"||d==="right"){b=j.next();}else if(d==="up"||d==="left"){b=j.prev();}else{L.error("Direction is unkown",d,"sap.ushell.components.ComponentKeysHandler");return null;}if(b.length>0){var n=b.find("li.sapUshellAppBox, li.sapUshellTile").get().length;if(n>0){return b;}return this._getNextCatalog(d,b);}},_getNextCatalogItem:function(d,j,p){var b=q(j.parents()[2]),e=b.find("li.sapUshellAppBox, li.sapUshellTile").get();if(d==="right"||d==="left"){var n=e.indexOf(j.get(0)),f=d==="right"?n+1:n-1;if(e[f]){return e[f];}}var g=this._getNextCatalog(d,b),N=g?g.find("li.sapUshellAppBox, li.sapUshellTile").get():[];if(N.length>0&&d==="right"){return N[0];}if(N.length>0&&d==="left"){return N[N.length-1];}if(d==="down"||d==="up"){if(N.length>0&&p){return N[0];}var J=(d==="down")?e.concat(N):N.concat(e);return this._findClosestTile(d,J,j.get(0));}},_appFinderKeysHandler:function(d,e,j,p){if(j.is(".sapUshellAppBox, .sapUshellTile")){this._preventDefault(e);var b=q(this._getNextCatalogItem(d,j,p));if(b){this._appFinderFocusAppBox(j,b);}}},appFinderFocusMenuButtons:function(e){var b=q("#catalog-button, #userMenu-button, #sapMenu-button").filter("[tabindex=0]");if(b.length){b.eq(0).focus();this._preventDefault(e);return true;}return false;},_appFinderKeydownHandler:function(e){var j=q(document.activeElement);if(e.srcElement.id!=="appFinderSearch-I"){var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL();if(i&&p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(i&&p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}switch(p){case this.keyCodes.ARROW_UP:this._appFinderKeysHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._appFinderKeysHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._appFinderKeysHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._appFinderKeysHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._appFinderKeysHandler("up",e,j,true);break;case this.keyCodes.PAGE_DOWN:this._appFinderKeysHandler("down",e,j,true);break;case this.keyCodes.HOME:this._appFinderHomeEndButtonsHandler("home",e,j);break;case this.keyCodes.END:this._appFinderHomeEndButtonsHandler("end",e,j);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;default:return;}}},_dashboardKeydownHandler:function(e){var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL(),j=q(document.activeElement);if(i){if(p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}}switch(p){case this.keyCodes.F2:this._renameGroup(j);break;case this.keyCodes.F7:this._groupHeaderNavigation(j);break;case this.keyCodes.DELETE:case this.keyCodes.BACKSPACE:this._deleteButtonHandler(j);break;case this.keyCodes.ARROW_UP:this._arrowsButtonsHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._arrowsButtonsHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._arrowsButtonsHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._arrowsButtonsHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._goToFirstTileOfNextGroup("up",e);break;case this.keyCodes.PAGE_DOWN:this._goToFirstTileOfNextGroup("down",e);break;case this.keyCodes.HOME:this._homeEndButtonsHandler("first",e,j);break;case this.keyCodes.END:this._homeEndButtonsHandler("last",e,j);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;case this.keyCodes.ENTER:this._spaceButtonHandler(e,j);break;default:break;}return true;},init:function(m){this.oModel=m;}};var c=new a();return c;},true);
sap.ui.predefine('sap/ushell/components/HeaderManager',["sap/ushell/Config","sap/ushell/EventHub","sap/ushell/utils","sap/ushell/utils/clone","sap/ushell/components/StateHelper","sap/ushell/components/_HeaderManager/PropertyStrategiesFactory","sap/base/util/ObjectPath","sap/ui/Device"],function(C,E,u,c,S,g,O,D){"use strict";var h={application:{},centralAreaElement:null,headEndItems:[],headItems:[],headerVisible:true,showLogo:false,ShellAppTitleState:undefined,rootIntent:"",title:""};var H;var a;var o="endItemsOverflowBtn";var s;var B={"blank":{},"blank-home":{},"home":{"headItems":[]},"app":{"headItems":["backBtn","homeBtn"]},"minimal":{"headItems":["homeBtn"]},"standalone":{"headItems":["backBtn"]},"embedded":{"headItems":["backBtn","homeBtn"]},"embedded-home":{"headItems":[]},"headerless":{"headItems":["backBtn","homeBtn"],"headerVisible":false},"merged":{"headItems":["backBtn","homeBtn"]},"headerless-home":{"headerVisible":false},"merged-home":{},"lean":{"headItems":[]},"lean-home":{}};var d=[];function i(I,J){var K=I&&I.appState?I.appState:"home";H=w(I);a=J;s=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;v();_();p(K);q();}function b(){e();}function _(){var I=E.on("setHeaderCentralAreaElement").do(function(P){m({propertyName:"centralAreaElement",value:P.id,aStates:S.getPassStates(P.states),bCurrentState:!!P.currentState,bDoNotPropagate:!!P.bDoNotPropagate});});d.push(I);d.push(E.on("updateHeaderOverflowState").do(f));D.media.attachHandler(f,this,D.media.RANGESETS.SAP_STANDARD);d.push(C.on("/core/shellHeader/headEndItems").do(j));}function e(){if(d){d.forEach(function(I){I.off();});}D.media.detachHandler(f,this,D.media.RANGESETS.SAP_STANDARD);}function f(P){if(P&&P.name){s=P.name;}v();j();}function v(I){var J=C.last("/core/shell/model/currentState/stateName"),K=J==="merged"||J==="headerless",L=C.last("/core/shell/model/currentViewPortState")==="LeftCenter",M=true;if((I||s)==="Phone"&&!L||K){M=false;}m({propertyName:"showLogo",value:M,aStates:["home","app","blank","blank-home","minimal","lean"],bCurrentState:false,bDoNotPropagate:true});}function j(P){var I=C.last("/core/shellHeader/headEndItems"),J=I.indexOf(o)>-1,K=P&&P.name||s,L;if(K==="Phone"&&!J&&I.length>2){k([o],false,["home","app"]);}else if(K!=="Phone"&&J){L=sap.ui.getCore().byId("headEndItemsOverflow");if(L){L.destroy();}r([o],false,["home","app"]);}}function k(I,J,K,L){m({propertyName:"headEndItems",value:I,aStates:K,bCurrentState:!!J,bDoNotPropagate:!!L});}function r(I,J,K){m({propertyName:"headEndItems",value:I,aStates:K,bCurrentState:!!J,action:"remove",bDoNotPropagate:false});}function l(I,J){var K={};Object.keys(I).forEach(function(L){var M=I[L];K[L]=Object.keys(M).reduce(function(T,N){T[N]=M[N];return T;},c(J));});return K;}function m(P){var I=P.propertyName,J=!P.bCurrentState?S.getAllStateToUpdate(P.aStates,P.bDoNotPropagate):[],K=C.last("/core/shellHeader"),L=C.last("/core/shell/model/currentState/stateName"),M=P.value,N;if(I.charAt(0)==="/"){I=I.substring(1);}N=g(I,P.action);if(!N){return;}if(!P.bCurrentState){H=x(H,I,N,J,M);}if(J.indexOf(L)>-1||P.bCurrentState){var Q=O.get(I.split("/"),K),R=N.execute(Q,M);if(Q!==R){O.set(I.split("/"),R,K);z(I,K);}}if(P.bCurrentState){y(I,N,M);}}function n(I){var J;for(J in I){if(I.hasOwnProperty(J)){u.updateProperties(H[J],I[J]);}}}function p(N){var I=H[N];if(!I){throw new Error("the state ("+N+") does not exist");}C.emit("/core/shellHeader",c(I));}function q(I){var J=C.last("/core/shellHeader"),K,L;if(a&&a.customShellState){K=a.customShellState.currentState;}if(I&&a.extendedShellStates[I]){L=a.extendedShellStates[I].customState.currentState;}C.emit("/core/shellHeader",t(J,K,L));}function t(I,J,K){var R={};Object.keys(I).forEach(function(P){var L=g(P),M;if(!L){R[P]=c(I[P]);return;}M=c(I[P]);if(K){M=L.execute(M,K[P]);}if(J){M=L.execute(M,J[P]);}R[P]=M;});R.ShellAppTitleState=C.last("/core/shellHeader/ShellAppTitleState");return R;}function w(I){if(I){h.rootIntent="#"+I.rootIntent;}var J=l(B,h);function K(M,J){var N,P;for(N in J){if(N==="blank"||N==="blank-home"){continue;}if(M==="ActionModeBtn"&&N!=="home"){continue;}if((M==="openCatalogBtn"||M==="userSettingsBtn")&&(N==="lean"||N==="lean-home")){continue;}if(M==="ContactSupportBtn"||M==="EndUserFeedbackBtn"){if(["home","app","minimal","standalone","embedded","embedded-home","lean"].indexOf(N)===-1){continue;}}P=J[N].headEndItems.indexOf(M);if(P===-1){J[N].headEndItems.push(M);}}}function L(T,J){var M;for(M in J){J[M].title=T;}}if(I){if(I.moveEditHomePageActionToShellHeader){K("ActionModeBtn",J);}if(I.moveContactSupportActionToShellHeader){K("ContactSupportBtn",J);}if(I.moveGiveFeedbackActionToShellHeader){K("EndUserFeedbackBtn",J);}if(I.moveAppFinderActionToShellHeader){K("openCatalogBtn",J);}if(I.moveUserSettingsActionToShellHeader){K("userSettingsBtn",J);}if(I.title){L(I.title,J);}}if(C.last("/core/productSwitch/enabled")){K("productSwitchBtn",J);}return J;}function x(I,P,J,K,L){if(K.length===0){return I;}var N=c(I);K.forEach(function(M){var Q=N[M],R;if(Q){R=J.execute(O.get(P.split("/"),Q),L);O.set(P.split("/"),R,Q);}});return N;}function y(P,I,J){var K,N;if(!a){return;}K=a.customShellState.currentState;N=I.execute(O.get(P.split("/"),K),J);O.set(P.split("/"),N,K);}function z(P,I){var R=P.split("/").shift();C.emit("/core/shellHeader/"+R,I[R]);}function A(I){var J;try{J=H[I];}catch(K){J=undefined;}return J;}function F(I,P){var J;try{J=A(I)[P];}catch(K){J=undefined;}return J;}function G(T){H=T;}return{init:i,destroy:b,switchState:p,updateStates:m,recalculateState:q,extendStates:n,validateShowLogo:v,handleEndItemsOverflow:j,_resetBaseStates:G,_generateBaseHeaderState:l,_createInitialState:w,_getBaseState:A,_getBaseStateMember:F};});
sap.ui.predefine('sap/ushell/components/HomepageManager',["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ui/Device","sap/ui/model/Filter","sap/ushell/ui/launchpad/TileState","sap/ushell/components/_HomepageManager/PagingManager","sap/ushell/components/_HomepageManager/DashboardLoadingManager","sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/resources","sap/ushell/components/DestroyHelper","sap/ushell/components/GroupsHelper","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/m/SelectDialog","sap/m/StandardListItem","sap/ushell/components/_HomepageManager/PersistentPageOperationAdapter","sap/ushell/components/_HomepageManager/TransientPageOperationAdapter","sap/ui/model/FilterOperator","sap/m/library","sap/ui/model/Context","sap/m/MessageToast","sap/base/Log","sap/ui/performance/Measurement"],function(Q,B,D,F,T,P,a,e,s,u,r,d,g,m,G,S,b,c,f,h,l,C,M,L,n){"use strict";var o=l.GenericTileScope;var p={PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"};var _=[];var t=false;function v(R){_.push(R);if(!t){t=true;_.shift()();}}function w(){if(_.length===0){t=false;}else{_.shift()();}}function x(){_=[];t=false;}var y=[];return B.extend("sap.ushell.components.HomepageManager",{metadata:{publicMethods:["getModel","getDashboardView","loadPersonalizedGroups","resetGroupsOnFailure","addGroupToModel","addTileToGroup","deleteTilesFromGroup"]},analyticsConstants:p,constructor:function(i,j){if(sap.ushell.components.getHomepageManager){var H=sap.ushell.components.getHomepageManager();if(!H.view){H.setDashboardView(j.view);}return H;}sap.ui.getCore().attachThemeChanged(u.handleTilesVisibility);sap.ushell.components.getHomepageManager=(function(q){return function(){return q;};}(this));this.oPageOperationAdapter=c.getInstance();this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");this.oModel=j.model;this.oRouter=j.router;this.oDashboardView=j.view;this.oSortableDeferred=new Q.Deferred();this.oSortableDeferred.resolve();this.registerEvents();this.tileViewUpdateQueue=[];this.tileViewUpdateTimeoutID=0;this.tileUuid=null;this.bIsGroupsModelLoading=false;this.segmentsStore=[];this.bIsFirstSegment=true;this.bIsFirstSegmentViewLoaded=false;this.aGroupsFrame=null;this.iMinNumOfTilesForBlindLoading=this.oModel.getProperty("/optimizeTileLoadingThreshold")||100;this.bIsScrollModeAccordingKPI=false;this.oGroupNotLockedFilter=new F("isGroupLocked",h.EQ,false);this.bLinkPersonalizationSupported=this.oPageOperationAdapter.isLinkPersonalizationSupported();this.oDashboardLoadingManager=new a("loadingManager",{oDashboardManager:this});if(this.oRouter){var k=this.oRouter.getTarget("home");k.attachDisplay(function(q){this.oDashboardView=q.getParameter("view");}.bind(this));}var E=s.last("/core/home/enableTransientMode");y.push(s.on("/core/home/enableTransientMode").do(function(N){if(E===N){return;}E=N;this._changeMode(N);}.bind(this)));this.oModel.bindProperty("/tileActionModeActive").attachChange(this._changeLinksScope.bind(this));return undefined;},isBlindLoading:function(){var i=s.last("/core/home/homePageGroupDisplay");if((i===undefined||i==="scroll")&&this.bIsScrollModeAccordingKPI){L.info("isBlindLoading reason IsScrollModeAccordingKPI and IsScrollMode: true");return true;}if(this.oModel.getProperty("/tileActionModeActive")){L.info("isBlindLoading reason TileActionModeActive : true");return true;}return false;},createMoveActionDialog:function(i){var j=this.oGroupNotLockedFilter,k=new S(i,{title:r.i18n.getText("moveTileDialog_title"),rememberSelections:false,search:function(E){var V=E.getParameter("value"),q=new F("title",h.Contains,V),z=E.getSource().getBinding("items");z.filter([q,j]);},contentWidth:"400px",contentHeight:"auto",confirm:function(E){var q=E.getParameter("selectedContexts");this.publishMoveActionEvents(q,i);}.bind(this),cancel:function(){var q=Q(".sapUshellTile[tabindex=\"0\"]")[0];if(q){q.focus();}},items:{path:"/groups",filters:[j],template:new b({title:"{title}"})}});return k;},publishMoveActionEvents:function(i,j){var E=sap.ui.getCore().getEventBus();if(i.length){var k=this.tileType==="link"?"links":"tiles",q=i[0].getObject().groupId,z={sTileId:this.tileUuid,sToItems:k,sFromItems:k,sTileType:k,toGroupId:i[0].getObject().groupId,toIndex:i[0].getObject()[this.tileType==="link"?"links":"tiles"].length,source:j};if(D.system.desktop){z.callBack=sap.ushell.components.ComponentKeysHandler.callbackSetFocus.bind(sap.ushell.components.ComponentKeysHandler);}E.publish("launchpad","scrollToGroup",{groupId:q});E.publish("launchpad","movetile",z);}},_changeLinksScope:function(E){var i=this;if(this.bLinkPersonalizationSupported){var I=E.getSource().getValue();this.oModel.getProperty("/groups").forEach(function(j,k){if(!j.isGroupLocked){i._changeGroupLinksScope(j,I?"Actions":"Display");}});}},_changeGroupLinksScope:function(i,j){var k=this;i.links.forEach(function(q,z){k._changeLinkScope(q.content[0],j);});},_changeLinkScope:function(i,j){var k;if(i.getScope){k=i;}else if(i.getContent){k=i.getContent()[0];}if(this.bLinkPersonalizationSupported&&k&&k.setScope){k.setScope(j);}},registerEvents:function(){var E=sap.ui.getCore().getEventBus();E.subscribe("launchpad","addBookmarkTile",this._createBookmark,this);E.subscribe("launchpad","tabSelected",this.getSegmentTabContentViews,this);E.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",this._addBookmarkToModel,this);E.subscribe("sap.ushell.services.Bookmark","catalogTileAdded",this._refreshGroupInModel,this);E.subscribe("sap.ushell.services.Bookmark","bookmarkTileDeleted",this.loadPersonalizedGroups,this);E.subscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);E.subscribe("launchpad","createGroupAt",this._createGroupAt,this);E.subscribe("launchpad","deleteGroup",this._deleteGroup,this);E.subscribe("launchpad","resetGroup",this._resetGroup,this);E.subscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);E.subscribe("launchpad","moveGroup",this._moveGroup,this);E.subscribe("launchpad","deleteTile",this._deleteTile,this);E.subscribe("launchpad","movetile",this._moveTile,this);E.subscribe("launchpad","sortableStart",this._sortableStart,this);E.subscribe("launchpad","sortableStop",this._sortableStop,this);E.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);E.subscribe("launchpad","convertTile",this._convertTile,this);this.oPageBuilderService.registerTileActionsProvider(this._addFLPActionsToTile.bind(this));},_changeMode:function(i){var j=this.getModel().getProperty("/groups");if(i){this.oPageOperationAdapter=f.getInstance();var k=this.oPageOperationAdapter.transformGroupModel(j);this.getModel().setProperty("/groups",k);}else{this.oPageOperationAdapter=c.getInstance();d.destroyFLPAggregationModels(j);this.getModel().setProperty("/groups",[]);this.loadPersonalizedGroups();}},_addFLPActionsToTile:function(i){var j=this.bLinkPersonalizationSupported&&this.oPageOperationAdapter.isLinkPersonalizationSupported(i),A=[];A.push(this._getMoveTileAction(i));if(j){A.push(this._getConvertTileAction(i));}return A;},_getConvertTileAction:function(i){var E=sap.ui.getCore().getEventBus(),j=this,k=j.oPageOperationAdapter.getTileType(i);return{text:k==="link"?r.i18n.getText("ConvertToTile"):r.i18n.getText("ConvertToLink"),press:function(q){var z={tile:q};if(D.system.desktop){z.callBack=sap.ushell.components.ComponentKeysHandler.callbackSetFocus.bind(sap.ushell.components.ComponentKeysHandler);}E.publish("launchpad","convertTile",z);}};},_getMoveTileAction:function(i){var j=this;return{text:r.i18n.getText("moveTileDialog_action"),press:function(){j.tileType=j.oPageOperationAdapter.getTileType(i);j.tileUuid=j.getModelTileById(j.oPageOperationAdapter.getTileId(i),j.tileType==="link"?"links":"tiles").uuid;var k=j.tileType==="tile"?j.moveTileDialog:j.moveLinkDialog;if(j.tileType==="tile"||j.tileType==="link"){if(!k){k=j.createMoveActionDialog("move"+j.tileType+"Dialog");k.setModel(j.oModel);if(j.tileType==="tile"){j.moveTileDialog=k;}else{j.moveLinkDialog=k;}}else{k.getBinding("items").filter([j.oGroupNotLockedFilter]);}k.open();}}};},_handleTileAppearanceAnimation:function(j){if(!j){return;}var k=["webkit",""];function q(z,A){for(var i=0;i<k.length;i++){A=A.toLowerCase();j.attachBrowserEvent(k[i]+A,function(E){if(E.originalEvent&&E.originalEvent.animationName==="sapUshellTileEntranceAnimation"){j.removeStyleClass("sapUshellTileEntrance");}},false);}}q(j,"AnimationEnd");j.addStyleClass("sapUshellTileEntrance");},destroy:function(){var E=sap.ui.getCore().getEventBus();E.unsubscribe("launchpad","addBookmarkTile",this._createBookmark,this);E.unsubscribe("launchpad","loadDashboardGroups",this.loadPersonalizedGroups,this);E.unsubscribe("launchpad","createGroupAt",this._createGroupAt,this);E.unsubscribe("launchpad","deleteGroup",this._deleteGroup,this);E.unsubscribe("launchpad","resetGroup",this._resetGroup,this);E.unsubscribe("launchpad","changeGroupTitle",this._changeGroupTitle,this);E.unsubscribe("launchpad","moveGroup",this._moveGroup,this);E.unsubscribe("launchpad","deleteTile",this._deleteTile,this);E.unsubscribe("launchpad","movetile",this._moveTile,this);E.unsubscribe("launchpad","sortableStart",this._sortableStart,this);E.unsubscribe("launchpad","sortableStop",this._sortableStop,this);E.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);sap.ui.getCore().detachThemeChanged(u.handleTilesVisibility);y.forEach(function(i){i.off();});c.destroy();f.destroy();sap.ushell.components.getHomepageManager=undefined;B.prototype.destroy.apply(this,arguments);},_sortableStart:function(){this.oSortableDeferred=new Q.Deferred();},_createBookmark:function(i,E,j){var k=j.group?j.group.object:"";delete j.group;function q(){sap.ushell.Container.getServiceAsync("Bookmark").then(function(z){z.addBookmark(j,k).always(w).done(function(){m.showLocalizedMessage("tile_created_msg");}).fail(function(A){L.error("Failed to add bookmark",A,"sap.ushell.ui.footerbar.AddBookmarkButton");m.showLocalizedError("fail_to_add_tile_msg");});});}v(q);},_addBookmarkToModel:function(i,E,j){var k=j.tile,q,z=j.group,A,H,I,N,J;if(!j||!k){this.bIsGroupsModelDirty=true;if(!this.bGroupsModelLoadingInProcess){this._handleBookmarkModelUpdate();}return;}if(!z){q=this.getModel().getProperty("/groups");for(J=0;J<q.length;J++){if(q[J].isDefaultGroup===true){z=q[J].object;break;}}}H=this._getIndexOfGroupByObject(z);I=this.oModel.getProperty("/groups/"+H);A=this.oPageOperationAdapter.getPreparedTileModel(k,I.isGroupLocked);this.getTileView(A);I.tiles.push(A);I.visibilityModes=u.calcVisibilityModes(I,true);N=I.tiles.length;this._updateModelWithTileView(H,N);this.oModel.setProperty("/groups/"+H,I);},_refreshGroupInModel:function(i,E,j){var k=this;this.oPageOperationAdapter.refreshGroup(j).then(function(q){if(!q){return;}var z=k._getIndexOfGroupByObject(q.object);q.visibilityModes=u.calcVisibilityModes(q.object,true);k.oModel.setProperty("/groups/"+z,q);if(q.tiles){q.tiles.forEach(function(A){k.getTileView(A);});}});},_sortableStop:function(){this.oSortableDeferred.resolve();},_handleAfterSortable:function(i){return function(){var j=Array.prototype.slice.call(arguments);this.oSortableDeferred.done(function(){i.apply(null,j);});}.bind(this);},_createGroupAt:function(j,E,k){var q=parseInt(k.location,10),z=this.oModel.getProperty("/groups"),A=this.oPageOperationAdapter.getPreparedGroupModel(null,false,q===z.length,k),H=this.oModel,i;A.index=q;z.splice(q,0,A);for(i=0;i<z.length-1;i++){z[i].isLastGroup=false;}for(i=q+1;i<z.length;i++){z[i].index++;}H.setProperty("/groups",z);},_getIndexOfGroupByObject:function(i){var j=this.oModel.getProperty("/groups");return this.oPageOperationAdapter.getIndexOfGroup(j,i);},getTileActions:function(i){return this.oPageOperationAdapter.getTileActions(i);},addTileToGroup:function(i,j){var k=i+"/tiles",q=this.oModel.getProperty(i),N=this.oModel.getProperty(k).length;var z=this.oModel.getProperty(i+"/isGroupLocked"),A=this.oModel.getProperty("/personalization");q.tiles[N]=this.oPageOperationAdapter.getPreparedTileModel(j,z);this.getTileView(q.tiles[N]);q.visibilityModes=u.calcVisibilityModes(q,A);this._updateModelWithTileView(q.index,N);this.oModel.setProperty(i,q);},addTilesToGroupByCatalogTileId:function(j,k){var q=j.getBindingContext();for(var i=0;i<k.length;i++){this.addTileToGroupByCatalogTileId(q.sPath,k[i]);}},addTileToGroupByCatalogTileId:function(i,j){var N,k,q;if(!s.last("/core/home/enableTransientMode")){return;}q=this.oPageOperationAdapter.getTileModelByCatalogTileId(j);if(!q){return;}this.oDashboardLoadingManager.setTileResolved(q);N=this.oModel.getProperty(i+"/tiles").length;k=this.oModel.getProperty(i);k.tiles[N]=q;this.oModel.setProperty(i,k);},_getPathOfTile:function(i){var j=this.oModel.getProperty("/groups"),k=null,q=null,z,E=function(A,H){if(H.uuid===i){q=A;return false;}return undefined;};Q.each(j,function(A,H){Q.each(H.tiles,E);if(q!==null){k=A;z="tiles";return false;}Q.each(H.links,E);if(q!==null){k=A;z="links";return false;}return undefined;});return k!==null?"/groups/"+k+"/"+z+"/"+q:null;},_moveInArray:function(A,i,j){if(j>=A.length){var k=j-A.length;while((k--)+1){A.push(undefined);}}A.splice(j,0,A.splice(i,1)[0]);},_updateGroupIndices:function(A){var k;for(k=0;k<A.length;k++){A[k].index=k;}},_deleteGroup:function(i,E,j){var k=this,q=this.oModel,z=j.groupId,A=q.getProperty("/groups"),H=g.getIndexOfGroup(A,z),I=A.length-1===H,J=null,K,N;K=I?H-1:H;d.destroyFLPAggregationModel(q.getProperty("/groups/"+H));J=A.splice(H,1)[0];if(I){q.setProperty("/groups/"+K+"/isLastGroup",I);}q.setProperty("/groups",A);this._updateGroupIndices(A);if(K>=0){N=sap.ui.getCore().getEventBus();window.setTimeout(Q.proxy(N.publish,N,"launchpad","scrollToGroup",{groupId:q.getProperty("/groups")[K].groupId}),200);}function O(){k.oPageOperationAdapter.deleteGroup(J).then(function(){m.showLocalizedMessage("group_deleted_msg",[J.title]);w();},function(){k._resetGroupsOnFailure("fail_to_delete_group_msg");});}v(O);},_resetGroup:function(i,E,j){var k=this,q=j.groupId,z=this.oModel,A=z.getProperty("/groups"),H=g.getIndexOfGroup(A,q),I=k.oModel.getProperty("/groups/indexOfDefaultGroup")===H,J=z.getProperty("/groups/"+H),K,N;z.setProperty("/groups/"+H+"/sortable",false);function O(){k.oPageOperationAdapter.resetGroup(J,I).then(function(R){k._handleAfterSortable(function(q,U,V){var A=k.oModel.getProperty("/groups"),H=g.getIndexOfGroup(A,q);k._loadGroup(H,V||U);m.showLocalizedMessage("group_reset_msg",[U.title]);k.oModel.setProperty("/groups/"+H+"/sortable",true);K=sap.ui.getCore().byId("dashboardGroups").getGroupControlByGroupId(q);N=K.getBindingContext().getObject().links;if(N&&N.length&&!K.getIsGroupLocked()){k._changeGroupLinksScope(K.getBindingContext().getObject(),k.oModel.getProperty("/tileActionModeActive")?o.Actions:o.Display);}if(K){K.rerender();e.emit("updateGroups",Date.now());u.handleTilesVisibility();}})(q,J,R);w();},function(){k._resetGroupsOnFailure("fail_to_reset_group_msg");});}v(O);},_moveGroup:function(j,E,k){if(isNaN(k.fromIndex)){return;}var q=k.fromIndex,z=k.toIndex,A=this.oModel,H=A.getProperty("/groups"),I=A.getProperty("/tileActionModeActive"),J,K,N=this,i,O;if(!I){q=this._adjustFromGroupIndex(q,H);}J=H[q];K=J.groupId;if(!I){z=this._adjustToGroupIndex(z,H,K);}O=H[z];this._moveInArray(H,q,z);this._updateGroupIndices(H);for(i=0;i<H.length-1;i++){H[i].isLastGroup=false;}H[H.length-1].isLastGroup=true;A.setProperty("/groups",H);function R(){H=A.getProperty("/groups");var J=A.getProperty(g.getModelPathOfGroup(H,K));if(!J.object){return;}N.oPageOperationAdapter.getOriginalGroupIndex(O,H).then(function(U){var V={iFromIndex:q,iToIndex:z};return N.oPageOperationAdapter.moveGroup(J,U,V);}).then(w,function(){N._resetGroupsOnFailure("fail_to_move_group_msg");});}v(R);},_adjustToGroupIndex:function(j,k,q){var z=0,I=false,i=0;for(i=0;i<k.length&&z<j;i++){if(k[i].isGroupVisible){if(k[i].groupId===q){I=true;}else{z++;}}}if(I){return i-1;}return i;},_adjustFromGroupIndex:function(j,k){var q=0,i;for(i=0;i<k.length;i++){if(k[i].isGroupVisible){q++;}if(q===j+1){return i;}}return j;},_changeGroupTitle:function(i,E,j){var k=this,N=j.newTitle,q=this.oModel.getProperty("/groups"),z=j.groupId,A=g.getIndexOfGroup(q,z),H=k.oModel.getProperty("/groups/indexOfDefaultGroup")===A,I=this.oModel.getProperty("/groups/"+A),O=I.title;this.oModel.setProperty("/groups/"+A+"/title",N);function J(){var R;if(I.isLastGroup){R=k.oPageOperationAdapter.addGroupAt(I,undefined,H);}else{var U=k.oModel.getProperty("/groups")[A+1];R=k.oPageOperationAdapter.getOriginalGroupIndex(U,q).then(function(V){return k.oPageOperationAdapter.addGroupAt(I,V,H);});}R.then(function(V){k._handleAfterSortable(function(W,X){var Y=k.oModel.getProperty("/groups"),Z=g.getIndexOfGroup(Y,W);k._loadGroup(Z,X);})(z,V);w();},function(){k._resetGroupsOnFailure("fail_to_create_group_msg");});}function K(){this.oPageOperationAdapter.renameGroup(I,N,O).then(function(){w();},function(){k._resetGroupsOnFailure("fail_to_rename_group_msg");});}if(!I.object){w.call(this);v(J.bind(this));}else{v(K.bind(this));}},addGroupToModel:function(i){var j=this.oPageOperationAdapter.getPreparedGroupModel(i,false,true,{isRendered:true}),k=this.oModel.getProperty("/groups"),q=k.length,z;if(q>0){k[q-1].isLastGroup=false;}j.index=q;k.push(j);this.oModel.setProperty("/groups/",k);z=new C(this.oModel,"/groups/"+q);return z;},_deleteTile:function(i,E,j){var k=this,q=j.tileId,z=this.oModel.getProperty("/groups"),I=j.items||"tiles";Q.each(z,function(A,H){var J=false;Q.each(H[I],function(K,N){if(N.uuid!==q){return true;}d.destroyTileModel(k.oModel.getProperty("/groups/"+A+"/"+I+"/"+K));var O=H[I].splice(K,1)[0],R=k.oModel.getProperty("/personalization");H.visibilityModes=u.calcVisibilityModes(H,R);k.oModel.setProperty("/groups/"+A,H);function U(){k.oPageOperationAdapter.removeTile(H,O).then(function(){w();},function(){k._resetGroupsOnFailure("fail_to_remove_tile_msg");});}v(U);u.handleTilesVisibility();J=true;return false;});return!J;});},deleteTilesFromGroup:function(i,R){var j=this.oModel.getProperty("/groups"),k=g.getIndexOfGroup(j,i),q=this.oModel.getProperty("/groups/"+k),z=[];["tiles","links"].forEach(function(A){z=q[A].filter(function(E){if(R.indexOf(E.uuid)<0){return true;}return false;});q[A]=z;});q.visibilityModes=u.calcVisibilityModes(q,true);this.oModel.setProperty("/groups/"+k,q);},_getGroupIndex:function(i){var j=this.oModel.getProperty("/groups"),k=this._getNewGroupInfo(j,i);if(k){return k.newGroupIndex;}return undefined;},_convertTile:function(i,E,j){var k=j.tile?j.tile:j,q=j.srcGroupId?this._getGroupIndex(j.srcGroupId):undefined,z=j.srcGroupId?this.oModel.getProperty("/groups/"+q):k.getParent().getBindingContext().getObject(),A=k.getBindingContext().sPath.split("/"),H=k.getBindingContext().getObject(),O=A[A.length-2],I=H.uuid,J=parseInt(A[A.length-1],10),K=j.toIndex!==undefined?j.toIndex:undefined,N=this.oModel.getProperty("/tileActionModeActive"),R=j.toGroupId?this._getGroupIndex(j.toGroupId):z.index,U=j.toGroupId?this.oModel.getProperty("/groups/"+R):z,V=this;var W=this._getIndexForConvert(O,J,K,z,U),X={"tileIndex":J,"groupIndex":q,"group":z};function Y(){H.tileIsBeingMoved=true;var Z=this.oPageOperationAdapter.moveTile(H,W,z,U,O==="links"?"tile":"link");Z.then(function($){V._showMoveTileMessage(H,z,U);V._handleAfterSortable(function(I,$){var a1=V._getPathOfTile(I),b1=$.content;if(a1){if(O==="tiles"){V._attachLinkPressHandlers(b1);V._addDraggableAttribute(b1);V._changeLinkScope(b1,N?"Actions":"Display");}var c1={"tileIndex":K,"groupIndex":R,"group":U},d1={"tile":H,"view":b1,"type":O,"tileObj":$.object};H.tileIsBeingMoved=true;V.replaceTileViewAfterConvert(X,c1,d1);e.emit("updateGroups",Date.now());u.handleTilesVisibility();if(j.callBack){j.callBack(b1);}}})(I,$);w();},function(){V._handleAfterSortable(V._resetGroupsOnFailure.bind(V))("fail_to_move_tile_msg");});}v(Y.bind(this));},replaceTileViewAfterConvert:function(i,j,k){var q=k.tile,z=q.content;q.tileIsBeingMoved=false;q.content=[k.view];q.object=k.tileObj;q.originalTileId=this.oPageOperationAdapter.getTileId(k.tileObj);i.group[k.type].splice(i.tileIndex,1);if(j.tileIndex!==undefined){j.group[k.type==="tiles"?"links":"tiles"].splice(j.tileIndex,0,q);}else{j.group[k.type==="tiles"?"links":"tiles"].push(q);}this.oModel.setProperty("/groups/"+j.groupIndex,j.group);this.oModel.setProperty("/groups/"+i.groupIndex,i.group);if(k.type==="links"){this._handleTileAppearanceAnimation(q.content[0].getParent());}else{this._handleTileAppearanceAnimation(q.content[0]);}if(z&&z[0]){z[0].destroy();}},_getIndexForConvert:function(i,j,k,q,z){var A;if(i==="tiles"){if(k!==undefined){A=z[i].length+k;}else{A=z[i].length+z.links.length;}if(q.groupId===z.groupId){A--;}}else{A=k||q.tiles.length;j+=q.tiles.length;}return{"tileIndex":j,"newTileIndex":A};},_getIndexForMove:function(i,j,k,q,z){var A;if(i==="tiles"){A=k!==undefined?k:q[i].length;}else{if(k!==undefined){A=q.tiles.length+k;}else{A=q.tiles.length+q.links.length;}j+=z.tiles.length;}return{"tileIndex":j,"newTileIndex":A};},_getTileInfo:function(i,j,I){var k;Q.each(i,function(q,z){var A=false;Q.each(z[I],function(E,H){if(H.uuid===j){k={"oTile":H,"tileIndex":E,"oGroup":z,"groupIndex":q};A=true;return false;}return undefined;});return!A;});return k;},_getNewGroupInfo:function(i,N){var j;Q.each(i,function(k,q){if(q.groupId===N){j={"oNewGroup":q,"newGroupIndex":k};}});return j;},_moveTile:function(i,E,j){var k=j.toIndex,N=j.toGroupId,q=j.sTileId,z=j.source,A=j.sTileType==="tiles"||j.sTileType==="tile"?"tile":"link",H=j.sToItems,I=j.sFromItems,J=this.oModel.getProperty("/tileActionModeActive"),K=this.oModel.getProperty("/groups"),O,R,U,V,W,X={},Y=this;V=this._getTileInfo(K,q,I);W=this._getNewGroupInfo(K,N);if(V.oGroup.groupId===W.oNewGroup.groupId&&(z==="movetileDialog"||k===null||z==="movelinkDialog")){if(j.callBack&&V.oTile&&V.oTile.content&&V.oTile.content.length){j.callBack(V.oTile.content[0]);}return;}if(A==="link"){V.oTile.content[0].addStyleClass("sapUshellZeroOpacity");}if(A==="tile"&&H==="tiles"){if(k&&k>W.oNewGroup[H].length){k=W.oNewGroup[H].length;}}if(V.oGroup.groupId===N&&H===I){if(k===null||k===undefined){V.oGroup[H].splice(V.tileIndex,1);k=V.oGroup[H].length;V.oGroup[H].push(V.oTile);}else{k=this._adjustTileIndex(k,V.oTile,V.oGroup,H);this._moveInArray(V.oGroup[H],V.tileIndex,k);}this.oModel.setProperty("/groups/"+V.groupIndex+"/"+H,V.oGroup[H]);}else{U=this.oModel.getProperty("/personalization");V.oGroup[I].splice(V.tileIndex,1);V.oGroup.visibilityModes=u.calcVisibilityModes(V.oGroup,U);this.oModel.setProperty("/groups/"+V.groupIndex+"/"+I,V.oGroup[I]);if(k===null||k===undefined){k=W.oNewGroup[H].length;W.oNewGroup[H].push(V.oTile);}else{k=this._adjustTileIndex(k,V.oTile,W.oNewGroup,H);W.oNewGroup[H].splice(k,0,V.oTile);}W.oNewGroup.visibilityModes=u.calcVisibilityModes(W.oNewGroup,U);this.oModel.setProperty("/groups/"+W.newGroupIndex+"/"+H,W.oNewGroup[H]);}e.emit("updateGroups",Date.now());u.handleTilesVisibility();O=this.oModel.getProperty("/groups/"+V.groupIndex);R=this.oModel.getProperty("/groups/"+W.newGroupIndex);X=this._getIndexForMove(I,V.tileIndex,k,W.oNewGroup,O);function Z(){V.oTile.tileIsBeingMoved=true;this.oPageOperationAdapter.moveTile(V.oTile,X,O,R,A).then(function($){var a1=Y._getPathOfTile(q);Y._showMoveTileMessage(V.oTile,O,R);if(a1){Y.oModel.setProperty(a1+"/object",$.object);Y.oModel.setProperty(a1+"/originalTileId",$.originalTileId);var b1=Y.oModel.getProperty(a1+"/content"),c1=$.content;if(H==="links"){Y._changeLinkScope(c1,J?"Actions":"Display");Y._attachLinkPressHandlers(c1);Y._addDraggableAttribute(c1);Y._handleTileAppearanceAnimation(c1);V.oTile.content=[c1];Y.oModel.setProperty(a1,Q.extend({},V.oTile));Y.oModel.setProperty("/groups/"+W.newGroupIndex+"/"+H,Y.oModel.getProperty("/groups/"+W.newGroupIndex+"/"+H));}else{Y.oModel.setProperty(a1+"/content",[c1]);}if(b1&&b1[0]){var d1=c1.onAfterRendering;c1.onAfterRendering=function(){d1.apply(this);b1[0].destroy();c1.onAfterRendering=d1;};}Y.oModel.setProperty(a1+"/tileIsBeingMoved",false);if(j.callBack){j.callBack(c1);}}w();},function(){Y._resetGroupsOnFailure("fail_to_move_tile_msg");});}v(Z.bind(this));},_showMoveTileMessage:function(i,j,k){var q=this.oPageOperationAdapter.getTileTitle(i),z=k.title,A=r.i18n.getText("added_tile_to_group"),E=q+" "+A+" "+z;if(j.groupId!==k.groupId){M.show(E);}},_adjustTileIndex:function(j,k,q,I){var z=0,A=false,i=0;for(i=0;i<q[I].length&&z<j;i++){if(q[I][i].isTileIntentSupported){if(q[I][i]===k){A=true;}else{z++;}}}if(A){return i-1;}return i;},getModel:function(){return this.oModel;},getDashboardView:function(){return this.oDashboardView;},setDashboardView:function(i){this.oDashboardView=i;return this;},setTileVisible:function(i,V){this.oPageOperationAdapter.setTileVisible(i.object,V);},refreshTile:function(i){this.oPageOperationAdapter.refreshTile(i.object);},updateSettings:function(i){this.oModel=i.model||this.oModel;this.oConfig=i.config||this.oConfig;this.oRouter=i.router||this.oRouter;this.oDashboardView=i.view||this.oDashboardView;},_resetGroupsOnFailure:function(i,j){x();m.showLocalizedError(i,j);this.bStartLoadRemainSegment=false;this.loadPersonalizedGroups();this.oModel.updateBindings(true);},resetGroupsOnFailure:function(){this._resetGroupsOnFailure.apply(this,arguments);},_bindSegment:function(i,j){var k,q,z,A;for(k=0;k<j.length;k++){z=j[k];A=z.index;q=i[A];if(q){q.isRendered=true;q.tiles=q.tiles.concat(z.tiles);q.links=q.links.concat(z.links);}}return i;},createGroupsModelFrame:function(i,j){var k,q=[],O,z;z=function(A){var E=Q.extend({},A);E.tiles=[];E.pendingLinks=[];E.links=[];return E;};for(k=0;k<i.length;k++){O=i[k];q[k]=z(O);q[k].isRendered=false;q[k].visibilityModes=u.calcVisibilityModes(O,j);}return q;},_splitGroups:function(i,j){var k,q=[],z=0,I=this.oModel.getProperty("/homePageGroupDisplay")==="tabs",A=0,E;var H=500;for(k=0;k<i.length;k++){E=i[k];q.push(E);if(!this.segmentsStore.length){z+=this.PagingManager.getGroupHeight(E,j===k);}else{A+=E.tiles.length+E.links.length;}if(I&&!this.segmentsStore.length&&z>0){q.loadTilesView=true;this.segmentsStore.push(q);q=[];z=0;}if(z>=1||A>=H){this.segmentsStore.push(q);q=[];z=0;A=0;}}if(q.length){this.segmentsStore.push(q);}},_processSegment:function(i){var j=this.segmentsStore.shift();if(!j){return i;}if(this.isBlindLoading()===false){if(this.oModel.getProperty("/homePageGroupDisplay")!=="tabs"||j.loadTilesView){this.getSegmentContentViews(j);}}i=this._bindSegment(i,j);return i;},getSegmentContentViews:function(i){var j,k,q,z;for(j=0;j<i.length;j++){q=i[j];for(k=0;k<q.tiles.length;k++){z=q.tiles[k];if(z.isTileIntentSupported){this.getTileView(z);}}for(k=0;k<q.links.length;k++){z=q.links[k];if(z.isTileIntentSupported){this.getTileView(z,q.index);}}}this.bIsFirstSegmentViewLoaded=true;},getSegmentTabContentViews:function(i,E,j){var k,q,z=j.iSelectedGroup,A;A=this.oModel.getProperty("/groups/"+z);for(k=0;k<A.tiles.length;k++){q=A.tiles[k];if(q.isTileIntentSupported){this.getTileView(q);}}for(k=0;k<A.links.length;k++){q=A.links[k];if(q.isTileIntentSupported){this.getTileView(q,z);}}},_handleBookmarkModelUpdate:function(){this.bIsGroupsModelDirty=false;this.bGroupsModelLoadingInProcess=true;this.loadPersonalizedGroups();},_modelLoaded:function(){this.bGroupsModelLoadingInProcess=false;if(this.bIsGroupsModelDirty){this._handleBookmarkModelUpdate();}},handleFirstSegmentLoaded:function(){var i=this.oModel.getProperty("/groups");if(this.aGroupsFrame){Array.prototype.push.apply(i,this.aGroupsFrame);this.aGroupsFrame=null;}this._initializeAnchorNavigationBar();if(!this.bStartLoadRemainSegment){this._processRemainingSegments();}},_initializeAnchorNavigationBar:function(){var A,i=sap.ushell.components.getHomepageManager().getDashboardView();A=i.getAnchorItemTemplate();this.oDashboardView.oAnchorNavigationBar.bindAggregation("groups",{path:"/groups",template:A});},_processRemainingSegments:function(){var U;if(this.segmentsStore.length>0){window.setTimeout(function(){U=this._processSegment(this.oModel.getProperty("/groups"));this.oModel.setProperty("/groups",U);this.bIsFirstSegment=false;this._processRemainingSegments();}.bind(this),0);}else{this.bIsGroupsModelLoading=false;this._updateModelWithTileView(0,0);u.handleTilesVisibility();sap.ui.getCore().getEventBus().publish("launchpad","dashboardModelContentLoaded");e.emit("updateGroups",Date.now());}},_setGroupModel:function(j){if(this.bIsGroupsModelLoading){L.info("Skip set the group model, because the group model is still loading");return;}var i=0,k,q=0,z=0,A=0,E,H,I=null,J,K,N=[];this.bIsGroupsModelLoading=true;try{q=this.oModel.getProperty("/groups").length;}catch(O){}for(i=j.length;i<q;++i){d.destroyFLPAggregationModel(this.oModel.getProperty("/groups/"+i));}if(!this.PagingManager){var R=Q("#dashboardGroups").width();if(!R){R=window.innerWidth;}var U=Q("#sapUshellDashboardPage-cont").height();if(U<100){U=window.innerHeight;}this.PagingManager=new P("dashboardPaging",{supportedElements:{tile:{className:"sapUshellTile"},link:{className:"sapUshellLinkTile"}},containerHeight:U,containerWidth:R});}j.forEach(function(V){if(V.isGroupVisible){z+=V.tiles.length;}});this.bIsScrollModeAccordingKPI=z>this.iMinNumOfTilesForBlindLoading;this.aGroupsFrame=this.createGroupsModelFrame(j,this.oModel.getProperty("/personalization"));for(i=0;i<this.aGroupsFrame.length;i++){if(this.aGroupsFrame[i].isGroupVisible&&this.aGroupsFrame[i].visibilityModes[0]){if(I===null){I=i;this.aGroupsFrame[i].isGroupSelected=true;this.oModel.setProperty("/iSelectedGroup",i);}A++;if(A>1){this.aGroupsFrame[I].showGroupHeader=false;break;}}}this._splitGroups(j,I);H=this.segmentsStore[0]?this.segmentsStore[0].length:0;E=this.aGroupsFrame.splice(0,H);n.start("FLP:DashboardManager._processSegment","_processSegment","FLP");N=this._processSegment(E);j.every(function(V,W){if(V.isDefaultGroup){k=W;return false;}return true;});N.indexOfDefaultGroup=k;if(this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){J=this.getDashboardView();if(J){K=J.oDashboardGroupsBox;K.getBinding("groups").filter([J.oFilterSelectedGroup]);}}n.end("FLP:DashboardManager._processSegment");this.oModel.setProperty("/groups",N);this.aGroupModel=N;if(this.oDashboardView){e.once("firstSegmentCompleteLoaded").do(function(){u.setPerformanceMark("FLP-TTI-Homepage",{bUseUniqueMark:true});}).do(this.handleFirstSegmentLoaded.bind(this));}else{setTimeout(function(){Array.prototype.push.apply(this.aGroupModel,this.aGroupsFrame);this.aGroupsFrame=null;this.bStartLoadRemainSegment=true;this._processRemainingSegments();}.bind(this),0);}if(this.bIsFirstSegmentViewLoaded){e.emit("firstSegmentCompleteLoaded",true);}n.end("FLP:DashboardManager.loadGroupsFromArray");Q.sap.flpmeasure.end(0,"Process & render the first segment/tiles");},getPreparedGroupModel:function(){return this.aGroupModel;},_loadGroup:function(i,N){var j=this,k="/groups/"+i,O=j.oModel.getProperty(k),I=O.isLastGroup,q=O.groupId;d.destroyFLPAggregationModel(O);if(q){N.groupId=q;}N.isLastGroup=I;N.index=i;N.isRendered=true;this.oModel.setProperty(k,N);},_hasPendingLinks:function(j){for(var i=0;i<j.length;i++){if(j[i].content[0]===undefined){return true;}}return false;},_addModelToTileViewUpdateQueue:function(i,j){this.tileViewUpdateQueue.push({uuid:i,view:j});},_updateModelWithTileView:function(i,j){var k=this;if(this.tileViewUpdateTimeoutID){clearTimeout(this.tileViewUpdateTimeoutID);}this.tileViewUpdateTimeoutID=window.setTimeout(function(){k.tileViewUpdateTimeoutID=undefined;k.oSortableDeferred.done(function(){k._updateModelWithTilesViews(i,j);});},50);},_updateGroupModelWithTilesViews:function(i,k,z,A){var E,U,H,I,J=k||0;for(var j=J;j<i.length;j=j+1){E=i[j];for(var q=0;q<this.tileViewUpdateQueue.length;q++){U=this.tileViewUpdateQueue[q];if(E.uuid===U.uuid){z.push(q);if(U.view){if(A){E.content=[U.view];}else{E.content[0].destroy();E.content=[U.view];}this.oDashboardLoadingManager.setTileResolved(E);H=this.oPageOperationAdapter.getTileSize(E.object);I=((H!==null)&&(H==="1x2"))||false;if(E.long!==I){E.long=I;}}else{E.content[0].setState("Failed");}break;}}}},_updateModelWithTilesViews:function(j,k){var q=this.oModel.getProperty("/groups"),z=j||0,A=[];if(!q||this.tileViewUpdateQueue.length===0){return;}for(var i=z;i<q.length;i=i+1){this._updateGroupModelWithTilesViews(q[i].tiles,k,A);if(q[i].links){this._updateGroupModelWithTilesViews(q[i].links,k,A,true);if(q[i].pendingLinks.length>0){if(!q[i].links){q[i].links=[];}q[i].links=q[i].links.concat(q[i].pendingLinks);q[i].pendingLinks=[];}}}var E=[],H;for(H=0;H<this.tileViewUpdateQueue.length;H++){if(A.indexOf(H)===-1){E.push(this.tileViewUpdateQueue[H]);}}this.tileViewUpdateQueue=E;this.oModel.setProperty("/groups",q);},getModelTileById:function(i,I){var j=this.oModel.getProperty("/groups"),k,q=false;j.every(function(z){z[I].every(function(A){if(A.uuid===i||A.originalTileId===i){k=A;q=true;}return!q;});return!q;});return k;},_addDraggableAttribute:function(V){if(this.isIeHtml5DnD()){V.addEventDelegate({onAfterRendering:function(){this.$().attr("draggable","true");}.bind(V)});}},_attachLinkPressHandlers:function(V){var E=sap.ui.getCore().getEventBus(),i=V.attachPress?V:V.getContent()[0];i.attachPress(function(j){var k=V.getBindingContext().getObject().tileIsBeingMoved;if(!k&&this.getScope&&this.getScope()==="Actions"){switch(j.getParameters().action){case"Press":var q=V.getState?V.getState():"";if(q!=="Failed"){sap.ushell.components.homepage.ActionMode._openActionsMenu(j,V);}break;case"Remove":var z=V.getBindingContext().getObject().uuid;E.publish("launchpad","deleteTile",{tileId:z,items:"links"});break;default:break;}}else{E.publish("launchpad","dashboardTileLinkClick");}});},handleDisplayModeChange:function(N){this.oModel.setProperty("/homePageGroupDisplay",N);switch(N){case"scroll":this._handleDisplayModeChangeToScroll();break;case"tabs":this._handleDisplayModeChangeToTabs();break;}},_handleDisplayModeChangeToTabs:function(){var j=this.oModel.getProperty("/iSelectedGroup"),k=this.oModel.getProperty("/groups");if(k.length>0){for(var i=0;i<k.length;i++){this.oModel.setProperty("/groups/"+i+"/isGroupSelected",false);}this.oModel.setProperty("/groups/"+j+"/isGroupSelected",true);}},_handleDisplayModeChangeToScroll:function(){if(this.isBlindLoading()){return;}var k=this.oModel.getProperty("/groups"),q,z,A,E=[],i,j;for(i=0;i<k.length;i++){q=k[i];z=q.tiles||[];for(j=0;j<z.length;j++){A=z[j];if(A.content.length===0){this.getTileView(A,i);}}E=q.links||[];for(j=0;j<E.length;j++){this.getTileView(E[j],i);}}this.oModel.refresh(false);var H=this.oModel.getProperty("/iSelectedGroup");if(H){setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","scrollToGroup",{groupId:k[H].groupId});},100);}},getTileViewsFromArray:function(R){var i=this;if(R.length===0){return;}R.forEach(function(j){i.getTileView(j.oTile,j.iGroup);});this.oModel.refresh(false);if(this.bIsFirstSegmentViewLoaded===false){this.bIsFirstSegmentViewLoaded=true;e.emit("firstSegmentCompleteLoaded",true);}},getTileView:function(i,j){var k=this.oPageOperationAdapter.getTileType(i.object);if(this.oDashboardLoadingManager.isTileViewRequestIssued(i)){return;}this.oDashboardLoadingManager.setTileInProgress(i);this.oPageOperationAdapter.setTileVisible(i.object,false);if(k==="card"){this._loadCardData(i);}else{this._loadTileData(i,j,k);}},_loadCardData:function(i){var j=sap.ui.getCore().byId(i.controlId),k=Q.sap.flpmeasure.startFunc(0,"Loading of data and rendering for all cards",5,"loadCardData",i.object);if(j&&j.setManifest&&this.isBlindLoading()){j.setManifest(i.manifest);}i.content=[i.manifest];this.oDashboardLoadingManager.setTileResolved(i);Q.sap.flpmeasure.endFunc(0,"Loading of data and rendering for all cards",k);},getCurrentHiddenGroupIds:function(i){return this.oPageOperationAdapter.getCurrentHiddenGroupIds(i);},_loadTileData:function(i,j,k){var q=this,z=this.oPageOperationAdapter.getTileView(i),A,E,H,U=this._addModelToTileViewUpdateQueue,I,N=false,J=i.uuid,K=false,O=Q.sap.flpmeasure.startFunc(0,"Service + model binding and rendering for all tile-Views",5,"getTileView",i.object);if(z.state()==="resolved"){K=true;}z.done(function(V){if(V.oController&&V.oController.navigationTargetUrl&&!i.isCustomTile){i.target=V.oController.navigationTargetUrl;}I=V;if(I.getComponentInstance){n.average("FLP:getComponentInstance","get info for navMode","FLP1");var R=I.getComponentInstance().getComponentData();if(R&&R.properties){i.navigationMode=R.properties.navigationMode;}n.end("FLP:getComponentInstance");}q.oDashboardLoadingManager.setTileResolved(i);A=V.getMode?V.getMode():"ContentMode";if(q.bLinkPersonalizationSupported&&A==="LineMode"){q._attachLinkPressHandlers(I);q._addDraggableAttribute(I);if(j>=0){E=q.oModel.getProperty("/groups");if(E[j]){i.content=[I];H=q.oModel.getProperty("/groups/"+j+"/links");q.oModel.setProperty("/groups/"+j+"/links",[]);q.oModel.setProperty("/groups/"+j+"/links",H);}}}else if(q.isBlindLoading()){if(i.content&&i.content.length>0){i.content[0].destroy();}i.content=[I];if(j>=0&&!K){q.oModel.refresh(false);}}if(q.isBlindLoading()){var W=q.oPageOperationAdapter.getTileSize(i.object);var X=W==="1x2";if(i.long!==X){i.long=X;}}else if(A==="LineMode"){i.content=[I];if(N){H=q.oModel.getProperty("/groups/"+j+"/links");q.oModel.setProperty("/groups/"+j+"/links",[]);q.oModel.setProperty("/groups/"+j+"/links",H);}}else if(i.content.length===0){i.content=[I];}else{U.apply(q,[J,I]);q._updateModelWithTileView(0,0);}Q.sap.flpmeasure.endFunc(0,"Service + model binding and rendering for all tile-Views",O);});z.fail(function(){if(q.oPageOperationAdapter.getTileType(i.object)==="link"&&q.bLinkPersonalizationSupported){I=q.oPageOperationAdapter.getFailedLinkView(i);q._attachLinkPressHandlers(I);}else{I=new T({state:"Failed"});}i.content=[I];});if(!I){if(q.oPageOperationAdapter.getTileType(i.object)==="link"){N=true;I=new G({mode:"LineMode"});}else{I=new T();}i.content=[I];}},isIeHtml5DnD:function(){return(D.browser.msie||D.browser.edge)&&(D.system.combi||D.system.tablet);},loadPersonalizedGroups:function(){var i=this;var j=new Q.Deferred();this.oPageOperationAdapter.getPage().then(function(k){i._setGroupModel(k);j.resolve();},function(){m.showLocalizedError("fail_to_load_groups_msg");});Q.sap.flpmeasure.start(0,"Service: Get Data for Dashboard",4);n.start("FLP:DashboardManager.loadPersonalizedGroups","loadPersonalizedGroups","FLP");return j.promise();}});});
sap.ui.predefine('sap/ushell/components/MessagingHelper',["sap/ushell/services/Message","sap/ushell/resources"],function(M,r){"use strict";return{getLocalizedText:g,showLocalizedError:a,showLocalizedErrorHelper:b,showLocalizedMessage:s};function g(m,p){return r.i18n.getText(m,p);}function s(m,p,t){if(sap.ushell.Container){sap.ushell.Container.getService("Message").show(t||M.Type.INFO,g(m,p),p);}}function a(m,p){s(m,p,M.Type.ERROR);}function b(m,p){return function(){a(m,p);};}});
sap.ui.predefine('sap/ushell/components/SharedComponentUtils',["sap/ui/Device","sap/ushell/Config","sap/ushell/UserActivityLog","sap/ushell/bootstrap/common/common.load.model","sap/base/Log","sap/ui/core/Component","sap/ui/thirdparty/jquery"],function(D,C,U,m,L,a,q){"use strict";var s={PERS_KEY:"flp.settings.FlpSettings",bFlpSettingsAdded:false,toggleUserActivityLog:function(){C.on("/core/extension/SupportTicket").do(function(c){if(c){U.activate();}else{U.deactivate();}});},initializeAccessKeys:function(){if(D.system.desktop){sap.ui.require(["sap/ushell/components/ComponentKeysHandler","sap/ushell/renderers/fiori2/AccessKeysHandler"],function(b,A){b.init(m.getModel());A.registerAppKeysHandler(b.handleFocusOnMe);});}},getEffectiveHomepageSetting:function(c,b){var p,d=new q.Deferred(),e=C.last(b)!==false,i=c.split("/").reverse()[0];if(e){p=this._getPersonalization(i);}else{p=q.Deferred().resolve();}p.done(function(v){v=v||C.last(c);if(v!==undefined){C.emit(c,v);}d.resolve(v);});p.fail(function(){var v=C.last(c);d.resolve(v);});return d;},_getPersonalization:function(i){var p=s.getPersonalizer(i,sap.ushell.Container.getRenderer("fiori2"));var P=p.getPersData();P.fail(function(e){L.error("Failed to load "+i+" from the personalization",e,"sap.ushell.components.flp.settings.FlpSettings");});return P;},getPersonalizer:function(i,c){var p=sap.ushell.Container.getService("Personalization");var o=a.getOwnerComponentFor(c);var S={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};var P={container:this.PERS_KEY,item:i};return p.getPersonalizer(P,S,o);}};return s;});
sap.ui.predefine('sap/ushell/components/StateHelper',[],function(){"use strict";function g(s){var p=[],i;s=s||[];for(i=0;i<s.length;i++){if(s[i]!==undefined){if(s[i]!=="home"&&s[i]!=="app"){throw new Error("sLaunchpadState value is invalid");}p.push(s[i]);}}if(!p.length){p=["app","home"];}return p;}function a(s,d){var m=[];if(s==="app"&&!d){var A=["app","minimal","standalone","embedded","headerless","merged","blank","lean"];m=m.concat(A);}else if(s==="home"&&!d){var h=["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"];m=m.concat(h);}else{m.push(s);}return m;}function b(s,d){var p=d?s:g(s);return p.reduce(function(r,S){var m=a(S,d);if(m){r=r.concat(m);}return r;},[]);}return{getAllStateToUpdate:b,getModelStates:a,getPassStates:g};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/AddHeadEndItemsStrategy',["sap/base/Log"],function(L){"use strict";function v(E,i){var a=0,b,I;if(!E||!i){return false;}var n=i.some(function(I){var N=!sap.ui.getCore().byId(I);if(N){L.warning("Failed to find control with id '{id}'".replace("{id}",I));}return N;});if(n){return false;}if(i.length===1&&i[0]==="endItemsOverflowBtn"){return true;}for(b=0;b<E.length;b++){I=E[b];if(I!=="endItemsOverflowBtn"){a++;}if(a+i.length>10){L.warning("maximum of six items has reached, cannot add more items.");return false;}if(i.indexOf(I)>-1){return false;}}return true;}function A(c,i){var n=c.concat(i);var s={"sf":-2,"copilotBtn":-1,"NotificationsCountButton":1,"endItemsOverflowBtn":2,"meAreaHeaderButton":3,"productSwitchBtn":4};n.sort(function(a,b){var d=s[a]||0,B=s[b]||0;if(d===B){return a.localeCompare(b);}return d-B;});return n;}function e(c,V){var r=c;if(v(c,V)){r=A(c,V);}return r;}return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/AddHeadItemsStrategy',[],function(){"use strict";function a(E,i){return E.indexOf(i)===-1?E.concat(i):E;}function A(E,i){return i.reduce(a,E);}function f(r){return function(i){return r.indexOf(i)===-1;};}function v(E,i){return A(E,i.filter(f(['backBtn','homeBtn']))).length<=3;}function b(c,I){var n=[],C=c.concat(I);if(c.indexOf("backBtn")>-1||I.indexOf("backBtn")>-1){n.push("backBtn");}if(c.indexOf("homeBtn")>-1||I.indexOf("homeBtn")>-1){n.push("homeBtn");}if(n.length<3){for(var i=0;i<C.length;i++){var s=C[i];if(n.indexOf(s)===-1){n.push(s);}if(n.length>=3){break;}}}return n;}function e(c,V){var r=c;if(v(c,V)){r=b(c,V);}return r;}return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/ControlManager',["sap/ushell/library","sap/ui/core/CustomData","sap/ui/core/IconPool","sap/ui/Device","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/ui/footerbar/ContactSupportButton","sap/ushell/ui/footerbar/EndUserFeedback","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui/shell/ShellHeadItem","sap/ushell/ui/shell/ShellNavigationMenu"],function(u,C,I,D,a,E,r,b,c,A,S,d){"use strict";var e=u.AppTitleState;var F=S.prototype.FloatingNumberType;var f=[];var g=[];function i(w,H,x){f.push(k(w));f.push(m(H));f.push(p(H,x));f.push(n(x));if(a.last("/core/shell/model/enableNotifications")){f.push(o(x));}if(w.moveEditHomePageActionToShellHeader){f.push(l());}if(w.moveAppFinderActionToShellHeader&&a.last("/core/catalog/enabled")){f.push(q(w,H));}if(w.moveUserSettingsActionToShellHeader){f.push(j(H));}if(w.moveContactSupportActionToShellHeader){f.push(s());}if(w.moveGiveFeedbackActionToShellHeader){f.push(t());}if(a.last("/core/productSwitch/enabled")){f.push(v());}g.push(E.once("CoreResourcesComplementLoaded").do(function(){_(w,x,H);}));}function h(){f.forEach(function(w){var x=sap.ui.getCore().byId(w);if(x){if(x.destroyContent){x.destroyContent();}x.destroy();}});g.forEach(function(w){w.off();});f=[];g=[];}function _(w,x,y){sap.ui.require(["sap/m/StandardListItem","sap/ushell/ui/shell/NavigationMiniTile"],function(z,N){var M="shellNavigationMenu";var H=function(K,L){var O=L.getProperty("icon")||"sap-icon://circle-task-2",T=L.getProperty("title"),P=L.getProperty("subtitle"),Q=L.getProperty("intent");var U=(new z({type:"Active",title:T,description:P,icon:O,wrapping:true,customData:[new C({key:"intent",value:Q})],press:[y.handleNavigationMenuItemPress,y]})).addStyleClass("sapUshellNavigationMenuListItems");return U;};var R=function(K,L){var O=L.getProperty("icon"),T=L.getProperty("title"),P=L.getProperty("subtitle"),Q=L.getProperty("intent");return new N({title:T,subtitle:P,icon:O,intent:Q,press:function(){var U=this.getIntent();if(U&&U[0]==="#"){y.navigateFromShellApplicationNavigationMenu(U);}}});};var B=new d(M,{title:"{/application/title}",icon:"{/application/icon}",showTitle:"{/application/showNavMenuTitle}",showRelatedApps:w.appState!=="lean",items:{path:"/application/hierarchy",factory:H.bind(this)},miniTiles:{path:"/application/relatedApps",factory:R.bind(this)},visible:{path:"/ShellAppTitleState",formatter:function(K){return K===e.ShellNavMenu;}}});var G=sap.ui.getCore().byId("shell-header");B.setModel(G.getModel());var J=sap.ui.getCore().byId("shellAppTitle");if(J){J.setNavigationMenu(B);}f.push(M);return M;}.bind(this));}function j(w){var U=new S({id:"userSettingsBtn",icon:"sap-icon://action-settings",tooltip:r.i18n.getText("userSettings"),text:r.i18n.getText("userSettings"),ariaHaspopup:"dialog",press:w.handleUserSettingsPress});return U.getId();}function k(w){var H=new S({id:"homeBtn",tooltip:r.i18n.getText("homeBtn_tooltip"),ariaLabel:r.i18n.getText("homeBtn_tooltip"),icon:I.getIconURI("home"),target:w.rootIntent?"#"+w.rootIntent:"#"});if(a.last("/core/extension/enableHelp")){H.addStyleClass("help-id-homeBtn",true);}H.addCustomData(new A({key:"aria-disabled",value:"false",writeToDom:true}));if(D.system.desktop){H.addEventDelegate({onsapskipback:function(x){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){x.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}},onsapskipforward:function(x){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){x.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}}});}return H.getId();}function l(){var T=new S({id:"ActionModeBtn",icon:"sap-icon://edit"});if(a.last("/core/extension/enableHelp")){T.addStyleClass("help-id-ActionModeBtn");}return T.getId();}function m(w){var B=sap.ui.getCore().getConfiguration().getRTL()?"feeder-arrow":"nav-back";var x=new S({id:"backBtn",tooltip:r.i18n.getText("backBtn_tooltip"),ariaLabel:r.i18n.getText("backBtn_tooltip"),icon:I.getIconURI(B),press:w.pressNavBackButton.bind(w)});return x.getId();}function n(w){var x="meAreaHeaderButton";var M=new S({id:x,icon:"{/userImage/personPlaceHolder}",ariaLabel:r.i18n.getText("MeAreaToggleButtonAria"),ariaHaspopup:"dialog",tooltip:sap.ushell.Container.getUser().getFullName(),press:function(){E.emit("showMeArea",Date.now());}});if(D.system.desktop){M.addEventDelegate({onsapskipforward:function(y){sap.ushell.renderers.fiori2.AccessKeysHandler.bForwardNavigation=true;y.preventDefault();window.document.getElementById("sapUshellHeaderAccessibilityHelper").focus();}});}M.setModel(w);return x;}function o(w){var x="NotificationsCountButton";var N=new S({id:x,tooltip:{path:"/notificationsCount",formatter:function(y){return this.tooltipFormatter(y);}},icon:I.getIconURI("bell"),text:r.i18n.getText("notificationsBtn_title"),enabled:false,ariaHaspopup:"dialog",floatingNumber:"{/notificationsCount}",floatingNumberType:F.Notifications,press:function(){E.emit("showNotifications",Date.now());}});N.setModel(w);N.setModel(r.i18nModel,"i18n");return x;}function p(w,x){var y=new S({id:"endItemsOverflowBtn",tooltip:{path:"/notificationsCount",formatter:function(z){return this.tooltipFormatter(z);}},ariaLabel:r.i18n.getText("shellHeaderOverflowBtn_tooltip"),ariaHaspopup:"dialog",icon:"sap-icon://overflow",floatingNumber:"{/notificationsCount}",floatingNumberType:F.OverflowButton,press:[w.pressEndItemsOverflow,w]});y.setModel(x);return y.getId();}function q(w,x){var O=new S({id:"openCatalogBtn",text:r.i18n.getText("open_appFinderBtn"),tooltip:r.i18n.getText("open_appFinderBtn"),icon:"sap-icon://sys-find",visible:!w.disableAppFinder,press:x.handleAppFinderPress});if(a.last("/core/extension/enableHelp")){O.addStyleClass("help-id-openCatalogActionItem");}return O.getId();}function s(){var B="ContactSupportBtn",w=sap.ui.getCore().byId(B);if(!w){var T=new b("tempContactSupportBtn",{visible:true});var x=T.getIcon();var y=T.getText();w=new S({id:B,icon:x,tooltip:y,text:y,ariaHaspopup:"dialog",press:function(){T.firePress();}});}return B;}function t(){var B="EndUserFeedbackBtn",w=sap.ui.getCore().byId(B);if(!w){var T=new c("EndUserFeedbackHandlerBtn",{});var x=T.getIcon();var y=T.getText();w=new S({id:B,icon:x,tooltip:y,ariaLabel:y,ariaHaspopup:"dialog",text:y,visible:false});}return w.getId();}function v(){var P=new S({id:"productSwitchBtn",icon:"sap-icon://grid",visible:false,tooltip:r.i18n.getText("productSwitch_tooltip"),text:r.i18n.getText("productSwitch"),ariaHaspopup:"dialog",press:function(){E.emit("showProductSwitch",Date.now());}});return P.getId();}return{init:i,destroy:h,_createOverflowButton:p};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/ExtendApplicationPropertyStrategy',["sap/ui/thirdparty/jquery"],function(q){"use strict";function e(c,v){if(!v){v={};}return q.extend(true,{},c,v);}return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/PropertyStrategiesFactory',["./AddHeadItemsStrategy","./AddHeadEndItemsStrategy","./ExtendApplicationPropertyStrategy","./RemoveItemsStrategy","./SetHeadPropertyStrategy"],function(A,a,E,R,S){"use strict";return function(p,s){var o;switch(p){case"headItems":if(s==="remove"){o=R;}else{o=A;}break;case"headEndItems":if(s==="remove"){o=R;}else{o=a;}break;case"showLogo":case"headerVisible":case"centralAreaElement":case"title":o=S;break;case"application":o=E;break;case"application/hierarchy":case"application/icon":case"application/relatedApps":case"application/showNavMenuTitle":case"application/title":o=S;break;default:o=null;break;}return o;};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/RemoveItemsStrategy',[],function(){"use strict";function v(E,i){return i.some(function(I){return(E.indexOf(I)>=0);});}function r(c,i){return c.filter(function(I){return(i.indexOf(I)===-1);});}function e(c,V){var R=c;if(v(c,V)){R=r(c,V);}else{jQuery.sap.log.warning("You cannot remove item: "+V+", the item does not exists.");}return R;}return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/SetHeadPropertyStrategy',[],function(){"use strict";function v(n){return n!==undefined;}function e(c,V){if(v(V)){return V;}return c;}return{execute:e};});
sap.ui.predefine('sap/ushell/components/_HeaderManager/ShellHeader.controller',["sap/m/library","sap/ui/core/mvc/Controller","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ui/performance/Measurement","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/ui/shell/OverflowListItem"],function(m,C,D,J,M,A,a,E,O){"use strict";var L=m.ListType;var F=O.prototype.FloatingNumberType;return C.extend("sap.ushell.components._HeaderManager.ShellHeader",{shellUpdateAggItem:function(i,c){return sap.ui.getCore().byId(c.getObject());},pressNavBackButton:function(){E.emit("showMeArea",false);A.service().navigateBack();},pressEndItemsOverflow:function(e){var p=sap.ui.getCore().byId("headEndItemsOverflow"),o;if(!p){p=sap.ui.xmlfragment("sap.ushell.renderers.fiori2.HeadEndItemsOverflowPopover",this);var P=sap.ui.getCore().byId("headEndItemsOverflowList");P.enhanceAccessibilityState=function(b,c){if(b.getFloatingNumberType()!==F.None){c.describedby=b._oAriaDescribedbyText.getId();}return c;};o=new J({headEndItems:a.last("/core/shellHeader/headEndItems")});p.setModel(o);}if(p.isOpen()){p.close();}else{if(sap.ui.getCore().byId("shellNotificationsPopover")){E.emit("showNotifications",false);}p.openBy(e.getSource());}},headEndItemsOverflowItemFactory:function(i,c){var s=sap.ui.getCore().byId(c.getObject());var f=s.getBindingPath("floatingNumber");var o=new O({id:i+"-"+s.getId(),icon:s.getIcon(),iconInset:true,title:s.getText(),type:L.Active,floatingNumber:(f?{path:f}:undefined),floatingNumberType:s.getFloatingNumberType(),press:function(){if(s){s.firePress();}var p=sap.ui.getCore().byId("headEndItemsOverflow");if(p.isOpen()){p.close();}}});if(f){o.setModel(s.getModel());}return o;},destroyHeadEndItemsOverflow:function(e){e.getSource().destroy();},isHeadEndItemInOverflow:function(b){return b!=="ENDITEMSOVERFLOWBTN"&&!this.isHeadEndItemNotInOverflow(b);},isHeadEndItemNotInOverflow:function(b){var o=this.isHeadEndItemOverflow();var s=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;if(b==="ENDITEMSOVERFLOWBTN"){return o;}if(!o){return true;}if(["MEAREAHEADERBUTTON","BACKBTN"].indexOf(b)>-1){return true;}if(s==="Phone"){return false;}if(["SF","FLOATINGCONTAINERBUTTON"].indexOf(b)>-1){return true;}if(s==="Desktop"&&b==="COPILOTBTN"){return true;}return false;},isHeadEndItemOverflow:function(){var n=0,e,b=a.last("/core/shellHeader/headEndItems");if(b.indexOf("endItemsOverflowBtn")===-1){return false;}var c=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD).name;var d=3;if(c==="Phone"){d=1;}for(var i=0;i<b.length;i++){e=sap.ui.getCore().byId(b[i]);if(e&&e.getVisible()){n++;}}if(sap.ui.getCore().byId("endItemsOverflowBtn").getVisible()){return n>d+1;}return n>d;},handleNavigationMenuItemPress:function(e){var d=e.getSource().getCustomData();if(d&&d.length>0){for(var i=0;i<d.length;i++){if(d[i].getKey()==="intent"){var l=d[i].getValue();if(l&&l[0]==="#"){this.navigateFromShellApplicationNavigationMenu(l);return;}}}}},navigateFromShellApplicationNavigationMenu:function(i){if(window.hasher.getHash()!==i.substr(1)){E.emit("centerViewPort",Date.now());window.hasher.setHash(i);}var s=sap.ui.getCore().byId("shellAppTitle");if(s){s.close();}},handleUserSettingsPress:function(){E.emit("openUserSettings",Date.now());},handleAppFinderPress:function(){M.start("FLP:AppFinderLoadingStartToEnd","AppFinderLoadingStartToEnd","FLP");sap.ushell.Container.getServiceAsync("CrossApplicationNavigation").then(function(c){c.toExternal({target:{semanticObject:"Shell",action:"appfinder"}});});}});});
sap.ui.predefine('sap/ushell/components/_HomepageManager/DashboardLoadingManager',["sap/ui/base/Object","sap/ui/performance/Measurement","sap/ui/thirdparty/jquery"],function(B,M,q){"use strict";var D=B.extend("sap.ushell.components._HomepageManager.DashboardLoadingManager",{metadata:{},constructor:function(i,s){var e=sap.ui.getCore().getEventBus();this.currentVisibleTiles=[];this.aRefreshTiles=[];this.oBusyIndicatorTiles={};this.oActiveDynamicTiles={};this.oResolvedTiles={};this.oInProgressTiles={};this.oDashboardManager=s.oDashboardManager;e.subscribe("launchpad","visibleTilesChanged",this._onVisibilityChanged,this);e.subscribe("launchpad","dashboardTileClick",this._addTileToRefreshArray,this);e.subscribe("launchpad","refreshTiles",this._refreshTiles,this);e.subscribe("launchpad","setTilesNoVisibility",this._setTilesNoVisibility,this);e.subscribe("launchpad","onHiddenTab",this._setTilesNoVisibility,this);},_onVisibilityChanged:function(c,e,v){this.currentVisibleTiles=v;if(this.oDashboardManager.isBlindLoading()){this.manageTilesView();}this.manageBusyIndicatorTiles();this.manageDynamicTiles();},manageDynamicTiles:function(){var v;M.average("DashboardLoadingManagerActiveDynamicTile","Manage Active Dynamic Tiles","FLP_SHELL");var k,V,t,a,n={},c=q.extend(true,{},{},this.oActiveDynamicTiles);for(var i=0;i<this.currentVisibleTiles.length;i++){var o=this.currentVisibleTiles[i];if(!o.bIsExtanded){delete c[o.oTile.uuid];}}for(k in c){t=this.oActiveDynamicTiles[k];a=t.object;this.oDashboardManager.setTileVisible(t,false);}for(V=0;V<this.currentVisibleTiles.length;V++){v=this.currentVisibleTiles[V];if(!v.bIsExtanded){t=v.oTile;a=t.object;if(this.oActiveDynamicTiles[t.uuid]===undefined&&a){this.oDashboardManager.setTileVisible(t,true);}n[t.uuid]=t;}}this.oActiveDynamicTiles=n;M.end("DashboardLoadingManagerActiveDynamicTile");},isTileViewRequestIssued:function(t){if(this.oInProgressTiles[t.uuid]===undefined&&this.oResolvedTiles[t.uuid]===undefined){return false;}return true;},manageBusyIndicatorTiles:function(){M.average("DashboardLoadingManagerBusyIndicators","Manage Busy Indicators on Tiles","FLP_SHELL");var v,c,C,I,r=[],b,a=[];for(c in this.oBusyIndicatorTiles){b=true;I=this.oBusyIndicatorTiles[c];if(this.oResolvedTiles[c]===undefined){for(var i=0;i<this.currentVisibleTiles.length;i++){if(this.currentVisibleTiles[i].oTile.uuid===I.oTile.uuid){b=false;break;}}if(b){r.push(I);}}}for(v=0;v<this.currentVisibleTiles.length;v++){C=this.currentVisibleTiles[v];if(this.oBusyIndicatorTiles[C.oTile.uuid]===undefined&&this.oResolvedTiles[C.oTile.uuid]===undefined){a.push(C);}}for(v=0;v<r.length;v++){C=r[v];if(C.oTile.content[0]&&C.oTile.content[0].setState){if(C.oTile.content[0].getState){if(C.oTile.content[0].getState()!=="Failed"){C.oTile.content[0].setState();}}else{C.oTile.content[0].setState();}}delete this.oBusyIndicatorTiles[C.oTile.uuid];}for(v=0;v<a.length;v++){C=a[v];if(C.oTile.content[0]&&C.oTile.content[0].setState){if(C.oTile.content[0].getState){if(C.oTile.content[0].getState()!=="Failed"){C.oTile.content[0].setState("Loading");}}else{C.oTile.content[0].setState("Loading");}}this.oBusyIndicatorTiles[C.oTile.uuid]=C;}M.end("DashboardLoadingManagerBusyIndicators");},setTileInProgress:function(t){this.oInProgressTiles[t.uuid]=t;},setTileResolved:function(t){delete this.oInProgressTiles[t.uuid];this.oResolvedTiles[t.uuid]=t;},_addTileToRefreshArray:function(c,e,d){this.aRefreshTiles.push(d.uuid);},_refreshTiles:function(){for(var v=0;v<this.currentVisibleTiles.length;v++){var t=this.currentVisibleTiles[v].oTile;var a=t.object;if(a){for(var r=0;r<this.aRefreshTiles.length;r++){if(t.uuid===this.aRefreshTiles[r]){this.aRefreshTiles.splice(r,1);this.oDashboardManager.setTileVisible(t,true);this.oDashboardManager.refreshTile(t);break;}}}}},_setTilesNoVisibility:function(){if(!sap.ushell.Container){return;}for(var v=0;v<this.currentVisibleTiles.length;v++){var t=this.currentVisibleTiles[v].oTile;var a=t.object;if(a){this.oDashboardManager.setTileVisible(t,false);}delete this.oActiveDynamicTiles[t.uuid];}},manageTilesView:function(){var v,c,r=[];for(v=0;v<this.currentVisibleTiles.length;v++){c=this.currentVisibleTiles[v];if(this.oInProgressTiles[c.oTile.uuid]===undefined&&this.oResolvedTiles[c.oTile.uuid]===undefined){r.push(c);}}this.oDashboardManager.getTileViewsFromArray(r);}});return D;});
sap.ui.predefine('sap/ushell/components/_HomepageManager/PagingManager',["sap/ui/base/Object","sap/ui/Device","sap/ushell/Config"],function(B,D,C){"use strict";var T=7;var P=B.extend("sap.ushell.components._HomepageManager.PagingManager",{metadata:{publicMethods:["setElementClass","GetGroupHeight","setContainerSize","getNumberOfAllocatedElements","moveToNextPage","getTileHeight"]},constructor:function(i,s){sap.ushell.components._HomepageManager.getPagingManager=(function(v){return function(){return v;};}(this.getInterface()));this.currentPageIndex=0;this.containerHeight=s.containerHeight||0;this.containerWidth=s.containerWidth||0;this.supportedElements=s.supportedElements||"";this.tileHeight=0;this.tileSize={"sapUshellTile":{width:100,height:100},"sapUshellLinkTile":{width:40,height:20},"default":{width:40,height:20}};},getTileHeight:function(){return this.tileHeight;},setElementClass:function(c){this.supportedElements=c;},_getTileHeight:function(i){return i?148:176;},_getTileWidth:function(i,I){if(i){return I?304:360;}return I?148:176;},getGroupHeight:function(g,f){if(!g||g.isGroupVisible===false){return 0;}var t=g.tiles,l=g.links,I=D.system.phone||C.last("/core/home/sizeBehavior")==="Small",w=this._getTileWidth(false,I),W=this._getTileWidth(true,I),a=48,b=8,A=this.containerWidth-b;var r=0,R=1,c,d,i;var s=t.some(function(c){return!!c&&c.isTileIntentSupported!==false;});if(!s){if(g.isGroupLocked||g.isDefaultGroup){return 0;}return(a+b)/this.containerHeight;}var h=b;if(!f){h+=a;}if(l&&l.length){h+=44;}for(i=0;i<t.length;i++){if(h>this.containerHeight){break;}c=t[i];if(!c||c.isTileIntentSupported===false){continue;}d=c.long?W:w;if(r>0){r+=T;}r+=d;if(r>A){R+=1;r=d;}}h+=(this._getTileHeight(I)+T)*R;return h/this.containerHeight;},setContainerSize:function(n,a){var t=this.getNumberOfAllocatedElements();this.containerHeight=n;this.containerWidth=a;this._changePageSize(t);},getNumberOfAllocatedElements:function(){return this._calcElementsPerPage()*this.currentPageIndex;},_changePageSize:function(t){this.currentPageIndex=Math.ceil(t/this._calcElementsPerPage());},moveToNextPage:function(){this.currentPageIndex++;},resetCurrentPageIndex:function(){this.currentPageIndex=0;},getSizeofSupportedElementInUnits:function(t){return this.supportedElements[t].sizeInBaseUnits;},_calcElementMatrix:function(c){var e=jQuery("<div>").addClass(c);jQuery("body").append(e);var a=e.height();var b=e.width();var r;if(a<20||b<40){r=this.tileSize[c]||this.tileSize.default;}else{r={width:b,height:a};}this.tileHeight=a;e.remove();return r;},_calcElementsPerPage:function(){var s,b,a,m,c,e,d;for(s in this.supportedElements){a=this.supportedElements[s];m=this._calcElementMatrix(a.className);a.matrix=m;if(b){b.width=b.width>m.width?m.width:b.width;b.height=b.height>m.height?m.height:b.height;}else{b={width:m.width,height:m.height};}}for(s in this.supportedElements){a=this.supportedElements[s];c=a.matrix;a.sizeInBaseUnits=Math.round(c.width/b.width*c.height/b.height);}e=Math.round(this.containerWidth/b.width);d=Math.round(this.containerHeight/b.height);if(!d||!e||e===Infinity||d===Infinity||e===0||d===0){return 10;}return d*e;}});return P;});
sap.ui.predefine('sap/ushell/components/_HomepageManager/PersistentPageOperationAdapter',["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ushell/Config","sap/ushell/resources","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/base/util/uid","sap/base/Log","sap/ui/performance/Measurement","sap/m/library"],function(q,B,C,r,m,G,g,L,M,a){"use strict";var b=a.GenericTileMode;var c=a.LoadState;var d={PERSONALIZATION:"FLP: Personalization",RENAME_GROUP:"FLP: Rename Group",MOVE_GROUP:"FLP: Move Group",DELETE_GROUP:"FLP: Delete Group",RESET_GROUP:"FLP: Reset Group",DELETE_TILE:"FLP: Delete Tile",ADD_TILE:"FLP: Add Tile",MOVE_TILE:"FLP: Move Tile"};function _(E,p){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(u){u.logCustomEvent(d.PERSONALIZATION,E,p);});}var P=B.extend("sap.ushell.components._HomepageManager.PersistentPageOperationAdapter",{constructor:function(){B.call(this);this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");},_getIsAppBox:function(o){if(!sap.ushell.Container){return false;}var s=this.oPageBuilderService,i=!!(s.getCatalogTileTargetURL(o)&&(s.getCatalogTilePreviewTitle(o)||s.getCatalogTilePreviewSubtitle(o)));return i;},getCurrentHiddenGroupIds:function(o){var f=o.getProperty("/groups"),h=[],s,i,j;for(i=0;i<f.length;i++){j=f[i]?f[i].isGroupVisible:true;if(f[i].object){s=this.oPageBuilderService.getGroupId(f[i].object);}if(!j&&s!==undefined){h.push(s);}}return h;},getPreparedTileModel:function(t,i,T){var s=this.oPageBuilderService,f=g(),o,S=s.getTileSize(t),l=[],h;T=T||s.getTileType(t);if(T==="link"){l=[new G({mode:sap.m.GenericTileMode.LineMode})];}o={"isCustomTile":!this._getIsAppBox(t),"object":t,"originalTileId":s.getTileId(t),"uuid":f,"tileCatalogId":encodeURIComponent(s.getCatalogTileId(t)),"content":l,"long":S==="1x2","target":s.getTileTarget(t)||"","debugInfo":s.getTileDebugInfo(t),"isTileIntentSupported":s.isTileIntentSupported(t),"rgba":"","isLocked":i,"showActionsIcon":C.last("/core/home/enableTileActionsIcon"),"isLinkPersonalizationSupported":s.isLinkPersonalizationSupported(t),"navigationMode":undefined};if(T==="card"){h=s.getCardManifest(t);o.isCard=true;if(h){o.manifest=h;}}return o;},getPreparedGroupModel:function(o,D,l,f){var s=this.oPageBuilderService,h=(o&&s.getGroupTiles(o))||[],j=[],k=[],i,n=C.last("/core/shell/model/personalization");var I=!!(o&&s.isGroupLocked(o)),p=!!(o&&s.isGroupFeatured(o));for(i=0;i<h.length;++i){var t=h[i],T=s.getTileType(t).toLowerCase();if(T==="tile"||T==="card"){j.push(this.getPreparedTileModel(h[i],I,T));}else if(T==="link"){k.push(this.getPreparedTileModel(h[i],I,T));}else{L.error("Unknown tile type: '"+T+"'",undefined,"sap.ushell.components.HomepageManager");}}return{title:(D&&m.getLocalizedText("my_group"))||(o&&s.getGroupTitle(o))||(f&&f.title)||"",object:o,groupId:g(),links:k,pendingLinks:[],tiles:j,isDefaultGroup:!!D,editMode:!o,isGroupLocked:I,isFeatured:p,visibilityModes:[true,true],removable:!o||s.isGroupRemovable(o),sortable:n,isGroupVisible:!o||s.isGroupVisible(o),isEnabled:!D,isLastGroup:l||false,isRendered:!!(f&&f.isRendered),isGroupSelected:false};},getPage:function(){q.sap.flpmeasure.start(0,"Service: Get Data for Dashboard",4);M.start("FLP:DashboardManager.loadPersonalizedGroups","loadPersonalizedGroups","FLP");return this._getGroupsFromServer().then(this.loadGroupsFromArray.bind(this));},_getGroupsFromServer:function(){var t=this;return new Promise(function(f,h){t.oPageBuilderService.getGroups().done(function(i){M.end("FLP:DashboardManager.loadPersonalizedGroups");f(i);}).fail(h);});},loadGroupsFromArray:function(f){var t=this;q.sap.flpmeasure.end(0,"Service: Get Data for Dashboard");q.sap.flpmeasure.start(0,"Process & render the first segment/tiles",4);M.start("FLP:DashboardManager.loadGroupsFromArray","loadGroupsFromArray","FLP");M.start("FLP:DashboardManager.getDefaultGroup","getDefaultGroup","FLP");return new Promise(function(h,j){t.oPageBuilderService.getDefaultGroup().done(function(D){M.end("FLP:DashboardManager.getDefaultGroup");if(f.length===0&&D===undefined){h([]);return;}var i=0,n,N=[],k,l;f=t._sortGroups(D,f);l=f.indexOf(D);k=f.length;M.start("FLP:DashboardManager._getGroupModel","_getGroupModel","FLP");for(i=0;i<k;++i){n=t.getPreparedGroupModel(f[i],i===l,i===k-1);n.index=i;N.push(n);}M.end("FLP:DashboardManager._getGroupModel");M.end("FLP:DashboardManager.loadGroupsFromArray");q.sap.flpmeasure.end(0,"Process & render the first segment/tiles");h(N);}).fail(j);});},_sortGroups:function(D,f){var i=0,t=this,h=f.indexOf(D),l=[],j,o,k;f.splice(h,1);while(i<f.length){o=f[i];k=this.oPageBuilderService.isGroupLocked(o);if(k){l.push(o);f.splice(i,1);}else{i++;}}if(!C.last("/core/home/disableSortedLockedGroups")){l.sort(function(x,y){var n=t.oPageBuilderService.getGroupTitle(x).toLowerCase(),p=t.oPageBuilderService.getGroupTitle(y).toLowerCase();return n<p?-1:1;});}l.sort(function(x,y){var I=t.oPageBuilderService.isGroupFeatured(x),n=t.oPageBuilderService.isGroupFeatured(y);if(I===n){return 0;}else if(I>n){return-1;}return 1;});j=l;j.push(D);j.push.apply(j,f);return j;},addGroupAt:function(o,i,I){var t=this;return new Promise(function(f,h){try{if(i===undefined){t.oPageBuilderService.addGroup(o.title).done(function(n){var s=t.oPageBuilderService.getGroupId(n);_(d.RENAME_GROUP,[null,o.title,s]);f(t.getPreparedGroupModel(n,I,o.isLastGroup,undefined));}).fail(h);}else{t.oPageBuilderService.addGroupAt(o.title,i).done(function(n){var s=t.oPageBuilderService.getGroupId(n);_(d.RENAME_GROUP,[null,o.title,s]);f(t.getPreparedGroupModel(n,I,o.isLastGroup,undefined));}).fail(h);}}catch(j){h();}});},renameGroup:function(o,n,O){var t=this;return new Promise(function(f,h){try{t.oPageBuilderService.setGroupTitle(o.object,n).done(function(){var s=t.oPageBuilderService.getGroupId(o.object);_(d.RENAME_GROUP,[O,n,s]);f();}).fail(h);}catch(E){h();}});},deleteGroup:function(o){var t=this,s=o.object,f=this.oPageBuilderService.getGroupId(s),h=this.oPageBuilderService.getGroupTitle(s);return new Promise(function(i,j){try{t.oPageBuilderService.removeGroup(s).done(function(){_(d.DELETE_GROUP,[h,f]);i();}).fail(j);}catch(k){j();}});},moveGroup:function(o,t,i){var f=this;return new Promise(function(h,j){try{f.oPageBuilderService.moveGroup(o.object,t).done(function(){var s=f.oPageBuilderService.getGroupId(o.object);_(d.MOVE_GROUP,[o.title,i.iFromIndex,i.iToIndex,s]);h();}).fail(j);}catch(k){j();}});},resetGroup:function(o,i){var t=this,s=o.object,f=this.oPageBuilderService.getGroupId(s),h=this.oPageBuilderService.getGroupTitle(s);return new Promise(function(j,k){try{t.oPageBuilderService.resetGroup(s).done(function(R){_(d.RESET_GROUP,[h,f]);j(t.getPreparedGroupModel(R,i,o.isLastGroup,undefined));}).fail(k);}catch(l){k();}});},refreshGroup:function(s){var t=this,E="Failed to refresh group with id:"+s+" in the model";return new Promise(function(f){t.oPageBuilderService.getGroups().fail(function(){L.error(E,null,"sap.ushell.components.HomepageManager");f(null);}).done(function(h){var S=null;for(var i=0;i<h.length;i++){if(t.oPageBuilderService.getGroupId(h[i])===s){S=h[i];break;}}if(S){t.oPageBuilderService.getDefaultGroup().done(function(D){var I=s===D.getId(),o=t.getPreparedGroupModel(S,I,false,{isRendered:true});f(o);});}else{f(null);}});});},getIndexOfGroup:function(f,s){var n=-1,t=this,h=this.oPageBuilderService.getGroupId(s);f.every(function(o,i){var j=t.oPageBuilderService.getGroupId(o.object);if(j===h){n=i;return false;}return true;});return n;},getOriginalGroupIndex:function(o){var s=this.oPageBuilderService,S=o.object,f=this.oPageBuilderService.getGroups();return new Promise(function(h,j){f.done(function(k){var n;for(var i=0;i<k.length;i++){if(s.getGroupId(k[i])===s.getGroupId(S)){n=i;break;}}h(n);}).fail(j);});},moveTile:function(t,i,s,T,f){var h=this,S,p=new Promise(function(j,k){try{var R=h.oPageBuilderService.moveTile(t.object,i.tileIndex,i.newTileIndex,s.object,T.object,f);R.done(function(o){var u=[h.oPageBuilderService.getTileTitle(t.object),h.oPageBuilderService.getGroupTitle(s.object),h.oPageBuilderService.getGroupTitle(T.object),t.uuid];_(d.MOVE_TILE,u);S=o;j(o);});R.fail(k);}catch(l){k();}});return p.then(this._getTileViewAsPromise.bind(this)).then(function(v){return Promise.resolve({content:v,originalTileId:h.oPageBuilderService.getTileId(S),object:S});});},removeTile:function(o,t){var f=this,s=t.object,T=f.oPageBuilderService.getTileTitle(s),h=f.oPageBuilderService.getCatalogTileId(s),i=f.oPageBuilderService.getCatalogTileTitle(s),j=f.oPageBuilderService.getTileId(s),p;p=new Promise(function(k,l){try{f.oPageBuilderService.removeTile(o.object,s).done(function(){m.showLocalizedMessage("tile_deleted_msg",[T,o.title]);_(d.DELETE_TILE,[T||j,h,i,o.title]);k();}).fail(l);}catch(n){l();}});return p;},_getTileViewAsPromise:function(t){var f=this,p=new Promise(function(h,i){var j=f.oPageBuilderService.getTileView(t);j.done(h);j.fail(i);});return p;},refreshTile:function(s){this.oPageBuilderService.refreshTile(s);},setTileVisible:function(s,v){this.oPageBuilderService.setTileVisible(s,v);},getTileType:function(s){return this.oPageBuilderService.getTileType(s);},getTileSize:function(s){return this.oPageBuilderService.getTileSize(s);},getTileTitle:function(t){return this.oPageBuilderService.getTileTitle(t.object);},getTileId:function(s){return this.oPageBuilderService.getTileId(s);},isLinkPersonalizationSupported:function(s){return this.oPageBuilderService.isLinkPersonalizationSupported(s);},getTileTarget:function(t){return this.oPageBuilderService.getTileTarget(t.object);},getTileView:function(t){return this.oPageBuilderService.getTileView(t.object);},getTileActions:function(t){return this.oPageBuilderService.getTileActions(t);},getFailedLinkView:function(t){var s=this.oPageBuilderService.getCatalogTilePreviewSubtitle(t.object);var h=this.oPageBuilderService.getCatalogTilePreviewTitle(t.object);if(!h&&!s){h=r.i18n.getText("cannotLoadLinkInformation");}return new G({mode:b.LineMode,state:c.Failed,header:h,subheader:s});},getTileModelByCatalogTileId:function(s){L.error("Cannot get tile with id "+s+": Method is not supported");},transformGroupModel:function(){return;}});var e=null;return{getInstance:function(){if(!e){e=new P();}return e;},destroy:function(){e=null;}};});
sap.ui.predefine('sap/ushell/components/_HomepageManager/TransientPageOperationAdapter',["sap/ui/thirdparty/jquery","sap/ui/base/Object","sap/ushell/Config","sap/ushell/resources","sap/ushell/components/MessagingHelper","sap/m/GenericTile","sap/m/ImageContent","sap/m/TileContent","sap/base/util/uid","sap/base/Log","sap/m/library"],function(q,B,C,r,m,G,I,T,u,L,a){"use strict";var b=a.GenericTileMode;var c=a.LoadState;var d=B.extend("sap.ushell.components._HomepageManager.TransientPageOperationAdapter.js",{constructor:function(){B.call(this);this.oPageBuilderService=sap.ushell.Container.getService("LaunchPage");this._createCatalogMap();},_createCatalogMap:function(){if(this.mCatalogTiles){return;}var s=this.oPageBuilderService,t=this;this.mCatalogTiles={};this._getAllCatalogTiles().then(function(f){for(var i=0;i<f.length;i++){for(var j=0;j<f[i].length;j++){t.mCatalogTiles[s.getCatalogTileId(f[i][j])]=f[i][j];}}});},getCurrentHiddenGroupIds:function(){return[];},getTileActions:function(t){t.isStub=function(){return true;};var R=this.oPageBuilderService.getTileActions(t);delete t.isStub;return R;},getPreparedTileModel:function(t,i,s){var f=u(),o,l=[];s=s||t.type;if(s==="link"){l=[new G({mode:b.LineMode})];}o={"isCustomTile":false,"object":t,"originalTileId":f,"uuid":f,"tileCatalogId":"","content":l,"long":false,"target":"","debugInfo":null,"isTileIntentSupported":true,"rgba":"","isLocked":i,"showActionsIcon":C.last("/core/home/enableTileActionsIcon"),"isLinkPersonalizationSupported":true,"navigationMode":undefined};if(s==="card"){o.isCard=true;o.manifest={};}return o;},getPreparedGroupModel:function(g,D,l,o){var f=u(),h=(g&&g.tiles)||[],M=[],j=[],i;for(i=0;i<h.length;++i){var t=h[i],s=t.type.toLowerCase();if(s==="tile"||s==="card"){M.push(this.getPreparedTileModel(h[i],false,s));}else if(s==="link"){j.push(this.getPreparedTileModel(h[i],false,s));}else{L.error("Unknown tile type: '"+s+"'",undefined,"sap.ushell.components.HomepageManager");}}return{title:(D&&m.getLocalizedText("my_group"))||(g&&g.title)||(o&&o.title)||"",object:g,groupId:f,links:j,pendingLinks:[],tiles:M,isDefaultGroup:!!D,editMode:!g,isGroupLocked:false,isFeatured:false,visibilityModes:[true,true],removable:true,sortable:true,isGroupVisible:true,isEnabled:!D,isLastGroup:l||false,isRendered:!!(o&&o.isRendered),isGroupSelected:false};},getPage:function(){return Promise.resolve([this.getPreparedGroupModel(null,false,true)]);},addGroupAt:function(g,i,D){var f={title:g.title};return Promise.resolve(this.getPreparedGroupModel({},D,g.isLastGroup,f));},renameGroup:function(){return Promise.resolve();},deleteGroup:function(){return Promise.resolve();},moveGroup:function(){return Promise.resolve();},resetGroup:function(){return Promise.reject("Reset group not supported in transient mode");},refreshGroup:function(){return Promise.reject("Refresh group not supported in transient mode");},getIndexOfGroup:function(){return Promise.resolve(-1);},getOriginalGroupIndex:function(g,f){var h;for(var i=0;i<f.length;i++){if(f[i].groupId===g.groupId){h=i;break;}}return Promise.resolve(h);},moveTile:function(t,i,s,o,f){var g=this._findCatalogTile(t.tileCatalogId);return Promise.resolve({content:this._getTileView(g,f),originalTileId:t.uuid,object:{id:t.uuid,type:f,title:this.oPageBuilderService.getCatalogTileTitle(g)}});},removeTile:function(){return Promise.resolve();},_getTileView:function(o,t){if(t==="link"){return new G({mode:b.LineMode,header:this.oPageBuilderService.getCatalogTileTitle(o),subheader:this.oPageBuilderService.getCatalogTilePreviewSubtitle(o)});}return new G({header:this.oPageBuilderService.getCatalogTileTitle(o),subheader:this.oPageBuilderService.getCatalogTilePreviewSubtitle(o),tileContent:new T({content:new I({src:this.oPageBuilderService.getCatalogTilePreviewIcon(o)})})});},refreshTile:function(){return;},setTileVisible:function(){return;},getTileType:function(s){return s.type;},getTileSize:function(){return"1x1";},getTileId:function(s){return s.id;},isLinkPersonalizationSupported:function(){return true;},getTileTarget:function(t){var o=this._findCatalogTile(t.tileCatalogId);return this.oPageBuilderService.getCatalogTileTargetURL(o);},getTileTitle:function(t){return t.object.title;},_getAllCatalogTiles:function(){var s=this.oPageBuilderService;function g(f){f.map(function(o){var h=s.getCatalogId(o)||"";return s.getCatalogTitle(o)||h.split(":").slice(1).join(":");});return Promise.all(f.map(function(o){return s.getCatalogTiles(o);}));}return Promise.resolve(s.getCatalogs()).then(g);},_findCatalogTile:function(s){return this.mCatalogTiles[s];},getTileView:function(t){var o=this._findCatalogTile(t.tileCatalogId),v=this._getTileView(o,t.object.type),D=new q.Deferred();D.resolve(v);return D.promise();},getFailedLinkView:function(t){var h=t.object.title||r.i18n.getText("cannotLoadLinkInformation"),s="";return new G({mode:b.LineMode,state:c.Failed,header:h,subheader:s});},getTileModelByCatalogTileId:function(s,t){var o=this._findCatalogTile(s),f;t=t||"tile";f=this.getPreparedTileModel({},false,t);f.tileCatalogId=s;f.object={id:f.uuid,type:t,title:this.oPageBuilderService.getCatalogTileTitle(o)};var v=this._getTileView(o,t);f.content=[v];return f;},transformGroupModel:function(g){var t=this,o;for(var i=0;i<g.length;i++){o=g[i];o.object={};o.tiles.forEach(function(f){var s=f.object;f.tileCatalogId=t.oPageBuilderService.getCatalogTileId(s);f.object={id:f.uuid,type:"tile",title:t.oPageBuilderService.getTileTitle(s)};});o.links.forEach(function(l){var s=l.object;l.tileCatalogId=t.oPageBuilderService.getCatalogTileId(s);l.object={id:l.uuid,type:"link",title:t.oPageBuilderService.getTileTitle(s)};});}return g;}});var e;return{getInstance:function(){if(!e){e=new d();}return e;},destroy:function(){e=null;}};});
sap.ui.predefine('sap/ushell/components/applicationIntegration/AppLifeCycle',["sap/ushell/components/applicationIntegration/elements/model","sap/ushell/components/applicationIntegration/Storage","sap/ushell/components/applicationIntegration/application/BlueBoxHandler","sap/ushell/ui5service/ShellUIService","sap/ushell/components/applicationIntegration/application/Application","sap/ushell/components/applicationIntegration/relatedServices/RelatedServices","sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements","sap/ushell/components/applicationIntegration/configuration/AppMeta","sap/ushell/services/AppConfiguration","sap/ushell/utils","sap/ui/Device","sap/ushell/Config","sap/ushell/ui5service/AppIsolationService","sap/ushell/ApplicationType","sap/ushell/components/applicationIntegration/DelegationBootstrap","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/Log"],function(E,S,B,a,A,R,b,c,d,u,D,C,f,g,h,U,q,L){"use strict";function i(){var v,j=["URL"],r,s,k,I={},o,l=false,m={},n={home:{embedded:"embedded-home",headerless:"headerless-home",merged:"blank-home",blank:"blank-home"},app:{minimal:"minimal",app:"app",standalone:"standalone",embedded:"embedded",headerless:"headerless",merged:"merged",home:"home",blank:"blank",lean:"lean"}},p,G=[],t={},w=false;this.shellElements=function(){return b;};this.service=function(){return R;};this.isCurrentApp=function(e){return(m.appId===e);};this.isAppWithSimilarShellHashInCache=function(e,F){var x=S.get(e);if(x){if(x.shellHash===F){return true;}return false;}return false;};this.isAppInCache=function(e){return!!S.get(e);};this.normalizeAppId=function(e){var x="-component",y=e.endsWith(x);if(y){return e.substring(0,e.length-x.length);}return e;};this.onComponentCreated=function(e,x,y){var z=y.component,F=this.normalizeAppId(z.getId());if(this.isAppInCache(F)){S.get(F).app=z;this.active(F);}else{m.app=z;if(z.active){z.active();}}};this.onGetMe=function(e,x,y){y.AppLifeCycle=this;};this.store=function(e){var x=S.get(e);if(x){A.store(x.app);R.store(x.service);c.store(x.meta);}};this.destroy=function(e,F){var x=S.get(e),y;function z(){A.destroy(F);b.destroy(F);c.destroy(F);}this.removeControl(e);if(x){y=B.getStateFul(F.getUrl());if(y&&B.isStatefulContainerSupported(y)){var H=B.getHandler();H.destroy(y,e);}else{x.container.destroy();B.deleteStateFul(F.getUrl());}S.remove(e);}else{var P=F&&F.sendBeforeAppCloseEvent&&F.sendBeforeAppCloseEvent();if(P===undefined){z();}else{P.then(function(){z();},function(J){z();q.sap.log.error("FLP got a failed response from the iframe for the 'sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent' message sent",J,"sap.ushell.components.applicationIntegration.AppLifeCycle.js");});}}};this.restore=function(e){var x=S.get(e);if(x){A.restore(x.app);R.restore(x.service);c.restore(x.meta);}};this.active=function(e){var x=S.get(e);if(x){A.active(x.app);}};this.handleExitStateful=function(F,e){var x,H=B.getHandler();if(S.get(F)){x=B.getStorageKey(e);if(x&&B.isKeepAliveSupported(e)){return H.store(e,x);}return Promise.resolve();}return H.destroy(e);};this.handleExitApplication=function(F,e,x){var y;if(F&&e){if(e.getUrl()&&B.isStatefulContainerSupported(B.getStateFul(e.getUrl()))){this.handleExitStateful(F,e);}else if(S.get(F)){this.store(F);sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",e);}else if((e.getIsStateful&&e.getIsStateful())||(e.getApplicationType&&this.applicationIsStatefulType(e.getApplicationType()))){if(x){e.postMessageRequest("sap.gui.triggerCloseSessionImmediately");}}else{y=j.indexOf(e.getApplicationType)>=0;if(this.isAppOfTypeCached(F,y)===false){this.destroy(F,e);}}if(F.indexOf("Shell-appfinder-component")>0){sap.ui.getCore().getEventBus().publish("sap.ushell","appFinderAfterNavigate");}}};this.onAfterNavigate=function(F,e,T,x){var y=T.indexOf("Shell-appfinder-component")>0||T.indexOf("Shell-home-component")>0;this.handleExitApplication(F,e,y);if(T){if(S.get(T)){this.restore(T);}else{}}};this.storeApp=function(e,x,T,F){if(!this.isAppInCache(e)){S.set(e,{service:R.create(),shellHash:F,appId:e,stt:"loading",appRelatedElements:b.getAppRelatedElement(),container:x,meta:d.getMetadata(T),app:undefined});I[F]=e;B.setStorageKey(x,e);return true;}return false;};this.restoreApp=function(e){if(this.isAppInCache(e)){m=S.get(e);if(B.getStorageKey(m.container)){B.setStorageKey(m.container,e);}}};this.isAppOfTypeCached=function(e,x){if(!l&&e.indexOf(r)!==-1){return true;}if(!l&&e.indexOf("Shell-appfinder")!==-1){return true;}if(new U(window.location.href).get("sap-keep-alive")=="true"&&x){return true;}return false;};i.prototype._getURLParsing=function(){if(!this._oURLParsing){this._oURLParsing=sap.ushell.Container.getService("URLParsing");}return this._oURLParsing;};this.calculateAppType=function(T){if(T.applicationType==="URL"&&T.additionalInformation&&T.additionalInformation.startsWith("SAPUI5.Component=")){return"SAPUI5";}return T.applicationType;};this.getStatefulCapabilities=function(T){if(T.appCapabilities&&T.appCapabilities&&T.appCapabilities.statefulContainer){return T.appCapabilities.statefulContainer;}return undefined;};this.isNotifyInnerAppRouteChangeEnabled=function(T){if(T.appCapabilities&&T.appCapabilities.notifyInnerAppRouteChange){return true;}return false;};this.isStatefulCapabilityEnabled=function(T){var e=this.getStatefulCapabilities(T);if(e&&(e.enabled===true||e===true)){return true;}return false;};this.isGUICapabilityEnabled=function(T){var e=this.getStatefulCapabilities(T);if(e&&e.protocol==="GUI"){return true;}return false;};this.isFLPCapabilityEnabled=function(T){return!this.isGUICapabilityEnabled(T)&&this.isStatefulCapabilityEnabled(T);};this.isGUIStatefulCapabilityEnabled=function(T){return this.isGUICapabilityEnabled(T)&&this.isStatefulCapabilityEnabled(T);};this.openApp=function(e,T,x,F){var y,z,H=j.indexOf(T.applicationType)>=0,J,K;var M="application"+e;y=B.getStateFul(T.url);if(y&&B.isStatefulContainerSupported(y)){if(this.isAppOfTypeCached(M,H)||this.isCachedEnabledAsAppParameter(x,T)){if(!this.isAppInCache(M)){this.storeApp(M,y,T,F);}this.restoreApp(M);}else{m={appId:M,stt:"loading",container:y,meta:d.getMetadata(T),app:undefined};}}else if(this.isAppOfTypeCached(M,H)||this.isCachedEnabledAsAppParameter(x,T)){if(!this.isAppInCache(M)){y=this.createApplicationContainer(e,T);this.storeApp(M,y,T,F);B.set(T.url,y);}this.restoreApp(M);}else if(this.applicationIsStatefulType(T.applicationType)||B.isCapByTarget(T,"isGUIStateful")){y=this.getStatefulContainer(T.applicationType);if(!y){y=this.createApplicationContainer(e,T);this.setStatefulContainer(T.applicationType,y);y.setIsStateful(true);}m={appId:M,stt:"loading",container:y,meta:d.getMetadata(T),app:undefined};}else{if(y){z=x.semanticObject+"-"+x.action;this.removeApplication(z);}else if(T.applicationType==="URL"){z=x.semanticObject+"-"+x.action;J=B.getById("application-"+z);if(J&&B.isStatefulContainerSupported(J)){K=J.getUrl();B.removeCapabilities(J);this.destroy("application-"+z,J);B.deleteStateFul(K);}}y=this.createApplicationContainer(e,T);B.set(T.url,y);if(B.isCapUT(y,"isFLP")){B.setCapabilities(y,[{service:"sap.ushell.services.appLifeCycle",action:"create"},{service:"sap.ushell.services.appLifeCycle",action:"destroy"}]);}m={appId:M,stt:"loading",container:y,meta:d.getMetadata(T),app:undefined};}};this.getAppMeta=function(){return c;};this.evict=function(e){var x,y=e.value,z=e.key;this.removeControl(z);if(y.container.getUrl&&y.container.getUrl()){x=B.getStateFul(y.container.getUrl());}if(x){var H=B.getHandler();H.destroy(x,z);}else{y.container.destroy();}};this.init=function(e,x,y,z,F,H,J){var K=this,M;if(D.system.phone){M=10;if(J&&J.limit&&J.limit.phone){M=J.limit.phone;}}else if(D.system.tablet){M=10;if(J&&J.limit&&J.limit.tablet){M=J.limit.tablet;}}else if(D.system.desktop){M=15;if(J&&J.limit&&J.limit.desktop){M=J.limit.desktop;}}else{M=10;}h.init(this.registerShellCommunicationHandler,this.postMessageToIframeApp);h.bootstrap();s=new a({scopeObject:F.ownerComponent,scopeType:"component"});o=new f({scopeObject:F.ownerComponent,scopeType:"component"});k=e;v=x;r=y;c.init(r);l=z;B.init({oShellUIService:s,oAppIsolationService:o},J,this);S.init(M,function(O){this.evict(O);}.bind(this));this.registerShellCommunicationHandler({"sap.ushell.services.appLifeCycle":{oRequestCalls:{"create":{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(P){P.then(function(O){L.info("sap.ushell.services.appLifeCycle.create:"+O);}).catch(function(O){L.error("Error: sap.ushell.services.appLifeCycle.create:"+O);});}},"destroy":{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(P){P.then(function(O){L.info("sap.ushell.services.appLifeCycle.destroy:"+O);}).catch(function(O){L.error("Error: sap.ushell.services.appLifeCycle.destroy:"+O);});}},"store":{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(P){P.then(function(O){L.info("sap.ushell.services.appLifeCycle.store:"+O);}).catch(function(O){L.error("Error: sap.ushell.services.appLifeCycle.store:"+O);});}},"restore":{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(P){P.then(function(O){L.info("sap.ushell.services.appLifeCycle.restore:"+O);}).catch(function(O){L.error("Error: sap.ushell.services.appLifeCycle.restore:"+O);});}}},oServiceCalls:{"subscribe":{executeServiceCallFn:function(O){B.mapCapabilities(O.oContainer,O.oMessageData.body);return new q.Deferred().resolve({}).promise();}},"setup":{executeServiceCallFn:function(O){return new q.Deferred().resolve().promise();}}}}});this.registerShellCommunicationHandler({"sap.ushell.eventDelegation":{oRequestCalls:{"registerEventHandler":{isActiveOnly:false,distributionType:["URL"]}},oServiceCalls:{"registerEventHandler":{executeServiceCallFn:function(O){var P=N(O);return new q.Deferred().resolve(P).promise();}}}}});function N(O){var P=O.oMessageData.body.eventSerObj;return K.registerEventHandler(P);}sap.ui.getCore().getEventBus().subscribe("sap.ushell","appComponentLoaded",this.onComponentCreated,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","getAppLifeCycle",this.onGetMe,this);b.init(this.getElementsModel(),H);};this.addControl=function(e){v.addCenterViewPort(e);};this.removeControl=function(e){var x=B.getById(e),y=B.isStatefulContainerSupported(x);if(!y){v.removeCenterViewPort(e,true);}};this.removeApplication=function(e){var x=this.getControl(e);if(x){this.removeControl(x.getId());x.destroy();}};this.getControl=function(e){return v&&(v.getViewPortControl("centerViewPort","application-"+e)||v.getViewPortControl("centerViewPort","applicationShellPage-"+e));};this.getViewPortContainer=function(){return v;};this.navTo=function(e){v.navTo("centerViewPort",e,"show");};this.getCurrentApplication=function(){return m;};this.setApplicationFullWidth=function(e){var x=this.getCurrentApplication();if(x.container){x.container.toggleStyleClass("sapUShellApplicationContainerLimitedWidth",!e);}};this.createComponent=function(e,P){this.shellElements().setDangling(true);return A.createComponent(e,P);};this.getAppContainer=function(e,x,y,z,F){x.shellUIService=s.getInterface();x.appIsolationService=o.getInterface();x.targetNavigationMode=y?"explace":"inplace";this.openApp(e,x,z,F);if(G.length>0){m.container.registerShellCommunicationHandler(G);}if(t.UI5APP){m.container.setIframeHandlers(t.UI5APP);}return m.container;};this.getShellUIService=function(){return s;};this.getAppIsolationService=function(){return o;};this.initShellUIService=function(e){s._attachHierarchyChanged(c.onHierarchyChange.bind(this));s._attachTitleChanged(c.onTitleChange.bind(this));s._attachRelatedAppsChanged(c.onRelatedAppsChange.bind(this));s._attachBackNavigationChanged(e.fnOnBackNavigationChange.bind(this));};this.parseStatefulContainerConfiguration=function(e){var x={};if(e){var y={"GUI":true};Object.keys(e).filter(function(z){return e[z]===true&&y[z];}).map(function(z){var F=z;if(F==="GUI"){F="TR";}return F;}).forEach(function(z){x[z]=null;});}p=x;};this.setStatefulApplicationContainer=function(e){p=e;};this.getStatefulApplicationContainer=function(){return p;};this.applicationIsStatefulType=function(e){return p.hasOwnProperty(e);};this.getStatefulContainer=function(e){return p[e];};this.setStatefulContainer=function(e,x){p[e]=x;};this.statefulContainerForTypeExists=function(e){return!!this.getStatefulContainer(e);};this.getAllApplicationContainers=function(){return Object.keys(p).map(function(K){return p[K];}).filter(function(e){return!!e;});};this.getElementsModel=function(){return E;};this.activeContainer=function(x){var y=this.getAllApplicationContainers();y.forEach(function(e){L.info("Deactivating container "+e.getId());e.setActive(false);});B.forEach(function(z){if(z&&z!==x){try{L.info("Deactivating container "+z.getId());z.setActive(false);}catch(e){}}});if(x){L.info("Activating container "+x.getId());x.setActive(true);}};this.showApplicationContainer=function(e){this.navTo(e.getId());e.toggleStyleClass("hidden",false);L.info("New application context opened successfully in an existing transaction UI session.");};this.reuseStateFulContainerAndRestore=function(e,T,H,F,x){var y=this,z=I[F];if(B.getStorageKey(e)){B.setStorageKey(e,z);}return H.restore(e,z,x).then(function(){y.showApplicationContainer(e);},function(J){L.error(J&&J.message||J);});};this.reuseStateFulContainer=function(e,x,T,H,F,y){var z=this;I[F]=T;if(B.getStorageKey(e)){B.setStorageKey(e,T);}this.initAppMetaParams();return H.create(e,x,T,y).then(function(){z.showApplicationContainer(e);},function(J){L.error(J&&J.message||J);});};this.initAppMetaParams=function(){if(!this.getAppMeta().getIsHierarchyChanged()){s.setHierarchy();}if(!this.getAppMeta().getIsTitleChanged()){s.setTitle();}if(!this.getAppMeta().getIsRelatedAppsChanged()){s.setRelatedApps();}if(!w){s.setBackNavigation();}};this.reuseApplicationContainer=function(e,x,y){var z=this;return e.setNewApplicationContext(x,y).then(function(){z.navTo(e.getId());e.toggleStyleClass("hidden",false);L.info("New application context opened successfully in an existing transaction UI session.");},function(F){L.error(F&&F.message||F);});};this.createApplicationContainer=function(e,x){return A.createApplicationContainer(e,x);};this.publishNavigationStateEvents=function(e,x,O){var y,z=e.getId?e.getId():"",F=this;var H=d.getMetadata(),J=H.icon,T=H.title;e.addEventDelegate({onAfterRendering:O});y=e.exit;e.exit=function(){if(y){y.apply(this,arguments);}F.getAppMeta()._applyContentDensityByPriority();setTimeout(function(){var K=q.extend(true,{},x);delete K.componentHandle;K.appId=z;K.usageIcon=J;K.usageTitle=T;sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",K);L.info("app was closed");},0);var P=F._publicEventDataFromResolutionResult(x);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appClosed",P);};};this._publicEventDataFromResolutionResult=function(e){var P={};if(!e){return e;}["applicationType","ui5ComponentName","url","additionalInformation","text"].forEach(function(x){P[x]=e[x];});Object.freeze(P);return P;};this.isCachedEnabledAsAppParameter=function(e,T){if(e&&e.params&&e.params["sap-keep-alive"]){if(e.params["sap-keep-alive"]=="true"){return true;}}if(T&&T.url){if(new U(T.url).get("sap-keep-alive")=="true"){return true;}}return false;};this.getInMemoryInstance=function(e,F){var x="application-"+e,y=S.get(x);if(y){if(y.shellHash===F){return{isInstanceSupported:true,appId:y.appId,container:y.container};}return{isInstanceSupported:false,appId:y.appId,container:y.container};}return{isInstanceSupported:false,appId:undefined,container:undefined};};this.handleOpenStateful=function(e,x,T,y,z,F){var H=B.getHandler();if(S.get(T)&&e===false){this.reuseStateFulContainerAndRestore(y,T,H,F,z);}else{this.reuseStateFulContainer(y,z.url,T,H,F,z);if(x){if(!this.isAppInCache(T)){this.storeApp(T,y,z,F);}}}};this.leave=function(e,x){var y=B.isStatefulContainerSupported(e);if(y){return this.handleExitStateful(x,e);}return Promise.resolve();};this.open=function(e,x,y,T,W,F,M){var z,H=this.statefulContainerForTypeExists(T.applicationType),J,K=j.indexOf(T.applicationType)>=0,N="application-"+e,O,P=this.isAppOfTypeCached(N,K)||this.isCachedEnabledAsAppParameter(y,T),Q,V=false,X,Y;Q=this.calculateAppType(T);X=g.getDefaultFullWidthSetting(Q);z=B.getStateFul(T.url);J=B.isStatefulContainerSupported(z);if(!J){if(m||N!==m.appId){z=undefined;}O=S.get("application"+x);if(O){z=O.container;if(!J&&P&&z!==undefined){Y=true;}}}if(J){if(!z){z=W(e,M,y,T,x,T.fullWidth||M.fullWidth||X,F);this.restoreApp(z.getId());this.navTo(z.getId());V=true;}}else if(!H&&z&&!P){this.destroy(z.getId(),z);z=W(e,M,y,T,x,T.fullWidth||M.fullWidth||X,F);}else if(!z){z=W(e,M,y,T,x,T.fullWidth||M.fullWidth||X,F);}if(!H&&!J){if(Y===true){sap.ui.getCore().getEventBus().publish("launchpad","appOpening",T);}this.restoreApp(z.getId());this.navTo(z.getId());if(Y===true){sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",T);}}v.switchState("Center");u.setPerformanceMark("FLP -- centerViewPort");this.activeContainer(z);if(J){this.handleOpenStateful(V,P,"application"+x,z,T,F);}else if(H){this.reuseApplicationContainer(z,T.applicationType,T.url);}return Promise.resolve();};this.handleControl=function(e,x,y,T,W,F){var z=this,M=d.getMetadata(T),H=v.getCurrentCenterPage?v.getCurrentCenterPage():undefined,J=sap.ui.getCore().byId(H);var P=z.leave(J,H).then(function(){z.open(e,x,y,T,W,F,M);},function(K){L.error(K&&K.message||K);});return P;};this.switchViewState=function(e,x,y){var z=e,F;if(n[e]&&n[e][k]){z=n[e][k];}var H=C.last("/core/shell/model/currentState/stateName")==="home";if(!H&&(!m.appId||!S.get(m.appId))){E.destroyManageQueue();}F=S.get("application"+y);if(F){b.restore(F);}else{b.assignNew(e);}E.switchState(z,x,y);this.shellElements().setDangling(false);this.shellElements().processDangling();if(e==="searchResults"){this.getElementsModel().setProperty("/lastSearchScreen","");if(!window.hasher.getHash().indexOf("Action-search")===0){var J=sap.ui.getCore().getModel("searchModel");window.hasher.setHash("Action-search&/searchTerm="+J.getProperty("/uiFilter/searchTerms")+"&dataSource="+JSON.stringify(J.getProperty("/uiFilter/dataSource").getJson()));}}};this.registerShellCommunicationHandler=function(e){A.registerShellCommunicationHandler(e);};this.registerIframeCommunicationHandler=function(H,T){t[T]=H;};this.postMessageToIframeApp=function(e,x,M,W){var y,z=A.getActiveAppContainer(),F=[];if(B.hasIFrame(z)&&(B.isCapabilitySupported(z,e,x)||A.isAppTypeSupported(z,e,x))){F.push(A.postMessageToIframeApp(z,e,x,M,W));}if(!A.isActiveOnly(e,x)){B.forEach(function(O){if(B.hasIFrame(O)){if(B.isCapabilitySupported(O,e,x)||A.isAppTypeSupported(O,e,x)){F.push(A.postMessageToIframeApp(O,e,x,M,W));}}});}y=A.getResponseHandler(e,x);var H=Promise.all(F);if(y){y(H);}return H;};this.postMessageToIframeAppAccordingToPolicy=function(e,x,M,W,P){var y,z=A.getActiveAppContainer(),F=[];if(B.hasIFrame(z)&&A.isAppTypeSupportedByPolicy(z,P)){F.push(A.postMessageToIframeApp(z,e,x,M,W));}if(!P.isActiveOnly){B.forEach(function(O){if(B.hasIFrame(O)){if(B.isCapabilitySupported(O,e,x)||A.isAppTypeSupported(O,e,x)){F.push(A.postMessageToIframeApp(O,e,x,M,W));}}});}y=A.getResponseHandler(e,x);var H=Promise.all(F);if(y){y(H);}return H;};this.registerTunnels=function(T){h.registerTunnels(T,this.registerShellCommunicationHandler);};this.registerEvents=function(e){h.registerEvents(e,this.registerShellCommunicationHandler);};this.setBackNavigationChanged=function(e){w=e;};this.getBackNavigationChanged=function(){return w;};}return new i();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/DelegationBootstrap',["sap/ushell/components/applicationIntegration/eventDelegation/tunnels"],function(t){"use strict";var a=this;function D(){a=this;this.init=function(r,p){a.fnRegisterCommHandler=r;a.fnPostMessageToIframe=p;t.init(r);};this.bootstrap=function(){a.fnRegisterCommHandler({"sap.ushell.demo":{oRequestCalls:{"passCoordinates":{isActiveOnly:true,distributionType:["URL"],fnResponseHandler:function(p){p.then(function(r){Log.info("sap.ushell.dem.passCoordinates:"+r);}).catch(function(E){Log.error("sap.ushell.dem.passCoordinates:"+E);});}}}}});var c={},i={clickCallback:function(b){a.fnPostMessageToIframe("sap.ushell.demo","passCoordinates",{screenX:b.screenX,screenY:b.screenY},false);},keyPressCallback:function(b){}},e={"addlistener":{oInterface:document,sFuncName:"addEventListener",fnProxy:function(b,C,u){var o,n;if(C.pairedInterface){o=t.getPairedMethod(C.pairedInterface);}else if(C.getUUID){n=C.getUUID();if(c[n]){o=c[n]}else{o=function(d){C({screenX:d.screenX,screenY:d.screenY})};c[n]=o;}}else{o=C;}return[b,o,u];},fnSpy:function(b){return b==="click"||b==="keypress";}},"removelistener":{oInterface:document,sFuncName:"removeEventListener",fnProxy:function(b,C,u){var o;if(C.pairedInterface){o=t.getPairedMethod(C.pairedInterface);}else if(C.getUUID){o=c[C.getUUID()];}else{o=C;}return[b,o,u];},fnSpy:function(b){return b==="click"||b==="keypress";}},"appOpening":{oInterface:sap.ui.getCore().getEventBus(),sFuncName:"subscribe",fnSpy:function(p,b){return p==="launchpad"&&b==="appOpening";}}},T={"clickCallback":{oInterface:i,sFuncName:"clickCallback",pair:{sMethod:"clickCallback",sInterface:"sap.ushell.pairedInterface",fnExtractArguments:function(s){return[{screenX:s.oMessageData.body.screenX,screenY:s.oMessageData.body.screenY}];}}},"keyPressCallback":{oInterface:i,sFuncName:"keyPressCallback"},"demoFunction":{oInterface:{demoFunction:function(A){return"Outer Shell says: Your argument is: "+A.demo;}},sFuncName:"demoFunction"}};t.registerEvents(e);t.registerTunnels(T);};this.setup=function(r){t.setup(r);};this.createInterface=function(c){var i=c.name,C=c.callback;t.createInterface(i,a.fnRegisterCommHandler,C);};this.registerEvents=function(e){t.registerEvents(e);};this.registerTunnels=function(T){t.registerTunnels(T);};}return new D();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/Storage',[],function(){"use strict";function S(){var c,e;function L(l){this.size=0;if(typeof l=="number"){this.limit=l;}else{this.limit=10;}this.map={};this.head=null;this.tail=null;}L.prototype.LRUnode=function(k,v){if(typeof k!="undefined"&&k!==null){this.key=k;}if(typeof v!="undefined"&&v!==null){this.value=v;}this.prev=null;this.next=null;};L.prototype.setHead=function(n){n.next=this.head;n.prev=null;if(this.head!==null){this.head.prev=n;}this.head=n;if(this.tail===null){this.tail=n;}this.size++;this.map[n.key]=n;};L.prototype.set=function(k,v){var n=new L.prototype.LRUnode(k,v);if(this.map[k]){this.map[k].value=n.value;this.remove(n.key);}else if(this.size>=this.limit){var E=this.map[this.tail.key];delete this.map[this.tail.key];this.size--;this.tail=this.tail.prev;this.tail.next=null;if(e){e(E);}}this.setHead(n);};L.prototype.get=function(k){if(this.map[k]){var v=this.map[k].value;var n=new L.prototype.LRUnode(k,v);this.remove(k);this.setHead(n);return v;}else{return null;}};L.prototype.remove=function(k){var n=this.map[k];if(n.prev!==null){n.prev.next=n.next;}else{this.head=n.next;}if(n.next!==null){n.next.prev=n.prev;}else{this.tail=n.prev;}delete this.map[k];this.size--;};L.prototype.removeAll=function(l){this.size=0;this.map={};this.head=null;this.tail=null;if(typeof l=="number"){this.limit=l;}};L.prototype.forEach=function(a){var n=this.head,i=0;while(n){a.apply(this,[n,i,this]);i++;n=n.next;}};L.prototype.toJSON=function(){var j=[],n=this.head;while(n){j.push({key:n.key,value:n.value});n=n.next;}return j;};L.prototype.toString=function(){var s='',n=this.head;while(n){s+=String(n.key)+':'+n.value;n=n.next;if(n){s+='\n';}}return s;};this.init=function(l,i){c=new L(l);e=i;};this.get=function(k){return c.get(k);};this.set=function(k,v){c.set(k,v);};this.remove=function(k){c.remove(k);};this.forEach=function(a){c.forEach(a);};}return new S();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/Application',["sap/ushell/components/container/ApplicationContainer","sap/ushell/components/applicationIntegration/application/PostMessageAPI","sap/ushell/utils","sap/ui/thirdparty/jquery","sap/ushell/components/applicationIntegration/eventDelegation/tunnels","sap/ui/thirdparty/URI"],function(A,P,u,q,t,U){"use strict";var a,B,T={},o={},f={},b=0,c=A.getMetadata().getJSONKeys();function d(){var g=this;this.handleMessageEvent=function(C,m,M){var h=m.data;if(typeof h==="string"){try{h=g.parse(m.data);}catch(e){q.sap.log.debug("Message received from origin '"+m.origin+"' cannot be parsed: "+e,h,"sap.ushell.components.container.ApplicationContainer");return;}}if(h.action==="pro54_setGlobalDirty"&&localStorage.getItem(C.globalDirtyStorageKey)===sap.ushell.Container.DirtyState.PENDING){if(!A.prototype._isTrustedPostMessageSource(C,m)){q.sap.log.warning("Received message from untrusted origin: "+m.origin,h,"sap.ushell.components.container.ApplicationContainer");return;}q.sap.log.debug("getGlobalDirty() pro54_setGlobalDirty SetItem key:"+C.globalDirtyStorageKey+" value: "+h.parameters.globalDirty,null,"sap.ushell.components.container.ApplicationContainer");u.localStorageSetItem(C.globalDirtyStorageKey,h.parameters.globalDirty,true);}else{g.handleServiceMessageEvent(C,m,h,M);}};this.handleServiceMessageEvent=function(C,m,M,h){var p=q.sap.getObject("sap-ushell-config.services.PostMessage.config",0),s=M&&M.service,S=t.getPairedServiceCall(s),i,j,k,l,I=false,n=P.getAPIs();q.sap.log.debug("Received post message request from origin '"+m.origin+"': "+JSON.stringify(M),null,"sap.ushell.components.container.ApplicationContainer");if(S){r(S);return;}if(M.type!=="request"||!s){return;}for(var E in n){if(n.hasOwnProperty(E)){if(s.indexOf(E)!==-1){j=n[E];k=E;I=true;break;}}}if(I===false){h.bApiRegistered=false;return;}i=s.split(".")[3];if(p&&p.enabled===false){q.sap.log.warning("Received message for "+i+", but this "+"feature is disabled. It can be enabled via launchpad configuration "+"property 'services.PostMessage.config.enabled: true'",undefined,"sap.ushell.components.container.ApplicationContainer");return;}if(!A.prototype._isTrustedPostMessageSource(C,m)){q.sap.log.warning("Received message from untrusted origin '"+m.origin+"': "+JSON.stringify(m.data),null,"sap.ushell.components.container.ApplicationContainer");return;}function r(e){var D={matchesLocalSid:z,getLocalSystemInSidForma:y,storeSapSystemData:x,executeSetBackNavigationService:w,sendResponseMessage:v,oMessage:m,oMessageData:M,oContainer:C};try{e(D).done(function(R){v("success",{result:R});}).fail(function(G){v("error",{message:G});});}catch(F){v("error",{message:F.message});}}function v(e,D){var R=g.stringify({type:"response",service:M.service,request_id:M.request_id,status:e,body:D});q.sap.log.debug("Sending post message response to origin ' "+m.origin+"': "+R,null,"sap.ushell.components.container.ApplicationContainer");if(typeof m.source!=="object"||m.source===null){q.sap.log.debug("Cannot send response message to origin ' "+m.origin,"`source` member of request message is not an object","sap.ushell.components.container.ApplicationContainer");return;}m.source.postMessage(R,m.origin);}function w(m,M){var D=new q.Deferred(),e;if(M.body&&M.body.callbackMessage&&M.body.callbackMessage.service){e=A.prototype._backButtonPressedCallback.bind(null,m.source,M.body.callbackMessage.service,m.origin);}D.resolve(C.getShellUIService().setBackNavigation(e));return D.promise();}function x(D,F){var K,L,G,H=[D.id];if(arguments.length>1){H.unshift(F);}try{G=JSON.stringify(D);}catch(e){q.sap.log.error("Cannot stringify and store expanded system data: "+e);}if(G){L=u.getLocalStorage();K=u.generateLocalStorageKey("sap-system-data",H);L.setItem(K,G);}}function y(){var e=sap.ushell.Container.getLogonSystem();var D=e.getName();var F=e.getClient();return"sid("+D+"."+F+")";}function z(e){return y().toLowerCase()===e.toLowerCase();}l=j.oServiceCalls[M.service.replace(k+".","")];if(l&&l.executeServiceCallFn){r(l.executeServiceCallFn);}else{v("error",{message:"Unknown service name: '"+M.service+"'"});}};this.init=function(i){B=i;this.registerShellCommunicationHandler({"sap.ushell.PostMessage":{oServiceCalls:{"callTunnelFunction":{executeServiceCallFn:function(s){var e=s.oMessageData.body.content,h=g.restoreArray(e.arguments),r;r=T[e.UUID].fnCallback.apply(this,h);return new q.Deferred().resolve(r).promise();}}},oRequestCalls:{"callTunnelFunction":{isActiveOnly:true,distributionType:["URL"]}}}});};this.restoreArray=function(e){var h=[],i=0;while(e[i]){h.push(e[i]);i++;}return h;};this._createWaitForRendererCreatedPromise=function(){var p,r;r=sap.ushell.Container.getRenderer();if(r){q.sap.log.debug("Shell controller._createWaitForRendererCreatedPromise: shell renderer already created, return empty array.");return[];}p=new Promise(function(e,h){var O;O=function(){q.sap.log.info("Shell controller: resolving component waitFor promise after shell renderer created event fired.");e();sap.ushell.Container.detachRendererCreatedEvent(O);};r=sap.ushell.Container.getRenderer();if(r){q.sap.log.debug("Shell controller: resolving component waitFor promise immediately (shell renderer already created");e();}else{sap.ushell.Container.attachRendererCreatedEvent(O);}});return[p];};this.createComponent=function(r,p){return sap.ushell.Container.getService("Ui5ComponentLoader").createComponent(r,p,this._createWaitForRendererCreatedPromise());};this.stripURL=function(s){var n=s.indexOf("?"),e=s.indexOf("#"),h;if(n>=0){h=s.substr(0,n);}else if(e>=0){h=s.substr(0,e);}else{h=s;}return h;};this.createApplicationContainer=function(s,r){var e={};this._cleanTargetResolution(r,e);a=new A("application"+s,r);this._restoreTargetResolution(r,e);a.setHandleMessageEvent(this.handleMessageEvent);B.setAppCapabilities(a,r);return a;};this.active=function(e){if(e){if(e.active){e.active();}}};this.restore=function(e){var D;if(e){if(e.getUrl){D=e.getUrl();a=B.get(this.stripURL(D));if(a){B.restoreApp(a.sApplication);}}if(e.restore){e.restore();}if(e.setInitialConfiguration){e.setInitialConfiguration();}if(e.getRouter&&e.getRouter()&&e.getRouter().initialize){e.getRouter().initialize();}a=e;}};this.store=function(e){var D;if(e){if(e.getUrl){D=e.getUrl();a=B.get(this.stripURL(D));if(a){B.storeApp(a.sApplication);}}if(e.suspend){e.suspend();}if(e.getRouter&&e.getRouter()){e.getRouter().stop();}}};this.destroy=function(e){var D,a,h=false;if(e){if(e.getUrl){D=e.getUrl();a=B.get(this.stripURL(D));if(B.isStatefulContainerSupported(a)){h=true;B.destroyApp(a.sApplication);}}if(e.destroy&&h===false){e.destroy();}}};this.getActiveAppContainer=function(){return a;};}d.prototype._cleanTargetResolution=function(r,e){var k;if(r){for(k in r){if(c[k]===undefined){e[k]=r[k];delete r[k];}}}};d.prototype._restoreTargetResolution=function(r,e){var k;if(r){for(k in e){r[k]=e[k];}}};d.prototype.stringify=function(D){var e=function(C){b++;T[b]={fnCallback:C};return{type:"tunnel",UUID:b};},g=[],r=JSON.stringify(D,function(k,v){if(v!==null){if(typeof v==="object"||typeof v==="function"){if(g.indexOf(v)!==-1){return;}g.push(v);}}if(typeof v==="function"){var n=o[v];if(n){return{type:"reversetunnel",UUID:n};}return e(v);}return v;});return r;};d.prototype.parse=function(D){var e=this;return JSON.parse(D,function(k,v){if(v&&v.type==="reversetunnel"){return T[v.UUID].fnCallback;}else if(v&&v.type==="tunnel"){var g;if(f[v.UUID]){g=f[v.UUID];}else{var h=e.getActiveAppContainer();g=function(){e.postMessageToIframeApp(h,"sap.ushell.PostMessage","callTunnelFunction",{"content":{UUID:v.UUID,arguments:arguments}},true);};g.getUUID=function(){return v.UUID;};o[g]=v.UUID;f[v.UUID]=g;}return g;}return v;});};d.prototype.getResponseHandler=function(s,i){return P.getResponseHandler(s,i);};d.prototype.isActiveOnly=function(s,i){return P.isActiveOnly(s,i);};d.prototype.isAppTypeSupported=function(C,s,i){var e=P._getPostMesageInterface(s,i);return this.isAppTypeSupportedByPolicy(C,e);};d.prototype.isAppTypeSupportedByPolicy=function(C,p){if(C&&C.getAdditionalInformation&&C.getAdditionalInformation().startsWith("SAPUI5.Component=")){return false;}var e=p;if(!e||!e.distributionType){return false;}if(e.distributionType.indexOf("all")>=0){return true;}if(e.distributionType.indexOf("URL")>=0){return false;}if(C.getApplicationType&&e.distributionType.indexOf(C.getApplicationType())>=0){return true;}return false;};d.prototype.postMessageToIframeApp=function(C,s,i,m,w){var S=s+"."+i,M=this.createPostMessageRequest(S,m);return this.postMessageToIframe(M,C,w);};d.prototype.createPostMessageRequest=function(s,m){var r=Date.now().toString();return{"type":"request","request_id":r,"service":s,"body":m};};d.prototype.postMessageToIframe=function(m,C,w){var g=this,r=m.request_id,i=C._getIFrame();return new Promise(function(n,N){function p(E){var k;try{k=g.parse(E.data,g);if(r!==k.request_id){return;}if(k.status==="success"){n(k);}else{N(k);}window.removeEventListener("message",p);}catch(e){n();q.sap.log.warning("Obtained bad response from framework in response to message "+m.request_id);q.sap.log.debug("Underlying framework returned invalid response data: '"+E.data+"'");}}var M=g.stringify(m);q.sap.log.debug("Sending postMessage "+M+" to application container '"+C.getId()+"'");var h,j;if(!i){n();}else if(w){window.addEventListener("message",p,false);h=new U(C._getIFrameUrl(i));j=h.protocol()+"://"+h.host();i.contentWindow.postMessage(M,j);}else{h=new U(C._getIFrameUrl(i));j=h.protocol()+"://"+h.host();i.contentWindow.postMessage(M,j);n();}});};d.prototype.registerShellCommunicationHandler=function(C){P.registerShellCommunicationHandler(C);};d.prototype.addShellCommunicationHandler=function(k,C){P.addShellCommunicationHandler(k,C);};d.prototype._getPostMesageInterface=function(s,i){return P._getPostMesageInterface(s,i);};return new d();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/BlueBoxHandler',["sap/ushell/components/applicationIntegration/application/Application","sap/ushell/components/container/ApplicationContainer","sap/ushell/EventHub","sap/ui/thirdparty/URI","sap/ushell/components/applicationIntegration/application/PostMessageAPI","sap/ui/thirdparty/jquery"],function(A,a,E,U,P,q){"use strict";function B(){var c,m={},t=this,b,C={"isStateful":{handler:function(d,e){if(d&&(d.enabled===true||d===true)){return true;}return false;}},"isGUI":{handler:function(d,e){if(d&&d.protocol==="GUI"){return true;}return false;}},"isGUIStateful":{handler:function(d,e){return t.isCapUT(e,"isGUI")&&t.isCapUT(e,"isStateful");}},"isFLP":{handler:function(d,e){return!t.isCapUT(e,"isGUI")&&t.isCapUT(e,"isStateful");}}},o={},s={},S={},h={"DEFAULT":{storageIdentifier:function(u){return this._stripURL(u);},setup:function(T,d){},isContentLoaded:function(i){return false;},create:function(i,u,d){return A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","create",{sCacheId:d,sUrl:u,sHash:window.hasher.getHash()});},destroy:function(i){return A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","destroy",{});},store:function(i,d){},restore:function(i,d){}},"URL":{setup:function(T,d){},create:function(i,u,d,T){var p;u=a.prototype._adjustURLForIsolationOpeningWithoutURLTemplate(u);sap.ui.getCore().getEventBus().publish("launchpad","appOpening",T);p=A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","create",{sCacheId:d,sUrl:u,sHash:window.hasher.getHash()},true);p.then(function(){o[i].currentAppTarget=T;sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",T);});return p;},destroy:function(i,d){var p;p=A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","destroy",{sCacheId:d},true);p.then(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",o[i].currentAppTarget);o[i].currentAppTarget=undefined;});return p;},store:function(i,d){var p;p=A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","store",{sCacheId:d},true);p.then(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","appClosed",o[i].currentAppTarget);o[i].currentAppTarget=undefined;});return p;},restore:function(i,d,T){var p;sap.ui.getCore().getEventBus().publish("launchpad","appOpening",T);p=A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","restore",{sCacheId:d,sHash:window.hasher.getHash()},true);p.then(function(){o[i].currentAppTarget=T;sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",T);});return p;}}};this.subscribePluginAgents=function(d,f){Object.keys(d).map(function(k){if(!m[k]){m[k]=[];}m[k].push(f);});};this._managePluginAgents=function(d){var t=this;var H=function(e,i,f,p){var g={"loading":{sInterface:"agentLoading"},"started":{sInterface:"agentStart"},"exit":{sInterface:"agentExit"}},I=g[f.status];if(I){if(i[I.sInterface]){i[I.sInterface](e,p,f);}}};d.forEach(function(M){var i=M.pluginComp.componentHandle.getInstance();Object.keys(o).map(function(e){Object.keys(M.agents).map(function(p){if(o[e].PlugIns&&o[e].PlugIns[p]){var f=o[e].PlugIns[p];H(o[e].BlueBox,i,f,p);}});});t.subscribePluginAgents(M.agents,function(e,p,f){H(e,i,f,p);});});};this.startPluginAgentsLifeCycle=function(){var t=this;sap.ushell.Container.getServiceAsync("PluginManager").then(function(p){p.registerAgentLifeCycleManager(t._managePluginAgents.bind(t));});};this.init=function(d,i,e){var t=this;c={};A.init(this);b=e;E.once("StepDone").do(function(){t.startPluginAgentsLifeCycle();});E.once("pluginConfiguration").do(function(f){var s={};Object.keys(f).forEach(function(k){if(f[k].config&&f[k].config["sap-component-agents"]){s=q.extend(true,s,f[k].config["sap-component-agents"]);}});t.setStartupPlugins(s);});if(i){S=q.extend(true,S,i.supportedTypes);}P.registerShellCommunicationHandler({"sap.ushell.appRuntime":{oServiceCalls:{"startupPlugins":{executeServiceCallFn:function(f){return new q.Deferred().resolve(s).promise();}},"shellCheck":{executeServiceCallFn:function(f){return new q.Deferred().resolve({InShell:true}).promise();}}}},"sap.ushell.services.pluginManager":{oServiceCalls:{"status":{executeServiceCallFn:function(f){var g=f.oMessageData.body,l;if(f.oContainer&&o[f.oContainer]&&g&&g.name&&o[f.oContainer].PlugIns[g.name]){o[f.oContainer].PlugIns[g.name].status=g.status;l=m[g.name];if(l){l.map(function(j){j(f.oContainer,g.name,g);});}return new q.Deferred().resolve(o[f.oContainer].PlugIns).promise();}return new q.Deferred().resolve({}).promise();}}}}});};this.setStartupPlugins=function(d){s=JSON.parse(JSON.stringify(d));Object.keys(s).forEach(function(k){s[k].status="unknown";});};this.getPluginAgentStatus=function(d,e){return JSON.parse(JSON.stringify(o[d].PlugIns[e]));};this.isStatefulContainerSupported=function(d){var i=this.isCapabilitySupported(d,"sap.ushell.services.appLifeCycle","create")&&this.isCapabilitySupported(d,"sap.ushell.services.appLifeCycle","destroy");return i;};this.isKeepAliveSupported=function(d){var i=this.isCapabilitySupported(d,"sap.ushell.services.appLifeCycle","store")&&this.isCapabilitySupported(d,"sap.ushell.services.appLifeCycle","restore");return i;};this.mapCapabilities=function(d,e){this.setCapabilities(d,e);};this.getCapabilities=function(d){return o[d].oCapMap;};this.isCapabilitySupported=function(d,e,i){if(o[d]&&o[d].oCapMap&&o[d].oCapMap[e]){return!!o[d].oCapMap[e][i];}return false;};this.setCapabilities=function(d,e){var f;if(!o[d]){this.InitBlueBoxBD(d);}if(!o[d].oCapMap){o[d].oCapMap={};}f=o[d].oCapMap;Object.keys(e).forEach(function(k){var g=e[k],i;if(!f[g.service]){f[g.service]={};}i=f[g.service];i[g.action]=true;});if(!d.getIsStateful()&&this.isStatefulContainerSupported(d)){d.setIsStateful(true);}};this.removeCapabilities=function(d){if(o[d]){o[d].oCapMap={};d.setIsStateful(false);}};this.hasIFrame=function(d){if(d&&d._getIFrame){return true;}return false;};this.getStorageKey=function(d){return o[d].sStorageKey;};this.InitBlueBoxBD=function(d){o[d]={BlueBox:d,PlugIns:JSON.parse(JSON.stringify(s))};};this.setAppCapabilities=function(d,T){if(!o[d]){this.InitBlueBoxBD(d);}o[d].currentAppTarget=T;o[d].appCapabilities=T.appCapabilities;};this.forEach=function(d){var k;for(k in o){if(o.hasOwnProperty(k)){d(o[k].BlueBox);}}};this.isCapByTarget=function(T,d){if(T.appCapabilities===undefined){return false;}if(C[d]&&T&&T.appCapabilities){return C[d].handler(T.appCapabilities);}return T.appCapabilities[d]||false;};this.isCapUT=function(d,e){var f=o[d];if(f===undefined||f.appCapabilities===undefined){return false;}if(C[e]&&f){return C[e].handler(f.appCapabilities,d);}return f.appCapabilities[e]||false;};this.setStorageKey=function(d,e){if(!o[d]){this.InitBlueBoxBD(d);}o[d].sStorageKey=e;};this.getStorageKey=function(d){if(!o[d]){return undefined;}return o[d].sStorageKey;};this.getHandler=function(){return q.extend(true,h.DEFAULT,h["URL"]);};this._stripURL=function(u){var H;if(u==="../"){return u;}H=new U(u).hostname();if(!H||H===""){return u;}};this.deleteStateFul=function(u){var d=this._stripURL(u);return this.delete(d);};this.getStateFul=function(u){var d=this._stripURL(u);return this.get(d);};this.destroyApp=function(d){b.postMessageToIframeApp("sap.ushell.services.appLifeCycle","destroy",{appId:d});};this.openApp=function(d){b.postMessageToIframeApp("sap.ushell.services.appLifeCycle","create",{appId:d,sHash:window.hasher.getHash()});};this.storeApp=function(d){b.postMessageToIframeApp("sap.ushell.services.appLifeCycle","store",{appId:d,sHash:window.hasher.getHash()});};this.restoreApp=function(d){b.postMessageToIframeApp("sap.ushell.services.appLifeCycle","restore",{appId:d,sHash:window.hasher.getHash()});};this.delete=function(u){if(c[u]){delete c[u];}};this.get=function(u){return c[u];};this.getById=function(i){for(var k in c){if(c.hasOwnProperty(k)){var e=c[k];if(e.sId===i){return e;}}}};this.set=function(u,i){var d=this._stripURL(u);c[d]=i;};}return new B();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/application/PostMessageAPI',["sap/ushell/utils","sap/ui/core/Popup","sap/ui/core/library","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/UIComponent","sap/ushell/services/AppConfiguration","sap/ushell/ui/footerbar/SendAsEmailButton","sap/ushell/ui/footerbar/AddBookmarkButton","sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ushell/EventHub"],function(u,P,c,q,L,U,A,S,a,b,E){"use strict";var d=new U(),p={};var o={"sap.ushell.services.CrossApplicationNavigation":{oServiceCalls:{"hrefForExternal":{executeServiceCallFn:function(e){return new q.Deferred().resolve(sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal(e.oMessageData.body.oArgs)).promise();}},"getSemanticObjectLinks":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").getSemanticObjectLinks(e.oMessageData.body.sSemanticObject,e.oMessageData.body.mParameters,e.oMessageData.body.bIgnoreFormFactors,undefined,undefined,e.oMessageData.body.bCompactIntents);}},"isIntentSupported":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported(e.oMessageData.body.aIntents);}},"isNavigationSupported":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").isNavigationSupported(e.oMessageData.body.aIntents);}},"backToPreviousApp":{executeServiceCallFn:function(){sap.ushell.Container.getService("CrossApplicationNavigation").backToPreviousApp();return new q.Deferred().resolve().promise();}},"historyBack":{executeServiceCallFn:function(e){sap.ushell.Container.getService("CrossApplicationNavigation").historyBack(e.oMessageData.body.iSteps);return new q.Deferred().resolve().promise();}},"getAppStateData":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").getAppStateData(e.oMessageData.body.sAppStateKey);}},"toExternal":{executeServiceCallFn:function(e){var k=u.clone(e.oMessageData.body.oArgs);u.storeSapSystemToLocalStorage(k);return new q.Deferred().resolve(sap.ushell.Container.getService("CrossApplicationNavigation").toExternal(k)).promise();}},"registerBeforeAppCloseEvent":{executeServiceCallFn:function(e){e.oContainer.setBeforeAppCloseEvent({enabled:true,params:e.oMessageData.body});return new q.Deferred().resolve().promise();}}}},"sap.ushell.ui5service.ShellUIService":{oServiceCalls:{"setTitle":{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setTitle(e.oMessageData.body.sTitle)).promise();}},"setBackNavigation":{executeServiceCallFn:function(e){return e.executeSetBackNavigationService(e.oMessage,e.oMessageData);}}}},"sap.ushell.services.ShellUIService":{oServiceCalls:{"setTitle":{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setTitle(e.oMessageData.body.sTitle)).promise();}},"setHierarchy":{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setHierarchy(e.oMessageData.body.aHierarchyLevels)).promise();}},"setRelatedApps":{executeServiceCallFn:function(e){return new q.Deferred().resolve(e.oContainer.getShellUIService().setRelatedApps(e.oMessageData.body.aRelatedApps)).promise();}},"setDirtyFlag":{executeServiceCallFn:function(e){sap.ushell.Container.setDirtyFlag(e.oMessageData.body.bIsDirty);return new q.Deferred().resolve().promise();}},"showShellUIBlocker":{executeServiceCallFn:function(e){s(e.oMessageData.body.bShow);return new q.Deferred().resolve().promise();}},"getFLPUrl":{executeServiceCallFn:function(e){var I=false;if(e.oMessageData.body&&e.oMessageData.body.bIncludeHash===true){I=true;}return new q.Deferred().resolve(sap.ushell.Container.getFLPUrl(I)).promise();}},"getShellGroupIDs":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").getShellGroupIDs((e.oMessageData.body?e.oMessageData.body.bGetAll:undefined));}},"addBookmark":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").addBookmarkByGroupId(e.oMessageData.body.oParameters,e.oMessageData.body.groupId);}},"addBookmarkDialog":{executeServiceCallFn:function(e){var k=new a();k.firePress({});return new q.Deferred().resolve().promise();}},"getShellGroupTiles":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("LaunchPage").getTilesByGroupId(e.oMessageData.body.groupId);}},"sendUrlAsEmail":{executeServiceCallFn:function(e){h("","Link to application",document.URL,"","","",true);return new q.Deferred().resolve().promise();}},"sendEmailWithFLPButton":{executeServiceCallFn:function(e){h("","Link to application",document.URL,"","","",e.oMessageData.body.bSetAppStateToPublic);return new q.Deferred().resolve().promise();}},"sendEmail":{executeServiceCallFn:function(e){h(e.oMessageData.body.sTo,e.oMessageData.body.sSubject,e.oMessageData.body.sBody,e.oMessageData.body.sCc,e.oMessageData.body.sBcc,e.oMessageData.body.sIFrameURL,e.oMessageData.body.bSetAppStateToPublic);}}}},"sap.ushell.services.Container":{oServiceCalls:{"setDirtyFlag":{executeServiceCallFn:function(e){sap.ushell.Container.setDirtyFlag(e.oMessageData.body.bIsDirty);return new q.Deferred().resolve().promise();}},"getFLPUrl":{executeServiceCallFn:function(e){var I=false;if(e.oMessageData.body&&e.oMessageData.body.bIncludeHash===true){I=true;}return new q.Deferred().resolve(sap.ushell.Container.getFLPUrl(I)).promise();}},"getFLPConfig":{executeServiceCallFn:function(e){var D=new q.Deferred();sap.ushell.Container.getFLPConfig().then(function(F){D.resolve(F);});return D.promise();}}}},"sap.ushell.services.AppState":{oServiceCalls:{"getAppState":{executeServiceCallFn:function(e){var D=new q.Deferred();sap.ushell.Container.getService("AppState").getAppState(e.oMessageData.body.sKey).done(function(k){delete k._oServiceInstance;D.resolve(k);}).fail(function(k){delete k._oServiceInstance;D.resolve(k);});return D.promise();}},"_saveAppState":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("AppState")._saveAppState(e.oMessageData.body.sKey,e.oMessageData.body.sData,e.oMessageData.body.sAppName,e.oMessageData.body.sComponent,e.oMessageData.body.bTransient,e.oMessageData.body.iPersistencyMethod,e.oMessageData.body.oPersistencySettings);}},"_loadAppState":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("AppState")._loadAppState(e.oMessageData.body.sKey);}},"makeStatePersistent":function(e){return sap.ushell.Container.getService("AppState").makeStatePersistent(e.oMessageData.body.sKey,e.oMessageData.body.iPersistencyMethod,e.oMessageData.body.oPersistencySettings);}}},"sap.ushell.services.Bookmark":{oServiceCalls:{"addBookmarkUI5":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").addBookmark(e.oMessageData.body.oParameters,e.oMessageData.body.oGroup);}},"addBookmark":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").addBookmarkByGroupId(e.oMessageData.body.oParameters,e.oMessageData.body.groupId);}},"getShellGroupIDs":{executeServiceCallFn:function(){return sap.ushell.Container.getService("Bookmark").getShellGroupIDs();}},"addCatalogTileToGroup":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").addCatalogTileToGroup(e.oMessageData.body.sCatalogTileId,e.oMessageData.body.sGroupId,e.oMessageData.body.oCatalogData);}},"countBookmarks":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").countBookmarks(e.oMessageData.body.sUrl);}},"deleteBookmarks":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").deleteBookmarks(e.oMessageData.body.sUrl);}},"updateBookmarks":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("Bookmark").updateBookmarks(e.oMessageData.body.sUrl,e.oMessageData.body.oParameters);}}}},"sap.ushell.services.AppConfiguration":{oServiceCalls:{"setApplicationFullWidth":{executeServiceCallFn:function(e){A.setApplicationFullWidth(e.oMessageData.body.bValue);return new q.Deferred().resolve().promise();}}}}};function f(){}f.prototype.getAPIs=function(){this._registerAppRuntimeNewAPI();return o;};f.prototype.addShellCommunicationHandler=function(k,C){var e=o[k],n;if(e){if(C.oServiceCalls){Object.keys(C.oServiceCalls).forEach(function(l){e.oServiceCalls[l]=C.oServiceCalls[l];});}if(C.oRequestCalls){Object.keys(C.oRequestCalls).forEach(function(l){e.oRequestCalls[l]=C.oRequestCalls[l];});}return;}n={oRequestCalls:{},oServiceCalls:{}};if(C.oServiceCalls){Object.keys(C.oServiceCalls).forEach(function(l){n.oServiceCalls[l]=C.oServiceCalls[l];});}if(C.oRequestCalls){Object.keys(C.oRequestCalls).forEach(function(l){n.oRequestCalls[l]=C.oRequestCalls[l];});}o[k]=n;};f.prototype._getPostMesageInterface=function(e,I){var C,k=this.getAPIs();if(k[e]){C=k[e];if(C&&C.oRequestCalls&&C.oRequestCalls[I]){return C.oRequestCalls[I];}}return undefined;};f.prototype.registerShellCommunicationHandler=function(C){var t=this,e;Object.keys(C).forEach(function(k){e=C[k];t.addShellCommunicationHandler(k,e);});};f.prototype.isActiveOnly=function(e,I){var C=this._getPostMesageInterface(e,I);if(C){return C.isActiveOnly;}return undefined;};f.prototype.getResponseHandler=function(e,I){var C=this._getPostMesageInterface(e,I);if(C){return C.fnResponseHandler;}return undefined;};f.prototype._createNewInnerAppState=function(k){var l=sap.ushell.Container.getService("AppState"),n,H,C,N,v;n=l.createEmptyAppState(undefined,false);if(k.oMessageData.body.sData!==undefined){try{v=JSON.parse(k.oMessageData.body.sData);}catch(e){v=k.oMessageData.body.sData;}}else{v="";}n.setData(v);n.save();N=n.getKey();H=window.hasher.getHash();if(H.indexOf("&/")>0){if(H.indexOf("sap-iapp-state=")>0){C=/(?:sap-iapp-state=)([^&/]+)/.exec(H)[1];H=H.replace(C,N);}else{H=H+"/sap-iapp-state="+N;}}else{H=H+"&/sap-iapp-state="+N;}window.hasher.changed.active=false;window.hasher.replaceHash(H);window.hasher.changed.active=true;return N;};f.prototype._setInnerAppStateData=function(e){return f.prototype._createNewInnerAppState(e);};f.prototype._registerAppRuntimeNewAPI=function(){if(this.newAPIAdded!==undefined){return;}this.newAPIAdded=true;this.registerShellCommunicationHandler({"sap.ushell.appRuntime":{oRequestCalls:{"innerAppRouteChange":{isActiveOnly:true,distributionType:["all"]},"hashChange":{isActiveOnly:true,distributionType:["URL"]},"setDirtyFlag":{isActiveOnly:true,distributionType:["URL"]},"themeChange":{isActiveOnly:false,distributionType:["all"]},"uiDensityChange":{isActiveOnly:false,distributionType:["all"]}},oServiceCalls:{"hashChange":{executeServiceCallFn:function(e){window.hasher.disableBlueBoxHashChangeTrigger=true;window.hasher.replaceHash(e.oMessageData.body.newHash);window.hasher.disableBlueBoxHashChangeTrigger=false;return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.UserInfo":{oServiceCalls:{"getThemeList":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("UserInfo").getThemeList();}},"openThemeManager":{executeServiceCallFn:function(e){E.emit("openThemeManager",Date.now());return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.ShellNavigation":{oServiceCalls:{"toExternal":{executeServiceCallFn:function(e){sap.ushell.Container.getService("ShellNavigation").toExternal(e.oMessageData.body.oArgs,undefined,e.oMessageData.body.bWriteHistory);return new q.Deferred().resolve().promise();}},"toAppHash":{executeServiceCallFn:function(e){sap.ushell.Container.getService("ShellNavigation").toAppHash(e.oMessageData.body.sAppHash,e.oMessageData.body.bWriteHistory);return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.NavTargetResolution":{oServiceCalls:{"getDistinctSemanticObjects":{executeServiceCallFn:function(){return sap.ushell.Container.getService("NavTargetResolution").getDistinctSemanticObjects();}},"expandCompactHash":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("NavTargetResolution").expandCompactHash(e.oMessageData.body.sHashFragment);}},"resolveHashFragment":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("NavTargetResolution").expandCompactHash(e.oMessageData.body.sHashFragment);}},"isNavigationSupported":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("NavTargetResolution").isNavigationSupported(e.oMessageData.body.aIntents);}}}},"sap.ushell.services.CrossApplicationNavigation":{oServiceCalls:{"expandCompactHash":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").expandCompactHash(e.oMessageData.body.sHashFragment);}},"getDistinctSemanticObjects":{executeServiceCallFn:function(){return sap.ushell.Container.getService("CrossApplicationNavigation").getDistinctSemanticObjects();}},"getLinks":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").getLinks(e.oMessageData.body);}},"getPrimaryIntent":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").getPrimaryIntent(e.oMessageData.body.sSemanticObject,e.oMessageData.body.mParameters);}},"hrefForAppSpecificHash":{executeServiceCallFn:function(e){return sap.ushell.Container.getService("CrossApplicationNavigation").hrefForAppSpecificHash(e.oMessageData.body.sAppHash);}},"isInitialNavigation":{executeServiceCallFn:function(){return sap.ushell.Container.getService("CrossApplicationNavigation").hrefForAppSpecificHash();}},"getAppState":{executeServiceCallFn:function(e){var D=new q.Deferred();sap.ushell.Container.getService("CrossApplicationNavigation").getAppState(d,e.oMessageData.body.sAppStateKey).done(function(k){delete k._oServiceInstance;D.resolve(k);});return D.promise();}},"setInnerAppRoute":{executeServiceCallFn:function(e){var k=sap.ushell.Container.getService("URLParsing"),H=k.parseShellHash(window.hasher.getHash()),n;H.appSpecificRoute=e.oMessageData.body.appSpecificRoute;n="#"+k.constructShellHash(H);window.hasher.changed.active=false;window.hasher.replaceHash(n);window.hasher.changed.active=true;return new q.Deferred().resolve().promise();}},"setInnerAppStateData":{executeServiceCallFn:function(e){var k=f.prototype._setInnerAppStateData(e);return new q.Deferred().resolve(k).promise();}}}},"sap.ushell.services.Renderer":{oServiceCalls:{"addHeaderItem":{executeServiceCallFn:function(e){g("addHeaderItem",e);return new q.Deferred().resolve().promise();}},"addHeaderEndItem":{executeServiceCallFn:function(e){g("addHeaderEndItem",e);return new q.Deferred().resolve().promise();}},"showHeaderItem":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},"showHeaderEndItem":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},"hideHeaderItem":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},"hideHeaderEndItem":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(e.oMessageData.body.aIds,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}},"setHeaderTitle":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(e.oMessageData.body.sTitle);return new q.Deferred().resolve().promise();}},"setHeaderVisibility":{executeServiceCallFn:function(e){sap.ushell.Container.getRenderer("fiori2").setHeaderVisibility(e.oMessageData.body.bVisible,e.oMessageData.body.bCurrentState||true,e.oMessageData.body.aStates);return new q.Deferred().resolve().promise();}}}},"sap.ushell.services.LaunchPage":{oServiceCalls:{"getGroupsForBookmarks":{executeServiceCallFn:function(){return sap.ushell.Container.getService("LaunchPage").getGroupsForBookmarks();}}}}});};function s(e){if(e===true&&p.oDlg===undefined){if(q("#canvas")&&q("#canvas").hasClass("sapUshellShellBG")){q("#canvas").removeClass("sapUshellShellBG");p.bClassRemoved=true;}p.oDlg=new P();p.oDlg.setShadow(true);p.oDlg.setModal(true,"sapMDialogBlockLayerInit");p.oDlg.setNavigationMode("SCOPE");p.oDlg.eOpenState=c.OpenState.OPEN;q("#shell-cntnt").css("zIndex",40);p.oDlg._iZIndex=30;p.oDlg._duringOpen();}else if(e===false&&p.oDlg!==undefined){p.oDlg._oLastPosition=p.oDlg._oDefaultPosition;p.oDlg.destroy();if(p.bClassRemoved===true){q("#canvas").addClass("sapUshellShellBG");}p.oDlg=undefined;p.bClassRemoved=false;q("#shell-cntnt").css("zIndex","auto");}}function g(e,k){sap.ushell.Container.getRenderer("fiori2")[e]("sap.ushell.ui.shell.ShellHeadItem",{id:k.oMessageData.body.sId,tooltip:k.oMessageData.body.sTooltip,icon:k.oMessageData.body.sIcon,press:function(){k.oContainer.postMessageRequest("sap.ushell.appRuntime.buttonClick",{buttonId:k.oMessageData.body.sId});}},k.oMessageData.body.bVisible,k.oMessageData.body.bCurrentState||true,k.oMessageData.body.aStates);}function h(t,e,B,C,k,I,l){if(l===true){i();}if(I&&I.length>0&&((e&&e.includes(I))||(B&&B.includes(I)))){if(B&&B.includes(I)){B=B.replace(I,document.URL);}if(e&&e.includes(I)){e=e.replace(I,document.URL);}}sap.m.URLHelper.triggerEmail(t,e,B,C,k);}function i(){var e=sap.ushell.Container.getService("AppState"),x=j(document.URL,"sap-xapp-state"),I=j(document.URL,"sap-iapp-state");if(x!==undefined){e.makeStatePersistent(x,b.PublicState);}if(I!==undefined){e.makeStatePersistent(I,b.PublicState);}}function j(e,k){var r=new RegExp("(?:"+k+"=)([^&/]+)"),R=r.exec(e),v;if(R&&R.length===2){v=R[1];}return v;}return new f();},false);
sap.ui.predefine('sap/ushell/components/applicationIntegration/configuration/AppMeta',["sap/ushell/services/AppConfiguration","sap/ushell/components/applicationIntegration/elements/model","sap/ui/Device","sap/ushell/Config","sap/ushell/utils","sap/ushell/resources","sap/ushell/EventHub","sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/ui/util/Mobile"],function(A,E,D,C,u,r,a,R,q,M,b){"use strict";function c(){var i,t=this,d,s,e;this.getIsTitleChanged=function(){return i;};this.getIsRelatedAppsChanged=function(){return e;};this.getHierarchyDefaultValue=function(){var h=[];var f=C.last("/core/shell/model/currentState/stateName");if(f&&((f==="app"||f==="embedded"))){h=[{icon:"sap-icon://home",title:r.i18n.getText("actionHomePage"),intent:s?"#"+s:"#"}];}return h;};this.init=function(I){s=I;};this.getIsHierarchyChanged=function(){return d;};this.onHierarchyChange=function(o){d=true;var h=o.getParameters().data,H,f=[],g=C.last("/core/shell/model/currentState/stateName");if(!h){h=[];}H=t.getHierarchyDefaultValue();h.forEach(function(I,j){f[j]=q.extend({},I);});f=f.concat(H);if(g==="home"){E.updateStateProperty("application/hierarchy",f,false,["home"]);}E.updateStateProperty("application/hierarchy",f,true);};this.onRelatedAppsChange=function(o){e=true;var f=o.getParameters().data,g=C.last("/core/shell/model/currentState/stateName");if(!f){f=[];}if(g==="home"){E.updateStateProperty("application/relatedApps",f,false,["home"]);}E.updateStateProperty("application/relatedApps",f,true);};this.resetShellUIServiceHandlers=function(){e=false;d=false;i=false;};this.onTitleChange=function(o){i=true;var T=o.getParameters().data;if(!T){T=this.getAppMeta().getTitleDefaultValue();}var f=C.last("/core/shell/model/currentState/stateName");if(f==="home"){E.updateStateProperty("application/title",T,false,["home"]);}E.updateStateProperty("application/title",T,true);R.genericSetItem("application/title",T);window.document.title=T;u.setPerformanceMark("FLP -- title change");a.emit("TitleChanged",T);};this._getDefaultFavIcon=function(p){var f=p.get("sapUiShellFavicon");if(f){var m=/url[\s]*\('?"?([^'")]*)'?"?\)/.exec(f);if(m){f=m[1];}else if(f==="''"||f==="none"){f=null;}}if(!f){var g=q.sap.getModulePath("sap.ushell");return g+"/themes/base/img/launchpad_favicon.ico";}return f;};this.getFavIconHref=function(){return q("link").filter("[rel=\"shortcut icon\"]").attr("href")||"";};this.getAppIcon=function(){var I="sap-icon://folder",f=A.getMetadata();if(f&&f.icon){I=f.icon;}return I;};this.setAppIcons=function(m){sap.ui.require(["sap/ui/core/theming/Parameters"],function(P){M.start("FLP:ShellController.setAppIcons","setAppIcons","FLP");var f=q.sap.getModulePath("sap.ushell"),l=(m&&m.homeScreenIconPhone)||(f+"/themes/base/img/launchicons/57_iPhone_Desktop_Launch.png"),L=(m&&m["homeScreenIconPhone@2"])||(f+"/themes/base/img/launchicons/114_iPhone-Retina_Web_Clip.png"),o=(m&&m.homeScreenIconTablet)||(f+"/themes/base/img/launchicons/72_iPad_Desktop_Launch.png"),g=(m&&m["homeScreenIconTablet@2"])||(f+"/themes/base/img/launchicons/144_iPad_Retina_Web_Clip.png"),F=(m&&m.favIcon)||(this._getDefaultFavIcon(P)),h=this.getFavIconHref();if(D.os.ios){b.setIcons({"phone":l,"phone@2":L,"tablet":o,"tablet@2":g,"favicon":F,"precomposed":false});}else if(h!==F){b.setIcons({"phone":"","phone@2":"","tablet":"","tablet@2":"","favicon":F,"precomposed":true});}M.end("FLP:ShellController.setAppIcons");}.bind(this));};this._applyContentDensityByPriority=function(f,g){var h;if(f===undefined){if(D.system.combi){var j=sap.ushell.Container.getService("UserInfo"),U=j.getUser(),k="autoDetect";if(U){k=U.getContentDensity();}switch(k){case"cozy":f=false;break;case"compact":f=true;break;default:h=A.getMetadata();if(h.compactContentDensity&&!h.cozyContentDensity){f=true;}else{f=false;}}}else{h=A.getMetadata();if(h.compactContentDensity&&!h.cozyContentDensity){f=true;}else if(!h.compactContentDensity&&h.cozyContentDensity){f=false;}else{f=this._isCompactContentDensityByDevice();}}}this._applyContentDensityClass(f,g);};this._applyContentDensityClass=function(f,g){var I=this._isCompactContentDensityByDevice();return new Promise(function(h,j){function k(l){q("body").toggleClass("sapUiSizeCompact",l).toggleClass("sapUiSizeCozy",!l);if(g===true){sap.ui.require(["sap/ushell/components/applicationIntegration/AppLifeCycle"],function(m){m.postMessageToIframeApp("sap.ushell.appRuntime","uiDensityChange",{"isTouch":(l?"0":"1")});});}h();}if(f===undefined){sap.ushell.Container.getServiceAsync("UserInfo").then(function(l){var U=l.getUser?l.getUser():undefined;k(U&&U.getContentDensity()==="cozy"?false:I);});}else{k(!!f);}});};this._isCompactContentDensityByDevice=function(){return!D.support.touch||D.system.combi;};this.getTitleDefaultValue=function(){var T="",f=A.getMetadata();if(f&&f.title){T=f.title;}return T;};this.create=function(){};this.restore=function(I){this._applyContentDensityByPriority();this.setAppIcons(I);};this.store=function(I){};this.destroy=function(I){};}return new c();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/elements/model',["sap/ushell/EventHub","sap/ushell/Config","sap/ushell/utils","sap/ushell/components/HeaderManager","sap/ushell/components/StateHelper","sap/ui/performance/Measurement","sap/base/Log","sap/ui/thirdparty/jquery"],function(E,C,u,H,S,M,L,q){"use strict";var b;var c;function a(){return{"home":{"actions":["ContactSupportBtn","EndUserFeedbackBtn"]},"app":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"minimal":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"standalone":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"embedded":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"embedded-home":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]},"lean":{"actions":["ContactSupportBtn","EndUserFeedbackBtn","aboutBtn"]}};}function d(){return{"blank":{"stateName":"blank","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"blank-home":{"stateName":"blank-home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"home":{"stateName":"home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"search":"","paneContent":[],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[]},"app":{"stateName":"app","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"search":"","actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[]},"minimal":{"stateName":"minimal","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":["openCatalogBtn","userSettingsBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"standalone":{"stateName":"standalone","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"embedded":{"stateName":"embedded","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"embedded-home":{"stateName":"embedded-home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"headerless":{"stateName":"headerless","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"merged":{"stateName":"merged","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"headerless-home":{"stateName":"headerless-home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"merged-home":{"stateName":"merged-home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":true,"paneContent":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[],"search":""},"lean":{"stateName":"lean","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":false,"paneContent":[],"search":"","actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[]},"lean-home":{"stateName":"lean-home","showCurtain":false,"showCatalog":false,"showPane":false,"showRightFloatingContainer":true,"showRecentActivity":false,"paneContent":[],"search":"","actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"toolAreaVisible":false,"floatingContainerContent":[]}};}function r(O,k){return Object.keys(O).reduce(function(o,K){if(!k[K]){o[K]=O[K];}return o;},{});}function v(i,j){return j!==undefined;}function n(){return true;}function g(o,m){var p=m.split("/");var i=o;p.shift();p.forEach(function(P){if(!i){return;}i=i[P];});return i;}function e(m,V,o){var p=m.split("/");var i=o;p.shift();var P=p.pop();p.forEach(function(s){i=i[s];});i[P]=V;}function f(){var o;var s;var k;var A;var m;var I;var l;var p;var t;var w;this.createDefaultTriggers=function(i){var R=function(B,D,F){if(F.sProperty==="actions"){var G=g(F.oModel,F.path);if(G&&G.length===0&&F.aIds&&F.aIds.length>0){this._renderShellState();}}}.bind(this);var j=function(B){function D(O,N){var U=sap.ushell.Container.getService("URLParsing"),G=U.getHash(O),J=U.getHash(N),K=U.parseShellHash(G).appSpecificRoute,P=U.parseShellHash(J).appSpecificRoute;return K!==P;}var F=D(B.oldURL,B.newURL);if(F){this.addHeaderItem(["backBtn"],true);}}.bind(this);this.createTriggersOnBaseStates([{sName:"onAddFirstAction",fnRegister:function(){sap.ui.getCore().getEventBus().subscribe("launchpad","updateShell",R,this);},fnUnRegister:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","updateShell",R,this);}}],["blank","blank-home"],i);var y=this;var z;this.createTriggersOnBaseStates([{sName:"onAddFirstAction",fnRegister:function(){window.addEventListener("hashchange",j);var N=0;z=E.on("AppRendered").do(function(){N++;if(N>=2){y.addHeaderItem(["backBtn"],true);}});},fnUnRegister:function(){window.removeEventListener("hashchange",j);if(z){z.off();}}}],["lean","lean-home"],i);};this.init=function(i,j){b=d();c=a();s=C.last("/core/shell/model");o={};m={};I=false;p=false;t=[];w=true;A=j;l=undefined;if(i){M.start("FLP:ElementsModel.init","moveShellHeaderEndItems","FLP");if(i.moveEditHomePageActionToShellHeader){this._removeActionFromMeArea("ActionModeBtn");}if(i.moveContactSupportActionToShellHeader){this._removeCustomDataActionBtnFromMeArea("ContactSupportBtn");}if(i.moveGiveFeedbackActionToShellHeader){this._removeCustomDataActionBtnFromMeArea("EndUserFeedbackBtn");}if(i.moveAppFinderActionToShellHeader){this._removeActionFromMeArea("openCatalogBtn");}if(i.moveUserSettingsActionToShellHeader){this._removeActionFromMeArea("userSettingsBtn");}M.end("FLP:ElementsModel.init");}var y=i&&i.appState?i.appState:"home";this.createDefaultTriggers(y);this.switchState(y);};this.destroy=function(){s=undefined;o=undefined;A=undefined;m=undefined;I=undefined;w=undefined;p=undefined;l=undefined;b=undefined;c=undefined;};this.getModel=function(){var R=sap.ushell.Container.getRenderer("fiori2");if(!R){return undefined;}return R._oShellView.getModel();};this._removeCustomDataActionBtnFromMeArea=function(i){for(var j in c){var y=c[j];var z=y.actions;var B=z.indexOf(i);if(B!==-1){c[j].actions.splice(B,1);}}};this._removeActionFromMeArea=function(B){var i;for(i in b){var j=b[i];if(i==="blank"||i==="blank-home"){continue;}if(B==="ActionModeBtn"&&i==="app"){continue;}var y=j.actions;var z=y.indexOf(B);if(z!==-1){b[i].actions.splice(z,1);}}};this.destroyManageQueue=function(){this._destroyManageQueue(["home","embedded-home","headerless-home","merged-home","blank-home","lean-home"]);};this.switchState=function(i){var j=u.clone(b[i]);var y=r(j,{aTriggers:true});C.emit("/core/shell/model/currentState",y);H.switchState(i);k=A.customShellState;l=undefined;this._renderShellState();return j;};this.setLeftPaneVisibility=function(V,i,j){this.updateStateProperty("showPane",V,i,j);};this.setHeaderHiding=function(){L.warning("Application Life Cycle model: headerHiding property is deprecated and has no effect");};this._createHeaderEventPayload=function(P,V,i,j,D,y){var z={propertyName:P,value:V,aStates:j,bCurrentState:i,action:y,bDoNotPropagate:D};return z;};this.setHeaderVisibility=function(V,i,j){var P=this._createHeaderEventPayload("headerVisible",V,i,j,false);H.updateStates(P);};this.showLogo=function(i,j){this.updateShowLogo(true,i,j,false);};this.updateShowLogo=function(V,i,j,D){var P=this._createHeaderEventPayload("showLogo",V,i,j,D);H.updateStates(P);};this.addHeaderItem=function(i,j,y){if(i.length){var P=this._createHeaderEventPayload("headItems",i,j,y,false);H.updateStates(P);}};this.removeHeaderItem=function(i,j,y){var P=this._createHeaderEventPayload("headItems",i,j,y,false,"remove");H.updateStates(P);};this.addHeaderEndItem=function(i,j,y,D){if(i.length){var P=this._createHeaderEventPayload("headEndItems",i,j,y,D);H.updateStates(P);}};this.removeHeaderEndItem=function(i,j,y){var P=this._createHeaderEventPayload("headEndItems",i,j,y,false,"remove");H.updateStates(P);};this.addSubHeader=function(i,j,y){if(i.length){this._addShellItem("subHeader",i,j,y);}};this.removeSubHeader=function(i,j,y){this._removeShellItem("subHeader",i,j,y);};this.addActionButton=function(i,j,y){this._addActionButton("actions",i,j,y);};this.removeActionButton=function(i,j,y){this._removeShellItem("actions",i,j,y);};this.addToolAreaItem=function(i,j,y,z){if(i.length){this._addToolAreaItem("toolAreaItems",i,j,y,z);}};this.removeToolAreaItem=function(i,j,y){this._removeShellItem("toolAreaItems",i,j,y);};this.addLeftPaneContent=function(i,j,y){if(i.length){this._addShellItem("paneContent",i,j,y);}};this.removeLeftPaneContent=function(i,j,y){this._removeShellItem("paneContent",i,j,y);};this.addRightFloatingContainerItem=function(i,j,y){if(i.length){this._addRightFloatingContainerItem("RightFloatingContainerItems",i,j,y);}};this.removeRightFloatingContainerItem=function(i,j,y){this._removeShellItem("RightFloatingContainerItems",i,j,y);};this.showSettingsButton=function(i,j){this.addActionButton(["userSettingsBtn"],i,j,false);};this.showSignOutButton=function(i,j){this.addActionButton(["logoutBtn"],i,j,false);};this.showRightFloatingContainer=function(i){this._showRightFloatingContainer(i);};this.addFloatingActionButton=function(i,j,y){if(i.length){this._addShellItem("floatingActions",i,j,y);}};this.removeFloatingActionButton=function(i,j,y){this._removeShellItem("floatingActions",i,j,y);};this.updateStateProperty=function(P,V,i,j,D){if(P.startsWith("application")){var y=this._createHeaderEventPayload(P,V,i,j,false);H.updateStates(y);return;}this._setShellItem(P,V,i,j,v,e,D);};this._handleTriggers=function(N){var T,i,j=[],y={};w=false;while(t.length>0){T=t.pop();if(N[T.sName]){j.push(T);y[T.sName]=T;}else{T.fnUnRegister(this);}}for(var z in N){if(N.hasOwnProperty(z)){if(!y[z]){i=N[z];i.fnRegister(this);j.push(i);}}}t=j;w=true;};this._registerTriggers=function(T){w=false;T.forEach(function(i){i.fnRegister(this);t.push(i);});w=true;};function x(T,i){var j=[];if(!i.aTriggers){i.aTriggers=[];}T.forEach(function(y){var F={sName:y.sName,fnRegister:y.fnRegister,fnUnRegister:y.fnUnRegister};i.aTriggers.push(F);j.push(F);});return j;}this.createTriggersOnState=function(T){var i=x(T,b);if(!I){this._registerTriggers(i);}};this.createTriggersOnBaseStates=function(T,B,i){var j=[];B.forEach(function(z){var D=b[z];j=x(T,D);});var y=B.indexOf(i)>=0;if(y&&!I){this._registerTriggers(j);}};this.createTriggers=function(T,i,B){var j=s.currentState;if(i===true){this.createTriggersOnState(T,j);return;}this.createTriggersOnBaseStates(T,B,j.stateName);};this.showShellItem=function(P,j,V){var y=S.getModelStates(j),z="/currentState"+P,B;for(var i=0;i<y.length;i++){B=b[y[i]].stateName;b[B][P.split("/")[1]]=V;}if(s.currentState.stateName===j){e(z,V,s);if(!I){this._renderShellState();}}};this.addCustomItems=function(i,j,y,z){if(this._isValidStateEntry(i)){this._isValidStateEntry(i).fnAdd(j,y,z);}else{throw new Error("Invalid state entry:"+i);}};this.removeCustomItems=function(i,j,y,z){if(this._isValidStateEntry(i)){this._isValidStateEntry(i).fnRemove(j,y,z);}else{throw new Error("Invalid state entry:"+i);}};this.applyExtendedShellState=function(i){l=i;this._renderShellState();};this.addEntryInShellStates=function(i,j,y,R,z){var B,D;if(!o[i]){o[i]={fnAdd:y,fnHide:R};var F=this._getStatesList();for(B=0;B<F.length;B++){D=F[B];b[D][i]=z[D];}this["remove"+j]=R;this["add"+j]=y;}else{throw new Error("State entry already exsists:"+i);}};this.addElementToManagedQueue=function(i){var j=C.last("/core/shell/model/currentState/stateName"),B,y=i.getId();if(!A){A={extendedShellStates:{},aTriggers:[],customShellState:this._createCustomShellState("custom")};}B=A.extendedShellStates;if(!B[j]){B[j]={managedObjects:[],customState:undefined};}B[j].managedObjects.push(y);var z=m[y];if(z){z.nRefCount++;}else{z={oItem:i,nRefCount:1};m[y]=z;}};this.updateNeededTriggersMap=function(i,T){var j;if(!T){return;}for(j=0;j<T.length;j++){i[T[j].sName]=T[j];}};this._renderShellState=function(){var B=C.last("/core/shell/model/currentState/stateName"),i,j,y=u.clone(b[B]),z=A,D,N={};if(I){return;}if(z&&z.customShellState){D=z.customShellState.currentState;}var F={"currentState":u.clone(y)};s=F;I=true;if(l&&z.extendedShellStates&&z.extendedShellStates[l]){i=z.extendedShellStates[l].customState;j=i.currentState;this._addCustomShellStates(j);}if(D){this._addCustomShellStates(D);}s=C.last("/core/shell/model");if(y&&y.aTriggers){this.updateNeededTriggersMap(N,y.aTriggers);}if(j&&j.aTriggers){this.updateNeededTriggersMap(N,j.aTriggers);}if(D&&D.aTriggers){this.updateNeededTriggersMap(N,D.aTriggers);}if(w){this._handleTriggers(N);}delete F.currentState.aTriggers;var G=r(F.currentState,{aTriggers:true});H.recalculateState(l);C.emit("/core/shell/model/currentState",G);I=false;};this._addCustomShellStates=function(T){this.addToolAreaItem(T.toolAreaItems,false,true);this.addSubHeader(T.subHeader,true);this.addRightFloatingContainerItem(T.RightFloatingContainerItems,true);this.addActionButton(T.actions,true,undefined,false);this.addLeftPaneContent(T.paneContent,true);this.addFloatingActionButton(T.floatingActions,true);this.showRightFloatingContainer(T.showRightFloatingContainer);};this._createCustomShellState=function(i){var j={"currentState":{"stateName":i,"headEndItems":[],"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}};var y=c[i];if(y){q.extend(j.currentState,y);}return j;};this._showRightFloatingContainer=function(i){this._setShellItem("showRightFloatingContainer",i,true,[],v,e);};this._addActionButton=function(P,j,y,z){function U(B,D,F){var G=g(F,B);var J=G.indexOf("logoutBtn");if(J>-1){G.splice.apply(G,[J,0].concat(D));}else{G=G.concat(D);}var K=u.removeDuplicatedActions(G);function N(G){var Q=[],R=["recentActivitiesBtn","frequentActivitiesBtn","openCatalogBtn","userSettingsBtn","ActionModeBtn","ContactSupportBtn","EndUserFeedbackBtn"];for(var i=0;i<R.length;i++){var T=G.indexOf(R[i]);if(T>-1){Q.push(G.splice(T,1)[0]);}}Q=Q.concat(G);return Q;}var O=N(K);e(B,O,F);}this._setShellItem(P,j,y,z,n,U);};this.setFloatingContainerContent=function(P,i,j,y){function V(z,i,B){return i.length===1;}function U(z,i,B){e(z,i,B);}this._setShellItem(P,i,j,y,V,U);};this._addShellItem=function(P,i,j,y){function V(z,i,B){if(z.length>0){L.warning("You can only add one item. Replacing existing item: "+z[0]+" in state: "+B+", with the new item: "+i[0]+".");}return true;}function U(z,B,D){e(z,i.slice(0),D);}this._setShellItem(P,i,j,y,V,U);};this._addRightFloatingContainerItem=function(P,i,j,y){function U(z,B,D){var F=g(D,z);F=F.concat(B);e(z,F,D);}this._setShellItem(P,i,j,y,n,U);};this._addToolAreaItem=function(P,i,j,y,z){function U(F,i,G){var J=g(G,F),K,B;if(typeof i==="string"){i=[i];}for(B=0;B<i.length;B++){K=i[B];if(J.indexOf(K)<0){J.push(K);}}e(F,J,G);}if(j){var B,D=S.getPassStates(z);for(B=0;B<D.length;B++){this.showShellItem("/toolAreaVisible",D[B],true);}}this._setShellItem(P,i,y,z,n,U);};this._removeShellItem=function(P,i,j,y){function V(z,B){var D,i,F;for(F=0;F<B.length;F++){i=B[F];D=z.indexOf(i);if(D<0){L.warning("You cannot remove Item: "+i+", the Item does not exists.");return false;}}return true;}function U(z,B,D){var F=g(D,z),G,i,J;for(J=0;J<B.length;J++){i=B[J];G=F.indexOf(i);if(G>-1){F.splice(G,1);}}e(z,F,D);}this._setShellItem(P,i,j,y,V,U);};this._setShellItem=function(P,O,y,z,V,U,D){var B,F;var G=Array.isArray(O)?O.slice(0):O;if(y===true){B="/currentState/"+P;F=g(s,B);if(V(F,G,"currentState")===false){return;}if(!p&&!I){U(B,G,k);sap.ui.getCore().getEventBus().publish("launchpad","updateShell",{oModel:s,path:B,aIds:G,sProperty:P});this._renderShellState();}else{U(B,G,s);}}else{var J=D?z:S.getPassStates(z),i,K=s.currentState.stateName;for(i=0;i<J.length;i++){var N=J[i],j;F=g(b[N],"/"+P);if(V(F,G,N)===false){continue;}var Q=S.getModelStates(N,D);for(j=0;j<Q.length;j++){B="/"+Q[j]+"/"+P;U(B,G,b);if(K===Q[j]){if(!I){this._renderShellState();}}}}}};this._getStatesList=function(){return Object.keys(b);};this._destroyManageQueue=function(){var i,j,y,B,z,D;B=A.extendedShellStates;for(z in B){if(B.hasOwnProperty(z)){D=B[z].managedObjects;for(i=0;i<D.length;i++){j=D[i];y=m[j];y.nRefCount--;if(y.nRefCount===0){y.oItem.destroy();m[j]=null;}}delete B[z];}}};this._isValidStateEntry=function(N){return!!o[N];};this.getModelToUpdate=function(){return s;};this.setModelToUpdate=function(i,j){p=j;s=i;};this._getManagedElements=function(){return m;};this.extendStates=function(i){var j;for(j in i){if(i.hasOwnProperty(j)){u.updateProperties(b[j],i[j]);}}};this.getBaseStateMember=function(i,B){return b[i][B];};this.getCustomStateDeltaMember=function(i,j){return c[i][j];};this.getAllStatesInDelta=function(){return Object.keys(c);};}var h=new f();return h;},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/eventDelegation/tunnels',["sap/ui/thirdparty/jquery"],function(q){"use strict";function T(){var t=this,r,p={};this.init=function(R){if(!R){throw"1 argument expected, 0 received.";}r=R;};this.createInterface=function(i,c){var R={},s={};R[i]={sInterfaceName:{isActiveOnly:false,distributionType:["URL"]}};s[i]={executeServiceCallFn:function(S){var o=c(S);return new q.Deferred().resolve(o).promise();}};r({"sap.ushell.tunnelRegistry":{oRequestCalls:R,oServiceCalls:s}});};this.createTunnelServiceCallsInfo=function(o){return this.createServiceCallInfo(o);};this.createTunnelServiceCallsInfoForEvents=function(e){return this.createServiceCallInfo(e,this.createEventEntry);};this.createServiceCallInfo=function(R,c){var a={},b,s,P,m,d,e,f,o,E,g;for(var h in R){if(R.hasOwnProperty(h)){s={};P={};o=R[h];if(c){o=c(o);}f=t.createMethodForServiceCall(o);e=t.createServiceCall(f);s[h]=e;a[h]={oServiceCall:s};b=R[h].pair;if(b&&b.sMethod){m=b.sMethod;d=b.sInterface;E=b.fnExtractArguments;e=t.createPairedServiceCall({fnMethod:f,fnExtractArguments:E});P[m]=e;g=[d,m].join('.');p[g]={serviceCall:e,rawMethod:f};}a[h]={oServiceCall:s};}}return a;};this.createServiceCall=function(m){return{executeServiceCallFn:function(s){return new q.Deferred().resolve({endPoint:m}).promise();}};};this.createPairedServiceCall=function(d){var m=d.fnMethod,e=d.fnExtractArguments;return function(s){var a=e(s),b=m.apply(undefined,a);return new q.Deferred().resolve(b).promise();};};this.createMethodForServiceCall=function(o){var i=o.oInterface,f=o.sFuncName,s=o.fnSpy;return function(){if((s&&s.apply(undefined,arguments)||!s)){return i[f].apply(i,arguments);}};};this.createEventEntry=function(e){var o={},i=e.oInterface,f=e.sFuncName,P=e.fnProxy;o[f]=function(){var a=arguments;if(P){a=P.apply(undefined,arguments);}if(arguments&&arguments.length){i[f].apply(i,a);}else{i[f].apply(i);}};return{oInterface:o,sFuncName:f,fnSpy:e.fnSpy};};this.registerTunnels=function(o){if(!r){throw"No 'fnRegisterShellCommunicationHandler'. Use 'init' method.";}var s=t.createTunnelServiceCallsInfo(o);this.createServiceCalls(s);};this.registerEvents=function(e){if(!r){throw"No 'fnRegisterShellCommunicationHandler'. Use 'init' method.";}var s=t.createTunnelServiceCallsInfoForEvents(e);this.createServiceCalls(s);};this.createServiceCalls=function(s){var a="sap.ushell.tunnelRegistry",c={},i,b;c[a]={oServiceCalls:{}};for(i in s){if(s.hasOwnProperty(i)){b=s[i].oServiceCall;q.extend(c[a].oServiceCalls,b);}}r(c);};this.getPairedMethod=function(k){if(p[k]){return p[k].rawMethod;}};this.getPairedServiceCall=function(k){if(p[k]){return p[k].serviceCall;}};}return new T();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/relatedServices/RelatedServices',[],function(){"use strict";function R(){var b;var s={};this._historyBackNavigation=function(){window.history.back();};this.navigateBack=function(){if(b){b();}else{if(sap.ushell.Container.getService("CrossApplicationNavigation").isInitialNavigation()){sap.ushell.Container.getService("CrossApplicationNavigation").toExternal({target:{shellHash:"#"},writeHistory:false});return;}this._historyBackNavigation();}};this.setNavigateBack=function(i){b=i;s.backNavigationHander=b;};this.resetNavigateBack=function(){b=this._historyBackNavigation;s.backNavigationHander=b;};this.create=function(){b=this._historyBackNavigation;s={backNavigationHander:b};return s;};this.restore=function(i){if(i){s=i;b=s.backNavigationHander;}};this.store=function(S){s={backNavigationHander:this._historyBackNavigation};};this.destroy=function(S){};}return new R();},true);
sap.ui.predefine('sap/ushell/components/applicationIntegration/relatedShellElements/RelatedShellElements',["sap/ui/thirdparty/jquery","sap/base/Log"],function(q,L){"use strict";function R(){var d=[],E,a,c={},s,i=false,C={},A,t=[],b={"home":{"actions":[]},"app":{"actions":["aboutBtn"]},"minimal":{"actions":["aboutBtn"]},"standalone":{"actions":["aboutBtn"]},"embedded":{"actions":["aboutBtn"]},"embedded-home":{"actions":["aboutBtn"]},"lean":{"actions":["aboutBtn"]}},o={home:{NWBC:{headerless:"headerless",default:"minimal"},TR:{headerless:"minimal",default:"minimal"},default:{default:"home"}},app:{NWBC:{headerless:"headerless",default:"minimal"},TR:{headerless:"minimal",default:"minimal"},default:{default:"app"}}};this.init=function(e,f){E=e;if(f&&f.length>0){Object.keys(b).forEach(function(S){b[S].actions=f.concat(b[S].actions);});}};this.processDangling=function(){var D,e;for(D=0;D<d.length;D++){e=d.pop();e.func.apply(this,e.args);}};this.setDangling=function(I){i=I;};this.calculateElementsState=function(n,e,f,g){var N=o[n]?o[n]:o.default,h=N[g?undefined:e]?N[e]:N.default,j=h[f]?h[f]:h.default;return j;};this.createCustomShellState=function(S){var e={"currentState":{"stateName":S,"headEndItems":[],"paneContent":[],"headItems":[],"actions":[],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}},f=b[S];if(f){q.extend(e.currentState,f);}return e;};this.createExtendedShellState=function(S,f){var B,e=this.createCustomShellState(S);B=a.extendedShellStates;if(B[S]){return false;}s=e;f();if(B[S]){B[S].customState=e;}else{B[S]={managedObjects:[],customState:e};}s=a.customShellState;return true;};this.assignNew=function(S){c=this.createCustomShellState(S);a.customShellState=c;a.aTriggers=[];a.extendedShellStates={};a.oCheckPoints={};this._updateModel();s=a.customShellState;};this._genericSetItem=function(e,v){var f=e.split("/");var l=f.pop();var g=f.reduce(function(h,m){return h[m];},s.currentState);g[l]=v;E._renderShellState();};this._genericAddItems=function(e,I){var f=s.currentState[e];s.currentState[e]=f.concat(I);E._renderShellState();};this.genericSetItem=function(e,v){if(i){d.push({func:this._genericSetItem,args:arguments});}else{this._genericSetItem(e,v);}};this.genericAddItems=function(e,I){if(i){d.push({func:this.genericAddItems,args:arguments});}else{this._genericAddItems(e,I);}};this.setShellModelForApplications=function(e,v){var l=["paneContent","headItems","RightFloatingContainerItems","toolAreaItems","floatingActions","showRightFloatingContainer","headEndItems","headerVisible","subHeader","actions"];if(l.indexOf(e)>-1){this.genericSetItem(e,v);}else{L.error("Not a valid attribute:"+e);}};this.addShellModelForApplications=function(e,I){var l=["paneContent","headItems","RightFloatingContainerItems","toolAreaItems","floatingActions","showRightFloatingContainer","headEndItems","headerVisible","subHeader","actions"];if(l.indexOf(e)>-1){this.genericAddItems(e,I);}else{L.error("Not a valid attribute:"+e);}};this.setStateModelToUpdate=function(I){s=I;};this.getStateModelToUpdate=function(){return s;};this.model=function(){if(!a){this.create();}A={customShellState:a.customShellState,aTriggers:a.aTriggers,extendedShellStates:a.extendedShellStates,oCheckPoints:a.oCheckPoints};return A;};this._updateModel=function(){if(A){A.customShellState=a.customShellState;A.aTriggers=a.aTriggers;A.extendedShellStates=a.extendedShellStates;A.oCheckPoints=a.oCheckPoints;}};this.getAppRelatedElement=function(){return{customShellState:a.customShellState,aTriggers:a.aTriggers,extendedShellStates:a.extendedShellStates,oCheckPoints:a.oCheckPoints};};this.create=function(){a={extendedShellStates:{},oCheckPoints:C,aTriggers:t,customShellState:{"currentState":{"stateName":"app","headEndItems":[],"paneContent":[],"headItems":[],"actions":["aboutBtn"],"floatingActions":[],"subHeader":[],"toolAreaItems":[],"RightFloatingContainerItems":[],"application":{},"showRightFloatingContainer":undefined,"headerHeading":undefined}}};s=a.customShellState;this._updateModel();return a;};this.restore=function(S){if(S&&S.appRelatedElements){var e=S.appRelatedElements;a.aTriggers=e.aTriggers;a.extendedShellStates=e.extendedShellStates;a.oCheckPoints=e.oCheckPoints;a.customShellState=e.customShellState;}this._updateModel();s=a.customShellState;};this.store=function(m){};this.clean=function(){a=undefined;};this.destroy=function(m){};}return new R();},true);
sap.ui.predefine('sap/ushell/components/cards/ManifestPropertyHelper',["sap/base/util/ObjectPath","sap/ushell/utils"],function(O,u){"use strict";var M={PLACEHOLDERS:{TITLE:"<title>",SUBTITLE:"<subtitle>",ICON:"<icon>",SEARCH_KEYWORDS:"<keywords>",SEMANTIC_OBJECT:"<semantic object>",ACTION:"<action>",PARAMETERS:"<parameters>",TARGET_URL:"<target URL>"},extractCardData:function(m){var a=this._getNavigationAction(m),t,s,S,b,c,T,U,d=O.get(["sap.app","tags","keywords"],m),e;if(a){b=O.get(["parameters","intentSemanticObject"],a);c=O.get(["parameters","intentAction"],a);T=O.get(["parameters","url"],a);s=O.get(["parameters","intentParameters"],a);}if(s){S=u.urlParametersToString(s);}if(T){U=false;}else if(b&&c){U=true;T="#"+b+"-"+c;if(S){T+="?"+S;}}t=JSON.stringify({"display_icon_url":O.get(["sap.card","header","icon","src"],m),"navigation_semantic_object":b,"navigation_semantic_action":c,"navigation_semantic_parameters":S,"navigation_use_semantic_object":U,"navigation_target_url":T});if(t==="{}"){t=undefined;}if(d){e=d.join(",");}return{bagProperties:{"display_title_text":O.get(["sap.card","header","title"],m),"display_subtitle_text":O.get(["sap.card","header","subTitle"],m),"display_search_keywords":e},tileConfiguration:t,manifest:this._replaceDataWithPlaceholders(m)};},mergeCardData:function(m,c){var o=JSON.parse(JSON.stringify(m)),n=this._getNavigationAction(o),s;if(c.display_title_text){O.set(["sap.card","header","title"],c.display_title_text,o);}if(c.display_subtitle_text){O.set(["sap.card","header","subTitle"],c.display_subtitle_text,o);}if(c.display_search_keywords){s=c.display_search_keywords.split(",");O.set(["sap.app","tags","keywords"],s,o);}if(c.display_icon_url){O.set(["sap.card","header","icon","src"],c.display_icon_url,o);}if(c.navigation_semantic_object){O.set(["parameters","intentSemanticObject"],c.navigation_semantic_object,n);}else if(c.navigation_target_url){O.set(["parameters","url"],c.navigation_target_url,n);}if(c.navigation_semantic_action){O.set(["parameters","intentAction"],c.navigation_semantic_action,n);}if(c.navigation_semantic_parameters_as_object){O.set(["parameters","intentParameters"],c.navigation_semantic_parameters_as_object,n);}return o;},getTranslatablePropertiesFromBag:function(b){var t={},T;if(b&&b.getText&&b.getTextNames){T=b.getTextNames();T.forEach(function(p){t[p]=b.getText(p);});}return t;},getCardData:function(c){var t,b,T,C;if(c.bag){t=c.bag.getBag("tileProperties");}else{t=c.getBag("tileProperties");}if(c.configuration){T=c.configuration.getParameterValueAsString("tileConfiguration");}else{T=c.getConfigurationParameter("tileConfiguration");}b=this.getTranslatablePropertiesFromBag(t);C=JSON.parse(T||"{}");if(C.navigation_semantic_parameters){C.navigation_semantic_parameters_as_object=this._parseParameters(C.navigation_semantic_parameters);}Object.keys(b).forEach(function(k){C[k]=b[k];});return C;},_parseParameters:function(p){var U=sap.ushell.Container.getService("URLParsing"),P=U.parseParameters("?"+p);Object.keys(P).forEach(function(k){P[k]=P[k][0];});return P;},_replaceDataWithPlaceholders:function(m){var o=JSON.parse(JSON.stringify(m)),n=this._getNavigationAction(o);if(O.get(["sap.card","header","title"],o)){O.set(["sap.card","header","title"],this.PLACEHOLDERS.TITLE,o);}if(O.get(["sap.card","header","subTitle"],o)){O.set(["sap.card","header","subTitle"],this.PLACEHOLDERS.SUBTITLE,o);}if(O.get(["sap.app","tags","keywords"],o)){O.set(["sap.app","tags","keywords"],this.PLACEHOLDERS.SEARCH_KEYWORDS,o);}if(O.get(["sap.card","header","icon","src"],o)){O.set(["sap.card","header","icon","src"],this.PLACEHOLDERS.ICON,o);}if(O.get(["parameters","intentSemanticObject"],n)){O.set(["parameters","intentSemanticObject"],this.PLACEHOLDERS.SEMANTIC_OBJECT,n);}if(O.get(["parameters","intentAction"],n)){O.set(["parameters","intentAction"],this.PLACEHOLDERS.ACTION,n);}if(O.get(["parameters","url"],n)){O.set(["parameters","url"],this.PLACEHOLDERS.TARGET_URL,n);}if(O.get(["parameters","intentParameters"],n)){O.set(["parameters","intentParameters"],this.PLACEHOLDERS.PARAMETERS,n);}return o;},_getNavigationAction:function(m){var a=O.get(["sap.card","header","actions"],m),A;if(a){for(var i=0;i<a.length;i++){A=a[i];if(A.type==="Navigation"){return A;}}}return null;}};return M;});
sap.ui.predefine('sap/ushell/components/container/ApplicationContainer',["sap/ui/Device","sap/ushell/utils","sap/ushell/ApplicationType","sap/m/MessagePopover","sap/ui/core/Component","sap/ui/core/ComponentContainer","sap/ui/core/Control","sap/ui/thirdparty/URI","sap/ushell/EventHub","sap/ui/core/Icon","sap/ushell/System","sap/ushell/User","sap/m/Text","sap/base/util/UriParameters","sap/base/util/deepEqual","sap/base/util/uid","sap/base/security/encodeXML","sap/ushell/utils/testableHelper","sap/ushell/Config"],function(D,u,A,M,C,a,b,U,E,I,S,c,T,d,f,g,h,t,j){"use strict";var p="sap.ushell.components.container.",s=p+"ApplicationContainer",k="sap.ushell.Container.dirtyState.",l,o,H,r,P=false,K=false,m=[],n=0;var q=["sap-ach","sap-fiori-id","sap-hide-intent-link","sap-priority","sap-tag","sap-ui-app-id-hint","sap-ui-debug","sap-ui-fl-control-variant-id","sap-ui-fl-max-layer","sap-ui-tech-hint","sap-ui2-tcode","sap-ui2-wd-app-id","sap-ui2-wd-conf-id","sap-ushell-cdm-site-url","sap-ushell-defaultedParameterNames","sap-ushell-navmode","sap-ushell-next-navmode","sap-ushell-url"];function v(e){var i=sap.ushell.Container.getService("CrossApplicationNavigation");i.isUrlSupported(e.url).done(function(){e.promise.resolve({"allowed":true,"id":e.id});}).fail(function(){e.promise.resolve({"allowed":false,"id":e.id});});}function w(e){var i={"asyncURLHandler":k1.prototype._adaptIsUrlSupportedResultForMessagePopover};if(M&&M.setDefaultHandlers){M.setDefaultHandlers(i);}E.emit("StepDone",e.stepName);}E.once("initMessagePopover").do(w);l=new u.Map();function x(e){return l.get(e.getId());}function y(){return o;}function z(e){var i=new d(e).mParams,l1=i["sap-xapp-state"],m1;delete i["sap-xapp-state"];m1={startupParameters:i};if(l1){m1["sap-xapp-state"]=l1;}return m1;}function B(e,i){if(!r){r=jQuery.sap.resources({url:jQuery.sap.getModulePath(p)+"/resources/resources.properties",language:sap.ui.getCore().getConfiguration().getLanguage()});}return r.getText(e,i);}function F(){return new I({size:"2rem",src:"sap-icon://error",tooltip:k1.prototype._getTranslatedText("an_error_has_occured")});}function G(e){var i=e.getAggregation("child"),l1;if(i instanceof a){l1=i.getComponentInstance().getMetadata().getName().replace(/\.Component$/,"");jQuery.sap.log.debug("unloading component "+l1,null,s);}e.destroyAggregation("child");}function J(e,i,l1){var m1,n1,o1,p1,q1,r1,s1,t1={},u1,v1;o1=i.indexOf("?");if(o1>=0){r1=k1.prototype._getParameterMap(i);t1=r1.startupParameters;i=i.slice(0,o1);}if(i.slice(-1)!=="/"){i+="/";}if(/\.view\.(\w+)$/i.test(l1)){q1=/^SAPUI5=(?:([^/]+)\/)?([^/]+)\.view\.(\w+)$/i.exec(l1);if(!q1){jQuery.sap.log.error("Invalid SAPUI5 URL",l1,s);return k1.prototype._createErrorControl();}s1=q1[1];u1=q1[2];v1=q1[3].toUpperCase();if(s1){u1=s1+"."+u1;}else{p1=u1.lastIndexOf(".");if(p1<1){jQuery.sap.log.error("Missing namespace",l1,s);return k1.prototype._createErrorControl();}s1=u1.slice(0,p1);}}else{s1=l1.replace(/^SAPUI5=/,"");}jQuery.sap.registerModulePath(s1,i+s1.replace(/\./g,"/"));k1.prototype._destroyChild(e);if(u1){if(e.getApplicationConfiguration()){t1.config=e.getApplicationConfiguration();}n1=sap.ui.view({id:e.getId()+"-content",type:v1,viewData:t1||{},viewName:u1});e.fireEvent("applicationConfiguration");}else{jQuery.sap.log.debug("loading component "+s1,null,s);var w1=r1?{startupParameters:r1.startupParameters}:{startupParameters:{}};if(r1&&r1["sap-xapp-state"]){w1["sap-xapp-state"]=r1["sap-xapp-state"];}if(e.getApplicationConfiguration()){w1.config=e.getApplicationConfiguration();}m1=sap.ui.component({id:e.getId()+"-component",componentData:w1,name:s1});e.fireEvent("applicationConfiguration",{"configuration":m1.getMetadata().getConfig()});n1=new a({id:e.getId()+"-content",component:m1});}n1.setWidth(e.getWidth());n1.setHeight(e.getHeight());n1.addStyleClass("sapUShellApplicationContainer");e.setAggregation("child",n1,true);return n1;}function L(e,i){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell",e,i);},0);}function N(e,i,l1){var m1,n1,o1,p1,q1={startupParameters:{}},r1,s1=e.getComponentHandle(),t1=sap.ushell.Container.getService("PluginManager"),u1,v1;u.addTime("createUi5Component");m1=i.indexOf("?");if(m1>=0){p1=k1.prototype._getParameterMap(i);q1={startupParameters:p1.startupParameters};if(p1["sap-xapp-state"]){q1["sap-xapp-state"]=p1["sap-xapp-state"];}i=i.slice(0,m1);}if(e.getApplicationConfiguration()){q1.config=e.getApplicationConfiguration();}if(i.slice(-1)!=="/"){i+="/";}k1.prototype._destroyChild(e);r1={id:e.getId()+"-component",name:l1,componentData:q1};jQuery.sap.log.debug("Creating component instance for "+l1,JSON.stringify(r1),s);sap.ui.getCore().getEventBus().publish("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",{name:l1});if(s1){n1=s1.getInstance(r1);}else{jQuery.sap.registerModulePath(l1,i);jQuery.sap.log.error("No component handle available for '"+l1+"'; fallback to component.load()",null,s);n1=sap.ui.component({id:e.getId()+"-component",name:l1,componentData:q1});}e.fireEvent("applicationConfiguration",{"configuration":n1.getMetadata().getConfig()});o1=new a({id:e.getId()+"-content",component:n1});o1.setHeight(e.getHeight());o1.setWidth(e.getWidth());o1.addStyleClass("sapUShellApplicationContainer");e._disableRouterEventHandler=k1.prototype._disableRouter.bind(this,n1);sap.ui.getCore().getEventBus().subscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",e._disableRouterEventHandler);e.setAggregation("child",o1,true);if(t1){u1=t1.getPluginLoadingPromise("RendererExtensions");v1=u1&&u1.state();if(v1==="pending"){u1.done(function(){k1.prototype._publishExternalEvent("appComponentLoaded",{component:n1});}).fail(function(){k1.prototype._publishExternalEvent("appComponentLoaded",{component:n1});});}if(v1==="resolved"||v1==="rejected"){k1.prototype._publishExternalEvent("appComponentLoaded",{component:n1});}}else{k1.prototype._publishExternalEvent("appComponentLoaded",{component:n1});}return o1;}function O(e){var i;if((e instanceof C)&&(typeof e.getRouter==="function")){i=e.getRouter();if(i&&(typeof i.stop==="function")){jQuery.sap.log.info("router stopped for instance "+e.getId());i.stop();}}}function Q(e){var i=document.createElement("a"),l1=new d(e).get("sap-client"),m1;i.href=e;m1=i.protocol+"//"+i.host;return new S({alias:l1?m1+"?sap-client="+l1:m1,baseUrl:m1,client:l1||undefined,platform:"abap"});}function R(e,i){var l1=false,m1=e.getDomRef(),n1,o1;if(e.getIframeWithPost()===true&&m1&&m1.getAttribute&&m1.getAttribute("sap-iframe-app")=="true"){m1=jQuery("#"+m1.getAttribute("id")+"-iframe")[0];}if(m1){n1=U(e._getIFrameUrl(m1)||window.location&&window.location.href||"");o1=n1.protocol()+"://"+n1.host();l1=(i.source===m1.contentWindow)||(i.origin===o1);}return l1;}function V(e,i,l1){var m1=JSON.stringify({type:"request",service:i,request_id:g(),body:{}});jQuery.sap.log.debug("Sending post message request to origin ' "+l1+"': "+m1,null,"sap.ushell.components.container.ApplicationContainer");e.postMessage(m1,l1);}function W(){var i=this.getDomRef();if(!i||i.tagName!=="IFRAME"){if(this.getIframeWithPost()===true&&i&&i.getAttribute&&i.getAttribute("sap-iframe-app")=="true"){return jQuery("#"+i.getAttribute("id")+"-iframe")[0];}return null;}return i;}function X(i){var e;if(i===undefined){i=this._getIFrame();}e=i.src;if(this.getIframeWithPost()===true){e=jQuery("#"+i.getAttribute("id").replace("-iframe","-form"))[0].action;}return e;}function Y(e,i){if(e&&!e.getActive()){jQuery.sap.log.debug("Skipping handling of postMessage 'message' event with data '"+JSON.stringify(m1)+"' on inactive container '"+e.getId()+"'","Only active containers can handle 'message' postMessage event","sap.ushell.components.container.ApplicationContainer");return;}var l1=e.getUi5ComponentName&&e.getUi5ComponentName(),m1=i.data;if(typeof l1==="string"){jQuery.sap.log.debug("Skipping handling of postMessage 'message' event with data '"+JSON.stringify(m1)+"' on container of UI5 application '"+l1+"'","Only non UI5 application containers can handle 'message' postMessage event","sap.ushell.components.container.ApplicationContainer");return;}var n1={bApiRegistered:true};H(e,i,n1);Z(e,i,n1);}var Y=t.testableStatic(Y,"ApplicationContainer_handleMessageEvent");function Z(e,l1,m1){var n1,o1,p1;if(m1.bApiRegistered!==false){return;}if(P===false){P=true;n1=sap.ushell.Container.getService("PluginManager");if(n1){o1=n1.getPluginLoadingPromise("RendererExtensions");p1=o1&&o1.state();if(p1==="pending"){K=true;o1.done(function(){var q1;K=false;jQuery.sap.log.debug("Processing post messages queue after 'RendererExtensions' plugins loaded, queue size is: "+m.length,null,"sap.ushell.components.container.ApplicationContainer");for(var i=0;i<m.length;i++){q1=m[i];try{Y.call(q1.that,q1.oContainer,q1.oMessage);}catch(ex){jQuery.sap.log.error(ex.message||ex,null,"sap.ushell.components.container.ApplicationContainer");}}m=[];});}}}if(K===true){m.push({index:n++,that:this,oContainer:e,oMessage:l1});}}var Z=t.testableStatic(Z,"ApplicationContainer_handlePostMessagesForPluginsPostLoading");function $(){P=false;K=false;m=[];n=0;}var $=t.testableStatic($,"ApplicationContainer_resetPluginsLoadIndications");function _(e,i){var l1=e._getIFrame(),m1=e.getApplicationType();if(u.isApplicationTypeEmbeddedInIframe(e.getApplicationType(m1))&&l1){var n1=new U(e._getIFrameUrl(l1));var o1=n1.protocol()+"://"+n1.host();l1.contentWindow.postMessage(JSON.stringify({action:"pro54_disableDirtyHandler"}),o1);i.preventDefault();}}function a1(e,i,l1){e.write("<div").writeControlData(i).writeAccessibilityState(i).addClass("sapUShellApplicationContainer").writeClasses(i).addStyle("height",i.getHeight()).addStyle("width",i.getWidth()).writeStyles().write(">").renderControl(l1);e.write("</div>");}function b1(e,i,l1,m1){var n1,o1=function(){var w1=u.getParameterValueBoolean("sap-accessibility");if(w1!==undefined){return w1;}return sap.ushell.Container.getUser().getAccessibilityMode();},p1=function(){var w1=new d(e)||{mParams:{}};if(w1.mParams["sap-theme"]===undefined){return sap.ushell.Container.getUser().getTheme(c.prototype.constants.themeFormat.NWBC);}return undefined;},q1=function(){var w1=false,x1=new d(e)||{mParams:{}};w1=sap.ui.getCore().getConfiguration().getStatistics()&&x1.mParams["sap-statistics"]===undefined;return w1;},r1=function(){var w1=window.hasher&&window.hasher.getHash(),t1="",x1;if(w1&&w1.length>0&&w1.indexOf("sap-iapp-state=")>0){x1=/(?:sap-iapp-state=)([^&/]+)/.exec(w1);if(x1&&x1.length===2){t1=x1[1];}}return t1;},s1=function(){var w1="";var x1=(!!jQuery("body.sapUiSizeCompact").length);var y1=(!!jQuery("body.sapUiSizeCozy").length);if(x1===true){w1="0";}else if(y1){w1="1";}return w1;};e+=e.indexOf("?")>=0?"&":"?";e+="sap-ie=edge";n1=p1();if(n1){e+=e.indexOf("?")>=0?"&":"?";e+="sap-theme="+encodeURIComponent(n1);}if(l1){e+=e.indexOf("?")>=0?"&":"?";e+="sap-target-navmode="+encodeURIComponent(l1);}if(o1()){e+=e.indexOf("?")>=0?"&":"?";e+="sap-accessibility=X";}if(q1()){e+=e.indexOf("?")>=0?"&":"?";e+="sap-statistics=true";}if(m1){e+=e.indexOf("?")>=0?"&":"?";e+="sap-keepclientsession=1";}var t1=r1();if(t1&&t1.length>0){e+=e.indexOf("?")>=0?"&":"?";e+="sap-iapp-state="+t1;}var u1=s1();if(u1&&u1.length>0){e+=e.indexOf("?")>=0?"&":"?";e+="sap-touch="+u1;}var v1=0;if(j.last("/core/shell/sessionTimeoutIntervalInMinutes")>0){v1=j.last("/core/shell/sessionTimeoutIntervalInMinutes");}e+=e.indexOf("?")>=0?"&":"?";e+="sap-ushell-timeout="+v1;return u.appendSapShellParam(e,i);}function c1(e,i,l1,m1){var n1=i.getAggregation("child");if(!n1||i._bRecreateChild){n1=k1.prototype._createUi5Component(i,l1,m1);i._bRecreateChild=false;}k1.prototype._renderControlInDiv(e,i,n1);}function d1(e,i,l1){var m1=e.getProperty(i);if(f(m1,l1)){return;}e.setProperty(i,l1);e._bRecreateChild=true;}function e1(e,i,l1,m1,n1){var o1;localStorage.removeItem(i.globalDirtyStorageKey);if(n1&&n1.indexOf("SAPUI5.Component=")===0&&l1===A.URL.type){c1(e,i,m1,n1.replace(/^SAPUI5\.Component=/,""));return;}if(n1&&n1.indexOf("SAPUI5=")===0&&l1===A.URL.type){k1.prototype._renderControlInDiv(e,i,k1.prototype._createUi5View(i,m1,n1));return;}jQuery.sap.log.debug("Not resolved as \"SAPUI5.Component=\" or \"SAPUI5=\" , "+"will attempt to load into iframe "+n1);if(!i.getActive()){jQuery.sap.log.debug("Skipping rendering container iframe","Container '"+i.getId()+"' is inactive");return;}try{m1=i.getFrameSource(l1,m1,n1);}catch(ex){jQuery.sap.log.error(ex.message||ex,null,s);i.fireEvent("applicationConfiguration");e.renderControl(k1.prototype._createErrorControl());return;}if(sap.ushell.Container){o1=k1.prototype._getLogoutHandler(i);if(!o1){if(u.isApplicationTypeEmbeddedInIframe(l1)){o1=k1.prototype._logout.bind(null,i);l.put(i.getId(),o1);sap.ushell.Container.attachLogoutEvent(o1);sap.ushell.Container.addRemoteSystem(k1.prototype._createSystemForUrl(m1));}}else if(!u.isApplicationTypeEmbeddedInIframe(l1)){sap.ushell.Container.detachLogoutEvent(o1);l.remove(i.getId());}}if(u.isApplicationTypeEmbeddedInIframe(l1)){var q1=i.getTargetNavigationMode();m1=k1.prototype._adjustNwbcUrl(m1,l1,q1,i.getIsStateful());u.localStorageSetItem(i.globalDirtyStorageKey,sap.ushell.Container.DirtyState.INITIAL);}m1=this._adjustURLForIsolationOpeningWithoutURLTemplate(m1);if(i.getIframeWithPost()===true&&u.isApplicationTypeEmbeddedInIframe(l1)){i.oDeferredRenderer=new jQuery.Deferred();m1=k1.prototype._filterURLParams(m1);var r1=[];var s1=k1.prototype._getParamKeys(m1,r1);k1.prototype._generateRootElementForIFrame(e,i,true);if(s1.length>0){var t1=sap.ushell.Container.getService("CrossApplicationNavigation");t1.getAppStateData(s1).then(function(p1){var u1;var v1=jQuery("#"+i.getId());if(v1){u1=sap.ui.getCore().createRenderManager();k1.prototype._buildHTMLElements(u1,i,p1,r1,m1,true);u1.flush(v1[0]);u1.destroy();i.oDeferredRenderer.resolve();}},function(p1){k1.prototype._buildHTMLElements(e,i,undefined,r1,m1,true);i.oDeferredRenderer.resolve();});}else{k1.prototype._buildHTMLElements(e,i,undefined,r1,m1,false);i.oDeferredRenderer.resolve();}k1.prototype._generateRootElementForIFrame(e,i,false);return;}i.fireEvent("applicationConfiguration");e.write("<iframe").writeControlData(i).writeAccessibilityState(i).writeAttributeEscaped("src",m1).addClass("sapUShellApplicationContainer").writeClasses(i).addStyle("height",i.getHeight()).addStyle("width",i.getWidth()).writeStyles().write("></iframe>");}function f1(e){var i=new U();if(i.query(true).hasOwnProperty("sap-isolation-enabled")){var l1=sap.ushell.Container.getService("URLParsing"),m1=l1.getHash(i.toString()),n1="&sap-plugins="+encodeURIComponent(sap.ushell.Container.getService("PluginManager")._getNamesOfPluginsWithAgents());if(n1==="&sap-plugins="){n1="";}if(m1){var o1=l1.parseShellHash("#"+m1),p1=l1.paramsToString(o1.params);if(p1&&p1.length>=0){var q1=sap.ushell.Container.getService("AppState").createEmptyAppState(),r1=sap.ushell.Container.getService("AppState").createEmptyAppState(),s1="";if(p1.indexOf("sap-intent-param")>=0){s1=encodeURIComponent(p1);}else{q1.setData(p1);q1.save();s1=encodeURIComponent("sap-intent-param="+q1.getKey());}r1.setData("sap-startup-params="+s1);r1.save();e=e.split("#")[0]+"&sap-intent-param="+r1.getKey()+n1+"#"+window.hasher.getHash();}else{e=e.split("#")[0]+n1+"#"+window.hasher.getHash();}}else{e+="#"+window.hasher.getHash();}}return e;}function g1(e){var i=new U(e);i=i.removeSearch(q);return i.toString();}function h1(e,i){var l1=[],m1;if(e.indexOf("sap-intent-param=")>0){m1=/(?:sap-intent-param=)([^&/]+)/.exec(e);if(m1&&m1.length===2){l1.push([m1[1]]);i.push("sap-intent-param-data");}}if(e.indexOf("sap-xapp-state=")>0){m1=/(?:sap-xapp-state=)([^&/]+)/.exec(e);if(m1&&m1.length===2){l1.push([m1[1]]);i.push("sap-xapp-state-data");}}if(e.indexOf("sap-iapp-state=")>0){m1=/(?:sap-iapp-state=)([^&/]+)/.exec(e);if(m1&&m1.length===2){l1.push([m1[1]]);i.push("sap-iapp-state-data");}}return l1;}function i1(e,i,l1,m1,n1,o1){var p1=i.getId()+"-form",q1="",r1=false;if(l1===undefined){l1=[];}l1.push([sap.ushell.Container.getFLPUrl(true)]);m1.push("sap-flp-url");var s1="";var t1={};m1.forEach(function(v1,w1){if(l1[w1][0]){t1[v1]=l1[w1][0];}});s1=JSON.stringify(t1);q1="<input name=\"sap-flp-params\" value=\""+h(s1)+"\"/>";i.fireEvent("applicationConfiguration");e.write("<form").writeAttributeEscaped("method","post").writeAttributeEscaped("id",p1).writeAttributeEscaped("name",p1).writeAttributeEscaped("target",i.getId()+"-iframe").writeAttributeEscaped("action",n1).addStyle("display","none").writeStyles().write(">").writeAttributeEscaped(q1).write("</form>");var u1=i.sId;if(!o1&&i.hasStyleClass("hidden")){r1=true;i.toggleStyleClass("hidden",false);}i.sId+="-iframe";e.write("<iframe").writeAttributeEscaped("name",i.getId()).writeControlData(i).writeAccessibilityState(i).writeAttributeEscaped("sap-orig-src",n1).addClass("sapUShellApplicationContainer").writeClasses(i).addStyle("height",i.getHeight()).addStyle("width",i.getWidth()).writeStyles().write("></iframe>");i.sId=u1;if(r1){i.toggleStyleClass("hidden",true);}}function j1(e,i,l1){if(l1){e.write("<div").writeControlData(i).writeAttributeEscaped("sap-iframe-app","true").addClass("sapUShellApplicationContainer").writeClasses(i).addStyle("height",i.getHeight()).addStyle("width",i.getWidth()).writeStyles().write(">");}else{e.write("</div>");}}var k1=b.extend(s,{metadata:{properties:{additionalInformation:{defaultValue:"",type:"string"},application:{type:"object"},applicationConfiguration:{type:"object"},applicationType:{defaultValue:"URL",type:p+"ApplicationType"},height:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},navigationMode:{defaultValue:"",type:"string"},targetNavigationMode:{defaultValue:"",type:"string"},text:{defaultValue:"",type:"string"},url:{defaultValue:"",type:"string"},visible:{defaultValue:true,type:"boolean"},active:{defaultValue:true,type:"boolean"},"sap-system":{type:"string"},applicationDependencies:{type:"object"},componentHandle:{type:"object"},ui5ComponentName:{type:"string"},width:{defaultValue:"100%",type:"sap.ui.core.CSSSize"},shellUIService:{type:"object"},appIsolationService:{type:"object"},reservedParameters:{type:"object"},coreResourcesFullyLoaded:{type:"boolean"},isStateful:{defaultValue:false,type:"boolean"},iframeHandlers:{defaultValue:"",type:"string"},iframeWithPost:{defaultValue:false,type:"boolean"},beforeAppCloseEvent:{type:"object"}},events:{"applicationConfiguration":{}},aggregations:{child:{multiple:false,type:"sap.ui.core.Control",visibility:"hidden"}},library:"sap.ushell",designtime:"sap/ushell/designtime/ApplicationContainer.designtime"},exit:function(){var e,i=this;if(sap.ushell.Container){e=k1.prototype._getLogoutHandler(i);if(e){sap.ushell.Container.detachLogoutEvent(e);l.remove(i.getId());}}localStorage.removeItem(i.globalDirtyStorageKey);if(i._unloadEventListener){removeEventListener("unload",i._unloadEventListener);}if(i._disableRouterEventHandler){sap.ui.getCore().getEventBus().unsubscribe("sap.ushell.components.container.ApplicationContainer","_prior.newUI5ComponentInstantion",i._disableRouterEventHandler);}if(i._storageEventListener){removeEventListener("storage",i._storageEventListener);}if(i._messageEventListener){removeEventListener("message",i._messageEventListener);}k1.prototype._destroyChild(i);if(b.exit){b.exit.apply(i);}},setHandleMessageEvent:function(i){H=i;},init:function(){var e=this;e.globalDirtyStorageKey=k+g();if(new d(window.location.href).get("sap-post")==="true"){e.setIframeWithPost(true);}e._unloadEventListener=e.exit.bind(e);addEventListener("unload",e._unloadEventListener);e._storageEventListener=function(i){var l1=e.getApplicationType();if(i.key===e.globalDirtyStorageKey&&i.newValue===sap.ushell.Container.DirtyState.PENDING&&u.isApplicationTypeEmbeddedInIframe(l1)){var m1=e._getIFrame();if(m1){jQuery.sap.log.debug("getGlobalDirty() send pro54_getGlobalDirty ",null,"sap.ushell.components.container.ApplicationContainer");var n1=new U(e._getIFrameUrl(m1));var o1=n1.protocol()+"://"+n1.host();m1.contentWindow.postMessage(JSON.stringify({action:"pro54_getGlobalDirty"}),o1);}}};addEventListener("storage",e._storageEventListener);e._messageEventListener=k1.prototype._handleMessageEvent.bind(null,e);addEventListener("message",e._messageEventListener);},onAfterRendering:function(){var e=this;this.rerender=function(){};if(D.os.ios&&this.$().prop("tagName")==="IFRAME"){this.$().parent().css("overflow","auto");}if(this.oDeferredRenderer){this.oDeferredRenderer.done(function(){var i=document.getElementById(e.getId()+"-form");if(i){i.submit();}});}},renderer:function(e,i){var l1=i.getApplication(),m1=i.launchpadData,n1;if(!i.getVisible()){k1.prototype._renderControlInDiv(e,i);return;}if(i.error){delete i.error;k1.prototype._renderControlInDiv(e,i,k1.prototype._createErrorControl());}else if(!l1){k1.prototype._render(e,i,i.getApplicationType(),i.getUrl(),i.getAdditionalInformation());}else if(!l1.isResolvable()){k1.prototype._render(e,i,l1.getType(),l1.getUrl(),"");}else if(m1){k1.prototype._render(e,i,m1.applicationType,m1.Absolute.url.replace(/\?$/,""),m1.applicationData);}else{jQuery.sap.log.debug("Resolving "+l1.getUrl(),null,s);l1.resolve(function(o1){jQuery.sap.log.debug("Resolved "+l1.getUrl(),JSON.stringify(o1),s);i.launchpadData=o1;k1.prototype._destroyChild(i);},function(o1){var p1=l1.getMenu().getDefaultErrorHandler();if(p1){p1(o1);}k1.prototype._destroyChild(i);i.error=o1;});n1=new T({text:k1.prototype._getTranslatedText("loading",[l1.getText()])});k1.prototype._destroyChild(i);i.setAggregation("child",n1);k1.prototype._renderControlInDiv(e,i,n1);}}});k1.prototype.getFrameSource=function(e,i){if(!Object.prototype.hasOwnProperty.call(A.enum,e)){throw new Error("Illegal application type: "+e);}return i;};k1.prototype.setUrl=function(e){d1(this,"url",e);};k1.prototype.setAdditionalInformation=function(e){d1(this,"additionalInformation",e);};k1.prototype.setApplicationType=function(e){d1(this,"applicationType",e);};k1.prototype.createPostMessageRequest=function(e,i){var l1=Date.now().toString();return{"type":"request","request_id":l1,"service":e,"body":i};};k1.prototype.setNewTRApplicationContext=function(e){var i=this._getIFrame();if(!i){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}e=u.appendSapShellParam(e);var l1=this.createPostMessageRequest("sap.its.startService",{"url":e});return this.postMessageToIframe(l1,i,true).catch(function(m1){return Promise.reject({eventData:m1,message:"Failed to change application context."});});};k1.prototype.postMessageToIframe=function(i,l1,m1){var n1=this;var o1=i.request_id;return new Promise(function(p1,q1){function r1(v1){var w1;try{w1=JSON.parse(v1.data,n1);if(o1!==w1.request_id){return;}if(w1.status==="success"){p1(w1);}else{q1(w1);}window.removeEventListener("message",r1);}catch(e){p1();jQuery.sap.log.warning("Obtained bad response from framework in response to message "+i.request_id);jQuery.sap.log.debug("Underlying framework returned invalid response data: '"+v1.data+"'");}}var s1=JSON.stringify(i);jQuery.sap.log.debug("Sending postMessage "+s1+" to application container '"+n1.getId()+"'");var t1=new U(n1._getIFrameUrl(l1));var u1=t1.protocol()+"://"+t1.host();if(m1){window.addEventListener("message",r1,false);l1.contentWindow.postMessage(s1,u1);}else{l1.contentWindow.postMessage(s1,u1);p1();}});};k1.prototype.postMessageToCurrentIframe=function(e,i){if(i===undefined){i=false;}var l1=this._getIFrame();if(!l1){if(i){return Promise.reject({message:"Expected opened iframe not found."});}return;}return this.postMessageToIframe(e,l1,i);};k1.prototype.setNewApplicationContext=function(e,i){var l1=this;var m1=this["setNew"+e+"ApplicationContext"];if(!m1){return Promise.reject({message:"Unsupported application type"});}var n1=this._getIFrame();if(!n1){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}var o1=this.createPostMessageRequest("sap.gui.triggerCloseSessionImmediately",{});return this.postMessageToIframe(o1,n1,true).then(function(){return m1.call(l1,i);},function(p1){return Promise.reject({eventData:p1,message:"Failed to change application context."});});};k1.prototype.onApplicationOpened=function(e){var i=this.getIsStateful();if(!i){return Promise.resolve();}var l1=this.getApplicationType();if(l1==="TR"&&e!=="TR"){var m1=this._getIFrame();if(!m1){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}var n1=this.createPostMessageRequest("sap.gui.triggerCloseSession",{});return this.postMessageToIframe(n1,m1,false).catch(function(o1){return Promise.reject({eventData:o1,message:"Failed to change application context."});});}return Promise.resolve();};k1.prototype.postMessageRequest=function(e,i){var l1=this._getIFrame();if(!l1){return Promise.reject({message:"Expected an exisiting TR application application frame but found none."});}var m1=this.createPostMessageRequest(e,i||{});return this.postMessageToIframe(m1,l1,false).catch(function(n1){return Promise.reject({eventData:n1,message:"Failed to post message."});});};k1.prototype.sendBeforeAppCloseEvent=function(){var e=this.getBeforeAppCloseEvent&&this.getBeforeAppCloseEvent(),i;if(e&&e.enabled&&e.enabled===true){i=this.createPostMessageRequest("sap.ushell.services.CrossApplicationNavigation.beforeAppCloseEvent",e.params);return this.postMessageToIframe(i,this._getIFrame(),true);}else{return undefined;}};k1.prototype._getCommunicationHandlers=y;k1.prototype._adaptIsUrlSupportedResultForMessagePopover=v;k1.prototype._getLogoutHandler=x;k1.prototype._getParameterMap=z;k1.prototype._getTranslatedText=B;k1.prototype._createErrorControl=F;k1.prototype._destroyChild=G;k1.prototype._createUi5View=J;k1.prototype._publishExternalEvent=L;k1.prototype._createUi5Component=N;k1.prototype._disableRouter=O;k1.prototype._createSystemForUrl=Q;k1.prototype._isTrustedPostMessageSource=R;k1.prototype._handleMessageEvent=Y;k1.prototype._logout=_;k1.prototype._renderControlInDiv=a1;k1.prototype._adjustNwbcUrl=b1;k1.prototype._render=e1;k1.prototype._getParamKeys=h1;k1.prototype._buildHTMLElements=i1;k1.prototype._generateRootElementForIFrame=j1;k1.prototype._backButtonPressedCallback=V;k1.prototype._getIFrame=W;k1.prototype._getIFrameUrl=X;k1.prototype._filterURLParams=g1;k1.prototype._adjustURLForIsolationOpeningWithoutURLTemplate=f1;return k1;},true);
sap.ui.predefine('sap/ushell/iconfonts',["sap/ui/core/IconPool"],function(I){"use strict";var a={};a.registerFiori2IconFont=function(){I.registerFont({fontFamily:"BusinessSuiteInAppSymbols",fontURI:sap.ui.require.toUrl("sap/ushell/themes/base/fonts")});I.registerFont({fontFamily:"SAP-icons-TNT",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts")});I.registerFont({fontFamily:"SAP-icons-TNT",collectionName:"TNTIcons",fontURI:sap.ui.require.toUrl("sap/tnt/themes/base/fonts")});var f={fontFamily:"SAP-Icons",collectionName:"Fiori2",icons:[["F0017","e05e"],["F0018","e0c3"],["F0019","e0c3"],["F0020","e0c3"],["F0021","e10d"],["F0366","e129"],["F0392","e04f"],["F0394","e044"],["F0395","e132"],["F0396","e064"],["F0397","e0a4"],["F0398","e0a4"],["F0399","e044"],["F0401","e08d"],["F0402","e13e"],["F0403","e13e"],["F0404","e033"],["F0405","e0b3"],["F0406","e043"],["F0407","e043"],["F0408","e043"],["F0409","e075"],["F0410","e007"],["F0411","e075"]]},F={fontFamily:"Fiori2",collectionName:"Fiori3",icons:[["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0263","E2A8"],["F0508","E2A9"],["F0509","E2AA"],["F0510","E2AB"],["F0533","E2AC"],["F0534","E2AD"],["F0535","E2AE"],["F0536","E2AF"],["F0537","E2B0"],["F0538","E2B1"],["Lumira001","E2B2"]]},A={fontFamily:"Fiori2",collectionName:"Fiori2",icons:[["F0002","E236"],["F0003","E202"],["F0004","E203"],["F0005","E204"],["F0006","E205"],["F0009","E206"],["F0010","E207"],["F0012","E208"],["F0014","E209"],["F0023","E20A"],["F0024","E20B"],["F0025","E20C"],["F0026","E20D"],["F0072","E23A"],["F0100","E23B"],["F0101","E23C"],["F0102","E23D"],["F0106","E20F"],["F0144","E210"],["F0190","E23E"],["F0194","E23F"],["F0210","E242"],["F0211","E243"],["F0212","E244"],["F0217","E211"],["F0220","E213"],["F0243","E215"],["F0244","E216"],["F0245","E217"],["F0246","E218"],["F0247","E219"],["F0250","E21C"],["F0251","E21D"],["F0248","E21A"],["F0249","E21B"],["F0252","E21E"],["F0257","E21F"],["F0281","E220"],["F0282","E221"],["F0283","E222"],["F0284","E223"],["F0292","E224"],["F0295","E225"],["F0296","E226"],["F0316","E227"],["F0317","E228"],["F0321","E229"],["F0339","E22A"],["F0340","E22B"],["F0341","E22C"],["F0342","E22D"],["F0365","E212"],["F0367","E230"],["F0368","E231"],["F0369","E235"],["F0370","E22E"],["F0372","E232"],["F0380","E233"],["F0381","E234"],["F0382","E246"],["F0390","E20E"],["F0412","E213"],["F0429","E2A6"],["F0xx1","E240"],["F0xx2","E241"],["F0013","E237"],["F0016","E238"],["F0028","E239"],["F0029","E283"],["F0030","E284"],["F0031","E285"],["F0032","E286"],["F0033","E287"],["F0034","E288"],["F0036","E289"],["F0038","E28A"],["F0039","E28B"],["F0041","E28C"],["F0044","E28D"],["F0293","E28E"],["F0294","E28F"],["F0297","E290"],["F0298","E291"],["F0299","E292"],["F0300","E293"],["F0301","E294"],["F0302","E295"],["F0303","E296"],["F0304","E297"],["F0305","E298"],["F0306","E299"],["F0323","E29A"],["F0324","E29B"],["F0326","E29C"],["F0327","E29D"],["F0328","E29E"],["F0329","E29F"],["F0331","E2A1"],["F0332","E2A2"],["F0343","E2A3"],["F0344","E2A4"],["F0345","E2A5"],["F0388","E2A7"],["F0391","E2A0"],["F0260","E2B4"],["FD10N","E2B5"],["FK10N","E2B6"],["FS10N","E2B7"],["FBL5N","E2B8"],["FBL1N","E2B9"],["FFS01","E2BA"],["FBL3N","E2BB"],["FCOA1","E2BC"]]},o={fontFamily:"Fiori2",collectionName:"Fiori4",icons:[["F0194","E2BD"],["F0260","E2B4"],["F0433","E21C"],["F0251","E2BE"],["F0499","E2BF"],["F0500","E2C0"],["F0501","E2C1"],["F0502","E2C2"],["F0503","E2C3"],["F0504","E2C4"],["F0507","E2C5"],["F0530","E2C6"],["F0531","E2C7"],["F0539","E2C8"],["F0544","E2C9"],["F0545","E2CA"],["F0547","E2CB"],["F0576","E2CC"],["F0578","E2CD"],["F0579","E2CE"],["F0580","E2CF"],["F0581","E2D0"],["F0582","E2D1"],["F0583","E2D2"],["F0584","E2D3"],["F0586","E2D4"],["F0587","E2D5"],["F0588","E2D6"],["F0589","E2D7"],["F0590","E2D8"],["F0591","E2D9"],["F0593","E2DA"],["F0594","E2DB"],["F0597","E2DC"],["F0603","E2DD"],["F0604","E2DE"],["F0605","E2DF"],["F0606","E2E0"],["F0607","E2E1"],["F0608","E2E2"],["F0609","E2E3"],["F0615","E2E4"],["F0616","E2E5"],["F0618","E2E6"],["F0617","E2E7"],["F0622","E2E8"],["F0623","E2E9"],["F0624","E2BC"],["F0625","E2EB"],["F0626","E2EC"],["F0627","E2ED"],["F0629","E2EE"],["F0630","E2EF"],["F0632","E2F0"],["F0633","E2F1"],["F0634","E2F2"],["F0635","E2F3"],["F0636","E2F4"],["F0638","E2F5"],["F0639","E2F6"],["F0643","E2F7"],["F0644","E2F8"],["F0645","E2F9"],["F0646","E2FA"],["F0648","E2FB"],["F0649","E2FC"],["F0650","E2FD"],["F0654","E2FE"],["F0655","E2FF"],["F0659","E300"],["F0660","E301"],["F0661","E302"],["F0665","E303"],["F0666","E304"],["F0667","E305"],["F0671","E306"],["F0672","E307"],["F0673","E308"],["F0675","E309"],["F0676","E30A"],["F0677","E30B"],["F0678","E30C"],["F0679","E30D"],["F0680","E30E"],["F0682","E30F"],["F0683","E310"],["F0684","E240"],["F0685","E312"],["F0686","E313"],["F0687","E314"],["F0690","E315"],["F0691","E316"],["F0692","E317"],["F0693","E318"],["F0694","E319"],["F0695","E31A"],["F0700","E31B"],["F0598","E31C"],["F0600","E38A"]]},b={fontFamily:"Fiori2",collectionName:"Fiori5",icons:[["F0263","E321"],["F0266","E322"],["F0834","E31D"],["F2001","E31E"],["F0839","E320"],["F0270","E323"],["F0273","E324"],["F0439","E325"],["F0443","E326"],["F0549","E327"],["F0550","E328"],["F0551","E329"],["F0577","E32A"],["F0585","E32B"],["F0637","E32C"],["F0668","E32D"],["F0669","E32E"],["F0670","E330"],["F0688","E331"],["F0689","E332"],["F0701","E333"],["F0702","E334"],["F0703","E335"],["F0706","E336"],["F0707","E337"],["F0708","E338"],["F0711","E339"],["F0712","E33A"],["F0731","E33B"],["F0732","E33C"],["F0733","E33D"],["F0735","E33E"],["F0736","E340"],["F0737","E341"],["F0742","E342"],["F0743","E343"],["F0744","E344"],["F0745","E345"],["F0746","E346"],["F0747","E347"],["F0748","E348"],["F0749","E349"],["F0750","E34A"],["F0751","E34B"],["F0755","E34C"],["F0756","E34D"],["F0757","E34E"],["F0758","E350"],["F0759","E351"],["F0760","E352"],["F0761","E353"],["F0763","E354"],["F0764","E355"],["F0765","E356"],["F0768","E357"],["F0770","E358"],["F0771","E359"],["F0772","E35A"],["F0774","E35B"],["F0776","E35C"],["F0777","E35D"],["F0778","E35E"],["F0788","E360"],["F0789","E361"],["F0790","E362"],["F0791","E363"],["F0792","E364"],["F0793","E365"],["F0794","E366"],["F0806","E367"],["F0807","E368"],["F0808","E369"],["F0809","E36A"],["F0810","E36B"],["F0811","E36C"],["F0812","E36D"],["F0813","E36E"],["F0814","E370"],["F0815","E371"],["F0816","E372"],["F0817","E373"],["F0818","E374"],["F0819","E375"],["F0820","E376"],["F0821","E377"],["F0822","E378"],["F0823","E379"],["F0824","E37A"],["F0825","E37B"],["F0826","E37C"],["F0827","E37D"],["F0828","E37E"],["F0829","E380"],["F0830","E381"],["F0831","E382"],["F0717","E383"],["F0718","E384"],["F0241","E385"],["F0246","E386"],["F0250","E387"],["F0248","E388"],["F0252","E389"],["F0600","E38A"],["F0674","E38B"],["F0247","E38E"],["F0251","E390"]]},c={fontFamily:"Fiori2",collectionName:"Fiori6",icons:[["F0795","E397"],["F0866","E3A0"],["F0865","E3A1"],["F0867","E3A2"],["F0868","E3A3"],["F0869","E3A4"],["F0870","E3A5"],["F0138","E3A6"],["F0752","E3A7"],["F0753","E3A8"],["F0773","E3A9"],["F0891","E3AA"],["F0892","E3AB"],["F1023","E3AC"],["F0767","E3AD"],["F0849","E3AE"],["F0670-1","E393"],["F0670-2","E394"],["F0670-3","E395"],["F0670-4","E396"]]},d={fontFamily:"Fiori2",collectionName:"Fiori7",icons:[["F1079","E3B0"],["F0738","E3B1"],["F1301","E3B2"],["F1302","E3B3"],["F1303","E3B4"],["F1338","E3B5"],["F1263","E3B6"],["F1373","E3B7"],["F0863","E3B8"],["F1068","E3BA"],["F0955","E3B9"],["F1242","E3BB"],["F1405","E3BC"],["F1406","E3BD"],["F1407","E3BE"],["F1408","E3BF"],["F1409","E3C0"],["F1410","E3C1"],["F1411","E3C2"],["F1412","E3C3"],["F1413","E3C4"],["F1414","E3C5"],["F1415","E3C6"],["F0797","E3C8"],["F0798","E3C9"],["F0800","E3CA"],["F0801","E3CB"],["F0804","E3CC"],["F0850","E3CD"],["F0890","E3CE"],["F1075","E3CF"],["F1394","E3D0"],["F1061","E3D1"],["F1062","E3D2"],["F1255","E3D3"],["F1077","E3D4"],["F0843","E3D5"],["F1076","E3D6"],["F0859","E3D7"],["F1060","E3D8"],["F1053","E3D9"],["F0900","E3DA"],["F0840","E3DB"],["F0842-1","E3A6"],["F0842-2","E22C"],["F1476","E3C7"]]},e={fontFamily:"Fiori2",collectionName:"Fiori8",icons:[["F1317","E3DC"],["F1318","E3DD"],["F1319","E3DE"],["F1369","E3DF"],["F1475","E3E0"],["F1345","E3E1"],["F1248","E3E2"],["F1067","E3E3"],["F1332","E3E4"],["F1333","E3E5"],["F1334","E3E6"],["F1335","E3E7"],["F1030","E3E8"],["F1457","E3E9"],["F1504","E3EA"],["F1505","E3EB"]]},g={fontFamily:"Fiori2",collectionName:"Fiori9",icons:[["F1094","E3EC"],["F1096","E3ED"],["F1353","E3EE"],["F1354","E3EF"],["F1428","E3F0"],["F1492","E3F1"],["F1515","E3F2"],["F1516","E3F3"],["F0997","E400"],["F1512","E401"],["F1563","E402"],["F1564","E403"],["F1599","E404"],["F1596","E405"],["F1254","E406"],["F1618","E407"],["F1561","E408"],["learning-compass","E409"]]},s={fontFamily:"Fiori2",collectionName:"S4Hana",icons:[["S0001","E3F4"],["S0002","E3F5"],["S0003","E3F6"],["S0004","E3F7"],["S0005","E3F8"],["S0006","E3F9"],["S0007","E3FA"],["S0008","E3FB"],["S0009","E3FC"],["S0010","E3FD"],["S0011","E3FE"],["S0012","E3FF"]]},h={fontFamily:"FioriInAppIcons",collectionName:"FioriInAppIcons",icons:[["Hierarchal Tree","E700"],["Open","E701"],["Blocked","E702"],["Partially Blocked","E703"],["Open1","E704"],["Partially Adopted","E705"],["Due","E706"],["Overdue","E707"],["Sort","E708"],["Missing Parts","E709"],["Fire","E70A"],["Dangerous Chemicals","E70B"],["Share","E70C"],["Entertainment","E70D"],["Gift","E70E"],["QR Code","E70F"],["Wifi-Online","E710"],["Wifi-Offline","E711"],["Sunrise","E712"],["Sunset","E713"],["Afternoon","E714"],["Night","E715"],["Loading Date","E715"],["Cloudy","e717"],["Rain","e718"],["Storm","e719"],["Partly Sunny","e71A"],["Heavy Rain","e71B"],["Foggy","e71C"],["Snow","e71D"],["Risk Assessment","e71E"],["Database","e71f"],["Marine","e720"],["Blister","e721"],["Pills","e722"],["Main-Sequence","e723"],["Parallel Sequence","e724"],["Alternative Sequence","e725"],["3D","e726"],["Presentation","e727"],["Mute","e728"],["Windy","e729"],["Oil Tank","e72A"],["Location Assets","e72B"],["Transport Systems","e72C"],["Field","e72D"],["Field Group","e72E"],["Record","e730"],["Record Group","e731"]]},i={fontFamily:"Fiori2",collectionName:"FioriNonNative",icons:[["FN0001","E392"],["FN0002","E398"],["FN0003","E399"],["FN0004","E39A"],["FN0005","E39B"],["FN0006","E39C"],["FN0007","E39D"],["FN0008","E39E"],["FN0009","E39F"]]};this.registerFonts(f,F,A,h,o,b,i,c,d,e,g,s);};a.registerFonts=function(){var o,i,j,b;for(i=0;i<arguments.length;i=i+1){o=arguments[i];for(j=0;j<o.icons.length;j=j+1){b={};b.fontFamily=o.fontFamily;b.content=o.icons[j][1];b.overWrite=false;b.suppressMirroring=true;I.addIcon(o.icons[j][0],o.collectionName,b);}}};return a;},true);
sap.ui.predefine('sap/ushell/library',["sap/ui/core/library","sap/m/library","sap/ui/core/Core","sap/ushell/ApplicationType"],function(c,l,C,A){"use strict";C.initLibrary({name:"sap.ushell",dependencies:["sap.ui.core","sap.m"],types:["sap.ushell.AllMyAppsState","sap.ushell.AppTitleState","sap.ushell.components.container.ApplicationType","sap.ushell.ui.launchpad.ViewPortState","sap.ushell.ui.tile.State","sap.ushell.ui.tile.StateArrow"],interfaces:[],controls:["sap.ushell.components.factsheet.controls.PictureTile","sap.ushell.components.factsheet.controls.PictureViewer","sap.ushell.components.factsheet.controls.PictureViewerItem","sap.ushell.ui.appfinder.AppBox","sap.ushell.ui.footerbar.AboutButton","sap.ushell.ui.footerbar.AddBookmarkButton","sap.ushell.ui.footerbar.ContactSupportButton","sap.ushell.ui.footerbar.EndUserFeedback","sap.ushell.ui.footerbar.JamDiscussButton","sap.ushell.ui.footerbar.JamShareButton","sap.ushell.ui.footerbar.LogoutButton","sap.ushell.ui.footerbar.SettingsButton","sap.ushell.ui.footerbar.UserPreferencesButton","sap.ushell.ui.launchpad.ActionItem","sap.ushell.ui.launchpad.AnchorItem","sap.ushell.ui.launchpad.AnchorNavigationBar","sap.ushell.ui.launchpad.DashboardGroupsContainer","sap.ushell.ui.launchpad.EmbeddedSupportErrorMessage","sap.ushell.ui.launchpad.GroupHeaderActions","sap.ushell.ui.launchpad.GroupListItem","sap.ushell.ui.launchpad.LinkTileWrapper","sap.ushell.ui.launchpad.LoadingDialog","sap.ushell.ui.launchpad.Panel","sap.ushell.ui.launchpad.PlusTile","sap.ushell.ui.launchpad.Tile","sap.ushell.ui.launchpad.TileContainer","sap.ushell.ui.launchpad.TileState","sap.ushell.ui.tile.DynamicTile","sap.ushell.ui.tile.ImageTile","sap.ushell.ui.tile.StaticTile","sap.ushell.ui.tile.TileBase"],elements:[],version:"1.78.0",extensions:{"sap.ui.support":{diagnosticPlugins:["sap/ushell/support/plugins/flpConfig/FlpConfigurationPlugin"]}}});sap.ushell.ui.launchpad.ViewPortState={Left:"Left",Center:"Center",Right:"Right",LeftCenter:"LeftCenter",CenterLeft:"CenterLeft",RightCenter:"RightCenter",CenterRight:"CenterRight"};sap.ushell.ui.tile.State={Neutral:"Neutral",None:"None",Negative:"Negative",Error:"Error",Positive:"Positive",Success:"Success",Critical:"Critical",Warning:"Warning"};sap.ushell.VisualizationLoadState={Loading:"Loading",Loaded:"Loaded",InsufficentRoles:"InsufficentRoles",OutOfRoleContext:"OutOfRoleContext",NoNavTarget:"NoNavTarget",Failed:"Failed",Disabled:"Disabled"};sap.ushell.ui.tile.StateArrow={None:"None",Up:"Up",Down:"Down"};sap.ushell.AppTitleState={ShellNavMenuOnly:"ShellNavMenuOnly",AllMyAppsOnly:"AllMyAppsOnly",ShellNavMenu:"ShellNavMenu",AllMyApps:"AllMyApps"};sap.ushell.AllMyAppsState={FirstLevel:"FirstLevel",SecondLevel:"SecondLevel",Details:"Details",FirstLevelSpread:"FirstLevelSpread"};sap.ushell.components.container.ApplicationType=A.enum;return sap.ushell;},true);
sap.ui.predefine('sap/ushell/navigationMode',[],function(){"use strict";var e={};var _=function(E){var i=true;if(E){if(typeof E!=="object"){i=false;}else{Object.keys(E).forEach(function(k){if(["GUI","WDA","WCF"].indexOf(k)===-1){i=false;}else if(typeof E[k]!=="boolean"){i=false;}});}}if(!i){jQuery.sap.log.error("Invalid parameter: 'enableInPlaceForClassicUIs' must be an object; allowed properties: GUI|WDA, type boolean","Actual parameter: "+JSON.stringify(E),"sap.ushell.services.navigationMode");}};e._isLegacyApplicationType=function(A){switch(A){case"WDA":case"TR":case"NWBC":case"WCF":return true;default:return false;}};var a=function(A){switch(A){case"TR":return"GUI";case"WDA":return"WDA";case"WCF":return"WCF";default:return undefined;}};var b=function(E,A){if(jQuery.isPlainObject(E)){return E[a(A)];}return false;};e.compute=function(n,E,s,A,o){var i,l,c=["inplace","explace"];_(o);var N={};if(c.indexOf(E)>=0){N["sap-ushell-next-navmode"]=E;}if(c.indexOf(s)>=0){i=e._getInternalNavigationMode(s,n);jQuery.sap.log.debug("Navigation mode was forced to "+i,"because sap-ushell-navmode parameter was set to "+s+" for target with applicationType: "+A,"sap.ushell.navigationMode");N.navigationMode=i;N.explicitNavMode=true;return N;}l=e._isLegacyApplicationType(A)&&e._isLegacyApplicationType(n);if(b(o,n)===true&&!l){N.navigationMode="embedded";}return N;};e._getInternalNavigationMode=function(E,A){var i={SAPUI5:{inplace:"embedded",explace:"newWindowThenEmbedded"},WDA:{inplace:"embedded",explace:"newWindowThenEmbedded"},TR:{inplace:"embedded",explace:"newWindowThenEmbedded"},URL:{inplace:"embedded",explace:"newWindow"},WCF:{inplace:"embedded",explace:"newWindowThenEmbedded"}};if(!i.hasOwnProperty(A)){jQuery.sap.log.error(A+" is not a valid application type","expected one of "+Object.keys(i).join(", "),"sap.ushell.navigationMode");return null;}if(E!=="inplace"&&E!=="explace"){jQuery.sap.log.error(E+" is not a valid external navigation mode","expected one of 'inplace', 'explace'","sap.ushell.navigationMode");return null;}return i[A][E];};e.getExternalNavigationMode=function(i){var E={embedded:"inplace",newWindowThenEmbedded:"explace",replace:"inplace",newWindow:"explace"};if(!E.hasOwnProperty(i)){jQuery.sap.log.error(i+" is not a recognized internal navigation mode","expected one of "+Object.keys(E).join(","),"sap.ushell.navigationMode");return null;}return E[i];};var w=["NWBC","WDA","TR","WCF"];e.getNavigationMode=function(r,c){var A=r.additionalInformation,s=r.applicationType,u,U;if(w.indexOf((c||{}).applicationType)>-1&&!(c||{}).explicitNavMode){return'newWindowThenEmbedded';}if(r.appCapabilities&&r.appCapabilities.navigationMode){return r.appCapabilities.navigationMode;}if((A===null||typeof A==="string"||typeof A==="undefined")&&(s==="URL"||s==="SAPUI5")){if(A&&A.indexOf("managed=")===0){if(A==="managed=FioriWave1"){return"embedded";}if(A==="managed="){return"newWindow";}return undefined;}if(A&&A.indexOf("SAPUI5.Component=")===0){u="[a-zA-Z0-9_]+";U=["^SAPUI5.Component=",u,"([.]",u,")*$"].join("");if(!(new RegExp(U)).test(A)){jQuery.sap.log.warning(["The UI5 component name in",A,"is not valid.","Please use names satisfying",U].join(" "));}return"embedded";}return"newWindow";}if(w.indexOf(s)>-1){return"newWindowThenEmbedded";}return undefined;};e.computeNavigationModeForHomepageTiles=function(A,s,i){var r={applicationType:A,additionalInformation:s};if(w.indexOf(A)>-1&&i){return"embedded";}return this.getNavigationMode(r);};return e;},true);
sap.ui.predefine('sap/ushell/override',["sap/m/GroupHeaderListItem","sap/ui/base/ManagedObject","sap/base/util/uid"],function(G,M,g){"use strict";var o={};o.updateAggregation=function(n){if(this.isTreeBinding(n)){M.prototype.updateAggregation.apply(this,arguments);}else{var b=this.mBindingInfos[n],B=b.binding,a=B.getContexts(),f=b.factory,A=this.getMetadata().getJSONKeys()[n],s=A._sMutator+"Group",c=B.isGrouped()&&this[s],i=[],d=function(C){var I=this.getId()+"-"+g(),e=f(I,C);e.setBindingContext(C,b.model);this[A._sMutator](e);}.bind(this);if(c){M.prototype.updateAggregation.apply(this,arguments);}else{i=this[A._sGetter]();o._adaptCurrentGroup(a,i);o._updateCurrentGroup(a,i,b.model,d);i.length=a.length;}}};o._adaptCurrentGroup=function(b,I){var i,a,c;for(i=0;i<b.length;i++){a=!!(I[i]&&I[i].isA("sap.ui.integration.widgets.Card"));c=!!b[i].getProperty(b[i].sPath+"/isCard");if(a||c){var j=i;for(;j<I.length;j++){I[j].destroy();}break;}}};o._updateCurrentGroup=function(b,I,B,a){var i;for(i=0;i<b.length;i++){if(i<I.length&&!I[i].bIsDestroyed){I[i].setBindingContext(b[i],B);}else{a(b[i]);}}for(;i<I.length;++i){I[i].destroy();}};o.updateAggregationGrouped=function(n){var b=this.mBindingInfos[n],B=b.binding,f=b.factory,c,N=null,a=null,s=null,t=this,I=t.getItems(),l=0,L=0,i,d,T=[];a=B.isGrouped()&&this.addItemGroup;jQuery.each(B.getContexts(),function(e,C){if(a&&B.aSorters.length>0){N=B.aSorters[0].fnGroup(C);if(typeof N==="string"){N={key:N};}if(N.key!==s){var h,H;if(b.groupHeaderFactory){h=b.groupHeaderFactory(N);}H=h||new G({title:N.text||N.key}).addStyleClass("sapMListHdr");t.insertAggregation("items",H,L,true);L=L+1;s=N.key;}}I=t.getItems();for(i=L;i<I.length;i=i+1){if(I[i].constructor===G){T.push(t.removeItem(I[i]));I=t.getItems();}}if(L<I.length){I[L].setBindingContext(C,b.model);if(I[L].aDelegates){jQuery.each(I[L].aDelegates,function(i,v){v.vThis=C;});}}else{d=t.getId()+"-"+L;c=f(d,C);c.setBindingContext(C,b.model);t.addItem(c);}L=L+1;l=L;});for(i=I.length-1;i>=l;i=i-1){T.push(t.removeItem(I[i]));}setTimeout(function(){jQuery.each(T,function(i,v){v.destroy();});},1);};o.updateAggregatesFactory=function(n){return function(){o.updateAggregation.bind(this)(n);};};return o;},true);
sap.ui.predefine('sap/ushell/performance/FesrEnhancer',["sap/ui/performance/trace/FESR","sap/ushell/EventHub","sap/base/Log","sap/ushell/performance/ShellAnalytics"],function(F,E,U,S){"use strict";var a={HOME_INITIAL:"FLP@LOAD",FINDER_INITIAL:"FLP@LOAD_FINDER",APP_INITIAL:"FLP@DEEP_LINK",NAVIGATION:"NAVIGATION"};var f={_fnOriginalOnBeforeCreated:null,_lastTrackedRecord:null,init:function(){if(F.getActive()){S.enable();this._fnOriginalOnBeforeCreated=F.onBeforeCreated;F.onBeforeCreated=this._onBeforeCreatedHandler.bind(this);}},reset:function(){F.onBeforeCreated=this._fnOriginalOnBeforeCreated;S.disable();this._setLastTrackedRecord(null);},_getPerformanceEntries:function(e){return performance.getEntriesByName(e);},_getLastTrackedApplicationId:function(){var c=S.getCurrentApplication();if(c){return c.id;}return null;},_getLastTrackedRecord:function(){return this._lastTrackedRecord;},_setLastTrackedRecord:function(n){this._lastTrackedRecord=n;},_onBeforeCreatedHandler:function(u,o){var d=this._detectScenario(u,o),A=this._getLastTrackedApplicationId();if(A){u.appNameShort=A;}if(!d.scenario){return u;}return this._enhanceRecord(d.scenario,{stepName:u.stepName,appNameLong:u.appNameLong,appNameShort:u.appNameShort,timeToInteractive:u.timeToInteractive},d.relatedEvent);},_detectScenario:function(u,o){function c(s,e){var r={scenario:s};if(e){r.relatedEvent=e;}return r;}if(u.stepName==="undetermined_startup"){this._setLastTrackedRecord(S.getLastClosedRecord());switch(u.appNameLong){case"sap.ushell.components.homepage":return c(a.HOME_INITIAL);case"sap.ushell.components.appfinder":return c(a.FINDER_INITIAL);default:break;}return c(a.APP_INITIAL);}var l=this._getLastTrackedRecord(),n=S.getNextNavigationRecords(l);if(n.length===1){var N=n[0];if((N&&l&&!N.isEqual(l))||(!l&&N)){this._setLastTrackedRecord(N);return c(a.NAVIGATION,N);}}else if(n.length>1){this._setLastTrackedRecord(n.pop());return c(a.NAVIGATION,n[0]);}return c(null);},_enhanceRecord:function(d,i,r){switch(d){case a.HOME_INITIAL:return this._enhanceInitialStart(i,d,"FLP-TTI-Homepage");case a.FINDER_INITIAL:return this._enhanceInitialStart(i,d,"FLP-TTI-AppFinder");case a.APP_INITIAL:return this._enhanceInitialAppStart(i,d,null);case a.NAVIGATION:return this._enhanceNavigationRecord(i,r);default:break;}U.warning("Unknown scenario at the end of execution, unnecessary code executed",null,"sap.ushell.performance.FesrEnhancer");return i;},_enhanceInitialStart:function(i,s,p){var m,e={stepName:s,appNameLong:i.appNameLong,appNameShort:"",timeToInteractive:i.timeToInteractive};if(p){m=this._getPerformanceEntries(p)[0];if(m){e.timeToInteractive=m.startTime;return e;}U.warning("Scenario '"+s+"' detected but expected performance mark '"+p+"' does not exist",null,"sap.ushell.performance.FesrEnhancer");}return e;},_enhanceNavigationRecord:function(i,r){var e={stepName:r.step||i.stepName,appNameLong:i.appNameLong,appNameShort:r.targetApplication||"",timeToInteractive:i.timeToInteractive};if(e.stepName==="FLP@LOAD"){var m=this._getPerformanceEntries("FLP-TTI-Homepage")[0];if(m){if(m.startTime>r.getTimeStart()){e.timeToInteractive=m.startTime-r.getTimeStart();}}}return e;},_enhanceInitialAppStart:function(i,s,p){var e=this._enhanceInitialStart(i,s,p);e.appNameShort=i.appNameShort;return e;}};return f;},true);
sap.ui.predefine('sap/ushell/performance/ShellAnalytics',["sap/ushell/EventHub","sap/ushell/services/AppConfiguration","sap/ushell/performance/StatisticalRecord"],function(E,A,S){"use strict";var s=[],d=[],o,c,l,i=false;var T={"dashboardTileClick":"HOMEPAGE_TILE","dashboardTileLinkClick":"HOMEPAGE_LINK","catalogTileClick":"FINDER_TILE"};var N={EXPLACE:"EXPLACE",INPLACE:"INPLACE"};var t=["dashboardTileClick","dashboardTileLinkClick","catalogTileClick"];function _(){return sap.ui.getCore().getEventBus();}function g(){return s;}function a(){var C=g().filter(function(R){return R.isClosed();});if(C.length>0){return C[C.length-1];}return null;}function b(L){if(!L){return g();}return g().filter(function(R){return L.getTimeStart()<R.getTimeStart()&&R.isClosed();});}function e(){return c;}function f(z){c=z;}function h(){l=performance.now();}function j(){if(!o){o=new S();s.push(o);}return o;}function k(C,z){j().setTrigger(T[z]);}function m(z){j().setTargetHash(z);j().setTimeStart(l||performance.now());}function n(){return new Promise(function(z,B){sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(C){var D=C.getCurrentApplication();if(!D){z({});return;}if(D.homePage){z({type:"UI5",id:"FLP_HOME"});return;}if(D.applicationType==="UI5"){D.getTechnicalParameter("sap-fiori-id").then(function(G){var H=G[0];if(!H&&D.componentInstance){var I=D.componentInstance.getManifest();if(I&&I["sap.app"]&&I["sap.app"].id){H=I["sap.app"].id;}}z({type:"UI5",id:H});});}else{var F=A.getMetadata().technicalName||A.getCurrentApplication().text||D.applicationType;z({type:D.applicationType,id:F});}});});}function p(z,B,C){if(o){o.setSourceApplication(z);o.setTargetApplication(B);o.setNavigationMode(C);o.closeRecord();o=null;}}function q(){n().then(function(z){var C=e();f(z);p(C?C.id:undefined,z.id,N.INPLACE);});}function r(){var C=e();p(C?C.id:undefined,null,N.EXPLACE);}function u(){if(o){var C=e();o.setSourceApplication(C?C.id:undefined);o.closeRecordWithError();o=null;}}function v(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(z){z.hashChanger.attachEvent("hashChanged",h);z.hashChanger.attachEvent("shellHashChanged",h);});}function w(){sap.ushell.Container.getServiceAsync("ShellNavigation").then(function(z){z.hashChanger.detachEvent("hashChanged",h);z.hashChanger.detachEvent("shellHashChanged",h);});}function x(){if(i){return;}i=true;t.forEach(function(z){_().subscribe("launchpad",z,k);});var D;D=E.once("ShellNavigationInitialized").do(v);d.push(D);D=E.on("trackHashChange").do(m);d.push(D);D=E.on("AppRendered").do(q);d.push(D);D=E.on("openedAppInNewWindow").do(r);d.push(D);D=E.on("firstSegmentCompleteLoaded").do(q);d.push(D);D=E.on("doHashChangeError").do(u);d.push(D);}function y(){if(!i){return;}t.forEach(function(z){_().unsubscribe("launchpad",z,k);});d.forEach(function(D){D.off();});w();f(null);s=[];o=null;i=false;}return{enable:x,disable:y,getAllRecords:g,getCurrentApplication:e,getLastClosedRecord:a,getNextNavigationRecords:b};},false);
sap.ui.predefine('sap/ushell/performance/StatisticalRecord',[],function(){"use strict";var S={OPEN:"OPEN",CLOSED:"CLOSED",ERROR:"ERROR"};function a(){this.status=S.OPEN;this.targetHash=null;this.trigger=null;this.timeStart=null;this.timeEnd=null;this.duration=null;this.step=null;this.sourceApplication=undefined;this.targetApplication=undefined;this.navigationMode=null;}a.prototype._calculateStep=function(){if(this.sourceApplication&&this.sourceApplication!=="FLP_HOME"&&this.targetApplication!=="FLP_HOME"){return"A2A@"+this.sourceApplication;}if(this.targetApplication==="FLP_HOME"){return"FLP@LOAD";}if(this.sourceApplication==="FLP_HOME"){return"FLP@HOMEPAGE_TILE";}if(this.sourceApplication===undefined&&this.targetApplication&&this.targetApplication!=="FLP_HOME"){return"FLP@DEEP_LINK";}return"";};a.prototype.isEqual=function(o){return this.timeStart===o.timeStart;};a.prototype.closeRecord=function(){this.step=this._calculateStep();this.status=S.CLOSED;this.timeEnd=performance.now();if(this.timeStart){this.duration=this.timeEnd-this.timeStart;}};a.prototype.closeRecordWithError=function(){this.status=S.ERROR;this.timeEnd=performance.now();this.duration=this.timeEnd-this.timeStart;};a.prototype.isClosed=function(){return this.status===S.CLOSED;};a.prototype.getStep=function(){return this.step;};a.prototype.setTrigger=function(t){this.trigger=t;};a.prototype.setTargetHash=function(t){this.targetHash=t;};a.prototype.setTimeStart=function(t){this.timeStart=t;};a.prototype.getTimeStart=function(){return this.timeStart;};a.prototype.getTimeEnd=function(){return this.timeEnd;};a.prototype.setSourceApplication=function(s){this.sourceApplication=s;};a.prototype.setTargetApplication=function(t){this.targetApplication=t;};a.prototype.setNavigationMode=function(n){this.navigationMode=n;};return a;},false);
sap.ui.predefine('sap/ushell/renderers/fiori2/AccessKeysHandler',["sap/ui/Device","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/ui/launchpad/ShortcutsHelpContainer","sap/ui/thirdparty/jquery","sap/m/Label","sap/m/Text","sap/m/Dialog","sap/m/Button"],function(D,C,E,r,S,q,L,T,a,B){"use strict";var A=function(){};A.prototype={bFocusOnShell:true,bFocusPassedToExternalHandlerFirstTime:true,isFocusHandledByAnotherHandler:false,fnExternalKeysHandler:null,sLastExternalKeysHandlerUrl:null,fnExternalShortcuts:null,isleftAltPressed:false,bForwardNavigation:true,aShortcutsDescriptions:[],appOpenedHandler:function(){var c=hasher.getHash();if(c!==this.sLastExternalKeysHandlerUrl){this.fnExternalKeysHandler=null;}this.sLastExternalKeysHandlerUrl=c;},_focusItemInOverflowPopover:function(i,c){var o=sap.ui.getCore().byId("headEndItemsOverflow");if(o&&o.isOpen()){if(o.getContent().length){this._focusIteminPopover(i,o.getContent()[0].getItems());}}else if(c<10){var O=window.document.getElementById("endItemsOverflowBtn");if(O){O.click();var t=this;window.setTimeout(function(){t._focusItemInOverflowPopover(i,++c);},300);}}},_focusItemInUserMenu:function(i,c){var u=sap.ui.getCore().byId("sapUshellMeAreaPopover");if(u&&u.isOpen()){if(u.getContent().length){this._focusIteminPopover(i,u.getContent()[0].getItems());}}else if(c<10){var t=this;E.emit("showMeArea",Date.now());window.setTimeout(function(){t._focusItemInUserMenu(i,++c);},300);}},_focusIteminPopover:function(I,c){for(var i=0;i<c.length;i++){var d=c[i].getId().split("-");if(d[d.length-1]===I){c[i].getDomRef().focus();return;}}},_handleAccessOverviewKey:function(c){var s=this.oModel.getProperty("/searchAvailable"),p=this.oModel.getProperty("/personalization"),e=C.last("/core/catalog/enabled"),d=C.last("/core/shell/model/enableNotifications");if(D.browser.msie){document.addEventListener("help",this._cancelHelpEvent);}var f=[];f=f.concat(this.aShortcutsDescriptions);var g,h;if(D.os.macintosh){g=r.i18n.getText("OptionKey");h=r.i18n.getText("CommandKey");}else{g=r.i18n.getText("AltKey");h=r.i18n.getText("ControlKey");}if(window.document.getElementById("shell-header")){if(e&&c){f.push({text:g+" + A",description:r.i18n.getText("hotkeyFocusOnAppFinderButton")});}if(s){f.push({text:g+" + F",description:r.i18n.getText("hotkeyFocusOnSearchButton")});}f.push({text:g+" + H",description:r.i18n.getText("hotkeyHomePage")});f.push({text:g+" + M",description:r.i18n.getText("hotkeyFocusOnUserActionMenu")});if(d){f.push({text:g+" + N",description:r.i18n.getText("hotkeyFocusOnNotifications")});}if(c){f.push({text:g+" + S",description:r.i18n.getText("hotkeyFocusOnSettingsButton")});f.push({text:r.i18n.getText("ControlKey")+" + "+r.i18n.getText("CommaKey"),description:r.i18n.getText("hotkeyOpenSettings")});}if(p&&e){f.push({text:r.i18n.getText("ControlKey")+" + "+r.i18n.getText("EnterKey"),description:r.i18n.getText("hotkeyExitEditing")});}if(s){f.push({text:h+" + "+r.i18n.getText("ShiftKey")+" + F",description:r.i18n.getText("hotkeyFocusOnSearchField")});}}var o=new S();f.forEach(function(v){o.addContent(new L({text:v.description}));o.addContent(new T({text:v.text}));});var i=new a({id:"hotKeysGlossary",title:r.i18n.getText("hotKeysGlossary"),contentWidth:"29.6rem",content:o,afterClose:function(){i.destroy();}}).addStyleClass("sapContrastPlus");i.setBeginButton(new B({text:r.i18n.getText("okBtn"),press:function(){i.close();}}));i.open();},_focusAppFinderButton:function(){if(!C.last("/core/catalog/enabled")){return;}if(this._isFocusInDialog()){return;}var o=window.document.getElementById("openCatalogBtn");if(o){o.focus();return;}var c=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(c.moveAppFinderActionToShellHeader){this._focusItemInOverflowPopover("openCatalogBtn",0);return;}this._focusItemInUserMenu("openCatalogBtn",0);},_focusSettingsButton:function(){if(this._isFocusInDialog()){return;}var s=window.document.getElementById("userSettingsBtn");if(s){s.focus();return;}var c=sap.ushell.Container.getRenderer("fiori2").getShellConfig();if(c.moveUserSettingsActionToShellHeader){this._focusItemInOverflowPopover("userSettingsBtn",0);return;}this._focusItemInUserMenu("userSettingsBtn",0);},_blockBrowserDefault:function(e){return new Promise(function(c){if(D.browser.name==="ie"){var s=window.document.getElementById("shell-header");if(s){s.setAttribute("accesskey",e.key);window.setTimeout(function(){s=window.document.getElementById("shell-header");if(s){s.removeAttribute("accesskey");c();}},0);}}else{c();}e.preventDefault();});},_handleAltShortcutKeys:function(e,c){var s=sap.ui.getCore().byId("shell-header"),u=sap.ui.getCore().byId("sapUshellMeAreaPopover"),n=sap.ui.getCore().byId("shellNotificationsPopover");if(s){if(c){if(e.keyCode===65){this._blockBrowserDefault(e).then(this._focusAppFinderButton.bind(this));}else if(e.keyCode===83){this._blockBrowserDefault(e).then(this._focusSettingsButton.bind(this));}}if(e.keyCode===70){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return;}var o=window.document.getElementById("sf"),d=window.document.getElementById("searchFieldInShell-button");if(o){o.focus();}else if(d){d.focus();}else{this._focusItemInOverflowPopover("sf",0);}}.bind(this));}else if(e.keyCode===72){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return;}window.hasher.setHash(s.getHomeUri());if(u&&u.isOpen()){E.emit("showMeArea",false);}if(n&&n.isOpen()){E.emit("showNotifications",false);}var o=window.document.getElementById("shellAppTitle");if(o){o.focus();}}.bind(this));}else if(e.keyCode===77){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return;}if(!(u&&u.isOpen())){E.emit("showMeArea",Date.now());}}.bind(this));}else if(e.keyCode===78){this._blockBrowserDefault(e).then(function(){if(this._isFocusInDialog()){return;}if(!(n&&n.isOpen())){E.emit("showNotifications",Date.now());}}.bind(this));}}},_handleCtrlShortcutKeys:function(e,c){if(e.shiftKey){if(e.keyCode===70){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}var s=sap.ui.getCore().byId("sf");if(s){s.firePress();e.preventDefault();e.stopPropagation();}}}else if(e.keyCode===188&&c){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}var o=sap.ui.getCore().byId("userSettingsBtn");if(o&&!q(window.document.activeElement).parents(".sapUiCompSmartTable, .sapUiMdcTable").length){o.firePress();e.preventDefault();e.stopPropagation();}}else if(e.keyCode===112){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}this._handleAccessOverviewKey(c);}else if(e.keyCode===83){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}var d=window.document.getElementById("appFinderSearch-I");if(d){d.focus();e.preventDefault();e.stopPropagation();}}else if(e.keyCode===13){if(this._isFocusInDialog()){e.preventDefault();e.stopPropagation();return;}var f=sap.ui.getCore().byId("sapUshellDashboardFooterDoneBtn");if(f&&f.getDomRef()){f.firePress();e.preventDefault();e.stopPropagation();}}},handleShortcuts:function(e,c){if(D.os.macintosh&&e.metaKey&&e.shiftKey&&e.keyCode===70){var s=window.document.getElementById("sf");if(s){s.firePress();e.preventDefault();e.stopPropagation();}e.preventDefault();}else if(e.altKey&&!e.shiftKey&&!e.ctrlKey){this._handleAltShortcutKeys(e,c);}else if(e.ctrlKey&&!e.altKey){this._handleCtrlShortcutKeys(e,c);}},registerAppKeysHandler:function(h){this.fnExternalKeysHandler=h;this.sLastExternalKeysHandlerUrl=hasher.getHash();},resetAppKeysHandler:function(){this.fnExternalKeysHandler=null;},getAppKeysHandler:function(){return this.fnExternalKeysHandler;},registerAppShortcuts:function(h,s){this.fnExternalShortcuts=h;this.aShortcutsDescriptions=s;},_handleFocusBackToMe:function(e,i){this.bFocusOnShell=true;var f;if(i){f=window.document.getElementById(i);}else{this.fromOutside=true;if(e){e.preventDefault();this.bForwardNavigation=!e.shiftKey||e.key==="F6";}f=window.document.getElementById("sapUshellHeaderAccessibilityHelper");}if(f){f.focus();this.fromOutside=false;}this.bFocusPassedToExternalHandlerFirstTime=true;},setIsFocusHandledByAnotherHandler:function(h){this.isFocusHandledByAnotherHandler=h;},sendFocusBackToShell:function(p){var e,i;if(typeof p==="string"){i=p;}else if(typeof p==="object"){e=p;}this._handleFocusBackToMe(e,i);},_handleEventUsingExternalKeysHandler:function(e){if(!this.bFocusOnShell&&!this.isFocusHandledByAnotherHandler){if(this.fnExternalKeysHandler&&q.isFunction(this.fnExternalKeysHandler)){this.fnExternalKeysHandler(e,this.bFocusPassedToExternalHandlerFirstTime);this.bFocusPassedToExternalHandlerFirstTime=false;}}this.setIsFocusHandledByAnotherHandler(false);},_cancelHelpEvent:function(e){e.preventDefault();document.removeEventListener("help",this._cancelHelpEvent);},_isFocusInDialog:function(e){for(var o=window.document.activeElement;o!==window.document.body;o=o.parentElement){if(o.classList.contains("sapMDialog")){return true;}}return false;},init:function(m){this.oModel=m;document.addEventListener("keydown",function(e){if(e.keyCode===16){return;}this.bForwardNavigation=!e.shiftKey;if(e.key==="Tab"||e.key==="F6"){setTimeout(function(){this._handleEventUsingExternalKeysHandler(e);}.bind(this),0);}else{this._handleEventUsingExternalKeysHandler(e);}if(e.keyCode===18){if(e.location===window.KeyboardEvent.DOM_KEY_LOCATION_LEFT){this.isleftAltPressed=true;}else{this.isleftAltPressed=false;}}if(this.isleftAltPressed||!e.altKey){var c=C.last("/core/shell/model/currentState/stateName");if(c!=="headerless"&&c!=="headerless-home"){var d=(c==="home"||c==="app"||c==="minimal");this.handleShortcuts(e,d);}if(this.fnExternalShortcuts){this.fnExternalShortcuts(e);}}}.bind(this),true);this._cancelHelpEvent=this._cancelHelpEvent.bind(this);}};var b=new A();E.on("AppRendered").do(A.prototype.appOpenedHandler.bind(b));return b;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/FlpMeasure',["sap/ui/thirdparty/jquery","sap/base/util/now"],function(q,n){"use strict";var P=function(){var p=false,b={};function M(h,a,s,i){this.hash=h;this.name=a;this.start=s;this.end=0;this.duration=0;this.info=i;}function B(h,a,s,c,d){this.hash=h;this.name=a;this.scenario=c;this.sequence=d;this.start=s;this.end=0;this.percent=null;this.duration=0;this.funcs={};}this.start=function(s,a,c){var t=n(),o;if(!p){return;}if(b[s]===undefined||b[s]===null){b[s]={};}if(b[s][a]===undefined){b[s][a]=null;}if(b[s][a]===null){o=new B(this.hash(),a,t,s,c);b[s][o.name]=o;}};this.startFunc=function(s,a,c,f,i){if(!p){return;}var t=n();var d=null;if(b[s]===undefined||b[s]===null){b[s]={};}if(b[s][a]===undefined){b[s][a]=null;}if(b[s][a]===null){d=new B(this.hash(),a,t,s,c);b[s][a]=d;}var e=new M(this.hash(),f,t,i);b[s][a].funcs[e.hash]=e;return e.hash;};this.end=function(s,a){if(!p){return;}var t=n();if(b[s][a]===undefined){b[s][a]=null;}if(b[s][a]!=null){b[s][a].end=t;b[s][a].duration=Math.round(b[s][a].end-b[s][a].start);}};this.endFunc=function(s,a,f){if(!p){return;}var t=n();if(b[s][a]===undefined){b[s][a]=null;}if(b[s][a]!=null){b[s][a].end=t;b[s][a].duration=Math.round(b[s][a].end-b[s][a].start);b[s][a].funcs[f].end=t;b[s][a].funcs[f].duration=Math.round(b[s][a].funcs[f].end-b[s][a].funcs[f].start);}};this.calc=function(){if(!p){return;}return b;};this.hash=function(){if(!p){return;}var v=(new Date()).valueOf().toString()+Math.random().toString();var h=5381;for(var i=0;i<v.length;i++){var c=v.charCodeAt(i);h=((h<<5)+h)+c;}return h;};this.getActive=function(){return p;};this.setActive=function(o,c){if(p===o){return;}p=o;document.addEventListener("keyup",function(e){if(e.shiftKey&&e.ctrlKey&&e.altKey&&e.keyCode==77){window.calc=JSON.stringify(q.sap.flpmeasure.calc());window.open(sap.ui.require.toUrl("sap/ushell/renderers/fiori2/stat")+".html");}},false);return p;};var m=location.href.match(/sap-flp-measure=([^&]*)/);if(m&&m[1]){if(m[1]==="true"||m[1]==="x"||m[1]==="X"){this.setActive(true);}else{this.setActive(true,m[1]);}}};q.sap.flpmeasure=q.sap.flpmeasure||new P();return q.sap.flpmeasure;});
sap.ui.predefine('sap/ushell/renderers/fiori2/History',function(){"use strict";var H=function(){this._history=[];this.backwards=false;this._historyPosition=-1;this._virtual={};};H.prototype.hashChange=function(n){var h=this._history.indexOf(n);if(h===-1){if(this._historyPosition+1<this._history.length){this._history=this._history.slice(0,this._historyPosition+1);}this._history.push(n);this._historyPosition+=1;this.backwards=false;this.forwards=false;}else{this.backwards=this._historyPosition>h;this.forwards=this._historyPosition<h;this._historyPosition=h;}};H.prototype.pop=function(){var l;if(this._history.length>0){l=this._history.pop();this._historyPosition--;}return l;};H.prototype.isVirtualHashchange=function(n,o){return this._virtual.hasOwnProperty(o)&&this.getCurrentHash()===n&&this._history.length-1>this._historyPosition&&this._history[this._historyPosition+1]===o;};H.prototype.setVirtualNavigation=function(h){this._virtual[h]=true;};H.prototype.getCurrentHash=function(){return this._history[this._historyPosition]||null;};H.prototype.getHashIndex=function(h){return this._history.indexOf(h);};H.prototype.getHistoryLength=function(){return this._history.length;};return H;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/Renderer',["sap/ui/core/UIComponent","sap/ushell/ui/shell/ToolAreaItem","./FlpMeasure","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ushell/components/SharedComponentUtils","sap/ushell/services/AppConfiguration","sap/ushell/services/AppType","sap/ushell/resources","sap/base/util/UriParameters","sap/ui/thirdparty/jquery","sap/base/Log","sap/base/util/ObjectPath","sap/ui/core/library","sap/ushell/ui/shell/ShellHeadItem","sap/m/NotificationListItem","./RendererExtensions"],function(U,T,f,C,e,A,D,J,s,a,b,r,c,q,L,O,d,S,N){"use strict";var V=d.mvc.ViewType;var R=U.extend("sap.ushell.renderers.fiori2.Renderer",{metadata:{version:"1.78.0",dependencies:{version:"1.78.0",libs:["sap.ui.core","sap.m"],components:[]},routing:{config:{path:"sap.ushell.components",async:true,controlId:"viewPortContainer",clearAggregation:false,controlAggregation:"pages"},routes:[{name:"appfinder-legacy",pattern:"Shell-home&/appFinder/:menu:/:filter:"},{name:"home",pattern:["Shell-home?:hashParameters:","Shell-home&/:innerHash*:","Shell-home"],target:C.last("/core/spaces/enabled")?"pages":"home"},{name:"appfinder",pattern:["Shell-appfinder?:hashParameters:&/:innerHash*:","Shell-appfinder?:hashParameters*:","Shell-appfinder&/:innerHash*:","Shell-appfinder"],target:C.last("/core/catalog/enabled")?"appfinder":undefined},{name:"openFLPPage",pattern:["Launchpad-openFLPPage?:hashParameters:","Launchpad-openFLPPage"],target:C.last("/core/spaces/enabled")?"pages":"home"}],targets:{home:{name:"homepage",type:"Component",title:r.i18n.getText("homeBtn_tooltip"),id:"Shell-home-component",options:{manifest:false,asyncHints:{preloadBundles:C.last("/core/home/featuredGroup/enable")?["sap/fiori/flp-controls.js","sap/ushell/components/homepage/cards-preload.js"]:["sap/fiori/flp-controls.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},appfinder:{name:"appfinder",type:"Component",id:"Shell-appfinder-component",options:{manifest:false,asyncHints:{preloadBundles:["sap/fiori/flp-controls.js"]},componentData:{config:{enablePersonalization:true,enableHomePageSettings:false}}}},pages:{name:"pages",type:"Component",id:"pages-component",componentData:{},options:{asyncHints:{preloadBundles:["sap/fiori/flp-controls.js"]}}}}}},init:function(){U.prototype.init.apply(this,arguments);var t=this,o=this.getRouter();var p=function(){e.emit("trackHashChange","Shell-home");if(a.getCurrentApplication()){sap.ushell.Container.getService("ShellNavigation").setIsInitialNavigation(false);}var h=r.i18n.getText("homeBtn_tooltip");A.switchViewState("home",false,"Shell-home");t.setCurrentCoreView("home");a.setCurrentApplication(null);A.getShellUIService().setTitle(h);A.getShellUIService().setHierarchy();A.getShellUIService().setRelatedApps();A.getAppMeta().setAppIcons();s.initializeAccessKeys();};o.getRoute("home").attachMatched(p);o.getRoute("openFLPPage").attachMatched(p);o.getRoute("appfinder-legacy").attachMatched(function(E){o.navTo("appfinder",{},true);});o.getRoute("appfinder").attachMatched(function(E){if(!C.last("/core/catalog/enabled")){L.warning("AppFinder is disabled. Re-route to the homepage.");o.navTo("home",null,true);return;}e.emit("trackHashChange","Shell-appFinder");var h=sap.ui.getCore().getComponent(t.createId("Shell-appfinder-component")),i=E.getParameter("arguments");if(sap.ushell.Container.getRenderer("fiori2")){A.getShellUIService().setBackNavigation();sap.ushell.Container.getRenderer("fiori2").setCurrentCoreView("appFinder");}a.setCurrentApplication(null);var j=h.getRouter();h.getRootControl().loaded().then(function(){j.parse(i["innerHash*"]||"");});A.switchViewState("app",false,"Shell-appfinder");A.getAppMeta().setAppIcons();s.initializeAccessKeys();});var g=new J(D);g.setDefaultBindingMode("OneWay");this.setModel(g,"device");this.setModel(r.i18nModel,"i18n");}});R.prototype.createContent=function(){var p=new c(window.location.href).get("appState")||new c(window.location.href).get("sap-ushell-config"),w,v=this.getComponentData()||{},o={applications:{"Shell-home":{}},rootIntent:"Shell-home"},g;w=(p==="headerless-opt")?"headerless":p;if(w){if(!v.config){v.config={};}v.config.appState=w;v.config.appStateOrig=p;v.config.inHeaderLessOpt=(p==="headerless-opt");}if(v.config){if(v.config.rootIntent===undefined){v.config.migrationConfig=true;}v.config=q.extend(true,o,v.config);q.extend(v.config.applications["Shell-home"],C.last("/core/home"),C.last("/core/catalog"));if(v.config.appState==="headerless"||v.config.appState==="merged"||v.config.appState==="blank"){v.config.enablePersonalization=false;C.emit("/core/shell/enablePersonalization",false);}else{v.config.enablePersonalization=C.last("/core/shell/enablePersonalization");}if(!v.config.enablePersonalization){v.config.moveEditHomePageActionToShellHeader=false;v.config.moveAppFinderActionToShellHeader=false;}}f.start(0,"Creating Shell",0);if(v.config&&v.config.customViews){Object.keys(v.config.customViews).forEach(function(i){var g=v.config.customViews[i];sap.ui.view(i,{type:g.viewType,viewName:g.viewName,viewData:g.componentData});});}var h=C.createModel("/core/shell/model",J);v.shellModel=h;g=sap.ui.view("mainShell",{type:V.JS,viewName:"sap.ushell.renderers.fiori2.Shell",height:"100%",viewData:v});g.setModel(h);this._oShellView=g;this.oShellModel=A.getElementsModel();g.loaded().then(function(g){sap.ushell.renderers.fiori2.utils.init(g.getController());this.shellCtrl=g.oController;}.bind(this));return g;};R.prototype.createExtendedShellState=function(g,h){return A.shellElements().createExtendedShellState(g,h);};R.prototype.applyExtendedShellState=function(g,h){this.oShellModel.applyExtendedShellState(g,h);};R.prototype.showLeftPaneContent=function(i,g,h){if(g){A.shellElements().addShellModelForApplications("paneContent",typeof i==="string"?[i]:i);}else{this.oShellModel.addLeftPaneContent(typeof i==="string"?[i]:i,false,h);}};R.prototype.showHeaderItem=function(i,g,h){if(g){A.shellElements().addShellModelForApplications("headItems",typeof i==="string"?[i]:i);}else{this.oShellModel.addHeaderItem(typeof i==="string"?[i]:i,false,h);}};R.prototype.showRightFloatingContainerItem=function(i,g,h){if(g){A.shellElements().addShellModelForApplications("RightFloatingContainerItems",typeof i==="string"?[i]:i);}else{this.oShellModel.addRightFloatingContainerItem(typeof i==="string"?[i]:i,false,h);}};R.prototype.showRightFloatingContainer=function(g){A.shellElements().setShellModelForApplications("showRightFloatingContainer",g);};R.prototype.showToolAreaItem=function(i,g,h){this.oShellModel.addToolAreaItem(i,true,g,h);};R.prototype.showActionButton=function(i,g,h){var B=[],j=[],o;if(typeof i==="string"){i=[i];}B=i.filter(function(I){o=sap.ui.getCore().byId(I);return o instanceof sap.m.Button&&!(o instanceof sap.ushell.ui.launchpad.ActionItem);});j=i.filter(function(I){o=sap.ui.getCore().byId(I);return o instanceof sap.ushell.ui.launchpad.ActionItem;});if(B.length){this.convertButtonsToActions(B,g,h);}if(j.length){if(g){A.shellElements().addShellModelForApplications("actions",i);}else{this.oShellModel.addActionButton(i,false,h);}}};R.prototype.showFloatingActionButton=function(i,g,h){if(g){A.shellElements().addShellModelForApplications("floatingActions",typeof i==="string"?[i]:i);}else{this.oShellModel.addFloatingActionButton(typeof i==="string"?[i]:i,false,h);}};R.prototype.showHeaderEndItem=function(i,g,h){if(g){A.shellElements().addShellModelForApplications("headEndItems",typeof i==="string"?[i]:i);}else{this.oShellModel.addHeaderEndItem(typeof i==="string"?[i]:i,false,h);}};R.prototype.setHeaderVisibility=function(v,g,h){if(g){A.shellElements().setShellModelForApplications("headerVisible",v);}else{this.oShellModel.setHeaderVisibility(v,false,h);}};R.prototype.showSubHeader=function(i,g,h){if(g){A.shellElements().addShellModelForApplications("subHeader",typeof i==="string"?[i]:i);}else{this.oShellModel.addSubHeader(typeof i==="string"?[i]:i,false,h);}};R.prototype.showSignOutItem=function(g,h){if(g){A.shellElements().addShellModelForApplications("actions",["logoutBtn"],false);}else{this.oShellModel.showSignOutButton(g,h);}};R.prototype.showSettingsItem=function(g,h){this.oShellModel.showSettingsButton(g,h);};R.prototype.setFooter=function(F){this.shellCtrl.setFooter(F);};R.prototype.setShellFooter=function(p){var o=new q.Deferred(),t=this,g,h,i=p.controlType,j=p.oControlProperties;if(j&&j.id&&sap.ui.getCore().byId(j.id)){h=sap.ui.getCore().byId(j.id);if(h){if(this.lastFooterId){this.removeFooter();}this.lastFooterId=oInnerControl.getId();this.shellCtrl.setFooter(h);o.resolve(h);}}if(i){g=i.replace(/\./g,"/");sap.ui.require([g],function(k){h=new k(j);if(t.lastFooterId){t.removeFooter();}t.lastFooterId=h.getId();t.shellCtrl.setFooter(h);o.resolve(h);});}else{L.warning("You must specify control type in order to create it");}return o.promise();};R.prototype.setFooterControl=function(g,o){var h=g.replace(/\./g,"/"),i=sap.ui.require(h),j,k,l=false;if(i){l=true;}else if(!O.get(g||"")){q.sap.require(g);}k=function(o){if(g){if(l){return new i(o);}var m=O.get(g||"");return new m(o);}L.warning("You must specify control type in order to create it");};j=this.createItem(o,undefined,k);if(this.lastFooterId){this.removeFooter();}this.lastFooterId=j.getId();this.shellCtrl.setFooter(j);return j;};R.prototype.hideHeaderItem=function(i,g,h){if(typeof i==="string"){this.oShellModel.removeHeaderItem([i],g,h);}else{this.oShellModel.removeHeaderItem(i,g,h);}};R.prototype.removeToolAreaItem=function(i,g,h){if(typeof i==="string"){i=[i];}this.oShellModel.removeToolAreaItem(i,g,h);};R.prototype.removeRightFloatingContainerItem=function(i,g,h){if(typeof i==="string"){this.oShellModel.removeRightFloatingContainerItem([i],g,h);}else{this.oShellModel.removeRightFloatingContainerItem(i,g,h);}};R.prototype.hideActionButton=function(i,g,h){if(typeof i==="string"){this.oShellModel.removeActionButton([i],g,h);}else{this.oShellModel.removeActionButton(i,g,h);}};R.prototype.hideLeftPaneContent=function(i,g,h){if(typeof i==="string"){this.oShellModel.removeLeftPaneContent([i],g,h);}else{this.oShellModel.removeLeftPaneContent(i,g,h);}};R.prototype.hideFloatingActionButton=function(i,g,h){if(typeof i==="string"){this.oShellModel.removeFloatingActionButton([i],g,h);}else{this.oShellModel.removeFloatingActionButton(i,g,h);}};R.prototype.hideHeaderEndItem=function(i,g,h){if(typeof i==="string"){this.oShellModel.removeHeaderEndItem([i],g,h);}else{this.oShellModel.removeHeaderEndItem(i,g,h);}};R.prototype.hideSubHeader=function(i,g,h){if(typeof i==="string"){this.oShellModel.removeSubHeader([i],g,h);}else{this.oShellModel.removeSubHeader(i,g,h);}};R.prototype.removeFooter=function(){this.shellCtrl.removeFooter();if(this.lastFooterId){var F=sap.ui.getCore().byId(this.lastFooterId);if(F){F.destroy();}this.lastFooterId=undefined;}};R.prototype.getCurrentViewportState=function(){return this.shellCtrl.getCurrentViewportState();};R.prototype.addShellSubHeader=function(p){var o=new q.Deferred(),t=this,g,h,i=p.controlType,j=p.oControlProperties,I=p.bIsVisible,k=p.bCurrentState,l=p.aStates;if(j&&j.id&&sap.ui.getCore().byId(j.id)){h=sap.ui.getCore().byId(j.id);if(h){if(I){this.showSubHeader(h.getId(),k,l);}o.resolve(h);}}if(i){g=i.replace(/\./g,"/");sap.ui.require([g],function(m){h=new m(j);if(I){t.showSubHeader(h.getId(),k,l);t.oShellModel.addElementToManagedQueue(h);}o.resolve(h);});}else{L.warning("You must specify control type in order to create it");}return o.promise();};R.prototype.addSubHeader=function(g,o,i,h,j){var k=g.replace(/\./g,"/"),l=sap.ui.require(k),m,p,t=false;if(l){t=true;}else if(!O.get(g||"")){q.sap.require(g);}p=function(o){if(g){if(t){return new l(o);}var u=O.get(g||"");return new u(o);}L.warning("You must specify control type in order to create it");};m=this.createItem(o,h,p);if(i){this.showSubHeader(m.getId(),h,j);}return m;};R.prototype.addUserAction=function(p){var o=new q.Deferred(),t=this,g,h,i=p.controlType,j=p.oControlProperties,I=p.bIsVisible,k=p.bCurrentState,m=k?A.shellElements().getStateModelToUpdate():this.oShellModel.getModelToUpdate(),l=p.aStates,u;if(j){h=sap.ui.getCore().byId(j.id);}if(h){o.resolve(h);}if(i){if(i==="sap.m.Button"){i="sap.ushell.ui.launchpad.ActionItem";}g=i.replace(/\./g,"/");sap.ui.require([g],function(v){var w;if(k){w=A.shellElements().getStateModelToUpdate();A.shellElements().setStateModelToUpdate(m);}else{w=t.oShellModel.getModelToUpdate();t.oShellModel.setModelToUpdate(m,true);}h=h||new v(j);if(!h.getActionType){h=new v(j);}if(I){t.showActionButton(h.getId(),k,l);}if(k){A.shellElements().setStateModelToUpdate(w);}else{t.oShellModel.setModelToUpdate(w,false);}o.resolve(h);});}else{u="You must specify control type in order to create it";L.warning(u);o.reject(u);}return o.promise();};R.prototype.addActionButton=function(g,o,i,h,j){var k,l,m,p,t=false;if(g==="sap.m.Button"){g="sap.ushell.ui.launchpad.ActionItem";}k=g.replace(/\./g,"/");l=sap.ui.require(k);if(l){t=true;}else if(!O.get(g||"")){q.sap.require(g);}p=function(o){if(g){if(t){return new l(o);}var u=O.get(g||"");return new u(o);}L.warning("You must specify control type in order to create it");};m=this.createItem(o,h,p);if(i){this.showActionButton(m.getId(),h,j);}return m;};R.prototype.addFloatingButton=function(p){var o=new q.Deferred(),t=this,g,h,i=p.controlType,j=p.oControlProperties,I=p.bIsVisible,k=p.bCurrentState,l=p.aStates;if(j&&j.id&&sap.ui.getCore().byId(j.id)){h=sap.ui.getCore().byId(j.id);if(h){if(I){t.showFloatingActionButton(oItem.getId(),k,l);t.oShellModel.addElementToManagedQueue(h);}o.resolve(h);}}if(i){g=i.replace(/\./g,"/");}else{g="sap/m/Button";}sap.ui.require([g],function(m){h=new m(j);if(I){this.showFloatingActionButton(oItem.getId(),k,l);}o.resolve(h);});return o.promise();};R.prototype.addFloatingActionButton=function(g,o,i,h,j){var k,l,m,p,t=false;if(!g){g="sap.m.Button";}k=g.replace(/\./g,"/");l=sap.ui.require(k);if(l){t=true;}else if(!O.get(g||"")){q.sap.require(g);}p=function(o){if(g){if(t){return new l(o);}var u=O.get(g||"");return new u(o);}L.warning("You must specify control type in order to create it");};m=this.createItem(o,h,p);if(i){this.showFloatingActionButton(m.getId(),h,j);}return m;};R.prototype.addSidePaneContent=function(p){var o=new q.Deferred(),t=this,g,h,i=p.controlType,j=p.oControlProperties,I=p.bIsVisible,k=p.bCurrentState,l=p.aStates;if(j&&j.id&&sap.ui.getCore().byId(j.id)){h=sap.ui.getCore().byId(j.id);if(h){o.resolve(h);}}if(i){g=i.replace(/\./g,"/");sap.ui.require([g],function(m){h=new m(j);if(I){t.oShellModel.addElementToManagedQueue(h);t.showLeftPaneContent(oItem.getId(),k,l);}o.resolve(h);});}else{L.warning("You must specify control type in order to create it");}return o.promise();};R.prototype.addLeftPaneContent=function(g,o,i,h,j){var k=g.replace(/\./g,"/"),l=sap.ui.require(k),m,p,t;if(l){t=true;}else if(!O.get(g||"")){q.sap.require(g);}p=function(o){if(g){if(t){return new l(o);}var u=O.get(g||"");return new u(o);}L.warning("You must specify control type in order to create it");};m=this.createItem(o,h,p);if(i){this.showLeftPaneContent(m.getId(),h,j);}return m;};R.prototype.addHeaderItem=function(g,o,i,h,j){if(typeof(arguments[0])==="object"&&typeof(arguments[1])==="boolean"){o=arguments[0];i=arguments[1];h=arguments[2];j=arguments[3];}else{L.warning("sap.ushell.renderers.fiori2.Renderer: The parameter 'controlType' of the function 'addHeaderItem' is deprecated. Usage will be ignored!");}var k=function(o){return new S(o);},I=this.createItem(o,h,k);if(i){this.showHeaderItem(I.getId(),h,j);}return I;};R.prototype.addRightFloatingContainerItem=function(o,i,g,h){var j=function(o){return new N(o);},I=this.createItem(o,g,j);if(i){this.showRightFloatingContainerItem(I.getId(),g,h);}return I;};R.prototype.addToolAreaItem=function(o,i,g,h){o.visible=!!i;var j=function(p){return new T(p);},I=this.createItem(o,g,j);this.oShellModel.addToolAreaItem(I.getId(),!!i,g,h);return I;};R.prototype.addHeaderEndItem=function(g,o,i,h,j){if(typeof(arguments[0])==="object"&&typeof(arguments[1])==="boolean"){o=arguments[0];i=arguments[1];h=arguments[2];j=arguments[3];}var k=function(o){return new S(o);},I=this.createItem(o,h,k);if(i){this.showHeaderEndItem(I.getId(),h,j);}return I;};R.prototype.getModelConfiguration=function(){return this.shellCtrl.getModelConfiguration();};R.prototype.addEndUserFeedbackCustomUI=function(o,g){this.shellCtrl.addEndUserFeedbackCustomUI(o,g);};R.prototype.addUserPreferencesEntry=function(g){return this.shellCtrl.addUserPreferencesEntry(g);};R.prototype.setHeaderTitle=function(t){this.shellCtrl.setHeaderTitle(t);};R.prototype.setLeftPaneVisibility=function(l,v){this.oShellModel.setLeftPaneVisibility(v,false,[l]);};R.prototype.showToolArea=function(l,v){this.oShellModel.showShellItem("/toolAreaVisible",l,v);};R.prototype.setHeaderHiding=function(h){return this.oShellModel.setHeaderHiding(h);};R.prototype.setFloatingContainerContent=function(o,g,h){this.shellCtrl.setFloatingContainerContent("floatingContainerContent",[o.getId()],g,h);};R.prototype.setFloatingContainerVisibility=function(v){this.shellCtrl.setFloatingContainerVisibility(v);};R.prototype.getFloatingContainerState=function(){return this.shellCtrl.getFloatingContainerState();};R.prototype.getFloatingContainerVisiblity=function(){return this.shellCtrl.getFloatingContainerVisibility();};R.prototype.getRightFloatingContainerVisibility=function(){return this.shellCtrl.getRightFloatingContainerVisibility();};R.prototype.setFloatingContainerDragSelector=function(E){this.shellCtrl.setFloatingContainerDragSelector(E);};R.prototype.makeEndUserFeedbackAnonymousByDefault=function(E){this.shellCtrl.makeEndUserFeedbackAnonymousByDefault(E);};R.prototype.showEndUserFeedbackLegalAgreement=function(g){this.shellCtrl.showEndUserFeedbackLegalAgreement(g);};R.prototype.LaunchpadState={App:"app",Home:"home"};R.prototype.createTriggers=function(t,g,h){this.oShellModel.createTriggers(t,g,h);};R.prototype.convertButtonsToActions=function(i,g,h){var p={},B,t=this;i.forEach(function(I){B=sap.ui.getCore().byId(I);p.id=B.getId();p.text=B.getText();p.icon=B.getIcon();p.tooltip=B.getTooltip();p.enabled=B.getEnabled();p.visible=B.getVisible();if(B.mEventRegistry&&B.mEventRegistry.press){p.press=B.mEventRegistry.press[0].fFunction;}B.destroy();t.addActionButton("sap.ushell.ui.launchpad.ActionItem",p,p.visible,g,h);});};R.prototype.createItem=function(o,g,h){var i;if(o&&o.id){i=sap.ui.getCore().byId(o.id);}if(!i){i=h(o);if(g){this.oShellModel.addElementToManagedQueue(i);}}return i;};R.prototype.addEntryInShellStates=function(g,h,i,j,o){this.oShellModel.addEntryInShellStates(g,h,i,j,o);};R.prototype.removeCustomItems=function(g,i,h,j){if(typeof i==="string"){this.oShellModel.removeCustomItems(g,[i],h,j);}else{this.oShellModel.removeCustomItems(g,i,h,j);}};R.prototype.addCustomItems=function(g,i,h,j){if(typeof i==="string"){this.oShellModel.addCustomItems(g,[i],h,j);}else{this.oShellModel.addCustomItems(g,i,h,j);}};R.prototype.addRightViewPort=function(v){this.shellCtrl.getViewPortContainer().addRightViewPort(v,false);};R.prototype.addLeftViewPort=function(v){this.shellCtrl.getViewPortContainer().addLeftViewPort(v,false);};R.prototype.getShellController=function(){return this.shellCtrl;};R.prototype.getViewPortContainerCurrentState=function(){return this.shellCtrl.getViewPortContainer().getCurrentState();};R.prototype.ViewPortContainerNavTo=function(g,t,h){return this.shellCtrl.getViewPortContainer().navTo(g,t,h);};function n(){}R.prototype.switchViewPortStateByControl=n;R.prototype.ViewPortContainerAttachAfterSwitchStateAnimationFinished=n;R.prototype.setMeAreaSelected=function(g){this.shellCtrl.setMeAreaSelected(g);};R.prototype.getMeAreaSelected=function(){return this.shellCtrl.getMeAreaSelected();};R.prototype.setNotificationsSelected=function(g){this.shellCtrl.setNotificationsSelected(g);};R.prototype.getNotificationsSelected=function(){return this.shellCtrl.getNotificationsSelected();};R.prototype.addShellDanglingControl=function(o){this.shellCtrl.getView().addDanglingControl(o);};R.prototype.getShellConfig=function(){return(this.shellCtrl.getView().getViewData()?this.shellCtrl.getView().getViewData().config||{}:{});};R.prototype.getEndUserFeedbackConfiguration=function(){return this.shellCtrl.oEndUserFeedbackConfiguration;};R.prototype.reorderUserPrefEntries=function(g){return this.shellCtrl._reorderUserPrefEntries(g);};R.prototype.addUserProfilingEntry=function(g){this.shellCtrl.addUserProfilingEntry(g);};R.prototype.logRecentActivity=function(o){if(!o.appType){o.appType=b.APP;}if(!o.appId){o.appId=o.url;}return this.shellCtrl._logRecentActivity(o);};R.prototype.setCurrentCoreView=function(g){this.currentCoreView=g;};R.prototype.getCurrentCoreView=function(){return this.currentCoreView;};return R;});
sap.ui.predefine('sap/ushell/renderers/fiori2/RendererExtensions',['sap/ushell/EventHub'],function(E){"use strict";function _(C){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","rendererLoaded",{rendererName:"fiori2"});},0);E.emit("RendererLoaded",{rendererName:"fiori2"});}function a(x,D){setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell.renderers.fiori2.Renderer",x,D);},0);}sap.ushell.renderers.fiori2.utils={};sap.ushell.renderers.fiori2.utils.publishExternalEvent=a;sap.ushell.renderers.fiori2.utils.init=_;function b(I,L,x){sap.ushell.Container.getRenderer("fiori2").showSubHeader(I.getId(),false,[L,x]);}function c(I,L,x){sap.ushell.Container.getRenderer("fiori2").hideSubHeader(I.getId(),false,[L,x]);}function d(I,L,x){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(I.getId(),false,[L,x]);}function e(I,L,x){sap.ushell.Container.getRenderer("fiori2").hideHeaderItem(I.getId(),false,[L,x]);}function f(B,L,x){sap.ushell.Container.getRenderer("fiori2").showActionButton(B.getId(),false,[L,x]);}function g(B,L,x){sap.ushell.Container.getRenderer("fiori2").hideActionButton(B.getId(),false,[L,x]);}function h(C,L,x){sap.ushell.Container.getRenderer("fiori2").showLeftPaneContent(C.getId(),false,[L,x]);}function i(L,x){sap.ushell.Container.getRenderer("fiori2").hideLeftPaneContent(false,[L,x]);}function j(I,L,x){sap.ushell.Container.getRenderer("fiori2").showFloatingActionButton(I.getId(),false,[L,x]);}function k(I,L,x){sap.ushell.Container.getRenderer("fiori2").hideFloatingActionButton(I.getId(),false,[L,x]);}function l(I,L,x){sap.ushell.Container.getRenderer("fiori2").showHeaderEndItem(I.getId(),false,[L,x]);}function m(I,L,x){sap.ushell.Container.getRenderer("fiori2").hideHeaderEndItem(I.getId(),false,[L,x]);}function n(){return sap.ushell.Container.getRenderer("fiori2").getModelConfiguration();}function o(I,L,T,x){var y=sap.ui.getCore().byId(I);if(x){sap.ushell.Container.getRenderer("fiori2").showHeaderItem(y.getId(),T,[L]);}}function p(C,S){sap.ushell.Container.getRenderer("fiori2").addEndUserFeedbackCustomUI(C,S);}function q(x){sap.ushell.Container.getRenderer("fiori2").addUserPreferencesEntry(x);}function r(T){sap.ushell.Container.getRenderer("fiori2").setHeaderTitle(T);}function s(L,V){sap.ushell.Container.getRenderer("fiori2").setLeftPaneVisibility(L,V);}function t(H){sap.ushell.Container.getRenderer("fiori2").setHeaderHiding(H);}function u(F){sap.ushell.Container.getRenderer("fiori2").setFooter(F);}function v(){sap.ushell.Container.getRenderer("fiori2").removeFooter();}function R(){this.addHeaderItem=d;this.setHeaderItemVisibility=o;this.addSubHeader=b;this.removeSubHeader=c;this.addHeaderEndItem=l;this.removeHeaderItem=e;this.removeHeaderEndItem=m;this.addEndUserFeedbackCustomUI=p;this.addOptionsActionSheetButton=f;this.removeOptionsActionSheetButton=g;this.setFooter=u;this.removeFooter=v;this.addUserPreferencesEntry=q;this.setHeaderTitle=r;this.setHeaderHiding=t;this.LaunchpadState={App:"app",Home:"home"};this.addFloatingActionButton=j;this.removeFloatingActionButton=k;this.setLeftPaneContent=h;this.removeLeftPaneContent=i;this.setLeftPaneVisibility=s;this.getConfiguration=n;}var w=new R();return w;},true);
sap.ui.predefine('sap/ushell/renderers/fiori2/Shell.controller',["sap/ui/Device","./AccessKeysHandler","./History","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/services/AppConfiguration","sap/ushell/services/AppType","sap/ushell/utils","sap/ushell/utils/WindowUtils","sap/ushell/resources","sap/ushell/UserActivityLog","sap/ushell/EventHub","sap/ushell/Config","sap/ui/core/Component","sap/ui/core/routing/History","sap/ui/core/routing/HashChanger","sap/ushell/components/HeaderManager","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/bootstrap/SchedulingAgent","sap/ui/core/library","sap/ushell/performance/FesrEnhancer","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement","sap/base/util/isPlainObject","sap/base/util/UriParameters","sap/ui/util/Storage","sap/m/InstanceManager","sap/ushell/services/Message"],function(D,A,H,a,b,c,u,W,r,U,E,C,d,f,g,h,j,S,l,F,L,q,M,k,m,n,I,o){"use strict";var p=l.routing.HistoryDirection;var s=true,P=false,t,v=a.getElementsModel(),w,x={embedded:0,newWindowThenEmbedded:1,newWindow:1,replace:0},N={embedded:"embedded",newWindowThenEmbedded:"newWindowThenEmbedded",newWindow:"newWindow",replace:"replace"},y={};F.init();sap.ui.controller("sap.ushell.renderers.fiori2.Shell",{_aDoableObjects:[],onComponentTargetDisplay:function(e){var i=e.getParameters(),z=i.control,B=i.object;z.navTo("centerViewPort",B.getId(),"show");},onInit:function(){var e=this;var R=d.getOwnerComponentFor(this.getView()).getRouter();R.getTarget("home").attachDisplay(this.onComponentTargetDisplay);R.getTarget("appfinder").attachDisplay(this.onComponentTargetDisplay);R.getTarget("pages").attachDisplay(this.onComponentTargetDisplay);R.oHashChanger=g.getInstance();R.initialize(true);this.bEnableHashChange=true;s=true;var V=this.getView();var i=window.matchMedia("(min-width: 600px)"),z;var y=(V.getViewData()?V.getViewData().config:{})||{};a.parseStatefulContainerConfiguration(y.statefulApplicationContainer);var B=a.shellElements().model();h.init(y,B);this.oEndUserFeedbackConfiguration={showAnonymous:true,anonymousByDefault:true,showLegalAgreement:true,showCustomUIContent:true,feedbackDialogTitle:true,textAreaPlaceholder:true,customUIContent:undefined};this.initShellModel(y,B);var G=this.getView().updateShellAggregation;sap.ui.getCore().byId("shell-header").updateAggregation=G;sap.ui.getCore().byId("shell").updateAggregation=G;sap.ui.getCore().byId("right-floating-container").updateAggregation=G;sap.ui.getCore().byId("shell-split").updateAggregation=G;z=function(Q){C.emit("/core/shell/model/isPhoneWidth",!Q.matches);};if(i.addListener){i.addListener(z);z(i);}V.setModel(r.i18nModel,"i18n");sap.ui.getCore().getEventBus().subscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().subscribe("sap.ushell","appOpened",this.onAppOpened,this);sap.ui.getCore().getEventBus().subscribe("allSearchFinished",this._logSearchActivity,this);this._setConfigurationToModel();this._aDoableObjects=this._registerAndCreateEventHubDoables();sap.ushell.Container.getService("AppLifeCycle");t.addHeaderEndItem(["NotificationsCountButton"],false,["home","app","minimal"],true);t.addHeaderEndItem(["meAreaHeaderButton"],false,["home","app","minimal","standalone","embedded","embedded-home","lean"],true);var J=[];if(y){if(!y.moveContactSupportActionToShellHeader){J.push("ContactSupportBtn");}if(!y.moveGiveFeedbackActionToShellHeader){J.push("EndUserFeedbackBtn");}}this.history=new H();this.oViewPortContainer=sap.ui.getCore().byId("viewPortContainer");a.init(y.appState,this.oViewPortContainer,y.rootIntent,y.disableHomeAppCache,{ownerComponent:this.getOwnerComponent()},J,y.cacheConfiguration);this.oNotificationsCountButton=sap.ui.getCore().byId("NotificationsCountButton");var K=function(Q){this.oShellNavigation=Q;this.oShellNavigation.registerExtraRouter(R);this.oShellNavigation.registerNavigationFilter(this._handleEmptyHash.bind(this));this.oShellNavigation.init(this.doHashChange.bind(this));this.oShellNavigation.registerNavigationFilter(this._disableSourceAppRouter.bind(this));this.oShellNavigation.registerNavigationFilter(this.handleDataLoss.bind(this));this.oShellNavigation.hashChanger.attachEvent("hashChanged",function(T){if(window.hasher.disableBlueBoxHashChangeTrigger===true){return;}if(T.mParameters&&e.oShellNavigation.hashChanger.isInnerAppNavigation(T.mParameters.newHash,T.mParameters.oldHash)){a.postMessageToIframeApp("sap.ushell.appRuntime","innerAppRouteChange",{oHash:T.mParameters});}a.postMessageToIframeApp("sap.ushell.appRuntime","hashChange",{sHash:T.mParameters.fullHash});});E.emit("ShellNavigationInitialized");}.bind(this);Promise.all([sap.ushell.Container.getServiceAsync("URLParsing"),sap.ushell.Container.getServiceAsync("URLShortening")]).then(function(){return sap.ushell.Container.getServiceAsync("ShellNavigation");}).then(K);sap.ushell.Container.setLogonFrameProvider(this._getLogonFrameProvider());A.init(w);window.onbeforeunload=function(){if(sap.ushell.Container&&sap.ushell.Container.getDirtyFlag()&&!(D.browser.name===D.browser.BROWSER.INTERNET_EXPLORER&&a.getCurrentApplication().container.getApplicationType()===sap.ushell.ApplicationType.NWBC.type)){if(!r.browserI18n){r.browserI18n=r.getTranslationModel(window.navigator.language).getResourceBundle();}return r.browserI18n.getText("dataLossExternalMessage");}return undefined;};if(C.last("/core/shell/model/contentDensity")){a.getAppMeta()._applyContentDensityClass();}D.media.attachHandler(this.handleNavMenuTitleVisibility,this,D.media.RANGESETS.SAP_STANDARD);this.handleNavMenuTitleVisibility(D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD));this.initShellUIService();if(!y.disableSignOut&&(y.sessionTimeoutTileStopRefreshIntervalInMinutes>0||y.sessionTimeoutReminderInMinutes>0)){var O=20000;setTimeout(function(){e._createSessionHandler(y);},O);}this.oViewPortContainer.onfocusin=function(){A.bFocusOnShell=false;A.bFocusPassedToExternalHandlerFirstTime=false;};this.oViewPortContainer.onfocusout=function(){A.bFocusOnShell=true;A.bFocusPassedToExternalHandlerFirstTime=true;};},shellUpdateAggItem:function(i,e){return sap.ui.getCore().byId(e.getObject());},getViewPortContainer:function(){return sap.ui.getCore().byId("viewPortContainer");},_registerAndCreateEventHubDoables:function(){var e=[E.once("CenterViewPointContentRendered").do(this._loadCoreExt.bind(this)),E.once("PagesRuntimeRendered").do(this._loadCoreExt.bind(this)),E.once("AppRendered").do(this._loadCoreExtNonUI5.bind(this)),E.on("toggleContentDensity").do(this.toggleContentDensity.bind(this)),E.on("ShellFloatingContainerDockedIsResized").do(this._onResizeWithDocking.bind(this)),E.on("LaunchpadCustomRouterRouteMatched").do(this._centerViewPort.bind(this)),E.once("CoreResourcesComplementLoaded").do(this._onCoreResourcesComplementLoaded.bind(this)),E.once("loadRendererExtensions").do(this._loadRendererExtensionPlugins.bind(this)),E.once("loadUsageAnalytics").do(this._loadUsageAnalytics.bind(this)),E.once("loadWarmupPlugins").do(this._loadWarmupPlugins.bind(this)),E.on("centerViewPort").do(this._centerViewPort.bind(this))];return e;},initShellModel:function(y,e){t=v;t.init(y,e);w=this.getView().getViewData().shellModel;C.emit("/core/shell/model/personalization",C.last("/core/shell/enablePersonalization"));},initShellUIService:function(){a.initShellUIService({fnOnBackNavigationChange:this.onBackNavigationChange.bind(this)});if(y.enableOnlineStatus){sap.ui.require(["sap/ushell/ui5service/UserStatus"],function(e){this.oUserStatus=new e({scopeObject:this.getOwnerComponent(),scopeType:"component"});}.bind(this));}},onBackNavigationChange:function(e){a.setBackNavigationChanged(true);var i=e.getParameters().data,z=C.last("/core/shell/model/currentState");if(i){a.service().setNavigateBack(i);if(z.stateName==="minimal"||z.stateName==="standalone"||z.stateName==="embedded"){sap.ushell.Container.getRenderer("fiori2").showHeaderItem("backBtn",true);}}else{a.service().resetNavigateBack();}},toggleContentDensity:function(e){var i=e.contentDensity==="compact";a.getAppMeta()._applyContentDensityByPriority(i,true);},_handleEmptyHash:function(e){e=(typeof e==="string")?e:"";e=e.split("?")[0];if(e.length===0){var V=this.getView()?this.getView().getViewData():{};y=V.config||{};if(y.migrationConfig){return this.oShellNavigation.NavigationFilterStatus.Continue;}if(y.rootIntent){setTimeout(function(){window.hasher.setHash(y.rootIntent);},0);return this.oShellNavigation.NavigationFilterStatus.Abandon;}}return this.oShellNavigation.NavigationFilterStatus.Continue;},_setConfigurationToModel:function(){var V=this.getView().getViewData();if(V){y=V.config||{};}if(y){if(y.states){v.extendStates(y.states);h.extendStates(y.states);}if(y.changeEndUserFeedbackTitle!==undefined){this.oEndUserFeedbackConfiguration.feedbackDialogTitle=y.changeEndUserFeedbackTitle;}if(y.changeEndUserFeedbackPlaceholder!==undefined){this.oEndUserFeedbackConfiguration.textAreaPlaceholder=y.changeEndUserFeedbackPlaceholder;}if(y.showEndUserFeedbackAnonymousCheckbox!==undefined){this.oEndUserFeedbackConfiguration.showAnonymous=y.showEndUserFeedbackAnonymousCheckbox;}if(y.makeEndUserFeedbackAnonymousByDefault!==undefined){this.oEndUserFeedbackConfiguration.anonymousByDefault=y.makeEndUserFeedbackAnonymousByDefault;}if(y.showEndUserFeedbackLegalAgreement!==undefined){this.oEndUserFeedbackConfiguration.showLegalAgreement=y.showEndUserFeedbackLegalAgreement;}if(y.enableSetTheme!==undefined){w.setProperty("/setTheme",y.enableSetTheme);}w.setProperty("/contentDensity",y.enableContentDensity===undefined?true:y.enableContentDensity);if(y.migrationConfig!==undefined){w.setProperty("/migrationConfig",y.migrationConfig);}if(y.enableUserDefaultParameters!==undefined){w.setProperty("/userDefaultParameters",y.enableUserDefaultParameters);}if(y.disableHomeAppCache!==undefined){w.setProperty("/disableHomeAppCache",y.disableHomeAppCache);}w.setProperty("/enableHelp",C.last("/core/extension/enableHelp"));w.setProperty("/searchAvailable",(y.enableSearch!==false));this._getPersData({container:"flp.settings.FlpSettings",item:"userActivitesTracking"}).then(function(e){if(e===undefined){e=true;}w.setProperty("/enableTrackingActivity",e);}).catch(function(e){L.error("Failed to ltracking activities state state from the personalization",e,"sap.ushell.components.flp.settings.FlpSettings");});}},_getPreviousPageDirty:function(){return P;},_setPreviousPageDirty:function(e){P=e;},getModelConfiguration:function(){var V=this.getView().getViewData(),e,i;if(V){e=V.config||{};i=q.extend({},e);}delete i.applications;return i;},_getLogonFrameProvider:function(){var V=this.getView();return{create:function(){return V.createIFrameDialog();},show:function(){V.showIFrameDialog();},destroy:function(){V.destroyIFrameDialog();}};},onExit:function(){this._aDoableObjects.forEach(function(i){i.off();});sap.ui.getCore().getEventBus().unsubscribe("externalSearch",this.externalSearchTriggered,this);sap.ui.getCore().getEventBus().unsubscribe("allSearchFinished",this._logSearchActivity,this);sap.ui.getCore().getEventBus().unsubscribe("sap.ushell","appOpened",this.onAppOpened,this);D.media.detachHandler(this.handleNavMenuTitleVisibility,this,D.media.RANGESETS.SAP_STANDARD);if(this.oShellNavigation){this.oShellNavigation.hashChanger.destroy();}if(this.getView()&&this.getView().destroyDanglingControls){this.getView().destroyDanglingControls();}var e=sap.ui.getCore().byId("shell-header");if(e&&e.destroy){e.destroy();}h.destroy();j.destroy();U.deactivate();t.destroy();a.shellElements().clean();a.destroy();t=undefined;},_getCurrentAppRouter:function(){var e=sap.ushell.Container.getService("AppLifeCycle"),i=e&&e.getCurrentApplication&&e.getCurrentApplication(),z=i&&i.componentInstance;if(z){return z.getRouter();}return null;},_disableSourceAppRouter:function(e,i){if(!this.bEnableHashChange){return this.oShellNavigation.NavigationFilterStatus.Continue;}var z=this.oShellNavigation.hashChanger.isInnerAppNavigation(e,i);if(!z){var B=this._getCurrentAppRouter();if(B){B.stop();}}return this.oShellNavigation.NavigationFilterStatus.Continue;},_resumeAppRouterIgnoringCurrentHash:function(){var e=this._getCurrentAppRouter();if(e){e.initialize(true);}},handleDataLoss:function(e,i){if(!this.bEnableHashChange){this.bEnableHashChange=true;return this.oShellNavigation.NavigationFilterStatus.Custom;}if(sap.ushell.Container.getDirtyFlag()){if(!r.browserI18n){r.browserI18n=r.getTranslationModel(window.navigator.language).getResourceBundle();}if(confirm(r.browserI18n.getText("dataLossInternalMessage"))){sap.ushell.Container.setDirtyFlag(false);a.postMessageToIframeApp("sap.ushell.appRuntime","setDirtyFlag",{bIsDirty:false});P=true;return this.oShellNavigation.NavigationFilterStatus.Continue;}var z=f.getInstance().getHistoryStateOffset();var B=this.oShellNavigation.wasHistoryEntryReplaced();var R=this._getRestoreHashStrategy(z,B);this._resumeAppRouterIgnoringCurrentHash();return this._restorePreviousHash(i,R);}return this.oShellNavigation.NavigationFilterStatus.Continue;},_getRestoreHashStrategy:function(i,e){if(e){return{strategy:"replaceHash",stepCount:0};}return{strategy:i<0?"historyForward":"historyBack",stepCount:i===undefined?1:Math.abs(i)};},_restorePreviousHash:function(e,R){var i=null;switch(R.strategy){case"historyBack":this.bEnableHashChange=false;this._windowHistoryBack(R.stepCount);i=this.oShellNavigation.NavigationFilterStatus.Custom;break;case"replaceHash":i={status:this.oShellNavigation.NavigationFilterStatus.Custom,hash:e};break;case"historyForward":this.bEnableHashChange=false;this._windowHistoryForward(R.stepCount);i=this.oShellNavigation.NavigationFilterStatus.Custom;break;default:throw new Error("Cannot execute unknown navigation strategy");}return i;},_isColdStart:function(){var R=sap.ushell.Container.getRenderer("fiori2");var e=!R||!R.getCurrentCoreView();if(this.history.getHistoryLength()<=1&&e){return true;}this._isColdStart=function(){return false;};return false;},_setEnableHashChange:function(V){this.bEnableHashChange=V;},_logRecentActivity:function(R){if(C.last("/core/shell/model/enableTrackingActivity")){return b.addActivity(R);}return Promise.reject("Tracking is not enabled");},_logApplicationUsage:function(e){if(sap.ushell.Container){sap.ushell.Container.getServiceAsync("UserRecents").then(function(i){i.addAppUsage(e);});}},doHashChange:function(e,i,O,z,B){M.start("FLP:ShellController.doHashChange","doHashChange","FLP");u.addTime("ShellControllerHashChange");E.emit("trackHashChange",e);var G=sap.ui.getCore().byId("sapUshellDashboardPage");if(G){G.setBlocked(true);G.setBusy(true);}return this._doHashChange(this,e,i,O,z,B).then(function(){M.end("FLP:ShellController.doHashChange");},function(J){M.end("FLP:ShellController.doHashChange");E.emit("doHashChangeError",Date.now());if(G){G.setBlocked(false);G.setBusy(false);}});},_doHashChange:function(e,i,z,O,B,G){this._wasHistoryEntryReplaced=this.oShellNavigation.wasHistoryEntryReplaced();this.oShellNavigation.resetHistoryEntryReplaced();var J,K,Q;if(!this.bEnableHashChange){this.bEnableHashChange=true;return q.when();}if(G){e.hashChangeFailure(e.history.getHistoryLength(),G.message,null,"sap.ushell.renderers.fiori2.Shell.controller",false);return q.when();}if(I&&s){I.closeAllDialogs();I.closeAllPopovers();}s=true;K=e.history.getHistoryLength();Q=e.fixShellHash(i);e.history.hashChange(Q,O);e.currentAppBeforeNav=b.getCurrentApplication();q.sap.flpmeasure.end(0,"Creating Shell");q.sap.flpmeasure.start(0,"targetResolution",1);return e._resolveHashFragment(Q).then(function(R,T){q.sap.flpmeasure.end(0,"targetResolution");q.sap.flpmeasure.start(0,"CreateComponent",3);var V=T?T.semanticObject+"-"+T.action:"",y=e._getConfig(),X=!!(R&&R.componentHandle),Y=R&&R.ui5ComponentName;R=e._calculateNavigationMode(T,R);if(e._handleEarlyNavigation(Q,z,R)){return;}if(y&&y.applications&&y.applications[V]){R.applicationConfiguration=y.applications[V];}J=a.getInMemoryInstance(V,Q);if(J.isInstanceSupported){e._initiateApplication(R,Q,T,K,z);return;}if(X||!Y){e._initiateApplication(R,Q,T,K,z);return;}a.destroy(J.appId,J.container);a.removeApplication(V);b.setApplicationInInitMode();sap.ui.getCore().getEventBus().publish("ApplicationContainer","_prior.newUI5ComponentInstantion",{name:Y});M.start("FLP:ShellController.UI5createComponent","UI5 createComponent","FLP");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){a.createComponent(R,T).done(function(){M.end("FLP:ShellController.UI5createComponent");q.sap.flpmeasure.end(0,"CreateComponent");e._initiateApplication(R,Q,T,K,z);}).fail(function(Z){var $=r.i18n.getText("cannot_load_ui5_component_details",[Q]),_="Failed to load UI5 component for navigation intent "+Q;b.setCurrentApplication(e.currentAppBeforeNav);e.hashChangeFailure(K,{title:r.i18n.getText("error"),message:r.i18n.getText("failed_to_open_ui5_component"),technicalMessage:_},{info:$,technicalMessage:Z.message+"\n"+Z.stack},"sap.ushell.renderers.fiori2.Shell.controller",false);});});},function(R){var T=r.i18n.getText("cannot_resolve_navigation_target_details",[Q]),V="Failed to resolve navigation target: "+Q+". This is most likely caused by an incorrect SAP Fiori launchpad content configuration or by missing role assignment.";e.hashChangeFailure(K,{title:r.i18n.getText("error"),message:r.i18n.getText("failed_to_open_app_missing_configuration_or_role_assignment"),technicalMessage:V},{info:T,fixedShellHash:Q,technicalMessage:R},"sap.ushell.renderers.fiori2.Shell.controller",false);});},_handleEarlyNavigation:function(e,i,R){var z=R&&(u.isNativeWebGuiNavigation(R)||R.nativeNWBCNavigation),B;if(z&&this._openAppViaNWBC(R)){R.sFixedShellHash=e;this.logOpenAppAction(R,i);B=sap.ui.getCore().byId("sapUshellDashboardPage");if(B){B.setBlocked(false);B.setBusy(false);}return true;}var G=R&&R.navigationMode===N.newWindow;if(G){R.sFixedShellHash=e;this.logOpenAppAction(R,i);this._openAppInNewWindowAndRestore(R);B=sap.ui.getCore().byId("sapUshellDashboardPage");if(B){B.setBlocked(false);B.setBusy(false);}return true;}if(C.last("/core/shell/model/migrationConfig")){y.migrationConfig=false;this.getModel().setProperty("/migrationConfig",false);if(R&&e==="#"){y.rootIntent="";}else if(e==="#"){setTimeout(function(){window.hasher.setHash(y.rootIntent);},0);return true;}}return false;},_initiateApplication:function(R,e,i,O){M.start("FLP:ShellController._initiateApplication","_initiateApplication","FLP");var z=b.getMetadata(R),B=C.last("/core/extension/SupportTicket"),G;if(z.title){window.document.title=z.title;}else{L.debug("Shell controller._initiateApplication: the title of the window is not changed because most probably the application was resolved with undefined");}if(B){setTimeout(function(){U.activate();},0);}try{G=this.oShellNavigation.isInitialNavigation();this.navigate(i,e,z,R);}catch(J){if(J.stack){L.error("Application initialization (Intent: \n"+e+"\n failed due to an Exception:\n"+J.stack);}this.oShellNavigation.setIsInitialNavigation(G);this.hashChangeFailure(O,J.name,J.message,z?z.title:"",false);}M.end("FLP:ShellController._initiateApplication");},_resolveHashFragment:function(e){M.start("FLP:ShellController._resolveHashFragment","_resolveHashFragment","FLP");var R,i,z=sap.ushell.Container.getService("URLParsing").parseShellHash(e),B=new q.Deferred(),y=this._getConfig();i=z&&z.params||{};if(z&&z.contextRaw&&z.contextRaw==="navResCtx"&&i&&i.additionalInformation&&(i.additionalInformation[0]||i.additionalInformation[0]==="")&&i.applicationType&&i.applicationType[0]&&i.url&&i.url[0]&&i.navigationMode&&(i.navigationMode[0]||i.additionalInformation[0]==="")){i=z.params||{};R={additionalInformation:i.additionalInformation[0],applicationType:i.applicationType[0],url:i.url[0],navigationMode:i.navigationMode[0]};if(i.title){R.text=i.title[0];}B.resolve(R,z);}else{if(window["sap-ushell-async-libs-promise-directstart"]){window["sap-ushell-async-libs-promise-directstart"].then(function(G){B.resolve(G.resolvedHashFragment,z);delete window["sap-ushell-async-libs-promise-directstart"];},function(G){B.reject(G);delete window["sap-ushell-async-libs-promise-directstart"];});return B.promise();}sap.ushell.Container.getService("NavTargetResolution").resolveHashFragment(e).done(function(R){b.setCurrentApplication(R);if(z&&(z.semanticObject+"-"+z.action)===y.rootIntent){R.navigationMode="embedded";}M.end("FLP:ShellController._resolveHashFragment");B.resolve(R,z);}).fail(function(G){B.reject(G);});}return B.promise();},_calculateNavigationMode:function(e,R){if(!R){return undefined;}var i=R.navigationMode;if(i===N.newWindowThenEmbedded){if(this._isColdStart()||(e.contextRaw&&e.contextRaw==="navResCtx")||f.getInstance().getDirection()===p.Backwards){R.navigationMode=N.embedded;}else{R.navigationMode=N.newWindow;if(!u.isNativeWebGuiNavigation(R)){R.url=this._getCurrentLocationHash();}}return R;}if(i===N.newWindow&&this._isColdStart()){if(this._hasAppCapabilitiesNavigationMode(R)&&R.appCapabilities.navigationMode===N.embedded){R.navigationMode=N.embedded;return R;}R.navigationMode=N.replace;return R;}if(i===N.newWindow&&this._hasAppCapabilitiesNavigationMode(R)&&R.appCapabilities.navigationMode===N.embedded){R.url=this._getCurrentLocationHash();}return R;},_hasAppCapabilitiesNavigationMode:function(R){return u.isPlainObject(R.appCapabilities)&&R.appCapabilities.hasOwnProperty("navigationMode");},_usesNavigationRedirect:function(e){if(!e){return new q.Deferred().reject().promise();}var i=this,z=e.getInstance({});if(z&&typeof z.navigationRedirect==="function"){var B=new q.Deferred();var G=z.navigationRedirect();if(G&&typeof G.then==="function"){G.then(function(J){L.warning("Performing navigation redirect to hash "+J);z.destroy();i.history.pop();sap.ushell.Container.getService("ShellNavigation").toExternal({target:{shellHash:J}},undefined,false);B.resolve(true);},function(){B.reject();});return B.promise();}}return new q.Deferred().reject().promise();},navigate:function(e,i,z,R){M.start("FLP:ShellController.navigate","navigate","FLP");var B=(k(R)?R.navigationMode:null),G=this;if(B===null){if(this._isColdStart()){window.hasher.setHash("");return;}this.bEnableHashChange=false;this.history.pop();this._windowHistoryBack(1);return Promise.resolve();}R=this._calculateNavigationMode(e,R);B=(k(R)?R.navigationMode:null);if(B===N.embedded){if(!this._isColdStart()&&!this._wasHistoryEntryReplaced){this.oShellNavigation.setIsInitialNavigation(false);}var J=this._usesNavigationRedirect(R.componentHandle),K=new Promise(function(O,Q){J.then(null,function(){G._handleEmbeddedNavMode(i,e,z,R).then(function(){O();});if(e&&e.contextRaw==="navResCtx"){L.error(" This path will no longer be supported in 1.40");G.bEnableHashChange=false;if(e&&e.params&&e.params.original_intent&&e.params.original_intent[0]){window.hasher.replaceHash(e.params.original_intent[0]);G.history._history[0]=e.params.original_intent[0];}}});M.end("FLP:ShellController.navigate");});return K;}if(B===N.replace){this.oShellNavigation.setIsInitialNavigation(false);this.bEnableHashChange=false;this._changeWindowLocation(R.url);return Promise.resolve();}if(B===N.newWindow){this._openAppInNewWindowAndRestore(R);return Promise.resolve();}this.hashChangeFailure(this.history.getHistoryLength(),"Navigation mode is not recognized",null,"sap.ushell.renderers.fiori2.Shell.controller",false);return Promise.resolve();},_openAppViaNWBC:function(R){try{var i=u.appendUserIdToUrl("sap-user",R.url);var z=u.appendSapShellParam(i);var B=u.getPrivateEpcm();var G=x[R.navigationMode];var J;if(u.hasNavigationModeCapability()){J=G||x[N.embedded];}if(!B.doNavigate(z,J)){return false;}}catch(e){if(e.stack){L.error("Application initialization failed due to an Exception:\n"+e.stack);}this.hashChangeFailure(this.history.getHistoryLength(),e.name,e.message,R.text,false);return false;}this._restorePreviousHashAfterOpenNewWindow(R);return true;},_restorePreviousHashAfterOpenNewWindow:function(R){this.history.pop();var V=R.componentHandle&&R.componentHandle.getInstance&&R.componentHandle.getInstance({});if(V){V.destroy();}this._resumeAppRouterIgnoringCurrentHash();this._windowHistoryBack(1);b.setCurrentApplication(this.currentAppBeforeNav);E.emit("openedAppInNewWindow",Date.now());},_openAppInNewWindowAndRestore:function(R){this.bEnableHashChange=false;this._openAppNewWindow(R.url);this._restorePreviousHashAfterOpenNewWindow(R);},_handleEmbeddedNavMode:function(e,i,z,R){M.start("FLP:ShellController._handleEmbeddedNavMode","_handleEmbeddedNavMode","FLP");var B,G,J,K;this.resetShellUIServiceHandlers();a.getAppMeta().setAppIcons(z);B="-"+i.semanticObject+"-"+i.action;J=e==="#"||(y.rootIntent&&y.rootIntent===i.semanticObject+"-"+i.action);K=i?i.semanticObject+"-"+i.action:"";a.switchViewState(a.shellElements().calculateElementsState(J?"home":"app",R.applicationType,y.appState,R.explicitNavMode),undefined,B);if(J){a.getShellUIService().setBackNavigation();}G=a.handleControl(K,B,i,R,this.getWrappedApplicationWithMoreStrictnessInIntention.bind(this),e);if(this.currentAppBeforeNav){var O=a.getStatefulContainer(this.currentAppBeforeNav.applicationType);if(O){O.onApplicationOpened(R.applicationType);}}M.end("FLP:ShellController._handleEmbeddedNavMode");return G;},_centerViewPort:function(){this.oViewPortContainer.switchState("Center");},_isShellHomeIntent:function(i){return i==="#"||i===y.rootIntent;},getWrappedApplicationWithMoreStrictnessInIntention:function(i,e,z,R,B,G,J){var K,O=this;setTimeout(function(){setTimeout(function(){var Q;if(C.last("/core/shell/model/currentState/stateName")==="app"){Q="shellAppTitle";}A.sendFocusBackToShell(Q);setTimeout(function(){O.readNavigationEnd();},500);},100);sap.ui.getCore().getEventBus().publish("launchpad","appOpening",R);L.info("app is being opened");},0);if(y.applications){R.applicationConfiguration=y.applications[i];}K=a.getAppContainer(B,R,this._isColdStart(),z,J);R.sFixedShellHash=J;a.publishNavigationStateEvents(K,R,this.onAppAfterRendering.bind(this,R));K.addStyleClass("sapUshellApplicationPage");if(!G){K.addStyleClass("sapUShellApplicationContainerLimitedWidth");}if(this._isDock()&&window.matchMedia("(min-width: 106.4rem)").matches){K.addStyleClass("sapUShellDockingContainer");K.removeStyleClass("sapUShellApplicationContainerLimitedWidth");}else if(this._isDock()){K.removeStyleClass("sapUShellApplicationContainerLimitedWidth");}K.toggleStyleClass("sapUshellDefaultBackground",!e.hideLightBackground);a.getAppMeta()._applyContentDensityByPriority();a.addControl(K);M.end("FLP:ShellController.getWrappedApplication");return K;},resetShellUIServiceHandlers:function(){a.getAppMeta().resetShellUIServiceHandlers();a.setBackNavigationChanged(false);},onAppAfterRendering:function(e){var i=a.getShellUIService();setTimeout(function(){sap.ui.getCore().getEventBus().publish("sap.ushell","appOpened",e);L.info("app was opened");},0);var z=a._publicEventDataFromResolutionResult(e);E.emit("AppRendered",z);sap.ushell.renderers.fiori2.utils.publishExternalEvent("appOpened",z);if(i){a.initAppMetaParams();}t.updateStateProperty("application/icon",a.getAppMeta().getAppIcon(),true);t.updateStateProperty("application/showNavMenuTitle",this.bNavMenuTitleVisible,true);},_saveHomePageComponent:function(){if(this.oHomeApp){return;}var e=this,i="sap.ushell",z=function(B,G,J){e.oHomeApp=J.component;sap.ui.getCore().getEventBus().unsubscribe(i,"appComponentLoaded",z);};sap.ui.getCore().getEventBus().subscribe(i,"appComponentLoaded",z);},hashChangeFailure:function(i,e,z,B,G){if(u.isPlainObject(e)){this.reportError(e.technicalMessage,z.technicalMessage,B);sap.ushell.Container.getService("Message").show(o.Type.ERROR,e.message,{title:e.title,details:z});}else{this.reportError(e,z,B);this.delayedMessageError(r.i18n.getText("fail_to_start_app_try_later"));}s=false;this._resumeAppRouterIgnoringCurrentHash();if(i===0){window.hasher.setHash("");}else if((new m(window.location.href)).get("bFallbackToShellHome")){window.hasher.setHash("");}else{this.bEnableHashChange=G;sap.ushell.Container.setDirtyFlag(P);a.postMessageToIframeApp("sap.ushell.appRuntime","setDirtyFlag",{bIsDirty:P});this._windowHistoryBack(1);}},reportError:function(e,i,z){L.error(e,i,z);},delayedMessageError:function(e){setTimeout(function(){if(sap.ushell.Container!==undefined){sap.ushell.Container.getService("Message").error(e);}},0);},fixShellHash:function(e){if(!e){e="#";}else if(e.charAt(0)!=="#"){e="#"+e;}return e;},_openAppNewWindow:function(e){if(e.trim().indexOf("sap-nwbc://")===0&&(D.browser.edge||D.browser.msie)){window.location.href=e;}else{var i=W.openURL(e);if(!i&&!(D.browser.msie||D.browser.edge)){var z=r.i18n.getText("fail_to_start_app_popup_blocker",[window.location.hostname]);this.delayedMessageError(z);}}},_windowHistoryBack:function(i){window.history.go(-1*i);},_windowHistoryForward:function(i){window.history.go(i);},_changeWindowLocation:function(e){window.location.href=e;},onAppOpened:function(e,i,R){var z=sap.ui.getCore().byId("menuBarComponentContainer");z.setVisible(false);var B=this.oShellNavigation.hashChanger.getAppHash(),G=B?"&/"+B:null;this.logOpenAppAction(R,G);},externalSearchTriggered:function(e,i,z){C.emit("/core/shell/model/searchTerm",z.searchTerm);z.query=z.searchTerm;},onBeforeNavigate:function(e){var i=sap.ui.getCore().byId("menuBarComponentContainer");if(i.getComponent()){var z=this.getOwnerComponent().byId("pages-component-container");if(e.getParameter("to")===z){i.setVisible(true);}else{i.setVisible(false);}i.rerender();}},onAfterNavigate:function(e){var T=e.mParameters?e.mParameters.toId:undefined;var i=sap.ui.getCore().byId("sapUshellDashboardPage");if(i){i.setBlocked(false);i.setBusy(false);}u.addTime("ShellController.onAfterNavigate");a.onAfterNavigate(e.getParameter("fromId"),e.getParameter("from"),T,e.getParameter("to"));sap.ui.getCore().getEventBus().publish("sap.ushell","navigated",{});},logOpenAppAction:function(R,e){var i=C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/enableRecentActivityLogging");if(!i){return;}var z={};var B=b.getMetadata(R);var G=R.sFixedShellHash;var J=G;if(e){J+=e;}z.title=B.title;z.appType=c.APP;z.url=J;sap.ushell.Container.getServiceAsync("URLParsing").then(function(K){var O=K.parseShellHash(G);if(O){z.appId="#"+K.constructShellHash({semanticObject:O.semanticObject,action:O.action});}else{z.appId=G;}if(G.indexOf("#Action-search")===-1){setTimeout(function(){this._logRecentActivity(z);}.bind(this),1500);}if(y.enableTilesOpacity){setTimeout(function(){this._logApplicationUsage(G);}.bind(this),1500);}}.bind(this));},_logSearchActivity:function(){if(C.last("/core/shell/enableRecentActivity")&&C.last("/core/shell/enableRecentActivityLogging")){var T="";try{T=sap.ui.getCore().byId("searchFieldInShell-input").getModel().getLastSearchTerm();}catch(e){L.error("Shell: last search term is not available to log a recent activity");}this._logRecentActivity({appId:"#Action-search",appType:c.SEARCH,title:T,url:"#"+window.hasher.getHash()});}},readNavigationEnd:function(){var e=document.getElementById("sapUshellLoadingAccessibilityHelper-loadingComplete");if(e){e.setAttribute("aria-live","polite");e.innerHTML=r.i18n.getText("loadingComplete");setTimeout(function(){e.setAttribute("aria-live","off");e.innerHTML="";},0);}},handleNavMenuTitleVisibility:function(e){this.bNavMenuTitleVisible=false;if(e.name!=="Desktop"){this.bNavMenuTitleVisible=true;}t.updateStateProperty("application/showNavMenuTitle",this.bNavMenuTitleVisible,true);},_loadCoreExtNonUI5:function(e){if(e&&e.applicationType!=="SAPUI5"){this._loadCoreExt();}},_loadUsageAnalytics:function(e){sap.ushell.Container.getServiceAsync("UsageAnalytics").then(function(i){i.init(r.i18n.getText("usageAnalytics"),r.i18n.getText("i_agree"),r.i18n.getText("i_disagree"),r.i18n.getText("remind_me_later"));E.emit("StepDone",e.stepName);},function(){E.emit("StepFailed",e.stepName);});},_onCoreResourcesComplementLoaded:function(){u.setPerformanceMark("SchedulingAgent-StartOfFlow");var V=this.getView();if(V){V.createPostCoreExtControls();}S._initialize();E.emit("startScheduler");},_loadRendererExtensionPlugins:function(e){var i=new m(window.location.href),z=i.get("sap-ushell-xx-pluginmode")==="delayed";function B(G){function J(){E.emit("StepDone",e.stepName);}function K(){G.loadPlugins("RendererExtensions").always(J);}if(!y.inHeaderLessOpt){if(z){setTimeout(K,5000);}else{K();}}else{J();}}sap.ushell.Container.getServiceAsync("PluginManager").then(B.bind(this));},_loadWarmupPlugins:function(e){sap.ushell.Container.getService("PluginManager").loadPlugins("AppWarmup").always(function(){L.debug("WARMUP plugins loaded",null,"sap.ushell.renderers.fiori2.Shell");E.emit("StepDone",e.stepName);u.setPerformanceMark("SchedulingAgent-EndOfFlow");u.setPerformanceMeasure("SchedulingAgentTotalTime","SchedulingAgent-StartOfFlow","SchedulingAgent-EndOfFlow");});},_loadCoreExt:function(){M.end("FLP:Container.InitLoading");sap.ushell.Container.getServiceAsync("Ui5ComponentLoader").then(function(){E.emit("loadCoreResourcesComplement");});},getCurrentViewportState:function(){return C.last("/core/shell/model/currentViewPortState");},makeEndUserFeedbackAnonymousByDefault:function(e){this.oEndUserFeedbackConfiguration.anonymousByDefault=e;},showEndUserFeedbackLegalAgreement:function(e){this.oEndUserFeedbackConfiguration.showLegalAgreement=e;},_activateFloatingUIActions:function(i){if(i<417){this.oFloatingUIActions.disable();}else{this.oFloatingUIActions.enable();}},setFloatingContainerDragSelector:function(e){q(e).addClass("sapUshellShellFloatingContainerSelector");sap.ui.require(["sap/ushell/UIActions"],function(i){if(!this.oFloatingUIActions){this.oFloatingUIActions=new i({containerSelector:".sapUiBody",wrapperSelector:".sapUshellShellFloatingContainerWrapper",draggableSelector:".sapUshellShellFloatingContainerWrapper",rootSelector:".sapUiBody",cloneClass:"sapUshellFloatingContainer-clone",dragCallback:this._handleFloatingContainerUIStart.bind(this),endCallback:this._handleFloatingContainerDrop.bind(this),moveTolerance:3,onDragStartUIHandler:this._onDragStartUI.bind(this),onDragEndUIHandler:this._setFloatingContainerHeight.bind(this),dragAndScrollCallback:this._doDock.bind(this),switchModeDelay:1000,isLayoutEngine:false,isTouch:false,elementToCapture:e,defaultMouseMoveHandler:function(){},debug:q.sap.debug()});}else{this.oFloatingUIActions.elementsToCapture=q(e);}this._activateFloatingUIActions(q(window).width());var z;q(window).bind("resize",function(){clearTimeout(z);z=setTimeout(this._activateFloatingUIActions(q(window).width()),300);}.bind(this));}.bind(this));},_doDock:function(e){M.start("FLP:Shell.controller._doDock","dragging co-pilot element","FLP");var i=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD);if(i.name==="Desktop"){var z=q(window).width();if(e){e.docked={};var B=e.docked;if(e.moveX>=z-64){B.dockPos="right";B.setIsDockingAreaOpen=true;this._openDockingArea(e);}else if(e.moveX<64){B.dockPos="left";B.setIsDockingAreaOpen=true;this._openDockingArea(e);}else{if(this._isDockingAreaOpen()){this._closeDockingArea(e);}if(q("#canvas").hasClass("sapUshellContainerDocked")){this._handleCloseCanvas(e);}}}}M.end("FLP:Shell.controller._doDock");},_finishDoDock:function(e){this._openDockingArea(false);var i=new n(n.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");i.put("lastState","docked:"+e.dockPos);this._handleOpenCanvas(e);var z=q("#sapUshellFloatingContainerWrapper");z.css("height","100%");q("#shell-floatingContainer").addClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsDocked");},_onResizeWithDocking:function(){this.handleNavMenuTitleVisibility(D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD));setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","appFinderWithDocking");},300);},_onDragStartUI:function(e){M.start("FLP:Shell.controller._onDragStartUI","start drag","FLP");if(this._isDock()){var i=new n(n.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");i.put("lastState","floating");q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDocked");q(".sapUshellShellFloatingContainerFullHeight").removeClass("sapUshellShellFloatingContainerFullHeight");sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsUnDocked");q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");q("#sapUshellFloatingContainerWrapper").addClass("sapUshellContainerDockedMinimizeCoPilot");q(q(".sapUshellContainerDockedMinimizeCoPilot")).on("webkitAnimationEnd oanimationend msAnimationEnd animationend",this._handleAnimations(false));this._handleCloseCanvas(e);}M.end("FLP:Shell.controller._onDragStartUI");},_handleAnimations:function(i){var e="sapUshellContainerDockedLaunchpad";var z=q("#sapUshellFloatingContainerWrapper");if(i){q("#canvas, #shell-header").addClass(e);z.addClass("sapUshellContainerDockedExtendCoPilot");this._onResizeWithDocking();}else{q("#sapUshellFloatingContainerWrapper").addClass("sapUshellContainerDockedExtendCoPilot");}},_openDockingArea:function(e){var i=e?e.docked:false;var z=i?i.setIsDockingAreaOpen:false;if(z&&q("#DockinaAreaDiv").length==0){var B=sap.ui.getCore().getConfiguration().getRTL();if((i.dockPos==="right"&&e.clone&&!B)||(i.dockPos==="left"&&e.clone&&B)){q("<div id=\"DockinaAreaDiv\"  class=\"sapUshellShellDisplayDockingAreaRight\">").appendTo(e.clone.parentElement);}else if((i.dockPos==="left"&&e.clone&&!B)||(i.dockPos==="right"&&e.clone&&B)){q("<div id=\"DockinaAreaDiv\"  class=\"sapUshellShellDisplayDockingAreaLeft\">").appendTo(e.clone.parentElement);}e.clone.oDockedProp={};e.clone.oDockedProp.dockPos=i.dockPos;}else if(!z){this._closeDockingArea();}},_closeDockingArea:function(){setTimeout(function(){q(".sapUshellShellDisplayDockingAreaRight").remove();q(".sapUshellShellDisplayDockingAreaLeft").remove();},150);},_isDock:function(){return q(".sapUshellContainerDocked").size()!==0;},_isDockingAreaOpen:function(){return q(".sapUshellShellDisplayDockingAreaRight").size()!==0||q(".sapUshellShellDisplayDockingAreaLeft").size()!==0;},_handleOpenCanvas:function(e){var i=q("#canvas");var z=q(".sapUshellShellHead");var B=sap.ui.getCore().getConfiguration().getRTL();if((e.dockPos==="right"&&!B)||(e.dockPos==="left"&&B)){i.addClass("sapUshellContainer-Narrow-Right sapUshellContainerDocked ");z.addClass("sapUshellHead-Narrow-Right sapUshellContainerDocked");}if((e.dockPos==="left"&&!B)||(e.dockPos==="right"&&B)){i.addClass("sapUshellContainer-Narrow-Left sapUshellContainerDocked ");z.addClass("sapUshellHead-Narrow-Left sapUshellContainerDocked");}var V=sap.ui.getCore().byId("viewPortContainer");if(V){V._handleSizeChange();}},_handleCloseCanvas:function(e){var i=q("#canvas");var z=q(".sapUshellShellHead");if(e){e.docked.setIsDockingAreaOpen=false;}if(i.hasClass("sapUshellContainer-Narrow-Right")){i.removeClass("sapUshellContainer-Narrow-Right sapUshellContainerDocked sapUshellMoveCanvasRight");z.removeClass("sapUshellHead-Narrow-Right sapUshellContainerDocked");this._openDockingArea(e);this._setFloatingContainerHeight();}if(i.hasClass("sapUshellContainer-Narrow-Left")){i.removeClass("sapUshellContainer-Narrow-Left sapUshellContainerDocked sapUshellMoveCanvasLeft");z.removeClass("sapUshellHead-Narrow-Left sapUshellContainerDocked");this._openDockingArea(e);this._setFloatingContainerHeight();}this._onResizeWithDocking();var V=sap.ui.getCore().byId("viewPortContainer");if(V){V._handleSizeChange();}},_setFloatingContainerHeight:function(e){var i=q(window).width();var z=q("#sapUshellFloatingContainerWrapper");if(this._isDock()){if(e&&(e.clientX>=i-64||e.clientX<64)){z.addClass(" sapUshellContainerDocked");z.addClass("sapUshellContainerDockedMinimizeCoPilot");q(z).on("webkitAnimationEnd oanimationend msAnimationEnd animationend",this._handleAnimations(true));}}else if(!this._isDock()){q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");}},_handleFloatingContainerDrop:function(e,i,z){M.start("FLP:Shell.controller._handleFloatingContainerDrop","drop floating container","FLP");var B=i.firstChild?sap.ui.getCore().byId(i.firstChild.id):undefined,G=new n(n.Type.local,"com.sap.ushell.adapters.local.FloatingContainer"),J=q(window).width(),K=q(window).height(),O=z.deltaX/J,Q=z.deltaY/K,R=i.style.visibility,T=i.style.display,V=parseFloat(i.style.left.replace("%","")),X=parseFloat(i.style.top.replace("%",""));i.style.visibility="hidden";i.style.display="block";if(typeof(V)==="number"){O=V+100*z.deltaX/J;}if(typeof(X)==="number"){Q=X+100*z.deltaY/K;}if(this._isDockingAreaOpen()){Q=0;}i.setAttribute("style","left:"+O+"%;top:"+Q+"%;position:absolute;");i.visibility=R;i.display=T;G.put("floatingContainerStyle",i.getAttribute("style"));if(B){B.handleDrop();if(!!z.clone.oDockedProp&&this._isDockingAreaOpen()){this._finishDoDock(z.clone.oDockedProp);}}M.end("FLP:Shell.controller.handleFloatingContainerDrop");},_handleFloatingContainerUIStart:function(i,z){M.start("FLP:Shell.controller._handleFloatingContainerUIStart","starts dragging floating container","FLP");var B=z;B.style.display="none";if(window.getSelection){var G=window.getSelection();try{G.removeAllRanges();}catch(e){}}M.end("FLP:Shell.controller._handleFloatingContainerUIStart");},getFloatingContainerState:function(){var e=new n(n.Type.local,"com.sap.ushell.adapters.local.CopilotLastState");var i="floating";if(e!=null){i=e.get("lastState");if(i==null){i="floating";}}return i;},setFloatingContainerVisibility:function(V){var e=this.getFloatingContainerState();if(e){if(e=="floating"){this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}else if(e.indexOf("docked")!=-1){var i=sap.ui.getCore().byId("viewPortContainer");if(V==true){var z=D.media.getCurrentRange(D.media.RANGESETS.SAP_STANDARD);if(z.name=="Desktop"){var B=q("#sapUshellFloatingContainerWrapper");B.addClass("sapUshellContainerDocked");q("#canvas, .sapUshellShellHead").addClass("sapUshellContainerDocked");B.css("height","100%");sap.ui.getCore().byId("shell-floatingContainer").addStyleClass("sapUshellShellFloatingContainerFullHeight");if(i){i._handleSizeChange();}if(sap.ui.getCore().getConfiguration().getRTL()){if(e.indexOf("right")!=-1){q("#canvas").addClass("sapUshellContainer-Narrow-Left");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Left");this._handleAnimations(true);}else{q("#canvas").addClass("sapUshellContainer-Narrow-Right");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Right");this._handleAnimations(true);}}else if(e.indexOf("right")!=-1){q("#canvas").addClass("sapUshellContainer-Narrow-Right");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Right");this._handleAnimations(true);}else{q("#canvas").addClass("sapUshellContainer-Narrow-Left");q(".sapUshellShellHead").addClass("sapUshellHead-Narrow-Left");this._handleAnimations(true);}setTimeout(function(){this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}.bind(this),400);}else{new n(n.Type.local,"com.sap.ushell.adapters.local.CopilotLastState").put("lastState","floating");this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}}else{this._handleAnimations(false);if(i){i._handleSizeChange();}setTimeout(function(){this.getView().getOUnifiedShell().setFloatingContainerVisible(V);}.bind(this),400);q("#canvas, .sapUshellShellHead").removeClass("sapUshellContainerDocked sapUshellContainer-Narrow-Right sapUshellContainer-Narrow-Left");}q("#sapUshellFloatingContainerWrapper").removeClass("sapUshellContainerDockedMinimizeCoPilot sapUshellContainerDockedExtendCoPilot");this._onResizeWithDocking();if(i){i._handleSizeChange();}}}},getFloatingContainerVisibility:function(){return this.getView().getOUnifiedShell().getFloatingContainerVisible();},setFloatingContainerContent:function(e,i,z,B){t.setFloatingContainerContent(e,i,z,B);},getRightFloatingContainerVisibility:function(){var R=this.getView().getOUnifiedShell().getRightFloatingContainer(),e=R&&R.getVisible();return e;},setHeaderTitle:function(T){h.updateStates({propertyName:"title",value:T||"",aStates:["home","app"],bCurrentState:false,bDoNotPropagate:false});},addEndUserFeedbackCustomUI:function(e,i){if(e){this.oEndUserFeedbackConfiguration.customUIContent=e;}if(i===false){this.oEndUserFeedbackConfiguration.showCustomUIContent=i;}},setFooter:function(e){var i=this.getView().getOUnifiedShell();if(typeof e!=="object"||!e.getId){throw new Error("oFooter value is invalid");}if(i.getFooter()!==null){q.sap.log.warning("You can only set one footer. Replacing existing footer: "+i.getFooter().getId()+", with the new footer: "+e.getId()+".");}i.setFooter(e);},removeFooter:function(){this.getView().getOUnifiedShell().setFooter(null);},addUserPreferencesEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateUserPrefModel(e);},addUserProfilingEntry:function(e){this._validateUserPrefEntryConfiguration(e);this._updateProfilingModel(e);},_validateUserPrefEntryConfiguration:function(e){if((!e)||(typeof e!=="object")){throw new Error("object oConfig was not provided");}if(!e.title){throw new Error("title was not provided");}if(!e.value){throw new Error("value was not provided");}if(typeof e.entryHelpID!=="undefined"){if(typeof e.entryHelpID!=="string"){throw new Error("entryHelpID type is invalid");}else if(e.entryHelpID===""){throw new Error("entryHelpID type is invalid");}}if(e.title&&typeof e.title!=="string"){throw new Error("title type is invalid");}if(typeof e.value!=="function"&&typeof e.value!=="string"&&typeof e.value!=="number"){throw new Error("value type is invalid");}if(e.onSave&&typeof e.onSave!=="function"){throw new Error("onSave type is invalid");}if(e.content&&typeof e.content!=="function"){throw new Error("content type is invalid");}if(e.onCancel&&typeof e.onCancel!=="function"){throw new Error("onCancel type is invalid");}},_createSessionHandler:function(y){var e=this;sap.ui.require(["sap/ushell/SessionHandler"],function(i){e.oSessionHandler=new i(a);e.oSessionHandler.init({sessionTimeoutReminderInMinutes:y.sessionTimeoutReminderInMinutes,sessionTimeoutIntervalInMinutes:y.sessionTimeoutIntervalInMinutes,sessionTimeoutTileStopRefreshIntervalInMinutes:y.sessionTimeoutTileStopRefreshIntervalInMinutes,enableAutomaticSignout:y.enableAutomaticSignout});});},_getSessionHandler:function(){return this.oSessionHandler;},_navBack:function(){this.setMeAreaSelected(false);a.service().navigateBack();},_updateUserPrefModel:function(e){var i=this._getModelEntryFromEntryObject(e),z=C.last("/core/userPreferences/entries");z.push(i);z=this._reorderUserPrefEntries(z);C.emit("/core/userPreferences/entries",z);},_updateProfilingModel:function(e){var i=this._getModelEntryFromEntryObject(e),z=C.last("/core/userPreferences/profiling")||[];z.push(i);C.emit("/core/userPreferences/profiling",z);},_getModelEntryFromEntryObject:function(e){return{"entryHelpID":e.entryHelpID,"title":e.title,"valueArgument":e.value,"valueResult":null,"onSave":e.onSave,"onCancel":e.onCancel,"contentFunc":e.content,"contentResult":null,"icon":e.icon,"provideEmptyWrapper":e.provideEmptyWrapper};},_reorderUserPrefEntries:function(e){var z,B;for(var i=0;i<e.length;i++){if(e[i].entryHelpID==="flpSettingsEntry"){z=i;}else if(e[i].entryHelpID==="themes"){B=i;}if(z!=undefined&&B!=undefined){var G=e.splice(z,1);e.splice(B+1,0,G[0]);break;}}return e;},getModel:function(){return w;},_getConfig:function(){return y||{};},_getPersData:function(e){var i=d.getOwnerComponentFor(this.getView());return new Promise(function(z,B){sap.ushell.Container.getServiceAsync("Personalization").then(function(G){var J={keyCategory:G.constants.keyCategory.FIXED_KEY,writeFrequency:G.constants.writeFrequency.LOW,clientStorageAllowed:true};var K=G.getPersonalizer(e,J,i);K.getPersData().then(z).fail(B);});});},_getCurrentLocationHash:function(){return window.location.hash;},setMeAreaSelected:function(e){E.emit("showMeArea",e);},getMeAreaSelected:function(){return C.last("/core/shell/model/currentViewPortState")==="LeftCenter";},setNotificationsSelected:function(e){E.emit("showNotifications",e);},getNotificationsSelected:function(){return C.last("/core/shell/model/currentViewPortState")==="RightCenter";}});});
sap.ui.predefine('sap/ushell/renderers/fiori2/Shell.view',["sap/ushell/library","sap/ui/Device","sap/ui/core/HTML","sap/ushell/components/_HeaderManager/ControlManager","sap/ushell/components/HeaderManager","sap/ushell/components/_HeaderManager/ShellHeader.controller","sap/ushell/ui/footerbar/ContactSupportButton","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/m/Button","sap/m/Dialog","sap/ushell/resources","sap/ushell/utils","sap/ushell/Config","sap/ushell/EventHub","sap/ui/model/json/JSONModel","sap/ui/thirdparty/jquery","sap/ui/core/library"],function(l,D,H,a,b,S,C,A,B,c,r,u,d,E,J,q,e){"use strict";var V=e.mvc.ViewType;var f=l.AppTitleState;function s(i,o){return sap.ui.getCore().byId(o.getObject());}sap.ui.jsview("sap.ushell.renderers.fiori2.Shell",{createContent:function(o){this.oController=o;var v=this.getViewData()||{},g=v.config||{};this.oConfig=g;this.aDanglingControls=[];this._allowUpToThreeActionInShellHeader(g);var U=sap.ui.xmlfragment("sap.ushell.ui.ShellLayout",o),h=this.createShellHeader(g,this.getViewData().shellModel);U.setHeader(h);h.setShellLayout(U);E.once("CreateToolArea").do(function(){sap.ui.require(["sap/ushell/ui/shell/ToolArea"],function(T){var i=new T({id:"shell-toolArea",toolAreaItems:{path:"/currentState/toolAreaItems",factory:s}});i.updateAggregation=this.updateShellAggregation;i.addEventDelegate({onAfterRendering:function(){U.applySplitContainerSecondaryContentSize();}});U.setToolArea(i);}.bind(this));}.bind(this));this.setOUnifiedShell(U);this.setDisplayBlock(true);this.addDanglingControl(sap.ui.getCore().byId("viewPortContainer"));this.logonIFrameReference=null;u.setPerformanceMark("FLP - Shell.view rendering started!");return U;},_allowUpToThreeActionInShellHeader:function(o){if(Object.keys(o).length>3){var p=["moveAppFinderActionToShellHeader","moveUserSettingsActionToShellHeader","moveGiveFeedbackActionToShellHeader","moveContactSupportActionToShellHeader","moveEditHomePageActionToShellHeader"],g=0,P;for(var i=0;i<5;i++){P=p[i];if(g===3){o[P]=false;}else if(o[P]){g++;}}}},createShellHeader:function(o,g){var h=d.createModel("/core/shellHeader",J),i=new S(),j;a.init(o,i,g);j=sap.ui.xmlfragment("sap.ushell.ui.ShellHeader",i);if(D.system.desktop){j.setAccessKeyHandler(sap.ushell.renderers.fiori2.AccessKeysHandler);var k=j.getAppTitle();k.addEventDelegate({onsapskipforward:function(m){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){m.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}}});}if(o.appState==="embedded"){j.setNoLogo();}j.setModel(h);j.setModel(r.i18nModel,"i18n");this.addEventDelegate({"onBeforeRendering":function(){j.createUIArea(this.getUIArea().getId());}},this);return j;},createPostCoreExtControls:function(){sap.ui.require(["sap/ushell/ui/shell/FloatingContainer","sap/ushell/ui/shell/ShellFloatingActions"],function(F,g){var o=sap.ui.getCore().byId("shell");if(!o){return;}var h=new F({id:"shell-floatingContainer",content:{path:"/currentState/floatingContainerContent",factory:s}});if(D.system.desktop){h.addCustomData(new A({key:"tabindex",value:"-1",writeToDom:true}));h.addEventDelegate({onsapskipforward:function(k){k.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.setIsFocusHandledByAnotherHandler(true);sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell(k);},onsapskipback:function(k){if(sap.ushell.renderers.fiori2.AccessKeysHandler.getAppKeysHandler()){k.preventDefault();sap.ushell.renderers.fiori2.AccessKeysHandler.bFocusOnShell=false;}}});}h.setModel(o.getModel());this.addDanglingControl(h);var i=new g({id:"shell-floatingActions",floatingActions:{path:"/currentState/floatingActions",factory:s}});i.updateAggregation=this.updateShellAggregation;var j=this.getOUnifiedShell();j.setFloatingContainer(h);j.setFloatingActionsContainer(i);this._createAllMyAppsView();}.bind(this));},_createAllMyAppsView:function(){var m=this.getModel(),o=function(g){if(g.isEnabled()){this.oAllMyAppsView=sap.ui.view("allMyAppsView",{type:V.JS,viewName:"sap.ushell.renderers.fiori2.allMyApps.AllMyApps",viewData:{_fnGetShellModel:function(){return m;}},async:true,height:"100%",visible:{path:"/ShellAppTitleState",formatter:function(h){return h!==f.ShellNavMenu;}}}).addStyleClass("sapUshellAllMyAppsView");this.oAllMyAppsView.addCustomData(new A({key:"aria-label",value:r.i18n.getText("allMyApps_headerTitle"),writeToDom:true}));this.getOUnifiedShell().getHeader().getAppTitle().setAllMyApps(this.oAllMyAppsView);}}.bind(this);sap.ushell.Container.getServiceAsync("AllMyApps").then(o);},getOUnifiedShell:function(){return this.oUnifiedShell;},setOUnifiedShell:function(U){this.oUnifiedShell=U;},updateShellAggregation:function(n){var o=this.mBindingInfos[n],g=this.getMetadata().getJSONKeys()[n],h;q.each(this[g._sGetter](),function(i,v){this[g._sRemoveMutator](v);}.bind(this));q.each(o.binding.getContexts(),function(i,v){h=o.factory(this.getId()+"-"+i,v)?o.factory(this.getId()+"-"+i,v).setBindingContext(v,o.model):"";this[g._sMutator](h);}.bind(this));},getControllerName:function(){return"sap.ushell.renderers.fiori2.Shell";},createIFrameDialog:function(){var o=null,L=this.logonIFrameReference,g;var _=function(){if(L){L.remove();}return q("<iframe id=\"SAMLDialogFrame\" src=\"\" frameborder=\"0\" height=\"100%\" width=\"100%\"></iframe>");};var h=function(){o.addStyleClass("sapUshellSamlDialogHidden");q("#sap-ui-blocklayer-popup").addClass("sapUshellSamlDialogHidden");};this.destroyIFrameDialog();var i=new B({text:r.i18n.getText("samlCloseBtn"),press:function(){sap.ushell.Container.cancelLogon();}});var j=new H("SAMLDialogFrame");this.logonIFrameReference=_();j.setContent(this.logonIFrameReference.prop("outerHTML"));o=new c({id:"SAMLDialog",title:r.i18n.getText("samlDialogTitle"),contentWidth:"50%",contentHeight:"50%",rightButton:i}).addStyleClass("sapUshellIframeDialog").addStyleClass("sapContrastPlus");g=d.last("/core/extension/SupportTicket");if(g){var k=new C();k.setWidth("150px");k.setIcon("");o.setLeftButton(k);}o.addContent(j);o.open();h();this.logonIFrameReference=q("#SAMLDialogFrame");return this.logonIFrameReference[0];},destroyIFrameDialog:function(){var g=sap.ui.getCore().byId("SAMLDialog");if(g){g.destroy();}this.logonIFrameReference=null;},showIFrameDialog:function(){var o=sap.ui.getCore().byId("SAMLDialog");if(o){o.removeStyleClass("sapUshellSamlDialogHidden");q("#sap-ui-blocklayer-popup").removeClass("sapUshellSamlDialogHidden");}},addDanglingControl:function(o){this.aDanglingControls.push(o);},destroyDanglingControls:function(){if(this.aDanglingControls){this.aDanglingControls.forEach(function(o){if(o.destroyContent){o.destroyContent();}o.destroy();});}}});});
sap.ui.predefine('sap/ushell/resources',['sap/ui/model/resource/ResourceModel'],function(R){"use strict";var r={};r.getTranslationModel=function(l){var t=new R({bundleUrl:jQuery.sap.getModulePath("sap.ushell.renderers.fiori2.resources.resources",".properties"),bundleLocale:l});return t;};r.i18nModel=r.getTranslationModel(sap.ui.getCore().getConfiguration().getLanguage());r.i18n=r.i18nModel.getResourceBundle();return r;},true);
sap.ui.predefine('sap/ushell/services/AllMyApps',[],function(){"use strict";function A(c,p,s){var S=s&&s.config,e=false,d={},P={HOME:0,EXTERNAL:1,CATALOG:2};this.isEnabled=function(){e=(!S||(S.enabled!==false))?true:false;return e;};this.isHomePageAppsEnabled=function(){return(!S||(S.showHomePageApps!==false))?true:false;};this.isCatalogAppsEnabled=function(){return(!S||(S.showCatalogApps!==false))?true:false;};this.isExternalProviderAppsEnabled=function(){return(!S||(S.showExternalProviders!==false))?true:false;};this.registerExternalProvider=function(a,o){if(!a||(a==="")){return;}if(!o.getTitle||!o.getData){return;}d[a]=o;};this.getDataProviders=function(){return d;};this.getProviderTypeEnum=function(){return P;};this.init=function(){};}A.hasNoAdapter=true;return A;},true);
sap.ui.predefine('sap/ushell/services/AppConfiguration',["sap/ushell/utils","sap/ushell/EventHub","sap/base/Log","sap/ui/util/Mobile","sap/ui/thirdparty/jquery","sap/base/util/ObjectPath","sap/base/i18n/ResourceBundle","sap/ushell/resources","sap/ui/core/IconPool","sap/m/library"],function(u,E,L,M,q,O,R,r,I,m){"use strict";var B=m.ButtonType;function A(){var o={},a=true,c=null,b=[],d=[];E.on("AppRendered").do(e.bind(this));function e(){a=false;if(d.length){for(var i=0;i<d.length;i++){d[i]();}d.length=0;}}this.addActivity=function(g){var C=sap.ushell.Container;return C&&C.getService("UserRecents").addActivity(g);};this.setApplicationInInitMode=function(){a=true;};this.getApplicationRequestQueue=function(){return d;};this.getCurrentApplication=function(){return c;};this.getCurrentAppliction=this.getCurrentApplication;this.getMetadata=function(g){if(!g){g=c;}if(g){var h=hasher&&hasher.getHash?hasher.getHash():"",k=this._processKey(h);if(!(o.hasOwnProperty(k))||!o[k].complete){this.addMetadata(g,k);}if(!o[k]){o[k]={complete:false};}if(!o[k].title){o[k].title=g.text||r.i18n.getText("default_app_title");}return o[k];}return{};};this._processKey=function(C){var i=C.split("?")[0],p=C.split("?")[1],s,P={},S,g="",h="",j;if(p){s=p.split("&");s.forEach(function(k){var l=k.split("=");P[l[0]]=l[1];});S=Object.keys(P).sort();S.forEach(function(k,l){h=l?"&":"?";g+=h+k+"="+P[k];});return i+g;}j=sap.ushell.Container.getService("URLParsing").parseShellHash(C);i=j?j.semanticObject+"-"+j.action:"";return i;};this.setCurrentApplication=function(g){c=g;if(d.length){d.length=0;}};this.setHeaderHiding=function(){L.warning("Application configuration headerHiding property is deprecated and has no effect");};this.addApplicationSettingsButtons=function(g){if(a){d.push(function(){f(g);});}else{f(g);}};function f(g){var i,h=[],j=sap.ushell.Container.getRenderer("fiori2");for(i=0;i<g.length;i++){var C=g[i];h.push(C.getId());C.setIcon(C.getIcon()||I.getIconURI("customize"));if(r.i18n.getText("userSettings")===C.getProperty("text")){C.setProperty("text",r.i18n.getText("userAppSettings"));}C.setType(B.Unstyled);}if(sap.ushell.Container&&j){if(b.length){j.hideActionButton(b,true);}b=h;j.showActionButton(h,true,undefined,true);}}this.setWindowTitle=function(t){window.document.title=t;};this.setIcons=function(i){M.setIcons(i);};this.setApplicationFullWidth=function(v){sap.ushell.components.applicationIntegration.AppLifeCycle.setApplicationFullWidth(v);};this.getSettingsControlAsync=function(){var D=new q.Deferred();sap.ui.require(["sap/ushell/ui/footerbar/SettingsButton"],function(S){D.resolve(new S());});return D.promise();};this.getSettingsControl=function(){var s="sap/ushell/ui/footerbar/SettingsButton",g="sap.ushell.ui.footerbar.SettingsButton",S=sap.ui.require(s);if(S){return new S();}q.sap.require(g);S=O.get(g||"");return new S();};this.getApplicationName=function(g){var h,s=(g&&g.additionalInformation)||null;if(s){h=/^SAPUI5\.Component=(.+)$/i.exec(s);if(h){return h[1];}}return null;};this.getApplicationUrl=function(g){var U=(g&&g.url)||null,s="P_TCODE",i;if(U){if(g.applicationType==="NWBC"&&U.indexOf(s)){return U;}i=U.indexOf("?");if(i>=0){U=U.slice(0,i);}if(U.slice(-1)!=="/"){U+="/";}}return U;};this.getPropertyValueFromConfig=function(C,p,g){var v;if(g&&C.hasOwnProperty(p+"Resource")){v=g.getText(C[p+"Resource"]);}else if(C.hasOwnProperty(p)){v=C[p];}return v;};this.getPropertyValueFromManifest=function(l,p,P){var s=p[P].manifestEntryKey,g=p[P].path,h=l.getManifestEntry(s);return O.get(g||"",h);};this.addMetadata=function(g,k){try{var C=this.getApplicationName(g),U=this.getApplicationUrl(g),l,h,p={"fullWidth":{"manifestEntryKey":"sap.ui","path":"fullWidth"},"hideLightBackground":{"manifestEntryKey":"sap.ui","path":"hideLightBackground"},"title":{"manifestEntryKey":"sap.app","path":"title"},"icon":{"manifestEntryKey":"sap.ui","path":"icons.icon"},"favIcon":{"manifestEntryKey":"sap.ui","path":"icons.favIcon"},"homeScreenIconPhone":{"manifestEntryKey":"sap.ui","path":"icons.phone"},"homeScreenIconPhone@2":{"manifestEntryKey":"sap.ui","path":"icons.phone@2"},"homeScreenIconTablet":{"manifestEntryKey":"sap.ui","path":"icons.tablet"},"homeScreenIconTablet@2":{"manifestEntryKey":"sap.ui","path":"icons.tablet@2"},"startupImage320x460":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x920"},"startupImage640x920":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x920"},"startupImage640x1096":{"manifestEntryKey":"sap.ui","path":"icons.startupImage640x1096"},"startupImage768x1004":{"manifestEntryKey":"sap.ui","path":"icons.startupImage768x1004"},"startupImage748x1024":{"manifestEntryKey":"sap.ui","path":"icons.startupImage748x1024"},"startupImage1536x2008":{"manifestEntryKey":"sap.ui","path":"icons.startupImage1536x2008"},"startupImage1496x2048":{"manifestEntryKey":"sap.ui","path":"icons.startupImage1496x2048"},"compactContentDensity":{"manifestEntryKey":"sap.ui5","path":"contentDensities.compact"},"cozyContentDensity":{"manifestEntryKey":"sap.ui5","path":"contentDensities.cozy"}},i,s,j,n,P,t,v,w=g&&g.componentHandle;if(k){if(!(o.hasOwnProperty(k))){o[k]={complete:false};}if(!o[k].complete){if(w){l=w.getMetadata();}else if(C){L.warning("No component handle available for '"+C+"'; SAPUI5 component metadata is incomplete",null,"sap.ushell.services.AppConfiguration");return;}if(l){h=l.getConfig();n=(l.getManifest()!==undefined);o[k].complete=true;if(h){t=h.resourceBundle||"";if(t){if(t.slice(0,1)!=="/"){t=U+t;}v=R.create({url:t,locale:sap.ui.getCore().getConfiguration().getLanguage()});}}for(P in p){if(p.hasOwnProperty(P)){if(n){o[k][P]=this.getPropertyValueFromManifest(l,p,P);}if(h&&o[k][P]===undefined){o[k][P]=this.getPropertyValueFromConfig(h,P,v);}}}o[k].version=l.getVersion();o[k].technicalName=l.getComponentName();}else if(u.isApplicationTypeEmbeddedInIframe(g.applicationType)){var W="/~canvas;window=app/wda/",x=g.url.indexOf(W),y="/bc/gui/sap/its/webgui",z=g.url.indexOf(y);if(x>=0){o[k].technicalName=g.url.substring((x+W.length),g.url.indexOf("/",(x+W.length)));}o[k].complete=true;if(z>=0){var D="etransaction=",F=g.url.indexOf(D,z+y.length),G=g.url.indexOf("&",F),H=(G>=0)?G:g.url.length;o[k].technicalName=decodeURIComponent(g.url.substring(F+D.length,H))+" (TCODE)";}}else{L.warning("No technical information for the given application could be determined",null,"sap.ushell.services.AppConfiguration");}}i=["favIcon","homeScreenIconPhone","homeScreenIconPhone@2","homeScreenIconTablet","homeScreenIconTablet@2","startupImage320x460","startupImage640x920","startupImage640x1096","startupImage768x1004","startupImage748x1024","startupImage1536x2008","startupImage1496x2048"];s=(U&&U[U.length-1]==="/")?U.substring(0,U.length-1):U;j=function(U){if(U.match(/^https?:\/\/.*/)){return false;}return U&&U[0]!=="/";};i.forEach(function(K){var N=o[k][K],Q=null;if(N){Q=j(N)?s+"/"+N:N;}o[k][K]=Q;});}}catch(J){L.warning("Application configuration could not be parsed");}};}return new A();},true);
sap.ui.predefine('sap/ushell/services/AppLifeCycle',["sap/ui/base/EventProvider","sap/ushell/TechnicalParameters"],function(E,T){"use strict";var S="appLoaded";function A(a,c,p,C){var o,e,v;this.getCurrentApplication=function(){return o;};this.attachAppLoaded=function(d,f,l){e.attachEvent(S,d,f,l);};this.detachAppLoaded=function(f,l){e.detachEvent(S,f,l);};e=new E();v=sap.ui.getCore().byId("viewPortContainer");if(!v||typeof v.attachAfterNavigate!=="function"){jQuery.sap.log.error("Error during instantiation of AppLifeCycle service","Could not attach to afterNavigate event","sap.ushell.services.AppLifeCycle");return;}v.attachAfterNavigate(function(b){var d,f,s,g,h,H=false;if(b.mParameters.toId.indexOf("applicationShellPage")===0){f=b.mParameters.to.getApp();}else if(b.mParameters.toId.indexOf("application")===0){f=b.mParameters.to;}if(f&&typeof f.getComponentHandle==="function"&&f.getComponentHandle()){g=f.getComponentHandle().getInstance();}else if(f){d=f.getAggregation("child");if(d){g=d.getComponentInstance();}}else{g=sap.ui.getCore().getComponent(b.mParameters.to.getComponent());}if(g){h=g.getId();H=h.indexOf("Shell-home-component")!==-1||h.indexOf("Shell-appfinder-component")!==-1;}s=f&&typeof f.getApplicationType==="function"&&f.getApplicationType();if((!s||s==="URL")&&g){s="UI5";}o={applicationType:s,componentInstance:g,homePage:H,getTechnicalParameter:function(P){return T.getParameterValue(P,g,f,s);},getIntent:function(){var i=hasher&&hasher.getHash();if(!i){return Promise.reject("Could not identify current application hash");}var j=sap.ushell.Container.getServiceAsync("URLParsing");return j.then(function(P){return P.parseShellHash(i);});}};setTimeout(function(){e.fireEvent(S,o);},0);});}A.hasNoAdapter=true;return A;},true);
sap.ui.predefine('sap/ushell/services/AppState',["sap/ushell/services/_AppState/WindowAdapter","sap/ushell/services/_AppState/SequentializingAdapter","sap/ushell/services/_AppState/AppState","sap/ushell/services/_AppState/Sequentializer","sap/ushell/services/_AppState/AppStatePersistencyMethod","sap/ushell/utils","sap/ui/thirdparty/jquery"],function(W,S,A,a,b,u,q){"use strict";function g(C){return u.isDefined(C)&&u.isDefined(C.transient)?!!C.transient:true;}function c(o,C,p,d){this._oConfig=d&&d.config;this._sSessionKey="";this._oAdapter=new S(o);this._oAdapter=new W(this,this._oAdapter,d);}c.prototype._getSessionKey=function(){if(!this._sSessionKey){this._sSessionKey=this._getGeneratedKey();}return this._sSessionKey;};c.prototype.getAppState=function(k){var d=new q.Deferred(),t=this,o;this._loadAppState(k).done(function(k,D,p,P){o=new A(t,k,false,D,undefined,undefined,undefined,p,P);d.resolve(o);}).fail(function(){o=new A(t,k);d.resolve(o);});return d.promise();};c.prototype._getGeneratedKey=function(){var s=sap.ushell.Container.getService("Personalization").getGeneratedKey();s=("AS"+s).substring(0,40);return s;};c.prototype.createEmptyAppState=function(C,t,p,P){var k=this._getGeneratedKey(),o,s="",d="",U=u.isDefined(t)?t:g(this._oConfig);if(p!==undefined&&!this.isPersistencyMethodSupported(p)){p=undefined;P=undefined;}if(C){if(!(C instanceof sap.ui.core.UIComponent)){throw new Error("oComponent passed must be a UI5 Component");}if(C.getMetadata&&C.getMetadata()&&typeof C.getMetadata().getName==="function"){s=C.getMetadata().getName()||"";}if(!s&&C.getMetadata&&C.getMetadata().getComponentName){s=C.getMetadata().getComponentName();}if(C.getMetadata&&C.getMetadata()&&typeof C.getMetadata().getManifest==="function"&&typeof C.getMetadata().getManifest()==="object"&&typeof C.getMetadata().getManifest()["sap.app"]==="object"){d=C.getMetadata().getManifest()["sap.app"].ach||"";}}if(U===true){p=P=undefined;}else if(p===undefined&&this.isPersistencyMethodSupported(b.PersonalState)){p=b.PersonalState;P=undefined;}o=new A(this,k,true,undefined,s,d,U,p,P);return o;};c.prototype.createEmptyUnmodifiableAppState=function(){var k=this._getGeneratedKey(),o;o=new A(this,k,false);return o;};c.prototype._saveAppState=function(k,d,s,C,t,p,P){var e=this._getSessionKey(),U=u.isDefined(t)?t:g(this._oConfig);if(U){p=undefined;P=undefined;}else if(p!=undefined){if(!this.isPersistencyMethodSupported(p)){if(this.isPersistencyMethodSupported(b.PersonalState)){p=b.PersonalState;}else{p=undefined;}P=undefined;}}return this._oAdapter.saveAppState(k,e,d,s,C,U,p,P);};c.prototype._loadAppState=function(k){return this._oAdapter.loadAppState(k);};c.prototype.deleteAppState=function(k){return this._oAdapter.deleteAppState(k);};c._getSequentializer=function(){return new a();};c.prototype.getSupportedPersistencyMethods=function(){if(this._oAdapter.getSupportedPersistencyMethods){return this._oAdapter.getSupportedPersistencyMethods();}return[];};c.prototype.isPersistencyMethodSupported=function(p){var s=this.getSupportedPersistencyMethods();if(s.length>0&&p!==undefined){return(s.indexOf(p)>=0);}else{return false;}};c.prototype.makeStatePersistent=function(k,p,P){var d=new q.Deferred(),t=this;if(this.getSupportedPersistencyMethods().length===0){return d.resolve().promise();}if(this.isPersistencyMethodSupported(p)){t.getAppState(k).done(function(o){if(o._iPersistencyMethod!==p){o.bTransient=false;o._iPersistencyMethod=p;o._oPersistencySettings=P;t._saveAppState(k,o._sData,o._sAppName,o._sACHComponent,false,p,P).done(function(){d.resolve();}).fail(function(m){d.reject(m);});}else{d.resolve();}});}else{d.reject("AppState.makeStatePersistent - adapter does not support persistence method: "+p);}return d.promise();};c.WindowAdapter=W;c.hasNoAdapter=false;return c;},true);
sap.ui.predefine('sap/ushell/services/AppType',["sap/ushell/resources"],function(r){"use strict";return{OVP:"OVP",SEARCH:"Search",FACTSHEET:"FactSheet",COPILOT:"Co-Pilot",URL:"External Link",APP:"Application",getDisplayName:function(a){switch(a){case this.OVP:return r.i18n.getText("Apptype.OVP");case this.SEARCH:return r.i18n.getText("Apptype.SEARCH");case this.FACTSHEET:return r.i18n.getText("Apptype.FACTSHEET");case this.COPILOT:return r.i18n.getText("Apptype.COPILOT");case this.URL:return r.i18n.getText("Apptype.URL");default:return r.i18n.getText("Apptype.APP");}}};});
sap.ui.predefine('sap/ushell/services/ClientSideTargetResolution',["sap/ushell/utils","sap/ushell/services/_ClientSideTargetResolution/SystemContext","sap/ushell/services/_ClientSideTargetResolution/Utils","sap/ushell/services/AppConfiguration","sap/ushell/services/_ClientSideTargetResolution/InboundProvider","sap/ushell/services/_ClientSideTargetResolution/InboundIndex","sap/ushell/services/_ClientSideTargetResolution/VirtualInbounds","sap/ushell/services/_ClientSideTargetResolution/Search","sap/ushell/services/_ClientSideTargetResolution/StagedLogger","sap/ushell/services/_ClientSideTargetResolution/Formatter","sap/ushell/services/_ClientSideTargetResolution/ParameterMapping","sap/ushell/services/_ClientSideTargetResolution/PrelaunchOperations","sap/ushell/services/_ClientSideTargetResolution/XAppStateProcessing","sap/ushell/navigationMode","sap/ushell/Config","sap/ushell/ApplicationType","sap/ui/thirdparty/URI","sap/ushell/_ApplicationType/systemAlias","sap/ushell/TechnicalParameters","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject"],function(u,S,c,a,I,b,V,s,l,f,p,P,x,n,C,A,U,d,T,O,q,i){"use strict";function g(o,e,h,j){this._init.apply(this,arguments);}g.prototype._init=function(o,e,h,j){this._iLogId=0;sap.ui.lazyRequire("sap/ui/generic/app/navigation/service/SelectionVariant");if(!this._implementsServiceInterface(o)){q.sap.log.error("Cannot get Inbounds","ClientSideTargetResolutionAdapter should implement getInbounds method","sap.ushell.services.ClientSideTargetResolution");return;}this._oInboundProvider=new I(o.getInbounds.bind(o));this._oHaveEasyAccessSystemsDeferreds={userMenu:null,sapMenu:null};this._oServiceConfiguration=j;this._oAdapter=o;};g.prototype._implementsServiceInterface=function(o){if(typeof o.getInbounds==="function"){return true;}return false;};g.prototype._getURLParsing=function(){if(!this._oURLParsing){this._oURLParsing=sap.ushell.Container.getService("URLParsing");}return this._oURLParsing;};g.prototype._extractInboundFilter=function(o){if(!this._oAdapter.hasSegmentedAccess){return undefined;}if(typeof o!=="string"){return undefined;}var F=o.indexOf("#")===0?o:"#"+o;var e=this._getURLParsing().parseShellHash(F);if(!e||!e.semanticObject||!e.action){return undefined;}return[{semanticObject:e.semanticObject,action:e.action}];};g.prototype.resolveHashFragment=function(h){var t=this,D=new q.Deferred(),B=this._oAdapter.resolveHashFragmentFallback&&this._oAdapter.resolveHashFragmentFallback.bind(this._oAdapter),e=this._extractInboundFilter(h);this._oInboundProvider.getInbounds(e).then(function(j){t._resolveHashFragment(h,B,j).done(function(o){return D.resolve(o);}).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};g.prototype.resolveTileIntent=function(h){var t=this,D=new q.Deferred(),e=this._extractInboundFilter(h);this._oInboundProvider.getInbounds(e).then(function(o){t._resolveTileIntent(h,undefined,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};g.prototype.resolveTileIntentInContext=function(e,h){var o,D=new q.Deferred();o=b.createIndex(e.concat(V.getInbounds()));this._resolveTileIntent(h,undefined,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));return D.promise();};g.prototype._resolveHashFragment=function(h,B,e){var j=this._getURLParsing(),t=this,D=new q.Deferred(),F=h.indexOf("#")===0?h:"#"+h,k=j.parseShellHash(F);if(k===undefined){q.sap.log.error("Could not parse shell hash '"+h+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return D.reject().promise();}k.formFactor=u.getFormFactor();this._getMatchingInbounds(k,e,{bExcludeTileInbounds:true}).fail(function(E){q.sap.log.error("Could not resolve "+h,"_getMatchingInbounds promise rejected with: "+E,"sap.ushell.services.ClientSideTargetResolution");D.reject(E);}).done(function(m){var M;if(m.length===0){q.sap.log.warning("Could not resolve "+h,"rejecting promise","sap.ushell.services.ClientSideTargetResolution");D.reject("Could not resolve navigation target");return;}m=t._applySapNavigationScopeFilter(m,k);M=m[0];c.whenDebugEnabled(function(){function o(K,w){return this[K]===undefined?"<undefined>":w;}function r(w,y){return(w==="_original")?undefined:o.call(this,w,y);}var v=JSON.stringify(M,r,"   ");q.sap.log.debug("The following target will now be resolved",v,"sap.ushell.services.ClientSideTargetResolution");});t._resolveSingleMatchingTarget(M,B,F).done(function(o){D.resolve(o);}).fail(D.reject.bind(D));});return D.promise();};g.prototype._applySapNavigationScopeFilter=function(m,o){var e=o&&o.params&&o.params["sap-navigation-scope-filter"];if(!e){return m;}var F=m.filter(function(M){var h=O.get("inbound.signature.parameters",M);var j=h&&h["sap-navigation-scope"];if(j){return e[0]===j.defaultValue.value;}});return F.length>0?F:m;};g.prototype._resolveSingleMatchingTarget=function(m,B,F){var t=this,D=new q.Deferred(),o=this._getURLParsing(),e=o.parseShellHash(F),h=[e.semanticObject,e.action].join("-"),j=(m.inbound.resolutionResult||{}).applicationType;var E;if(this._oAdapter.resolveSystemAlias){E=this._oAdapter.resolveSystemAlias.bind(this._oAdapter);}var k=A.getEasyAccessMenuResolver(h,j);if(k){k(e,m,E).then(function(R){var N=n.compute(O.get("inbound.resolutionResult.applicationType",m),(m.intentParamsPlusAllDefaults["sap-ushell-next-navmode"]||[])[0],(m.intentParamsPlusAllDefaults["sap-ushell-navmode"]||[])[0],(a.getCurrentApplication()||{}).applicationType,C.last("/core/navigation/enableInPlaceForClassicUIs"));u.shallowMergeObject(R,N);R.inboundPermanentKey=m.inbound.permanentKey||m.inbound.id;D.resolve(R);},function(v){D.reject(v);});return D.promise();}var r=this._getReservedParameters(m);p.mapParameterNamesAndRemoveObjects(m);x.mixAppStateIntoResolutionResultAndRename(m,sap.ushell.Container.getService("AppState")).done(function(m){var R=function(){return t._constructFallbackResolutionResult.call(t,m,B,F);};if(A[j]){R=A[j].generateResolutionResult;}delete m.intentParamsPlusAllDefaults["sap-tag"];delete m.mappedIntentParamsPlusSimpleDefaults["sap-tag"];m.mappedDefaultedParamNames=m.mappedDefaultedParamNames.filter(function(w){return w!=="sap-tag";});var v=O.get("inbound.resolutionResult.url",m);P.executePrelaunchOperations(m,r["sap-prelaunch-operations"]).then(function(){return R(m,v,E);}).then(function(w){w.reservedParameters=r;w.inboundPermanentKey=m.inbound.permanentKey||m.inbound.id;return w;}).then(function(w){q.sap.log.debug("Intent was resolved to the following target",JSON.stringify(m.resolutionResult,null,3),"sap.ushell.services.ClientSideTargetResolution");u.shallowMergeObject(m.resolutionResult,w);D.resolve(m.resolutionResult);},function(M){if(typeof M==="string"&&M.indexOf("fallback:")>=0){t._constructFallbackResolutionResult.call(this,m,B,F).then(function(w){u.shallowMergeObject(m.resolutionResult,w);D.resolve(m.resolutionResult);},D.reject.bind(D));}else{D.reject(M);}});});return D.promise();};g.prototype._getReservedParameters=function(m){var r=T.getParameters({injectFrom:"startupParameter"}).map(function(o){return o.name;});var R=c.extractParameters(r,m.intentParamsPlusAllDefaults);T.getParameters({injectFrom:"inboundParameter"}).forEach(function(o){var e=o.name;var h=m.inbound&&m.inbound.signature&&m.inbound.signature.parameters;if(h&&Object.keys(h).length>0){var j=h[e];var k=j&&j.defaultValue&&j.defaultValue.hasOwnProperty("value");var t=j&&j.filter&&j.filter.hasOwnProperty("value");if(j&&(t||k)){if(k){R[e]=j.defaultValue.value;}else{R[e]=j.filter.value;}}else{delete R[e];}delete m.intentParamsPlusAllDefaults[e];var v=m.defaultedParamNames.indexOf(e);if(v>=0){m.defaultedParamNames.splice(v,1);}}});return R;};g.prototype._resolveTileIntent=function(h,B,o){var e=this._getURLParsing(),t=this,D=new q.Deferred(),F=h.indexOf("#")===0?h:"#"+h,j=e.parseShellHash(F);if(j===undefined){q.sap.log.error("Could not parse shell hash '"+h+"'","please specify a valid shell hash","sap.ushell.services.ClientSideTargetResolution");return D.reject("Cannot parse shell hash").promise();}j.formFactor=u.getFormFactor();this._getMatchingInbounds(j,o,{bExcludeTileInbounds:false}).fail(function(E){q.sap.log.error("Could not resolve "+h,"_getMatchingInbounds promise rejected with: "+E,"sap.ushell.services.ClientSideTargetResolution");D.reject(E);}).done(function(m){var M;if(m.length===0){q.sap.log.warning("Could not resolve "+h,"no matching targets were found","sap.ushell.services.ClientSideTargetResolution");D.reject("No matching targets found");return;}M=m[0];t._resolveSingleMatchingTileIntent(M,B,F).done(D.resolve.bind(D)).fail(D.reject.bind(D));});return D.promise();};g.prototype._resolveSingleMatchingTileIntent=function(m,B,F){var D=new q.Deferred(),e=(m.inbound.resolutionResult||{}).applicationType,t=this;var E;if(this._oAdapter.resolveSystemAlias){E=this._oAdapter.resolveSystemAlias.bind(this._oAdapter);}p.mapParameterNamesAndRemoveObjects(m);x.mixAppStateIntoResolutionResultAndRename(m,sap.ushell.Container.getService("AppState")).done(function(m){var r=function(){return t._constructFallbackResolutionResult.call(t,m,B,F);};if(A[e]){r=A[e].generateResolutionResult;}delete m.intentParamsPlusAllDefaults["sap-tag"];delete m.mappedIntentParamsPlusSimpleDefaults["sap-tag"];m.mappedDefaultedParamNames=m.mappedDefaultedParamNames.filter(function(j){return j!=="sap-tag";});var h=O.get("inbound.resolutionResult.url",m);r(m,h,E).then(function(R){u.shallowMergeObject(m.resolutionResult,R);var o=q.extend(true,{},m.inbound.tileResolutionResult);o.startupParameters=m.effectiveParameters;o.navigationMode=m.resolutionResult.navigationMode;if(!o.navigationMode){o.navigationMode=n.getNavigationMode(m.resolutionResult);}D.resolve(o);q.sap.log.debug("Tile Intent was resolved to the following target",JSON.stringify(o,null,3),"sap.ushell.services.ClientSideTargetResolution");},function(M){D.reject(M);});});return D.promise();};g.prototype._constructFallbackResolutionResult=function(m,B,F){var e={},D;Object.keys(m.intentParamsPlusAllDefaults).forEach(function(h){if(Array.isArray(m.intentParamsPlusAllDefaults[h])){e[h]=m.intentParamsPlusAllDefaults[h];}});D=m.mappedDefaultedParamNames||m.defaultedParamNames;if(D.length>0){e["sap-ushell-defaultedParameterNames"]=[JSON.stringify(D)];}if(typeof B!=="function"){q.sap.log.error("Cannot resolve hash fragment",F+" has matched an inbound that cannot be resolved client side and no resolveHashFragmentFallback method was implemented in ClientSideTargetResolutionAdapter","sap.ushell.services.ClientSideTargetResolution");return Promise.reject("Cannot resolve hash fragment: no fallback provided.");}q.sap.log.warning("Cannot resolve hash fragment client side",F+" has matched an inbound that cannot be resolved client side. Using fallback logic","sap.ushell.services.ClientSideTargetResolution");return new Promise(function(r,R){B(F,q.extend(true,{},m.inbound),e).done(function(o){var h={};["applicationType","additionalInformation","url","applicationDependencies","text"].forEach(function(j){if(o.hasOwnProperty(j)){h[j]=o[j];}});r(h);}).fail(R.bind(null));});};g.prototype.getDistinctSemanticObjects=function(){var D=new q.Deferred();this._oInboundProvider.getInbounds().then(function(o){var e={};o.getAllInbounds().forEach(function(h){if(typeof h.semanticObject==="string"&&h.semanticObject!=="*"&&!h.hideIntentLink&&h.semanticObject.length>0){e[h.semanticObject]=true;}});D.resolve(Object.keys(e).sort());},function(){D.reject.apply(D,arguments);});return D.promise();};g.prototype.getLinks=function(o){var N,t=this,e,m,h,D=new q.Deferred(),j;if(arguments.length===1&&i(arguments[0])){N=arguments[0];j=q.extend(true,{},N);["action","semanticObject"].forEach(function(k){if(N.hasOwnProperty(k)){j[k]=N[k];}});if(j.appStateKey){j.params=j.params||{};j.params["sap-xapp-state"]=[j.appStateKey];delete j.appStateKey;}}else if(arguments.length<=3){q.sap.log.warning("Passing positional arguments to getLinks is deprecated","Please use nominal arguments instead","sap.ushell.services.ClientSideTargetResolution");e=arguments[0];m=arguments[1];h=arguments[2];j={semanticObject:e,params:m,ignoreFormFactor:h};}else{return D.reject("invalid arguments for getLinks").promise();}this._oInboundProvider.getInbounds().then(function(k){t._getLinks(j,k).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};g.prototype._validateGetSemanticObjectLinksArgs=function(o){var e=o.semanticObject,h=o.action,j=!o.hasOwnProperty("action");if(typeof e!=="undefined"||j){if(typeof e!=="string"){q.sap.log.error("invalid input for _getLinks","the semantic object must be a string, got "+Object.prototype.toString.call(e)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}if(j&&e.match(/^\s+$/)){q.sap.log.error("invalid input for _getLinks","the semantic object must be a non-empty string, got '"+e+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}if(!j&&e.length===0){q.sap.log.error("invalid input for _getLinks","the semantic object must not be an empty string, got '"+e+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid semantic object";}}if(typeof h!=="undefined"){if(typeof h!=="string"){q.sap.log.error("invalid input for _getLinks","the action must be a string, got "+Object.prototype.toString.call(h)+" instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action";}if(h.length===0){q.sap.log.error("invalid input for _getLinks","the action must not be an empty string, got '"+h+"' instead","sap.ushell.services.ClientSideTargetResolution");return"invalid action";}}return undefined;};g.prototype._getLinks=function(o,e){var h=o.semanticObject,j=o.action,m=o.params,w=!!o.withAtLeastOneUsedParam,t=!!o.treatTechHintAsFilter,k=o.ignoreFormFactor,r=o.hasOwnProperty("sortResultsBy")?o.sortResultsBy:"intent";if(o.hasOwnProperty("sortResultOnTexts")){q.sap.log.warning("the parameter 'sortResultOnTexts' was experimantal and is no longer supported","getLinks results will be sorted by '"+r+"'","sap.ushell.services.ClientsideTargetResolution");}var v={bExcludeTileInbounds:true};var E=this._validateGetSemanticObjectLinksArgs(o);if(o.tags){v.tags=o.tags;}if(E){return new q.Deferred().reject(E).promise();}if(h==="*"){return q.when([]);}function y(z,m){var H=z.paramsToString(m);return H?"?"+H:"";}var z=this._getURLParsing(),D=new q.Deferred(),F=u.getFormFactor(),B=z.parseParameters(y(z,m)),G={semanticObject:(h===""?undefined:h),action:j,formFactor:(k?undefined:F),params:B};if(t){G.treatTechHintAsFilter=true;}this._getMatchingInbounds(G,e,v).done(function(M){var H={},R=M.map(function(L){var N=h||L.inbound.semanticObject,Q="#"+N+"-"+L.inbound.action,W;if(N==="*"){return undefined;}if(L.inbound.action==="*"){return undefined;}if(L.inbound&&L.inbound.hasOwnProperty("hideIntentLink")&&L.inbound.hideIntentLink===true){return undefined;}if(!H.hasOwnProperty(Q)){H[Q]={matchingInbound:L.inbound,count:1};if(L.inbound.signature.additionalParameters==="ignored"){W=c.filterObjectKeys(B,function(_){return(_.indexOf("sap-")===0)||L.inbound.signature.parameters.hasOwnProperty(_);},false);}else{W=B;}if(w){var X=Object.keys(W).some(function(_){return _.indexOf("sap-")!==0;});if(!X){H[Q].hideReason="getLinks called with 'withAtLeastOneUsedParam = true', but the inbound had no business parameters defined.";return undefined;}}var Y=c.inboundSignatureMeetsParameterOptions(L.inbound.signature.parameters,o.paramsOptions||[]);if(!Y){H[Q].hideReason="inbound signature does not meet the requested parameter filter options";return undefined;}var Z={"intent":Q+y(z,W),"text":L.inbound.title};if(L.inbound.icon){Z.icon=L.inbound.icon;}if(L.inbound.subTitle){Z.subTitle=L.inbound.subTitle;}if(L.inbound.shortTitle){Z.shortTitle=L.inbound.shortTitle;}var $=O.get("inbound.signature.parameters.sap-tag.defaultValue.value",L);if($){Z.tags=[$];}return Z;}H[Q].count++;return undefined;}).filter(function(L){return typeof L==="object";});if(r!=="priority"){R.sort(function(L,N){return L[r]<N[r]?-1:1;});}if(R.length===0){q.sap.log.debug("_getLinks returned no results");}else if(q.sap.log.getLevel()>=q.sap.log.Level.DEBUG){if(q.sap.log.getLevel()>=q.sap.log.Level.TRACE){var J=[];var K=[];R.forEach(function(L){var N=L.intent.split("?")[0];if(H[N].hideReason){K.push(["-",N+"("+H[N].hideReason+")\n"," text:",L.text+"\n"," full intent:",L.intent].join(" "));}else{J.push(["-",N,H[N].count>1?"("+(H[N].count-1)+" others matched)\n":"\n","text:",L.text+"\n","full intent:",L.intent].join(" "));}});q.sap.log.debug("_getLinks filtered to the following unique intents:","\n"+J.join("\n"),"sap.ushell.services.ClientSideTargetResolution");q.sap.log.debug("_getLinks would have also returned the following unique intents, but something prevented this:",K.join("\n"),"sap.ushell.services.ClientSideTargetResolution");}else{q.sap.log.debug("_getLinks filtered to unique intents.","Reporting histogram: \n - "+Object.keys(H).join("\n - "),"sap.ushell.services.ClientSideTargetResolution");}}D.resolve(R);}).fail(D.reject.bind(D));return D.promise();};g.prototype._getMatchingInbounds=function(o,e,h){var t=this,j,k,L,m,r,E,v,D=new q.Deferred();if(h){j=h.tags;E=h.bExcludeTileInbounds;}c.whenDebugEnabled(function(){L=++t._iLogId;});l.begin(function(){function w(M){var z=M.action||(typeof M.action==="undefined"?"<any>":"<invalid-value>");var B=M.semanticObject||(typeof M.semanticObject==="undefined"?"<any>":"<invalid-value>");return t._getURLParsing().constructShellHash({semanticObject:B,action:z,params:M.params});}var y=w(o);return{logId:L,title:"Matching Intent '"+y+"' to inbounds (form factor: "+(o.formFactor||"<any>")+")",moduleName:"sap.ushell.services.ClientSideTargetResolution",stages:["STAGE1: Find matching inbounds","STAGE2: Resolve references","STAGE3: Rematch with references","STAGE4: Sort matched targets"]};});r=o.semanticObject;k=o.action;this._oShellHash=o;m=j?e.getSegmentByTags(j):e.getSegment(r,k);if(E){v=m.filter(function(w){return!w.tileResolutionResult||!w.tileResolutionResult.isCustomTile;});}else{v=m;}s.match(o,v,{},c.isDebugEnabled()).then(function(w){l.log(function(){return{logId:L,stage:1,prefix:"\u2718",lines:Object.keys(w.noMatchReasons||{}).map(function(y){return y+" "+w.noMatchReasons[y];})};});l.log(function(){var y=w.matchResults.map(function(z){return f.formatInbound(z.inbound);});return{logId:L,stage:1,prefix:y.length>0?"\u2705":"\u2718",lines:y.length>0?y:["No inbound was matched"]};});var M=Object.keys(w.missingReferences||[]);if(M.length===0){l.log(function(){return{logId:L,stage:2,prefix:"\u2705",line:"No need to resolve references"};});return new q.Deferred().resolve({matchResults:w.matchResults,referencesToInclude:null}).promise();}l.log(function(){return{logId:L,stage:2,line:"@ Must resolve the following references:",prefix:"\u2022",lines:M};});var R=new q.Deferred();sap.ushell.Container.getService("ReferenceResolver").resolveReferences(M).done(function(y){l.log(function(){return{logId:L,stage:2,line:"\u2705 resolved references with the following values:",prefix:"\u2022",lines:Object.keys(y).map(function(z){return z+": '"+y[z]+"'";})};});R.resolve({matchResults:w.matchResults,referencesToInclude:y});}).fail(function(y){l.log(function(){return{logId:L,stage:2,prefix:"\u274c",line:"Failed to resolve references: "+y};});D.resolve([]);});return R.promise();}).then(function(w){var M,y,R=w.referencesToInclude;if(!R){l.log(function(){return{logId:L,stage:3,line:"rematch was skipped (no references to resolve)",prefix:"\u2705"};});return new q.Deferred().resolve(w).promise();}y=w.matchResults;M=y.map(function(z){return z.inbound;});return s.match(o,M,R,0).then(function(F){l.log(function(){var y=F.matchResults||[];if(y.length>=1){return{logId:L,stage:3,line:"The following inbounds re-matched:",lines:y.map(function(z){return f.formatInbound(z.inbound);}),prefix:"\u2705"};}return{logId:L,stage:3,line:"No inbounds re-matched",prefix:"-"};});return F;});}).then(function(F){var M=F.matchResults||[];if(M.length<=1){l.log(function(){return{logId:L,stage:4,line:"Nothing to sort"};});D.resolve(M);return;}var w=s.sortMatchingResultsDeterministic(F.matchResults||[]);l.log(function(){var y=w.map(function(z){return f.formatInbound(z.inbound||{})+(z.matchesVirtualInbound?" (virtual)":"")+"\n[ Sort Criteria ] "+"\n * 1 * sap-priority: '"+z["sap-priority"]+"'"+"\n * 2 * Sort string: '"+z.priorityString+"\n * 3 * Deterministic blob: '"+s.serializeMatchingResult(z)+"'";});return{logId:L,stage:4,line:"Sorted inbounds as follows:",lines:y,prefix:".",number:true};});D.resolve(w);});return D.promise().then(function(M){l.end(function(){return{logId:L};});return M;});};g.prototype._isIntentSupportedOne=function(e,o){var D=new q.Deferred(),h=this._getURLParsing().parseShellHash(e);if(e==="#"){D.resolve(true);return D.promise();}if(h===undefined){return D.reject("Could not parse shell hash '"+e+"'").promise();}h.formFactor=u.getFormFactor();this._getMatchingInbounds(h,o,{bExcludeTileInbounds:true}).done(function(t){D.resolve(t.length>0);}).fail(function(){D.reject();});return D.promise();};g.prototype.isIntentSupported=function(e){var t=this,D=new q.Deferred();this._oInboundProvider.getInbounds().then(function(o){t._isIntentSupported(e,o).done(D.resolve.bind(D)).fail(D.reject.bind(D));},function(){D.reject.apply(D,arguments);});return D.promise();};g.prototype._isIntentSupported=function(e,o){var t=this,D=new q.Deferred(),m={};D.resolve();function h(j,k){m[j]={supported:k};}var r=[];e.forEach(function(j){var N=t._isIntentSupportedOne(j,o);N.fail(function(E){r.push(E);});N.done(function(k){h(j,k);});D=q.when(D,N);});var R=new q.Deferred();D.done(function(){R.resolve(m);}).fail(function(){R.reject("One or more input intents contain errors: "+r.join(", "));});return R.promise();};g.prototype.getUserDefaultParameterNames=function(){var t=this,D=new q.Deferred();this._oInboundProvider.getInbounds().then(function(o){var r;try{r=t._getUserDefaultParameterNames(o.getAllInbounds());D.resolve(r);}catch(e){D.reject("Cannot get user default parameters from inbounds: "+e);}},function(){D.reject.apply(D,arguments);});return D.promise();};g.prototype._getUserDefaultParameterNames=function(e){var r={simple:{},extended:{}};e.forEach(function(t){var o=t.signature&&t.signature.parameters||[];Object.keys(o).forEach(function(h){var j=o[h],R,E,k,m;if(j){if(j.filter&&j.filter.format==="reference"){k=j.filter.value;}else if(j.defaultValue&&j.defaultValue.format==="reference"){k=j.defaultValue.value;}if(typeof k==="string"){m=sap.ushell.Container.getService("ReferenceResolver");R=m.extractUserDefaultReferenceName(k);if(typeof R==="string"){r.simple[R]={};}E=m.extractExtendedUserDefaultReferenceName(k);if(typeof E==="string"){r.extended[E]={};}}}});});return r;};g.prototype.getEasyAccessSystems=function(m){var r={},o,v,D;m=m||"sapMenu";if(this._oHaveEasyAccessSystemsDeferreds[m]){return this._oHaveEasyAccessSystemsDeferreds[m].promise();}this._oHaveEasyAccessSystemsDeferreds[m]=new q.Deferred();D=this._oHaveEasyAccessSystemsDeferreds[m];function e(h,j,v){if(!h){return false;}var k=[h.semanticObject,h.action].join("-");return v[m][k]&&h.deviceTypes&&j!==undefined&&h.deviceTypes[j];}o=A.getEasyAccessMenuDefinitions().reduce(function(o,E){var h=E.easyAccessMenu.intent.split("-")[1];o[h]={appType:E.type,priority:E.easyAccessMenu.systemSelectionPriority};return o;},{});v={userMenu:A.getEasyAccessMenuDefinitions().reduce(function(h,E){var j=E.easyAccessMenu.intent;h[j]=E.easyAccessMenu.showSystemSelectionInUserMenu;return h;},{}),sapMenu:A.getEasyAccessMenuDefinitions().reduce(function(h,E){var j=E.easyAccessMenu.intent;h[j]=E.easyAccessMenu.showSystemSelectionInSapMenu;return h;},{})};this._oInboundProvider.getInbounds().then(function(h){var L={};h.getAllInbounds().filter(function(j){return e(j,u.getFormFactor(),v);}).forEach(function(E){var j;if(i(E.signature.parameters["sap-system"])&&E.signature.parameters["sap-system"].hasOwnProperty("filter")){j=O.get("signature.parameters.sap-system.filter.value",E);}if(typeof j==="string"){var k=o[E.action].priority;var t=o[E.action].appType;if(!r[j]){L[j]=-1;r[j]={appType:{}};}if(L[j]<k){r[j].text=E.title;L[j]=k;}r[j].appType[t]=true;}else{q.sap.log.warning("Cannot extract sap-system from easy access menu inbound: "+f.formatInbound(E),"This parameter is supposed to be a string. Got '"+j+"' instead.","sap.ushell.services.ClientSideTargetResolution");}});D.resolve(r);},function(){D.reject.apply(D,arguments);});return D.promise();};g.prototype.getSystemContext=function(e){return new Promise(function(r,h){var o;if(e===undefined){o=S.createDefaultSystemContext();r(o);}else{this._oAdapter.resolveSystemAlias(e).done(function(d){o=S.createSystemContextFromSystemAlias(d);r(o);}).fail(function(E){h(E);});}}.bind(this));};g.hasNoAdapter=false;return g;},true);
sap.ui.predefine('sap/ushell/services/CommonDataModel',["sap/ushell/services/_CommonDataModel/PersonalizationProcessor","sap/base/util/ObjectPath","sap/ui/thirdparty/jquery","sap/base/util/isPlainObject","sap/ushell/services/_CommonDataModel/SiteConverter","sap/base/util/isEmptyObject","sap/base/util/deepClone","sap/base/util/Version","sap/ushell/Config","sap/base/util/includes","sap/base/util/values"],function(P,O,q,a,S,b,d,V,C,c,e){"use strict";var f="sap.ushell.services.CommonDataModel",g={"STATIC_LAUNCHER":"sap.ushell.StaticAppLauncher","DYNAMIC_LAUNCHER":"sap.ushell.DynamicAppLauncher","CARD":"sap.ushell.Card"};function h(A,o,p,s){var i=new q.Deferred();this._oAdapter=A;this._oPersonalizationProcessor=new P();this._oSiteDeferred=i;this._oOriginalSite={};this._oPersonalizedSite={};this._oContentProviderIndex={};this._oSiteConverter=new S();this._oPersonalizationDeltas={};this._oGetSitePromise=A.getSite().then(this._loadAndApplyPersonalization.bind(this)).fail(i.reject);}h.prototype._loadAndApplyPersonalization=function(s){this._oOriginalSite=q.extend(true,{},s);var o=new V(s._version);if(o.compareTo("3.1.0")<0){this._oAdapter.getPersonalization(o).then(function(p){if(p){this._oPersonalizationDeltas=d(p);}else{this._oPersonalizationDeltas={version:"3.0.0",_version:"3.0.0"};}this._triggerMixinPersonalisationInSite(s,p);}.bind(this)).fail(this._oSiteDeferred.reject);}else{this._oPersonalizedPages={};this._oOriginalSite=this._ensureStandardVizTypesPresent(this._oOriginalSite);this._oSiteDeferred.resolve(this._oOriginalSite);}};h.prototype._loadAndApplyPagePersonalization=function(p){var s=p.identification.id;var o=new Promise(function(r,i){this._oAdapter.getPersonalization(this._oOriginalSite._version).done(function(j){if(Object.keys(j).length){var v=new V(j._version);if(v.compareTo("3.1.0")<0){j={classicHomePage:j,_version:"3.1.0"};}}this._oPersonalizationDeltas=j;r(j);}.bind(this)).fail(i);}.bind(this));return o.then(function(i){var j=i[s]||{};var k=this._oSiteConverter.convertTo("3.0.0",d(p));return this._triggerMixinPersonalisationInSite(k,j);}.bind(this)).then(function(i){this._oPersonalizedPages[s]=this._oSiteConverter.convertTo("3.1.0",d(i));return this._oPersonalizedPages[s];}.bind(this));};h.prototype._triggerMixinPersonalisationInSite=function(s,p){return new Promise(function(r,i){this._oPersonalizationProcessor.mixinPersonalization(s,p).done(function(o){this._oPersonalizedSite=this._ensureCompleteSite(o);this._oPersonalizedSite=this._ensureGroupsOrder(this._oPersonalizedSite);this._oPersonalizedSite=this._ensureStandardVizTypesPresent(this._oPersonalizedSite);this._oSiteDeferred.resolve(this._oPersonalizedSite);r(this._oPersonalizedSite);}.bind(this)).fail(function(m){this._oSiteDeferred.reject(m);i();}.bind(this));}.bind(this));};h.prototype.getHomepageGroups=function(){var D=new q.Deferred();this._oSiteDeferred.then(function(s){var G=(s&&s.site&&s.site.payload&&s.site.payload.groupsOrder)?s.site.payload.groupsOrder:[];D.resolve(G);});return D.promise();};h.prototype.getGroups=function(){var D=new q.Deferred();this._oSiteDeferred.then(function(s){var G=[];Object.keys(s.groups).forEach(function(k){G.push(s.groups[k]);});D.resolve(G);});return D.promise();};h.prototype.getGroup=function(i){var D=new q.Deferred();this._oSiteDeferred.then(function(s){var G=s.groups[i];if(G){D.resolve(G);}else{D.reject("Group "+i+" not found");}});return D.promise();};h.prototype.getSite=function(){return this._oSiteDeferred.promise();};h.prototype.getPage=function(p){return new Promise(function(r,i){var E=C.last("/core/shell/enablePersonalization");this._oGetSitePromise.done(function(){this._getPageFromAdapter(p).then(function(o){if(E){this._loadAndApplyPagePersonalization(o).then(r).catch(function(){i("Personalization Processor: Cannot mixin the personalization.");});}else{r(o);}}.bind(this)).catch(function(){i("CommonDataModel Service: Cannot get page "+p);});}.bind(this)).fail(i);}.bind(this));};h.prototype._getPageFromAdapter=function(p){if(!this._oAdapter.getPage){return Promise.resolve(this._oOriginalSite.pages[p]);}return this._oAdapter.getPage(p).then(function(o){this._oOriginalSite.pages[p]=o;return o;}.bind(this));};h.prototype.getPages=function(p){return new Promise(function(r,i){var E=C.last("/core/shell/enablePersonalization");this._oGetSitePromise.done(function(){this._getPagesFromAdapter(p).then(function(o){var j=Promise.resolve(e(o));if(E){j=Promise.all(Object.keys(o).map(function(s){return this._loadAndApplyPagePersonalization(o[s]).catch(function(){i("Personalization Processor: Cannot mixin the personalization.");});}.bind(this)));}j.then(function(k){var F=k.filter(function(m){return!!m;});r(F);});}.bind(this)).catch(function(){i("CommonDataModel Service: Cannot get pages");});}.bind(this)).fail(i);}.bind(this));};h.prototype._getPagesFromAdapter=function(p){if(!this._oAdapter.getPages){var o={};for(var s in this._oOriginalSite.pages){if(c(p,this._oOriginalSite.pages[s].identification.id)){o[s]=this._oOriginalSite.pages[s];}}return Promise.resolve(o);}return this._oAdapter.getPages(p).then(function(i){Object.keys(i).forEach(function(s){this._oOriginalSite.pages[s]=i[s];}.bind(this));return i;}.bind(this));};h.prototype.getAllPages=function(){return sap.ushell.Container.getServiceAsync("Menu").then(function(m){return m.getSpacesPagesHierarchy();}).then(function(H){var p=[];H.spaces.forEach(function(s){s.pages.forEach(function(o){if(p.indexOf(o.id)===-1){p.push(o.id);}});});return this.getPages(p);}.bind(this));};h.prototype.getApplications=function(){return new Promise(function(r,i){this._oSiteDeferred.then(function(s){var A=s.applications;if(A){r(A);}else{i("CDM applications not found.");}}).fail(i);}.bind(this));};h.prototype.getVizTypes=function(){return new Promise(function(r,i){this._oSiteDeferred.then(function(s){var v=s.vizTypes;if(v){r(v);}else{i("CDM vizTypes not found.");}}).fail(i);}.bind(this));};h.prototype.getVisualizations=function(){return new Promise(function(r,i){this._oSiteDeferred.then(function(s){var v=s.visualizations;if(v){r(v);}else{i("CDM visualizations not found.");}}).fail(i);}.bind(this));};h.prototype.getGroupFromOriginalSite=function(G){var D=new q.Deferred();if(typeof G==="string"&&this._oOriginalSite&&this._oOriginalSite.groups&&this._oOriginalSite.groups[G]){D.resolve(q.extend(true,{},this._oOriginalSite.groups[G]));}else{D.reject("Group does not exist in original site.");}return D.promise();};h.prototype.getOriginalPage=function(p){return this._oOriginalSite.pages[p];};h.prototype.save=function(p){var D=new q.Deferred(),o,i;if(this._oOriginalSite._version==="3.1.0"){if(!p){return D.reject("No page id was provided").promise();}i=this._oSiteConverter.convertTo("3.0.0",this._oOriginalSite.pages[p]);o=this._oSiteConverter.convertTo("3.0.0",this._oPersonalizedPages[p]);}else{i=this._oOriginalSite;o=this._oPersonalizedSite;}this._oPersonalizationProcessor.extractPersonalization(o,i).done(function(E){if(!b(E)){if(this._oPersonalizationDeltas.version===undefined||this._oPersonalizationDeltas._version===undefined){this._oPersonalizationDeltas.version=this._oOriginalSite._version;this._oPersonalizationDeltas._version=this._oOriginalSite._version;}if(p){this._oPersonalizationDeltas[p]=E;}else{this._oPersonalizationDeltas=E;}this._setPersonalization(this._oPersonalizationDeltas).then(D.resolve).catch(D.reject);}else{D.resolve();}}.bind(this)).fail(function(){D.reject("Personalization Processor: Cannot extract personalization.");});return D.promise();};h.prototype._setPersonalization=function(i,p){if(this._oPendingPersonalizationDeferred){if(!this._oNextPersonalizationQuery){this._oNextPersonalizationQuery={fnNextCall:null,aPromiseResolvers:[]};}return new Promise(function(r,j){this._oNextPersonalizationQuery.fnNextCall=this._setPersonalization.bind(this,i,p);this._oNextPersonalizationQuery.aPromiseResolvers.push({resolve:r,reject:j});}.bind(this));}this._oPendingPersonalizationDeferred=this._oAdapter.setPersonalization(i,p);return new Promise(function(r,j){this._oPendingPersonalizationDeferred.then(r).fail(j).always(function(){delete this._oPendingPersonalizationDeferred;if(this._oNextPersonalizationQuery){var n=this._oNextPersonalizationQuery.fnNextCall();this._cleanupPersonalizationQueuePromises(n,this._oNextPersonalizationQuery.aPromiseResolvers);delete this._oNextPersonalizationQuery;}}.bind(this));}.bind(this));};h.prototype._cleanupPersonalizationQueuePromises=function(n,i){i.forEach(function(p){n.then(p.resolve).catch(p.reject);});};function l(){var p=sap.ushell.Container.getService("PluginManager");return p.loadPlugins("ContentProvider");}h.prototype._getUnreferencedCatalogApplications=function(E){var u={};var A=Object.keys(E.applications).map(function(s){return E.applications[s]["sap.app"].id;}).reduce(function(i,s){i[s]=true;return i;},{});var o=E.catalogs;Object.keys(o).forEach(function(s){var i=o[s].payload.appDescriptors;i.map(function(j){return j.id;}).filter(function(j){return!A[j];}).forEach(function(B){if(!u.hasOwnProperty(s)){u[s]={};}u[s][B]=true;});});return u;};h.prototype._formatUnreferencedApplications=function(s,u){return"One or more apps from "+s+" content provider are not listed among the applications section "+"of the extended site and will be discarded - "+Object.keys(u).map(function(i){var B=Object.keys(u[i]).map(function(U){return"'"+U+"'";});return"From catalog '"+i+"': "+B.join(", ");}).join("; ");};h.prototype._removeUnreferencedApplications=function(E,u){Object.keys(E.catalogs).forEach(function(s){var o=E.catalogs[s].payload;var A=o.appDescriptors;o.appDescriptors=A.filter(function(i){return u[s]&&!u[s][i.id];});});};h.prototype.getExtensionSites=function(){var t=this;var D=new q.Deferred();l().done(function(){var i=Object.keys(t._oContentProviderIndex),T=i.length;if(T===0){D.resolve([]);return;}var G=i.map(function(s,I){var o=t._oContentProviderIndex[s];var j;try{j=o.getSite();if(!j||typeof j.then!=="function"){throw"getSite does not return a Promise";}}catch(E){j=Promise.reject("call to getSite failed: "+E);}return j.then(function(s,k){var m=q.extend(true,{},k);var u=t._getUnreferencedCatalogApplications(k);if(Object.keys(u).length>0){var n=t._formatUnreferencedApplications(s,u);q.sap.log.error(n,null,f);t._removeUnreferencedApplications(m,u);}var L={providerId:s,success:true,site:m};D.notify(L);return L;}.bind(null,s),function(s,k){return{providerId:s,success:false,error:k};}.bind(null,s));});Promise.all(G).then(function(L){D.resolve(L);});});return D.promise();};h.prototype.registerContentProvider=function(i,s){if(this._oContentProviderIndex[i]){q.sap.log.error("a content provider with ID '"+i+"' is already registered",null,f);return;}this._oContentProviderIndex[i]=s;q.sap.log.debug("ContentProvider '"+i+"' was registered",null,f);};h.prototype._ensureCompleteSite=function(p){if(p.groups){var G=p.groups;Object.keys(G).forEach(function(k){if(!G[k]){delete G[k];}else{if(!G[k].payload){G[k].payload={};}if(!G[k].payload.links){G[k].payload.links=[];}if(!G[k].payload.tiles){G[k].payload.tiles=[];}if(!G[k].payload.groups){G[k].payload.groups=[];}}});}return p;};h.prototype._ensureGroupsOrder=function(s){var G=O.get("site.payload.groupsOrder",s),o=s.groups,j,i=0;if(!G){return s;}while(i<G.length){j=G[i];if(!o[j]){G.splice(i,1);}else{i++;}}return s;};h.prototype.getPlugins=(function(){var D,E,p;E=function(s,o){var i,n=Object.keys(o).length;if(n===0){return{};}if(!o.hasOwnProperty("Shell-plugin")){q.sap.log.error("Cannot find inbound with id 'Shell-plugin' for plugin '"+s+"'","plugin startup configuration cannot be determined correctly",f);return{};}if(n>1){q.sap.log.warning("Multiple inbounds are defined for plugin '"+s+"'","plugin startup configuration will be determined using "+"the signature of 'Shell-plugin' inbound.",f);}i=O.get("signature.parameters",o["Shell-plugin"])||{};return Object.keys(i).reduce(function(r,N){var j=O.get(N+".defaultValue.value",i);if(typeof j==="string"){r[N]=j;}return r;},{});};D=function(o){Object.keys(o).filter(function(s){return typeof o[s]==="object";}).forEach(function(s){o[s]=D(o[s]);});return Object.freeze(o);};return function(o){if(o!==undefined){p=o;}if(p){return q.when(p);}p={};return this.getSite().then(function(s){var A=s.applications||{};Object.keys(A).filter(function(i){return O.get("type",this[i]["sap.flp"])==="plugin";},A).forEach(function(i){var j,k,m=this[i],n={};if(!a(m["sap.platform.runtime"])){q.sap.log.error("Cannot find 'sap.platform.runtime' section for plugin '"+i+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel");}else if(!a(m["sap.platform.runtime"].componentProperties)){q.sap.log.error("Cannot find 'sap.platform.runtime/componentProperties' "+"section for plugin '"+i+"'","plugin might not be started correctly","sap.ushell.services.CommonDataModel");}else{n=m["sap.platform.runtime"].componentProperties;}p[i]={url:n.url,component:m["sap.ui5"].componentName};var r=O.get("crossNavigation.inbounds",m["sap.app"])||{};k=E(i,r);j=q.extend(n.config||{},k);if(j){p[i].config=j;}if(n.asyncHints){p[i].asyncHints=n.asyncHints;}var t=O.get("deviceTypes",m["sap.ui"]);if(t){p[i].deviceTypes=t;}},A);return D(p);},function(v){return v;});};})();h.prototype._ensureStandardVizTypesPresent=function(s){if(!(s._version&&s._version.startsWith("3."))){return s;}if(!s.vizTypes){s.vizTypes={};}if(!s.vizTypes[g.STATIC_LAUNCHER]){s.vizTypes[g.STATIC_LAUNCHER]=q.sap.loadResource("sap/ushell/components/tiles/cdm/applauncher/manifest.json");}if(!s.vizTypes[g.DYNAMIC_LAUNCHER]){s.vizTypes[g.DYNAMIC_LAUNCHER]=q.sap.loadResource("sap/ushell/components/tiles/cdm/applauncherdynamic/manifest.json");}if(!s.vizTypes[g.CARD]){s.vizTypes[g.CARD]=q.sap.loadResource("sap/ushell/services/_CommonDataModel/vizTypeDefaults/cardManifest.json");}return s;};h.prototype.getMenuEntries=function(m){return new Promise(function(r,i){this._oSiteDeferred.then(function(s){var M=O.get("menus."+m+".payload.menuEntries",s);r(d(M)||[]);});}.bind(this));};h.hasNoAdapter=false;return h;},true);
sap.ui.predefine('sap/ushell/services/ContentExtensionAdapterFactory',["sap/ushell/Config","sap/ushell/services/_ContentExtensionAdapterFactory/ContentExtensionAdapterConfig","sap/ui/thirdparty/jquery"],function(C,a,q){"use strict";var b={};b.getAdapters=function(c){var d=b._getConfigAdapters(c);var A={};var e=d.map(function(o){var E=C.last(o.configSwitch);if(!E){return Promise.resolve();}var f=b._getAdapter(o);f.then(function(g){A[o.contentProviderName]=g;});return f;});return new Promise(function(r){q.when.apply(q,e).then(function(){r(A);});});};b._getConfigAdapters=function(c){if(!c){c=a._getConfigAdapters();}if(!Array.isArray(c)){c=[c];}return c;};b._getAdapter=function(c){var d=new q.Deferred();var A=c.configHandler?c.configHandler():{};var m=c.adapter.replace(/\./g,"/");sap.ui.require([m],function(){var i=b._getAdapterInstance(c.adapter,c.system,null,A);d.resolve(i);});return d.promise();};b._getAdapterInstance=function(A,s,p,c){var d=q.sap.getObject(A);if(d){var D={config:c||{}};return new d(s,p,D);}return null;};return b;});
sap.ui.require.preload({
	"sap/ushell/bootstrap/_SchedulingAgent/LoadingConfiguration.json":'{"OrderOfLoadingBlocks":["AfterCoreExtLight","FLPPlugins"],"LoadingBlocks":{"AfterCoreExtLight":{"LoadingSteps":[{"LoadingStep":"StartScheduler","canBeLoadedAsync":false},{"LoadingStep":"MessagePopoverInit","canBeLoadedAsync":true},{"LoadingStep":"UsageAnalytics","canBeLoadedAsync":true},{"LoadingStep":"MenuBar","canBeLoadedAsync":true}],"maxWaitInMs":0},"FLPPlugins":{"LoadingSteps":[{"LoadingStep":"ConditionalWaitForAppLoading","canBeLoadedAsync":false},{"LoadingStep":"LoadPlugins","canBeLoadedAsync":true},{"LoadingStep":"Notifications","canBeLoadedAsync":false},{"LoadingStep":"UserImage","canBeLoadedAsync":false},{"LoadingStep":"Search","canBeLoadedAsync":false},{"LoadingStep":"MeArea","canBeLoadedAsync":false},{"LoadingStep":"ProductSwitch","canBeLoadedAsync":false},{"LoadingStep":"UserSettings","canBeLoadedAsync":false},{"LoadingStep":"FirstSegmentCompleteLoaded","canBeLoadedAsync":false},{"LoadingStep":"WarmupPlugins","canBeLoadedAsync":true}],"maxWaitInMs":0}}}',
	"sap/ushell/bootstrap/_SchedulingAgent/StepConfiguration.json":'{"StartScheduler":{"loadingMode":"continueOnEvent","continueOnEvent":{"eventName":"startScheduler"},"userCanTrigger":false,"canBeInterrupted":false},"LoadPlugins":{"loadingMode":"byEvent","byEvent":{"eventName":"loadRendererExtensions","eventData":""},"Dependencies":[]},"MessagePopoverInit":{"loadingMode":"byEvent","byEvent":{"eventName":"initMessagePopover","eventData":""},"Dependencies":[]},"UsageAnalytics":{"loadingMode":"byEvent","byEvent":{"eventName":"loadUsageAnalytics","eventData":""},"Dependencies":[]},"MenuBar":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.MenuBar","manifest":true},"url":"sap/ushell/components/shell/MenuBar"},"configSwitch":[{"path":"/core/spaces/enabled","assertionValue":true}],"userCanTrigger":false,"canBeInterrupted":false},"Notifications":{"loadingMode":"byComponentCreate","excludedFLPStates":["lean","lean-home"],"byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.Notifications","manifest":false},"url":"sap/ushell/components/shell/Notifications"},"configSwitch":[{"path":"/core/shell/model/enableNotifications","assertionValue":true}],"userCanTrigger":false,"canBeInterrupted":false},"MeArea":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.MeArea","manifest":false},"url":"sap/ushell/components/shell/MeArea"},"userCanTrigger":false,"canBeInterrupted":false},"ProductSwitch":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.ProductSwitch","manifest":false},"url":"sap/ushell/components/shell/ProductSwitch"},"configSwitch":[{"path":"/core/productSwitch/enabled","assertionValue":true}],"userCanTrigger":false,"canBeInterrupted":false},"UserSettings":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.Settings","manifest":false},"url":"sap/ushell/components/shell/Settings"},"userCanTrigger":false,"canBeInterrupted":false},"UserImage":{"loadingMode":"byComponentCreate","byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.UserImage","manifest":false},"url":"sap/ushell/components/shell/UserImage"},"userCanTrigger":false,"canBeInterrupted":false},"Search":{"loadingMode":"byComponentCreate","excludedFLPStates":["lean","lean-home"],"byComponentCreate":{"enabled":true,"ui5ComponentOptions":{"name":"sap.ushell.components.shell.Search","manifest":false},"url":"sap/ushell/components/shell/Search"},"userCanTrigger":false,"canBeInterrupted":false},"FirstSegmentCompleteLoaded":{"loadingMode":"continueOnEvent","continueOnEvent":{"eventName":"firstSegmentCompleteLoaded"},"userCanTrigger":false,"canBeInterrupted":false},"WarmupPlugins":{"loadingMode":"byEvent","byEvent":{"eventName":"loadWarmupPlugins","eventData":""},"Dependencies":["FirstSegmentCompleteLoaded","LoadPlugins"]},"ConditionalWaitForAppLoading":{"loadingMode":"waitInMs","waitInMs":{"waitingTime":3000},"mandatoryFLPStates":["app"]}}',
	"sap/ushell/ui/ShellHeader.fragment.xml":'<core:FragmentDefinition xmlns="sap.ushell.ui" xmlns:core="sap.ui.core" xmlns:shell="sap.ushell.ui.shell"><ShellHeader id="shell-header" showLogo="{/showLogo}" visible="{/headerVisible}" homeUri="{/rootIntent}" headItems="{path:\'/headItems\',factory:\'.shellUpdateAggItem\'}" headEndItems="{path:\'/headEndItems\',factory:\'.shellUpdateAggItem\',filters:[{path:\'\',test:\'.isHeadEndItemNotInOverflow\'}]}" centralAreaElement="{/centralAreaElement}" title="{/title}"><appTitle><shell:ShellAppTitle id="shellAppTitle" text="{/application/title}" tooltip="{i18n&gt;shellNavMenu_openMenuTooltip}"/></appTitle></ShellHeader></core:FragmentDefinition>',
	"sap/ushell/ui/ShellLayout.fragment.xml":'<core:FragmentDefinition xmlns="sap.ushell.ui.shell" xmlns:core="sap.ui.core" xmlns:ui="sap.ushell.ui"><ShellLayout floatingContainerVisible="false" toolAreaVisible="{/currentState/toolAreaVisible}" enableCanvasShapes="{/enableBackgroundShapes}" id="shell"><canvasSplitContainer><SplitContainer id="shell-split" showSecondaryContent="{/currentState/showPane}" subHeader="{path:\'/currentState/subHeader\',factory:\'.shellUpdateAggItem\'}" secondaryContent="{path:\'/currentState/paneContent\',factory:\'.shellUpdateAggItem\'}"><content><core:ComponentContainer id="menuBarComponentContainer" async="true"/><ui:AppContainer id="viewPortContainer" beforeNavigate=".onBeforeNavigate" afterNavigate=".onAfterNavigate"/></content><secondaryContent/></SplitContainer></canvasSplitContainer><rightFloatingContainer><RightFloatingContainer id="right-floating-container" top="6.875" hideItemsAfterPresentation="true" visible="{/currentState/showRightFloatingContainer}" floatingContainerItems="{path:\'/currentState/RightFloatingContainerItems\',factory:\'.shellUpdateAggItem\'}"/></rightFloatingContainer></ShellLayout></core:FragmentDefinition>',
/*!!
 * Hasher <http://github.com/millermedeiros/hasher>
 * @author Miller Medeiros
 * @version 1.2.0 (2013/11/11 03:18 PM)
 * Released under the MIT License
 */
	"sap/ui/thirdparty/hasher.js":function(){;(function(){var f=function(s){var h=(function(w){var P=25,d=w.document,a=w.history,S=s.Signal,h,_,b,c,g,i,j=/#(.*)$/,k=/(\?.*)|(\#.*)/,l=/^\#/,m=(!+"\v1"),n=('onhashchange'in w)&&d.documentMode!==7,o=m&&!n,p=(location.protocol==='file:');function q(e){return String(e||'').replace(/\W/g,"\\$&");}function r(e){if(!e)return'';var D=new RegExp('^'+q(h.prependHash)+'|'+q(h.appendHash)+'$','g');return e.replace(D,'');}function t(){var D=j.exec(h.getURL());var E=(D&&D[1])||'';try{return h.raw?E:decodeURIComponent(E);}catch(e){return E;}}function u(){return(g)?g.contentWindow.frameHash:null;}function v(){g=d.createElement('iframe');g.src='about:blank';g.style.display='none';d.body.appendChild(g);}function x(){if(g&&_!==u()){var e=g.contentWindow.document;e.open();e.write('<html><head><title>'+d.title+'</title><script type="text/javascript">var frameHash="'+_+'";</script></head><body>&nbsp;</body></html>');e.close();}}function y(e,D){if(_!==e){var E=_;_=e;if(o){if(!D){x();}else{g.contentWindow.frameHash=e;}}return function(){h.changed.dispatch(r(e),r(E));};}}if(o){i=function(){var e=t(),D=u(),E;if(D!==_&&D!==e){h.setHash(r(D));}else if(e!==_){E=y(e);E&&E();}};}else{i=function(){var e=t(),D;if(e!==_){D=y(e);D&&D();}};}function z(e,D,E){if(e.addEventListener){e.addEventListener(D,E,false);}else if(e.attachEvent){e.attachEvent('on'+D,E);}}function A(e,D,E){if(e.removeEventListener){e.removeEventListener(D,E,false);}else if(e.detachEvent){e.detachEvent('on'+D,E);}}function B(e){e=Array.prototype.slice.call(arguments);var D=e.join(h.separator);D=D?h.prependHash+D.replace(l,'')+h.appendHash:D;return D;}function C(e){e=encodeURI(e);if(m&&p){e=e.replace(/\?/,'%3F');}return e;}h={VERSION:'1.2.0',raw:false,appendHash:'',prependHash:'/',separator:'/',changed:new S(),stopped:new S(),initialized:new S(),init:function(){if(c)return;_=t();if(n){z(w,'hashchange',i);}else{if(o){if(!g){v();}x();}b=setInterval(i,P);}c=true;h.initialized.dispatch(r(_));},stop:function(){if(!c)return;if(n){A(w,'hashchange',i);}else{clearInterval(b);b=null;}c=false;h.stopped.dispatch(r(_));},isActive:function(){return c;},getURL:function(){return w.location.href;},getBaseURL:function(){return h.getURL().replace(k,'');},setHash:function(e){var D;e=B.apply(null,arguments);if(e!==_){D=y(e);if(!h.raw){e=C(e);}w.location.hash='#'+e;D&&D();}},replaceHash:function(e){var D;e=B.apply(null,arguments);if(e!==_){D=y(e);if(!h.raw){e=C(e);}w.location.replace('#'+e);D&&D();}},getHash:function(){return r(_);},getHashAsArray:function(){return h.getHash().split(h.separator);},dispose:function(){h.stop();h.initialized.dispose();h.stopped.dispose();h.changed.dispose();g=h=w.hasher=null;},toString:function(){return'[hasher version="'+h.VERSION+'" hash="'+h.getHash()+'"]';}};h.initialized.memorize=true;return h;}(window));return h;};if(typeof define==='function'&&define.amd){define(['signals'],f);}else if(typeof exports==='object'){module.exports=f(require('signals'));}else{window['hasher']=f(window['signals']);}}());
},
/** @license
 * JS Signals <http://millermedeiros.github.com/js-signals/>
 * Released under the MIT license
 * Author: Miller Medeiros
 * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
 */
	"sap/ui/thirdparty/signals.js":function(){(function(g){function S(b,l,i,c,p){this._listener=l;this._isOnce=i;this.context=c;this._signal=b;this._priority=p||0;}S.prototype={active:true,params:null,execute:function(p){var h,b;if(this.active&&!!this._listener){b=this.params?this.params.concat(p):p;h=this._listener.apply(this.context,b);if(this._isOnce){this.detach();}}return h;},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null;},isBound:function(){return(!!this._signal&&!!this._listener);},isOnce:function(){return this._isOnce;},getListener:function(){return this._listener;},getSignal:function(){return this._signal;},_destroy:function(){delete this._signal;delete this._listener;delete this.context;},toString:function(){return'[SignalBinding isOnce:'+this._isOnce+', isBound:'+this.isBound()+', active:'+this.active+']';}};function v(l,n){if(typeof l!=='function'){throw new Error('listener is a required param of {fn}() and should be a Function.'.replace('{fn}',n));}}function a(){this._bindings=[];this._prevParams=null;var b=this;this.dispatch=function(){a.prototype.dispatch.apply(b,arguments);};}a.prototype={VERSION:'1.0.0',memorize:false,_shouldPropagate:true,active:true,_registerListener:function(l,i,b,p){var c=this._indexOfListener(l,b),d;if(c!==-1){d=this._bindings[c];if(d.isOnce()!==i){throw new Error('You cannot add'+(i?'':'Once')+'() then add'+(!i?'':'Once')+'() the same listener without removing the relationship first.');}}else{d=new S(this,l,i,b,p);this._addBinding(d);}if(this.memorize&&this._prevParams){d.execute(this._prevParams);}return d;},_addBinding:function(b){var n=this._bindings.length;do{--n;}while(this._bindings[n]&&b._priority<=this._bindings[n]._priority);this._bindings.splice(n+1,0,b);},_indexOfListener:function(l,c){var n=this._bindings.length,b;while(n--){b=this._bindings[n];if(b._listener===l&&b.context===c){return n;}}return-1;},has:function(l,c){return this._indexOfListener(l,c)!==-1;},add:function(l,b,p){v(l,'add');return this._registerListener(l,false,b,p);},addOnce:function(l,b,p){v(l,'addOnce');return this._registerListener(l,true,b,p);},remove:function(l,c){v(l,'remove');var i=this._indexOfListener(l,c);if(i!==-1){this._bindings[i]._destroy();this._bindings.splice(i,1);}return l;},removeAll:function(){var n=this._bindings.length;while(n--){this._bindings[n]._destroy();}this._bindings.length=0;},getNumListeners:function(){return this._bindings.length;},halt:function(){this._shouldPropagate=false;},dispatch:function(p){if(!this.active){return;}var b=Array.prototype.slice.call(arguments),n=this._bindings.length,c;if(this.memorize){this._prevParams=b;}if(!n){return;}c=this._bindings.slice();this._shouldPropagate=true;do{n--;}while(c[n]&&this._shouldPropagate&&c[n].execute(b)!==false);},forget:function(){this._prevParams=null;},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams;},toString:function(){return'[Signal active:'+this.active+' numListeners:'+this.getNumListeners()+']';}};var s=a;s.Signal=a;if(typeof define==='function'&&define.amd){define(function(){return s;});}else{g['signals']=s;}}(this));
},
/** @license
 * crossroads <http://millermedeiros.github.com/crossroads.js/>
 * Author: Miller Medeiros | MIT License
 * v0.12.0 (2013/01/21 13:47)
 */
	"sap/ui/thirdparty/crossroads.js":function(){(function(){var f=function(s){var c,_,U;_=(/t(.+)?/).exec('t')[1]==='';function a(i,v){if(i.indexOf){return i.indexOf(v);}else{var n=i.length;while(n--){if(i[n]===v){return n;}}return-1;}}function b(l,m){var i=a(l,m);if(i!==-1){l.splice(i,1);}}function d(v,i){return'[object '+i+']'===Object.prototype.toString.call(v);}function e(v){return d(v,'RegExp');}function g(v){return d(v,'Array');}function h(v){return typeof v==='function';}function t(v){var r;if(v===null||v==='null'){r=null;}else if(v==='true'){r=true;}else if(v==='false'){r=false;}else if(v===U||v==='undefined'){r=U;}else if(v===''||isNaN(v)){r=v;}else{r=parseFloat(v);}return r;}function j(v){var n=v.length,r=[];while(n--){r[n]=t(v[n]);}return r;}function k(i,l){var q=(i||'').replace('?','').split('&'),n=q.length,o={},m,v;while(n--){m=q[n].split('=');v=l?t(m[1]):m[1];o[m[0]]=(typeof v==='string')?decodeURIComponent(v):v;}return o;}function C(){this.bypassed=new s.Signal();this.routed=new s.Signal();this._routes=[];this._prevRoutes=[];this._piped=[];this.resetState();}C.prototype={greedy:false,greedyEnabled:true,ignoreCase:true,ignoreState:false,shouldTypecast:false,normalizeFn:null,resetState:function(){this._prevRoutes.length=0;this._prevMatchedRequest=null;this._prevBypassedRequest=null;},create:function(){return new C();},addRoute:function(p,i,l){var r=new R(p,i,l,this);this._sortedInsert(r);return r;},removeRoute:function(r){b(this._routes,r);r._destroy();},removeAllRoutes:function(){var n=this.getNumRoutes();while(n--){this._routes[n]._destroy();}this._routes.length=0;},parse:function(r,l){r=r||'';l=l||[];if(!this.ignoreState&&(r===this._prevMatchedRequest||r===this._prevBypassedRequest)){return;}var m=this._getMatchedRoutes(r),i=0,n=m.length,o;if(n){this._prevMatchedRequest=r;this._notifyPrevRoutes(m,r);this._prevRoutes=m;while(i<n){o=m[i];o.route.matched.dispatch.apply(o.route.matched,l.concat(o.params));o.isFirst=!i;this.routed.dispatch.apply(this.routed,l.concat([r,o]));i+=1;}}else{this._prevBypassedRequest=r;this.bypassed.dispatch.apply(this.bypassed,l.concat([r]));}this._pipeParse(r,l);},_notifyPrevRoutes:function(m,r){var i=0,p;while(p=this._prevRoutes[i++]){if(p.route.switched&&this._didSwitch(p.route,m)){p.route.switched.dispatch(r);}}},_didSwitch:function(r,m){var l,i=0;while(l=m[i++]){if(l.route===r){return false;}}return true;},_pipeParse:function(r,l){var i=0,m;while(m=this._piped[i++]){m.parse(r,l);}},getNumRoutes:function(){return this._routes.length;},_sortedInsert:function(r){var i=this._routes,n=i.length;do{--n;}while(i[n]&&r._priority<=i[n]._priority);i.splice(n+1,0,r);},_getMatchedRoutes:function(r){var i=[],l=this._routes,n=l.length,m;while(m=l[--n]){if((!i.length||this.greedy||m.greedy)&&m.match(r)){i.push({route:m,params:m._getParamsArray(r)});}if(!this.greedyEnabled&&i.length){break;}}return i;},pipe:function(o){this._piped.push(o);},unpipe:function(o){b(this._piped,o);},toString:function(){return'[crossroads numRoutes:'+this.getNumRoutes()+']';}};c=new C();c.VERSION='0.12.0';c.NORM_AS_ARRAY=function(r,v){return[v.vals_];};c.NORM_AS_OBJECT=function(r,v){return[v];};function R(p,i,l,r){var m=e(p),n=r.patternLexer;this._router=r;this._pattern=p;this._paramsIds=m?null:n.getParamIds(p);this._optionalParamsIds=m?null:n.getOptionalParamsIds(p);this._matchRegexp=m?p:n.compilePattern(p,r.ignoreCase);this.matched=new s.Signal();this.switched=new s.Signal();if(i){this.matched.add(i);}this._priority=l||0;}R.prototype={greedy:false,rules:void(0),match:function(r){r=r||'';return this._matchRegexp.test(r)&&this._validateParams(r);},_validateParams:function(r){var i=this.rules,v=this._getParamsObject(r),l;for(l in i){if(l!=='normalize_'&&i.hasOwnProperty(l)&&!this._isValidParam(r,l,v)){return false;}}return true;},_isValidParam:function(r,p,v){var i=this.rules[p],l=v[p],m=false,n=(p.indexOf('?')===0);if(l==null&&this._optionalParamsIds&&a(this._optionalParamsIds,p)!==-1){m=true;}else if(e(i)){if(n){l=v[p+'_'];}m=i.test(l);}else if(g(i)){if(n){l=v[p+'_'];}m=this._isValidArrayRule(i,l);}else if(h(i)){m=i(l,r,v);}return m;},_isValidArrayRule:function(i,v){if(!this._router.ignoreCase){return a(i,v)!==-1;}if(typeof v==='string'){v=v.toLowerCase();}var n=i.length,l,m;while(n--){l=i[n];m=(typeof l==='string')?l.toLowerCase():l;if(m===v){return true;}}return false;},_getParamsObject:function(r){var i=this._router.shouldTypecast,v=this._router.patternLexer.getParamValues(r,this._matchRegexp,i),o={},n=v.length,p,l;while(n--){l=v[n];if(this._paramsIds){p=this._paramsIds[n];if(p.indexOf('?')===0&&l){o[p+'_']=l;l=k(l,i);v[n]=l;}if(_&&l===''&&a(this._optionalParamsIds,p)!==-1){l=void(0);v[n]=l;}o[p]=l;}o[n]=l;}o.request_=i?t(r):r;o.vals_=v;return o;},_getParamsArray:function(r){var n=this.rules?this.rules.normalize_:null,p;n=n||this._router.normalizeFn;if(n&&h(n)){p=n(r,this._getParamsObject(r));}else{p=this._getParamsObject(r).vals_;}return p;},interpolate:function(r){var i=this._router.patternLexer.interpolate(this._pattern,r);if(!this._validateParams(i)){throw new Error('Generated string doesn\'t validate against `Route.rules`.');}return i;},extrapolate:function(r){var i={};if(!r){return i;}var p=this._getParamsObject(r);this._paramsIds.forEach(function(l){if(p.hasOwnProperty(l)){i[l]=p[l];}});return i;},dispose:function(){this._router.removeRoute(this);},_destroy:function(){this.matched.dispose();this.switched.dispose();this.matched=this.switched=this._pattern=this._matchRegexp=null;},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+']';}};C.prototype.patternLexer=(function(){var E=/[\\.+*?\^$\[\](){}\/'#]/g,L=/^\/|\/$/g,i=/\/$/g,P=/(?:\{|:)([^}:]+)(?:\}|:)/g,r=function(z,A,B){var D=B.lastIndexOf("__CR_RS__"),F=B.indexOf("__CR_RQ__"),G=B.indexOf("__CR_OQ__"),H=B.indexOf("\\/",A),I=Math.min(G===-1?B.length:G,F===-1?B.length:F),J=A+z.length;if(J>=I||J<D||J<H){return T.OS.res_normal;}else{return T.OS.res_arsbq;}},T={'OS':{rgx:/([:})]|\w(?=\/))\/?(:|(?:\{\?))/g,save:'$1{{id}}$2',res:r,res_normal:'\\/?',res_arsbq:'(?:(?:\\/(?=(?:[^\\/?]+)?))|^\\/?|\\/?$)'},'RS':{rgx:/([:}])\/?(\{)/g,save:'$1{{id}}$2',res:'\\/'},'RQ':{rgx:/\{\?([^}]+)\}/g,res:'\\?([^#]+)'},'OQ':{rgx:/:\?([^:]+):/g,res:'(?:\\?([^#]*))?'},'OR':{rgx:/:([^:]+)\*:/g,res:'(.*)?'},'RR':{rgx:/\{([^}]+)\*\}/g,res:'(.+)'},'RP':{rgx:/\{([^}]+)\}/g,res:'([^\\/?]+)'},'OP':{rgx:/:([^:]+):/g,res:'([^\\/?]+)?(?:\\/(?!\\/))?'}},l=1,S=2,m=3,n=l;function p(){var z,A;for(z in T){if(T.hasOwnProperty(z)){A=T[z];A.id='__CR_'+z+'__';A.save=('save'in A)?A.save.replace('{{id}}',A.id):A.id;A.rRestore=new RegExp(A.id,'g');}}}p();function o(z,A){var B=[],D;z.lastIndex=0;while(D=z.exec(A)){B.push(D[1]);}return B;}function q(z){return o(P,z);}function u(z){return o(T.OP.rgx,z);}function v(z,A){z=z||'';if(z){if(n===l){z=z.replace(L,'');}else if(n===m){z=z.replace(i,'');}z=w(z,'rgx','save');z=z.replace(E,'\\$&');z=w(z,'rRestore','res');if(n===l){z='\\/?'+z;}}if(n!==S){z+='\\/?';}return new RegExp('^'+z+'$',A?'i':'');}function w(z,A,B){var D,F;for(F in T){if(T.hasOwnProperty(F)){D=T[F];z=z.replace(D[A],D[B]);}}return z;}function x(z,A,B){var D=A.exec(z);if(D){D.shift();if(B){D=j(D);}}return D;}function y(z,A){if(typeof z!=='string'){throw new Error('Route pattern should be a string.');}var B=function(D,F){var G,H;if(F.charAt(0)==='?'){H=A[F]||A[F.substring(1)];}else{H=A[F];}if(H!=null){if(typeof H==='object'){var I=[];for(var J in H){I.push(encodeURI(J+'='+H[J]));}G='?'+I.join('&');}else{G=String(H);}if(D.indexOf('*')===-1&&G.indexOf('/')!==-1){throw new Error('Invalid value "'+G+'" for segment "'+D+'".');}}else if(D.indexOf('{')!==-1){throw new Error('The segment '+D+' is required.');}else{G='';}return G;};if(!T.OS.trail){T.OS.trail=new RegExp('(?:'+T.OS.id+')+$');}return z.replace(T.OS.rgx,T.OS.save).replace(P,B).replace(T.OS.trail,'').replace(T.OS.rRestore,'/');}return{strict:function(){n=S;},loose:function(){n=l;},legacy:function(){n=m;},getParamIds:q,getOptionalParamsIds:u,getParamValues:x,compilePattern:v,interpolate:y};}());return c;};if(typeof define==='function'&&define.amd){define(['signals'],f);}else{window['crossroads']=f(window['signals']);}}());
},
// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
	"sap/ui2/srvc/ODataService.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ui2.srvc.ODataService");var r;r=function(){jQuery.sap.require.apply(this,arguments);};function n(){}var c;if(!sap.ui2.srvc.Map){r("sap.ui2.srvc.utils");}c=new sap.ui2.srvc.Map();sap.ui2.srvc.ODataService=function(o,d){var b;this.getCsrfToken=function(){if(c.get(b)&&c.get(b).token){return c.get(b).token;}return"";};this.getDefaultErrorHandler=function(){return d;};this.openBatchQueue=function(){o.openBatchQueue();};this.refreshCsrfToken=function(s,f){var t;if(typeof s!=="function"){throw new sap.ui2.srvc.Error("Success callback is not a function","sap.ui2.srvc.ODataService");}f=f||d;t=c.get(b);if(!t.fetchingInProgress){t.token=undefined;t.fetchingInProgress=true;o.read("",function(){if(!c.get(b)||!c.get(b).token){f("No CSRF token delivered");t.errorHandlers.forEach(function(h){h("No CSRF token delivered");});}else{s();t.successHandlers.forEach(function(h){h();});}t.successHandlers=[];t.errorHandlers=[];t.fetchingInProgress=false;},function(){t.fetchingInProgress=false;f.apply(null,arguments);});}else{t.successHandlers.push(s);t.errorHandlers.push(f);}};this.setCsrfToken=function(N){var t;if(N&&typeof N!=="string"){throw new sap.ui2.srvc.Error("Invalid CSRF token: "+N,"sap.ui2.srvc.ODataService");}t=c.get(b);t.token=N;};this.setDefaultErrorHandler=function(N){if(N&&typeof N!=="function"){throw new sap.ui2.srvc.Error("Error callback is not a function","sap.ui2.srvc.ODataService");}d=N||n;};this.submitBatchQueue=function(){o.submitBatchQueue.apply(o,arguments);};this.toString=function(v){var R=['sap.ui2.srvc.ODataService({'];if(v){R.push('csrfToken:"',this.getCsrfToken(),'"');R.push(',oODataWrapper:',o.toString(true));}R.push('})');return R.join('');};if(!sap.ui2.srvc.Error){r("sap.ui2.srvc.error");}if(!o){throw new sap.ui2.srvc.Error("Missing OData wrapper","sap.ui2.srvc.ODataService");}b=o.getBaseUrl();if(!c.get(b)){c.put(b,{fetchingInProgress:false,successHandlers:[],errorHandlers:[]});}this.setDefaultErrorHandler(d);};sap.ui2.srvc.ODataService.resetSharedCsrfTokens=function(){c=new sap.ui2.srvc.Map();};}());
},
	"sap/ui2/srvc/ODataWrapper.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ui2.srvc.ODataWrapper");var r=function(){jQuery.sap.require.apply(this,arguments);};function n(){}sap.ui2.srvc.testPublishAt=sap.ui2.srvc.testPublishAt||function(){};if(typeof OData!=="object"){r("sap.ui.thirdparty.datajs");}function a(d,R){if(sap.ui2.srvc.isArray(d)){d.forEach(function(D){D.reject(R);});}else{d.reject(R);}}sap.ui2.srvc.ODataWrapper=function(s,o){var S="saplb",B,C,d,R,t=this,e,f;function g(A){var s={};s.baseUrl=A[0];if(typeof A[2]==='boolean'){s.supportsChangeSets=A[2];}return s;}sap.ui2.srvc.testPublishAt(t);function k(){return B;}sap.ui2.srvc.testPublishAt(t);function l(K,H){var i;K=K.toLowerCase();for(i in H){if(Object.prototype.hasOwnProperty.call(H,i)&&i.toLowerCase()===K){return H[i];}}return undefined;}function m(H){var i=s["sap-language"]||sap.ui2.srvc.ODataWrapper["sap-language"],j=s["sap-statistics"]||sap.ui2.srvc.ODataWrapper["sap-statistics"],A=s["sap-client"]||sap.ui2.srvc.ODataWrapper["sap-client"];H=H||{};if(i){H["sap-language"]=i;}if(j||(j==="false")){H["sap-statistics"]=""+j;}if(A){H["sap-client"]=A;}return H;}function p(H){H=H||{};var i=sap.ui2.srvc.ODataWrapper.oStickySessionConfiguration[e];if(typeof i==="undefined"){return H;}if(i&&i.enabled&&typeof i.value!=="undefined"){H[S]=i.value;}return H;}sap.ui2.srvc.testPublishAt(t);function q(i){var H,j=sap.ui2.srvc.ODataWrapper.oStickySessionConfiguration[e];if(!j||!j.enabled){return;}H=l(S,i);if(typeof H==="undefined"){return;}if(j.value!==H){j.value=H;}}sap.ui2.srvc.testPublishAt(t);function u(H){return l("x-csrf-token",H)||"";}sap.ui2.srvc.testPublishAt(t);function v(i,M,P,j,F,H,I){var A;j=j||n;F=F||o.getDefaultErrorHandler();t.check(j,F);A={'Accept':"application/json",'Accept-Language':(sap.ui&&sap.ui.getCore().getConfiguration().getLanguage())||"",'X-CSRF-Token':o.getCsrfToken()};m(A);p(A);OData.request({requestUri:i,method:M,data:P,headers:A},function(D,E){q((E||{}).headers);jQuery.sap.log.debug("Received OData response for "+M+' "'+i+'"',null,"sap.ui2.srvc.ODataWrapper");sap.ui2.srvc.call(j.bind(null,D),F);},function(E){function D(){F.apply(null,arguments);}function G(){j.apply(null,arguments);}if(!I&&E.response.statusCode===403&&u(E.response.headers).toLowerCase()==="required"){jQuery.sap.log.debug("CSRF token required for "+M+' "'+i+'", refreshing it',JSON.stringify(E.response),"sap.ui2.srvc.ODataWrapper");o.refreshCsrfToken(v.bind(t,i,M,P,G,D,H,true),D);}else{t.onError(M,i,F,null,E);}},H);jQuery.sap.log.debug("Sent OData request for "+M+' "'+i+'"',null,"sap.ui2.srvc.ODataWrapper");}sap.ui2.srvc.testPublishAt(t);function w(j){var i=j.indexOf(e);if(i<0){throw new sap.ui2.srvc.Error('Not relative to base URL "'+e+'": '+j,"sap.ui2.srvc.ODataWrapper");}return j.slice(i+e.length);}sap.ui2.srvc.testPublishAt(t);function x(i){if(/^\//.test(i)){throw new sap.ui2.srvc.Error("Not a relative URL: "+i,"sap.ui2.srvc.ODataWrapper");}return e+i;}sap.ui2.srvc.testPublishAt(t);function y(i,j,A){var D,E=x(i),H=p(m());if(B){jQuery.sap.log.debug('Queued OData request for GET "'+i+'"',null,"sap.ui2.srvc.ODataWrapper");B.push({method:"GET",requestUri:i,headers:H});D=(new jQuery.Deferred()).done(j).fail(A);d.push(D);C=false;return;}H["Accept"]="application/json";H["Accept-Language"]=(sap.ui&&sap.ui.getCore().getConfiguration().getLanguage())||"";H["X-CSRF-Token"]="Fetch";OData.read({requestUri:E,headers:H},j,A);jQuery.sap.log.debug('Sent OData request for GET "'+E+'"',null,"sap.ui2.srvc.ODataWrapper");}sap.ui2.srvc.testPublishAt(t);function z(i,M,P,j,F){var D,A={data:P,method:M,requestUri:i,headers:p(m())},E=x(i);if(B){j=j||n;F=F||o.getDefaultErrorHandler();t.check(j,F);jQuery.sap.log.debug("Queued OData request for "+M+' "'+i+'"',null,"sap.ui2.srvc.ODataWrapper");if(!C){B.push({__changeRequests:[]});d.push([]);C=f;}B[B.length-1].__changeRequests.push(A);D=(new jQuery.Deferred()).done(function(G,H){jQuery.sap.log.debug("Received OData response for "+M+' "'+E+'"',null,"sap.ui2.srvc.ODataWrapper");sap.ui2.srvc.call(j.bind(null,G),F);}).fail(t.onError.bind(t,M,E,F,null));d[d.length-1].push(D);return;}v(E,M,P,j,F);}this.isStickySessionEnabled=function(){return(sap.ui2.srvc.ODataWrapper.oStickySessionConfiguration[e]||{}).enabled||false;};this.enableStickySession=function(){sap.ui2.srvc.ODataWrapper.oStickySessionConfiguration[e].enabled=true;};this.check=function(i,F){if(!i){throw new sap.ui2.srvc.Error("Missing success callback","sap.ui2.srvc.ODataWrapper");}if(typeof i!=="function"){throw new sap.ui2.srvc.Error("Success callback is not a function","sap.ui2.srvc.ODataWrapper");}if(!F){throw new sap.ui2.srvc.Error("Missing error callback","sap.ui2.srvc.ODataWrapper");}if(typeof F!=="function"){throw new sap.ui2.srvc.Error("Error callback is not a function","sap.ui2.srvc.ODataWrapper");}};this.create=function(i,P,j,F){z(i,"POST",P,j,F);};this.del=function(E,i,F){var j=E;if(typeof j!=="string"){j=w(E.__metadata.uri);}z(j,"DELETE",null,function(D){if(i){i();}},F);};this.getBaseUrl=function(){return e;};this.getODataService=function(){return o;};this.onError=function(M,i,F,D,E){var P,j="Error ";if(E.response&&E.response.statusCode){j+="("+E.response.statusCode+", "+E.response.statusText+") ";}j+="in OData response for "+M+' "'+i+'": '+E.message;if(E.response&&E.response.body){try{P=JSON.parse(E.response.body).error;if(P){if(P.hasOwnProperty("message")&&P.message.hasOwnProperty("value")){j+="\nDetails: "+P.message.value;}if(E.response.statusCode&&!P.httpStatus){P.httpStatus=E.response.statusCode;}}}catch(A){}}jQuery.sap.log.error(j,JSON.stringify(E.response),"sap.ui2.srvc.ODataWrapper");if(D){D.reject(j,P);}F(j,P);};this.openBatchQueue=function(){if(B){throw new sap.ui2.srvc.Error("Batch queue already open","sap.ui2.srvc.ODataWrapper");}B=[];d=[];C=false;};this.isBatchQueueOpen=function(){return!!B;};this.read=function(i,j,F,A){var D,E=x(i),G;function H(I,J){q(J.headers);o.setCsrfToken(u(J.headers)||o.getCsrfToken());jQuery.sap.log.debug('Received OData response for GET "'+E+'"',null,"sap.ui2.srvc.ODataWrapper");G=l("sap-message",J.headers);if(G){jQuery.sap.log.warning("SAP message for GET "+E,G,"sap.ui2.srvc.ODataWrapper");}if(D){D.resolve(JSON.parse(JSON.stringify(I)),o.getCsrfToken());}sap.ui2.srvc.call(j.bind(null,I),F);}F=F||o.getDefaultErrorHandler();this.check(j,F);if(A){OData.read.$cache=OData.read.$cache||new sap.ui2.srvc.Map();D=OData.read.$cache.get(E);if(D){jQuery.sap.log.debug('Using cached response for GET "'+E+'"',null,"sap.ui2.srvc.ODataWrapper");D.done(function(I,J){o.setCsrfToken(o.getCsrfToken()||J);sap.ui2.srvc.call(j.bind(null,JSON.parse(JSON.stringify(I))),F);}).fail(F);return;}D=new jQuery.Deferred();OData.read.$cache.put(E,D.promise());}y(i,H,this.onError.bind(this,"GET",E,F,D));};this.batch=function(P,i,F){var j=x("$batch");v(j,"POST",P,i,F,OData.batchHandler);};this.submitBatchQueue=function(A,D){var M=d;function E(F){var G=F.__batchResponses.length,H=M.length;if(H!==G){t.onError("POST",x("$batch"),D,null,{message:"Protocol error! Expected "+H+" responses, but received "+G});return;}F.__batchResponses.forEach(function(I,i){var J=M[i];if(I.response){a(J,I);}else if(I.__changeResponses){I.__changeResponses.forEach(function(K,j){J[j].resolve(K.data,K);});}else{J.resolve(I.data,I);}});if(A){sap.ui2.srvc.call(A,o.getDefaultErrorHandler());}}if(!B){throw new sap.ui2.srvc.Error("No open batch queue to submit","sap.ui2.srvc.ODataWrapper");}if(B.length>0){this.batch({__batchRequests:B},E,D);}else if(A){sap.ui2.srvc.call(A,o.getDefaultErrorHandler(),true);}B=undefined;d=undefined;};this.toString=function(V){var i=['sap.ui2.srvc.ODataWrapper({sBaseUrl:"',e,'"'];i.push('})');return i.join('');};this.put=function(i,P,j,F){z(i,"PUT",P,function(D){if(j){j();}},F);};this.update=function(E,i,F){var P={"__metadata":{type:E.__metadata&&E.__metadata.type}},j,A=w(E.__metadata.uri);for(j in E){if(Object.prototype.hasOwnProperty.call(E,j)&&j.indexOf('$')!==0&&typeof E[j]!=="object"){P[j]=E[j];}}this.put(A,P,i,F);};if(!sap.ui2.srvc.Map){r("sap.ui2.srvc.utils");}if(typeof s==='string'){s=g(arguments);}else if(typeof s==='object'){s=c(s);}if(!s||!s.baseUrl||typeof s.baseUrl!=="string"){throw new sap.ui2.srvc.Error("Missing base URL","sap.ui2.srvc.ODataWrapper");}if(!o||typeof o!=="object"){throw new sap.ui2.srvc.Error("Missing OData service facade","sap.ui2.srvc.ODataWrapper");}s.baseUrl=s.baseUrl.replace(/\/$/,"")+"/";e=s.baseUrl;f=s.supportsChangeSets;if(typeof sap.ui2.srvc.ODataWrapper.oStickySessionConfiguration==="undefined"){jQuery.sap.log.error("sap.ui2.srvc.ODataWrapper.oStickySessionConfiguration is not defined!","the sap.ui2.srvc.ODataWrapper constructor was called before the static property was defined","sap.ui2.srvc.ODataWrapper");}else if(typeof sap.ui2.srvc.ODataWrapper.oStickySessionConfiguration[e]==="undefined"){sap.ui2.srvc.ODataWrapper.oStickySessionConfiguration[e]={enabled:false,value:undefined};}};function h(A){var s={};var t={};s.baseUrl=A[0];if(typeof A[1]==='boolean'){s.supportsChangeSets=A[1];}if(typeof A[2]==='function'){t.defaultFailure=A[2];}t.settings=s;return t;}function c(i){if(i===undefined){return undefined;}try{return JSON.parse(JSON.stringify(i));}catch(e){return undefined;}}if(typeof sap.ui2.srvc.ODataWrapper.oStickySessionConfiguration==="undefined"){sap.ui2.srvc.ODataWrapper.oStickySessionConfiguration={};}sap.ui2.srvc.testPublishAt(sap.ui2.srvc.ODataWrapper);function b(w){try{sap.ui2.srvc.ODataWrapper["sap-statistics"]=sap.ui.getCore().getConfiguration().getStatistics();}catch(e){sap.ui2.srvc.ODataWrapper["sap-statistics"]=/sap-statistics=(true|x|X)/.test(w);}}b(window.location.search);sap.ui2.srvc.createODataWrapper=function(s,d){if(typeof arguments[0]==='string'){var t=h(arguments);s=t.settings;if(t.defaultFailure){d=t.defaultFailure;}}else if(typeof arguments[0]==='object'){s=c(s);}function S(){var w=new sap.ui2.srvc.ODataWrapper(s,this);r("sap.ui2.srvc.ODataService");sap.ui2.srvc.ODataService.call(this,w,d);return w;}return new S();};}());
},
	"sap/ui2/srvc/PageBuildingService.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ui2.srvc.PageBuildingService");jQuery.sap.require("sap.ui2.srvc.utils");jQuery.sap.require("sap.ui2.srvc.ODataService");jQuery.sap.require("sap.ui2.srvc.ODataWrapper");var r=function(){jQuery.sap.require.apply(this,arguments);};sap.ui2.srvc.testPublishAt=sap.ui2.srvc.testPublishAt||function(){};sap.ui2.srvc.PageBuildingService=function(o,d,I){var w,t=this;function e(s){return s.replace(/'/g,"''").replace(/&/g,"%26");}function g(p,B,E){var P;if(typeof p==="string"){P=p;}else{if(p.instanceId){return"ChipInstanceBags(pageId='"+encodeURIComponent(p.pageId)+"',instanceId='"+encodeURIComponent(p.instanceId)+"',id='"+encodeURIComponent(B)+"')"+(E?"?$expand=ChipInstanceProperties":"");}P=p.id;}return"Bags(pageId='"+encodeURIComponent(P)+"',id='"+encodeURIComponent(B)+"')"+(E?"?$expand=Properties":"");}sap.ui2.srvc.testPublishAt(t);function a(E){if(E.statusCode==="201"){return E.data;}if(E.statusCode==="204"){return undefined;}return E.message||"";}sap.ui2.srvc.testPublishAt(t);function b(c,G,s,f){var R=[];function h(j){var i,k=[];for(i=0;i<j.length;i+=1){k[i]=a(j[i]);}return k;}s=s||function(){};f=f||t.getDefaultErrorHandler();w.check(s,f);c=c||[];G=G||[];if(c.length>0){R.push({__changeRequests:c});}R=R.concat(G);if(R.length===0){sap.ui2.srvc.call(s.bind(null,[],[]),f,true);return;}w.batch({__batchRequests:R},function(D){var B=D.__batchResponses,C=B[0].__changeResponses;if(B[0].response&&B[0].message){w.onError("POST",w.getBaseUrl()+"$batch",f,undefined,D.__batchResponses[0]);return;}if((C&&(C.length!==c.length))||(B.length!==R.length)){f("Number of requests differs from number of responses in $batch");return;}if(C){sap.ui2.srvc.call(s.bind(null,h(C),h(B.slice(1))),f,false);}else{sap.ui2.srvc.call(s.bind(null,[],h(B)),f,false);}},f);}this.isPersonalization=function(){return!!I;};this.readMetadata=function(s,f,n){var R=w.getBaseUrl()+"$metadata"+(n?"?"+Date.now():"");f=f||this.getDefaultErrorHandler();w.check(s,f);OData.read(R,function(D){sap.ui2.srvc.call(s.bind(null,D),f);},w.onError.bind(w,"GET",R,f,undefined),OData.metadataHandler);};this.deleteBag=function(p,B,s,f){if(!p){throw new sap.ui2.srvc.Error("Missing parent ID or object","sap.ui2.srvc.PageBuildingService");}if(!B){throw new sap.ui2.srvc.Error("Missing bag ID","sap.ui2.srvc.PageBuildingService");}w.del(g(p,B,false),s,f);};this.readBag=function(p,B,s,f){if(!p){throw new sap.ui2.srvc.Error("Missing parent ID or object","sap.ui2.srvc.PageBuildingService");}if(!B){throw new sap.ui2.srvc.Error("Missing bag ID","sap.ui2.srvc.PageBuildingService");}w.read(g(p,B,true),s,f);};this.readAllCatalogs=function(p,s,f,F,S,c){var h="id";c=c===undefined?true:c;if(S&&typeof S==="string"){h=S;}var u="Pages('"+encodeURIComponent(p)+"')/allCatalogs?$expand=Chips/ChipBags/ChipProperties&"+"$orderby="+h;if(F&&typeof F==="string"){u=u+"&$filter="+encodeURIComponent(F);}if(this.readAllCatalogs.cacheBusterTokens&&this.readAllCatalogs.cacheBusterTokens.get(p)){u+="&sap-cache-id="+this.readAllCatalogs.cacheBusterTokens.get(p);}w.read(u,s,f,c);};this.readCatalogs=function(s,f,F){var u="Catalogs?$orderby=id";if(F&&typeof F==="string"){u=u+"&$filter="+encodeURIComponent(F);}w.read(u,s,f);};this.readAllCatalogsForUser=function(f,s,F){var u=f?"?$filter="+encodeURIComponent(f):"";w.read("Pages('unused')/allCatalogs"+u,s,F);};this.getReferencingCatalogIds=function(R,s,f){if(typeof s!=="function"){s=f;f=arguments[3];}function c(h){var i=[],j=h.results||[];j.forEach(function(C){if(C.referenceChipId===R){if(i.indexOf(C.catalogId)===-1){i.push(C.catalogId);}}});s(i);}if(typeof R!=="string"){throw new sap.ui2.srvc.Error("sReferencedChipId must be a string","sap.ui2.srvc.test.PageBuildingService");}if(typeof s!=="function"){throw new sap.ui2.srvc.Error("fnSuccess is mandatory","sap.ui2.srvc.test.PageBuildingService");}w.read("Chips?$filter="+encodeURIComponent("referenceChipId eq '"+e(R)+"'"),c,function(m){new sap.ui2.srvc.Error(m,"sap.ui2.srvc.PageBuildingService");f.apply(null,arguments);});};this.createPageBasedCatalog=function(D,T,s,f){if(!D){throw new sap.ui2.srvc.Error("Missing domain ID","sap.ui2.srvc.PageBuildingService");}w.create("Catalogs",{domainId:D,title:T,type:"CATALOG_PAGE"},s,f);};this.createCatalog=function(c,s,f){w.create("Catalogs",c,s,f);};this.deleteCatalog=function(c,s,f){w.del(c,s,f);};this.cloneCatalog=function(c,n,N,s,f){if(!c){throw new sap.ui2.srvc.Error("Missing source catalog ID","sap.ui2.srvc.PageBuildingService");}if(!n){throw new sap.ui2.srvc.Error("Missing new domain ID","sap.ui2.srvc.PageBuildingService");}if(n.indexOf(":")>=0){throw new sap.ui2.srvc.Error("Illegal domain ID: "+n,"sap.ui2.srvc.PageBuildingService");}w.create("CloneCatalog?sourceId='"+encodeURIComponent(c)+"'&targetId='"+encodeURIComponent(n)+(N!==undefined?"'&title='"+encodeURIComponent(N)+"'":"'"),{},s,f);};this.clonePageChipInstance=function(s,S,T,f,F){if(!s){throw new sap.ui2.srvc.Error("Missing source page ID","sap.ui2.srvc.PageBuildingService");}if(!S){throw new sap.ui2.srvc.Error("Missing source CHIP instance ID","sap.ui2.srvc.PageBuildingService");}if(!T){throw new sap.ui2.srvc.Error("Missing target page ID","sap.ui2.srvc.PageBuildingService");}w.create("ClonePageChipInstance?sourcePageId='"+encodeURIComponent(s)+"'&sourceChipInstanceId='"+encodeURIComponent(S)+"'&targetPageId='"+encodeURIComponent(T)+"'",{},function(R){w.read("PageChipInstances(pageId='"+encodeURIComponent(R.pageId)+"',instanceId='"+encodeURIComponent(R.instanceId)+"')"+"?$expand=ChipInstanceBags/ChipInstanceProperties",f,F);},F);};this.readCatalog=function(c,s,f,n,N){var u;if(!c){throw new sap.ui2.srvc.Error("Missing catalog ID","sap.ui2.srvc.PageBuildingService");}u="Catalogs('"+encodeURIComponent(c)+"')";if(!n){u+="?$expand=Chips";if(!N){u+="/ChipBags/ChipProperties";}}w.read(u,s,f);};this.updateCatalog=function(c,s,f){w.update(c,s,f);};this.readCatalogChips=function(c,C,s,f){var u,F="",p="?$filter=";if(!c){throw new sap.ui2.srvc.Error("Missing catalog ID","sap.ui2.srvc.PageBuildingService");}u="Catalogs('"+encodeURIComponent(c)+"')/Chips";if(C){if(!C.length){throw new sap.ui2.srvc.Error("No CHIP IDs given","sap.ui2.srvc.PageBuildingService");}C.forEach(function(i){F=F+p+"id%20eq%20'"+encodeURIComponent(i)+"'";p="%20or%20";});if(w.getBaseUrl().length+u.length+F.length>2000){F="";}}w.read(u+F,s,f);};this.createPage=function(i,c,l,T,s,f){if(!i){throw new sap.ui2.srvc.Error("Missing page ID","sap.ui2.srvc.PageBuildingService");}w.create("Pages",{id:i,catalogId:c,layout:l,title:T},s,f);};this.readPages=function(s,f,n){var u="Pages?";if(!n){u+="$expand=Catalog&";}w.read(u+"$orderby=id",s,f);};this.readPage=function(i,s,f,c){var u="Pages('"+encodeURIComponent(i)+"')";if(!i){throw new sap.ui2.srvc.Error("Missing page ID","sap.ui2.srvc.PageBuildingService");}if(c===undefined){u+="?$expand=Bags/Properties,PageChipInstances/Chip/ChipBags/ChipProperties,"+"PageChipInstances/RemoteCatalog,"+"PageChipInstances/ChipInstanceBags/ChipInstanceProperties";}else if(c!==""){u+="?$expand="+c;}w.read(u,s,f);};this.readPageSet=function(i,s,f,c){var u;var t=this;var h;c=c===undefined?true:c;if(!i){throw new sap.ui2.srvc.Error("Missing page set ID","sap.ui2.srvc.PageBuildingService");}u="PageSets('"+encodeURIComponent(i)+"')?$expand="+"Pages/PageChipInstances/Chip/ChipBags/ChipProperties,"+"Pages/PageChipInstances/RemoteCatalog,"+"Pages/PageChipInstances/ChipInstanceBags/ChipInstanceProperties,"+"AssignedPages,"+"DefaultPage";if(this.readPageSet.cacheBusterTokens&&this.readPageSet.cacheBusterTokens.get(i)){u+="&sap-cache-id="+this.readPageSet.cacheBusterTokens.get(i);}if(this.readPageSet.appendedParameters){h=Object.keys(this.readPageSet.appendedParameters);if(h.length>0){h.sort();h.forEach(function(k){u+="&"+encodeURIComponent(k)+"="+encodeURIComponent(t.readPageSet.appendedParameters[k]);});}}w.read(u,s,f,c);};this.updatePageSet=function(p,s,f){w.update(p,s,f);};this.createPageInPageSet=function(p,P,c,s,f){if(!p){throw new sap.ui2.srvc.Error("Missing page set ID","sap.ui2.srvc.PageBuildingService");}w.create("PageSets('"+encodeURIComponent(p)+"')/Pages",{catalogId:c||"",layout:"",title:P||""},s,f);};this.updatePage=function(p,s,f){w.update(p,s,f);};this.deletePage=function(i,s,f){if(!i){throw new sap.ui2.srvc.Error("Missing page ID","sap.ui2.srvc.PageBuildingService");}w.del("Pages('"+encodeURIComponent(i)+"')",s,f);};this.createPageChipInstance=function(p,i,c,T,C,l,s,f){this.createPageChipInstanceFromRawData({pageId:p,instanceId:i,chipId:c,title:T,configuration:C,layoutData:l},s,f);};this.createPageChipInstanceFromRawData=function(c,s,f){if(typeof c!=="object"){throw new sap.ui2.srvc.Error("Invalid raw data","sap.ui2.srvc.PageBuildingService");}if(!c.pageId){throw new sap.ui2.srvc.Error("Missing page ID","sap.ui2.srvc.PageBuildingService");}if(!c.chipId){throw new sap.ui2.srvc.Error("Missing CHIP ID","sap.ui2.srvc.PageBuildingService");}c.instanceId=c.instanceId||"";c.title=c.title||"";c.configuration=c.configuration||"";c.layoutData=c.layoutData||"";w.create("PageChipInstances",c,s,f);};this.updatePageChipInstance=function(c,s,f){w.update(c,s,f);};this.deletePageChipInstance=function(p,i,s,f){if(!p){throw new sap.ui2.srvc.Error("Missing page ID","sap.ui2.srvc.PageBuildingService");}if(!i){throw new sap.ui2.srvc.Error("Missing instance ID","sap.ui2.srvc.PageBuildingService");}w.del("PageChipInstances(pageId='"+encodeURIComponent(p)+"',instanceId='"+encodeURIComponent(i)+"')",s,f);};this.updateBagProperties=function(p,B,c,n,R,s,f){var C=[],G=[],i,h,P,j,m="__metadata";function k(E){var l={"__metadata":{type:E[m].type,uri:E[m].uri}},q;for(q in E){if(Object.prototype.hasOwnProperty.call(E,q)&&q!==m&&q.indexOf('$')!==0&&typeof E[q]!=="object"){l[q]=E[q];}}return l;}if(!p){throw new sap.ui2.srvc.Error("Missing parent object","sap.ui2.srvc.PageBuildingService");}if(!B){throw new sap.ui2.srvc.Error("Missing bag ID","sap.ui2.srvc.PageBuildingService");}if(typeof R==="function"){this.updateBagProperties(p,B,c,n,[],R,s);return;}c=c||[];n=n||[];R=R||[];if(c.length===0&&n.length===0&&R.length===0){throw new sap.ui2.srvc.Error("No properties to update, create or reset","sap.ui2.srvc.PageBuildingService");}for(i=0;i<c.length;i+=1){P=c[i];j=P[m].uri;h=j.indexOf(w.getBaseUrl());if(h>=0){j=j.slice(h+w.getBaseUrl().length);}C.push({requestUri:j,method:"PUT",data:k(P)});}j=p.instanceId?"ChipInstanceProperties":"Properties";for(i=0;i<n.length;i+=1){P=n[i];if(!P.name){throw new sap.ui2.srvc.Error("Missing property name","sap.ui2.srvc.PageBuildingService");}if(p.instanceId){P.instanceId=p.instanceId;P.pageId=p.pageId;}else{P.pageId=p.id;}P.bagId=B;C.push({requestUri:j,method:"POST",data:P});}for(i=0;i<R.length;i+=1){P=R[i];j=P[m].uri;h=j.indexOf(w.getBaseUrl());if(h>=0){j=j.slice(h+w.getBaseUrl().length);}C.push({requestUri:j,method:"DELETE"});G.push({requestUri:j,method:"GET"});}b(C,G,function(l,q){var u=l.slice(n.length+c.length),i;for(i=0;i<u.length;i+=1){if(u[i]===undefined){if(typeof q[i]==="object"){u[i]=q[i];}}}if(s){s(l.slice(0,c.length),l.slice(c.length,n.length+c.length),u);}},f);};this.createProperty=function(p,B,P,v,T,s,f){var c;if(!p){throw new sap.ui2.srvc.Error("Missing parent ID or object","sap.ui2.srvc.PageBuildingService");}if(!B){throw new sap.ui2.srvc.Error("Missing bag ID","sap.ui2.srvc.PageBuildingService");}if(!P){throw new sap.ui2.srvc.Error("Missing property name","sap.ui2.srvc.PageBuildingService");}if(typeof T==="function"){this.createProperty(p,B,P,v,undefined,T,s);return;}c={bagId:B,name:P,pageId:p,translatable:T,value:v};if(typeof p!=="string"){if(p.instanceId){c.instanceId=p.instanceId;c.pageId=p.pageId;}else{c.pageId=p.id;}}w.create((c.instanceId?"ChipInstanceProperties":"Properties"),c,s,f);};this.updateProperty=function(p,s,f){w.update(p,s,f);};this.deleteProperty=function(p,s,f){w.del(p,s,f);};this.readChip=function(c,s,f){if(!c){throw new sap.ui2.srvc.Error("Missing CHIP ID","sap.ui2.srvc.PageBuildingService");}w.read("Chips('"+encodeURIComponent(c)+"')"+"?$expand=ChipBags/ChipProperties",s,f);};if(!sap.ui2.srvc.Error){r("sap.ui2.srvc.error");}if(typeof o==="string"){w=new sap.ui2.srvc.ODataWrapper(o,this,true);}else{w=o;}this.readAllCatalogs.cacheBusterTokens=new sap.ui2.srvc.Map();this.readPageSet.cacheBusterTokens=new sap.ui2.srvc.Map();if(!w.isStickySessionEnabled()&&!I){w.enableStickySession();}sap.ui2.srvc.ODataService.call(this,w,d);};if(!sap.ui2.srvc.createPageBuildingService){sap.ui2.srvc.createPageBuildingService=function(b,d,i){return new sap.ui2.srvc.PageBuildingService(b,d,i);};}}());
},
	"sap/ui2/srvc/RemoteCatalogService.js":function(){(function(){"use strict";jQuery.sap.declare("sap.ui2.srvc.RemoteCatalogService");jQuery.sap.require("sap.ui2.srvc.PageBuildingService");sap.ui2.srvc.RemoteCatalogService=function(){this.readChips=function(b,c,C,s,f){sap.ui2.srvc.createPageBuildingService(b).readCatalogChips(c,C,s,f);};};}());
},
	"sap/ui2/srvc/catalog.js":function(){this.sap=this.sap||{};(function(){"use strict";sap.ui2=sap.ui2||{};sap.ui2.srvc=sap.ui2.srvc||{};var r=String;if(typeof jQuery==="function"&&jQuery.sap){jQuery.sap.declare("sap.ui2.srvc.catalog");r=function(){jQuery.sap.require.apply(this,arguments);};}sap.ui2.srvc.testPublishAt=sap.ui2.srvc.testPublishAt||function(){};sap.ui2.srvc.Catalog=function(f,c){var a,C,b=[],R,I=true,o,s,d,g=[],t=this;function h(){if(I){throw new sap.ui2.srvc.Error(t+": page is just a stub","sap.ui2.srvc.Page");}}function j(){if(!a){throw new sap.ui2.srvc.Error(t+": catalog is just an ID","sap.ui2.srvc.Catalog");}}sap.ui2.srvc.testPublishAt(t);function k(){var T=t.toString();if(C){C.exit();}a=undefined;c=undefined;b=[];I=true;R=undefined;d=undefined;g=[];Object.keys(t).forEach(function(F){if(!/getCatalogData|getId|isStub|toString/.test(F)){delete t[F];}});f.forgetCatalog(t);jQuery.sap.log.debug("Exited: "+T,null,"sap.ui2.srvc.Catalog");}sap.ui2.srvc.testPublishAt(t);function l(){return t.addSystemToServiceUrl(a.type==='H'?"/sap/hba/apps/kpi/s/odata/hana_chip_catalog.xsodata/":a.baseUrl);}sap.ui2.srvc.testPublishAt(t);function m(){return f.getRemoteCatalogService(a)||{readChips:function(B,e,i,S,F){jQuery.sap.log.error("Catalog '"+a.id+"', type '"+a.type+"' not supported",null,"sap.ui2.srvc.Catalog");sap.ui2.srvc.call(S.bind(null,{results:[]}),undefined,true);}};}function p(){var i,n,e;jQuery.sap.log.debug("Loaded: "+t,null,"sap.ui2.srvc.Catalog");if(a.Chips){e=a.Chips.results||a.Chips;delete a.Chips;b=[];for(i=0,n=e.length;i<n;i+=1){b[i]=f.createChip(e[i]);}I=false;jQuery.sap.log.debug("Initialized: "+t,null,"sap.ui2.srvc.Catalog");}delete a.CatalogPage;}sap.ui2.srvc.testPublishAt(t);function q(i,S,F){var D;function n(e){a=e;p();D.resolve();}function u(e){a.Chips=e;p();D.resolve();}function v(e){e.results.forEach(function(y){y.remoteCatalogId=s;});u(e);}function w(){p();o=arguments;D.reject.apply(this,arguments);}function x(y){var z;if(y.remoteId){a=y;try{z=l();}catch(e){w(e.toString());return;}m().readChips(z,a.remoteId,undefined,v,w);}else if(a&&i){u(y.Chips);}else{n(y);}}if(!R||R.state()!=='pending'){D=new jQuery.Deferred();R=D.promise();if(!a||(i&&!a.remoteId)){f.getPageBuildingService().readCatalog(s,x,D.reject.bind(D));}else{x(a);}}F=F||f.getPageBuildingService().getDefaultErrorHandler();R.done(sap.ui2.srvc.call.bind(null,S,F));R.fail(F);}this.addSystemToServiceUrl=function(S,e){if(S.indexOf('/')!==0||S.indexOf('//')===0){throw new sap.ui2.srvc.Error("addSystemToServiceUrl: Invalid URL: "+S,"sap.ui2.srvc.Catalog");}e=e||this.getSystemAlias();if(/^[^?]*(;o=([\/;?]|$))/.test(S)){S=S.replace(/;o=([\/;?]|$)/,(e?";o="+e:"")+"$1");}else if(!/^[^?]*;o=/.test(S)&&e){S=S.replace(/(\/[^?]*?)(\/$|$|(\/?\?.*))/,"$1;o="+e+"$2");}if(sap.ui){sap.ui.getCore().getEventBus().publish("sap.ushell.Container","addRemoteSystemForServiceUrl",S);}return S;};this.clone=function(n,N,S,F){var e,i=function(E,M){return F(E,undefined,M);};if(a&&a.type==="REMOTE"){e=this.getCatalogData();delete e.id;e.domainId=n;if(N!==undefined){e.title=N;}f.createNewCatalog(e,S,F);}else{f.getPageBuildingService().cloneCatalog(this.getId(),n,N,function(u){f.createCatalog(u.id,S,i);},i);}};this.getCatalogData=function(){var e;if(!a){return undefined;}e=JSON.parse(JSON.stringify(a));delete e.__metadata;return e;};this.getCatalogPage=function(){j();if(a.type!=="P"&&a.type!=="CATALOG_PAGE"){return undefined;}if(!C){C=f.createPage(s);}return C;};this.getChips=function(){if(I){throw new sap.ui2.srvc.Error(t+": catalog is just a stub","sap.ui2.srvc.Catalog");}return b.slice();};this.getDomainId=function(){return a&&a.domainId;};this.getId=function(){return s;};this.getSystemAlias=function(){return(a&&a.systemAlias)||undefined;};this.getTitle=function(){j();return a.title;};this.getType=function(){j();return a&&a.type;};this.isOutdated=function(){j();return(C&&!C.isStub()&&C.isOutdated())||a.outdated==="X";};this.isReadOnly=function(){h();return a.isReadOnly==="X";};this.isStub=function(){return I;};this.getCachedRemoteFailureArguments=function(){return o;};this.load=function(S,F){if(!I){throw new sap.ui2.srvc.Error("Catalog is not a stub anymore","sap.ui2.srvc.Catalog");}q(false,S,F);};this.readChips=function(e,S,F){function i(v){v.results.forEach(function(w){f.createChip(w);});sap.ui2.srvc.call(S,F);}function n(v){v.results.forEach(function(w){w.remoteCatalogId=s;});i(v);}function u(v){a=v;if(a.remoteId){m().readChips(l(),a.remoteId,e,n,F);}else{f.getPageBuildingService().readCatalogChips(s,e,i,F);}}if(!a){f.getPageBuildingService().readCatalog(s,u,F,true);}else{u(a);}};this.readRegisteredChips=function(S,F){function e(){var D=new jQuery.Deferred(),i=g;g=[];if(i.length){t.readChips(i,D.resolve.bind(D),D.reject.bind(D));}else{D.resolve();}return D.promise();}if(!d||d.state()!=="pending"){d=e();}F=F||f.getPageBuildingService().getDefaultErrorHandler();d.fail(F).done(sap.ui2.srvc.call.bind(null,S,F));};this.refresh=function(S,F){q(true,S,F);};this.registerChip=function(e){if(d&&d.state()==="pending"){throw new sap.ui2.srvc.Error("Invalid state: registerChip while readRegisteredChips pending","sap.ui2.srvc.Catalog");}g.push(e.getId());};this.remove=function(S,F){j();if(R&&R.state()==='pending'){throw new sap.ui2.srvc.Error("Catalog is being refreshed: "+this,"sap.ui2.srvc.Catalog");}jQuery.sap.log.debug("Removing: "+this,null,"sap.ui2.srvc.Catalog");f.getPageBuildingService().deleteCatalog(a,function(){k();S();},F);};this.toString=function(v){var e=['sap.ui2.srvc.Catalog({sId:"',s,'"',',bIsStub:',I];if(v){e.push(',oAlterEgo:',JSON.stringify(a),',oFactory:',f.toString(v),',aChips:',JSON.stringify(b));}e.push('})');return e.join('');};this.update=function(e,S,F){var n;j();if(Object.hasOwnProperty.call(e,"__metadata")){throw new sap.ui2.srvc.Error("Unsupported __metadata update","sap.ui2.srvc.Catalog");}n=JSON.parse(JSON.stringify(a));Object.keys(e).forEach(function(N){n[N]=e[N];});I=true;o=undefined;f.getPageBuildingService().updateCatalog(n,function(){a=n;q(true,S,F);},function(){I=false;F=F||f.getPageBuildingService().getDefaultErrorHandler();F.apply(null,arguments);});};if(!sap.ui2.srvc.Error){r("sap.ui2.srvc.error");}if(typeof c==="object"){s=c.id;if(c.remoteId){delete c.Chips;}a=c;p();}else if(typeof c==="string"){s=c;}if(!s){throw new sap.ui2.srvc.Error("Missing ID","sap.ui2.srvc.Catalog");}jQuery.sap.log.debug("Created: "+this,null,"sap.ui2.srvc.Catalog");};}());
},
	"sap/ui2/srvc/chipdefinition.js":function(){this.sap=this.sap||{};(function(){"use strict";sap.ui2=sap.ui2||{};sap.ui2.srvc=sap.ui2.srvc||{};var N='http://schemas.sap.com/sapui2/services/Chip/1',r=String;if(typeof jQuery==="function"&&jQuery.sap){jQuery.sap.declare("sap.ui2.srvc.chipdefinition");r=function(){jQuery.sap.require.apply(this,arguments);};}function g(d){return d.localName||d.baseName;}function a(d,s){var A,c,i,n;if(typeof d.getAttributeNS==="function"){return d.getAttributeNS(null,s);}c=d.attributes;for(i=0,n=c.length;i<n;i+=1){A=c[i];if(!A.namespaceURI&&g(A)===s){return A.nodeValue;}}return"";}function b(d){return d.textContent||d.text||"";}function v(t,d,c){var C,e=d.childNodes,h,i,n;for(i=0,n=e.length;i<n;i+=1){C=e[i];if(C.namespaceURI===N){h=c[g(C)];if(h){h.call(t,C);}}}}sap.ui2.srvc.ChipDefinition=function(x){var t=this;if(x instanceof sap.ui2.srvc.ChipDefinition){x=JSON.parse(JSON.stringify(x));["appearance","contracts","id","implementation"].forEach(function(n){if(Object.prototype.hasOwnProperty.call(x,n)){t[n]=x[n];}});return;}if(g(x.documentElement)!=='chip'||x.documentElement.namespaceURI!==N){if(!sap.ui2.srvc.Error){r("sap.ui2.srvc.error");}throw new sap.ui2.srvc.Error('Missing root <chip>','sap.ui2.srvc.ChipDefinition');}v(this,x.documentElement,{appearance:function(A){this.appearance={};v(this.appearance,A,{description:function(d){this.description=b(d);},title:function(T){this.title=b(T);}});},contracts:function(c){this.contracts={};v(this.contracts,c,{consume:function(C){var i=a(C,'id');this[i]={};v(this[i],C,{parameters:function(p){this.parameters={};v(this.parameters,p,{parameter:function(P){var n=a(P,'name');this[n]=b(P);}});}});}});},id:function(i){this.id=b(i);},implementation:function(i){this.implementation={};v(this.implementation,i,{sapui5:function(u){this.sapui5={basePath:'.'};v(this.sapui5,u,{basePath:function(B){this.basePath=b(B);},componentName:function(c){this.componentName=b(c);},viewName:function(V){this.viewName=b(V);}});}});}});x=null;};}());
},
	"sap/ui2/srvc/chipinstance.js":function(){this.sap=this.sap||{};(function(){"use strict";sap.ui2=sap.ui2||{};sap.ui2.srvc=sap.ui2.srvc||{};var r=String;if(typeof jQuery==="function"&&jQuery.sap){jQuery.sap.declare("sap.ui2.srvc.chipinstance");r=function(){jQuery.sap.require.apply(this,arguments);};}sap.ui2.srvc.ChipInstance=function(f,a,c,p){var A,b,C,o=new sap.ui2.srvc.Map(),F=false,d=[],R,t,T,e=this;function m(){a.referenceChipInstanceId="";a.referencePageId="";}function g(){m();if(p){p.updateScope();}}function h(){if(!A){throw new sap.ui2.srvc.Error(e+": CHIP instance is just a stub","sap.ui2.srvc.ChipInstance");}}function j(s,i){if(!A){A=c.createApi(e,o);}jQuery.sap.log.debug("Initialized: "+e,null,"sap.ui2.srvc.ChipInstance");sap.ui2.srvc.call(s,i);}function k(n){var i,s=c.getBagIds(),u;for(i=0;i<n.length;i+=1){r("sap.ui2.srvc.bag");b.put(n[i].id,new sap.ui2.srvc.Bag(f,n[i],c.getBag(n[i].id),g));}for(i=0;i<s.length;i+=1){u={pageId:a.pageId,instanceId:a.instanceId,id:s[i],$tmp:true};if(!b.containsKey(u.id)){b.put(u.id,new sap.ui2.srvc.Bag(f,u,c.getBag(u.id),g));}}}function l(){if(c.isStub()){throw new sap.ui2.srvc.Error(this+": initializeConfiguration expects that the CHIP is no stub anymore","sap.ui2.srvc.ChipInstance",false);}if(!C){C={};c.updateConfiguration(C,a.configuration);}}sap.ui2.srvc.testPublishAt(e);function q(s,i){f.getPageBuildingService().updatePageChipInstance(a,function(){m();if(p){p.updateScope();}if(s){s();}},i);}this.attachFullscreen=function(E){if(typeof E!=="function"){throw new sap.ui2.srvc.Error(this+": fullscreen event handler is not a function","sap.ui2.srvc.ChipInstance");}d.push(E);};this.attachRefresh=function(E){if(E&&typeof E!=="function"){throw new sap.ui2.srvc.Error(this+": refresh event handler is not a function","sap.ui2.srvc.ChipInstance");}R=E;};this.attachTitleChange=function(n){T=n;};this.detachAll=function(){d=[];R=null;};this.exit=function(){jQuery.sap.log.debug('Exit: '+e,null,"sap.ui2.srvc.ChipInstance");A=null;b=new sap.ui2.srvc.Map();C=null;t=null;T=null;};this.getApi=function(){return A;};this.getBagIds=function(){return b.keys();};this.getBag=function(B){var i;if(!B){throw new sap.ui2.srvc.Error("Missing bag ID","sap.ui2.srvc.ChipInstance");}i=b.get(B);if(i){return i;}r("sap.ui2.srvc.bag");i=new sap.ui2.srvc.Bag(f,{pageId:a.pageId,instanceId:a.instanceId,id:B,$tmp:true},null,g);b.put(B,i);return i;};this.getChip=function(){return c;};this.getConfiguration=function(){return a.configuration;};this.getConfigurationParameter=function(K){l();if(Object.prototype.hasOwnProperty.call(C,K)){return C[K];}return c.getConfigurationParameter(K);};this.getContract=function(n){h();return o.get(n);};this.getFullscreen=function(){return F;};this.getId=function(){return a.instanceId;};this.getImplementationAsSapui5=function(){h();return c.getImplementationAsSapui5(A);};this.getLayoutData=function(){return a.layoutData;};this.getPage=function(){return p;};this.getTitle=function(){return t||a.title||c.getTitle();};this.getUpdated=function(i){function n(){jQuery.sap.log.error("Parse Error: CHIP instance's updated property has unexpected format","value of updated property: '"+a.updated+"'","sap.ui2.srvc.ChipInstance");}var M,s;if(a.updated&&!i){M=/\((\d*)\)/.exec(a.updated);if(!M){n();return undefined;}s=new Date(parseInt(M[1],10));if(isNaN(s.getTime())){n();return undefined;}return s;}return a.updated;};this.isOutdated=function(){return a.outdated==="X";};this.isReadOnly=function(){h();return a.isReadOnly==="X";};this.isReference=function(){return!!a.referenceChipInstanceId||!!a.referencePageId;};this.isBrokenReference=function(){return a.referenceChipInstanceId==="O"||a.referencePageId==="O";};this.getOriginalId=function(){return(a.referenceChipInstanceId===""||a.referenceChipInstanceId==="O")?undefined:a.referenceChipInstanceId;};this.getOriginalPageId=function(){return(a.referencePageId===""||a.referencePageId==="O")?undefined:a.referencePageId;};this.isStub=function(){return!A;};this.load=function(s,i){var L;i=i||f.getPageBuildingService().getDefaultErrorHandler();L=j.bind(null,s,i);if(c.isStub()){c.load(L,i);}else{sap.ui2.srvc.call(L,i,true);}};this.remove=function(s,i){if(p&&p.removeChipInstance(e,s,i)){return;}this.exit();f.getPageBuildingService().deletePageChipInstance(a.pageId,a.instanceId,s,i);};this.refresh=function(){if(R){try{R();return true;}catch(i){jQuery.sap.log.error(e+": call to refresh handler failed: "+(i.message||i.toString()),null,"sap.ui2.srvc.ChipInstance");return false;}}return false;};this.setFullscreen=function(O){var i,n;if(F!==O){F=O;for(i=0,n=d.length;i<n;i+=1){d[i]();}}};this.setLayoutData=function(L,s,i){if(a.layoutData===L){if(s){i=i||f.getPageBuildingService().getDefaultErrorHandler();sap.ui2.srvc.call(s,i,true);}return;}a.layoutData=L;q(s,i);};this.setTitle=function(n,D,s,i){var O;i=i||f.getPageBuildingService().getDefaultErrorHandler();if(t!==n){t=n;if(T){sap.ui2.srvc.call(T.bind(null,this),i,!D);}}if(D&&a.title!==t){O=a.title;a.title=t;t=undefined;q(s,function(){a.title=O;t=undefined;i.apply(null,arguments);});}else if(s){sap.ui2.srvc.call(s,i,true);}};this.toString=function(v){var i=['sap.ui2.srvc.ChipInstance({oChip:',c.toString(v),',bFullscreen:',F];if(v){i.push(',oAlterEgo:',JSON.stringify(a),',oApi:',JSON.stringify(A),',oBags:',b.toString(),',oConfiguration:',JSON.stringify(C),',oFactory:',f.toString(v),',aFullscreenHandlers.length:',d.length,',sTitle:"',t,'"');}i.push('})');return i.join('');};this.updateConfiguration=function(i,s,n){l();c.updateConfiguration(C,i);a.configuration=JSON.stringify(C);q(s,n);};if(!sap.ui2.srvc.Map){r("sap.ui2.srvc.utils");}b=new sap.ui2.srvc.Map();k((a.ChipInstanceBags&&a.ChipInstanceBags.results)||[]);delete a.Chip;jQuery.sap.log.debug("Created: "+this,null,"sap.ui2.srvc.ChipInstance");};}());
},
	"sap/ui2/srvc/factory.js":function(){this.sap=this.sap||{};(function(){"use strict";sap.ui2=sap.ui2||{};sap.ui2.srvc=sap.ui2.srvc||{};var r=String;if(typeof jQuery==="function"&&jQuery.sap){jQuery.sap.declare("sap.ui2.srvc.factory");r=function(){jQuery.sap.require.apply(this,arguments);};}sap.ui2.srvc.Factory=function(p){var c={},C={},m={},R,t=this;this.addRemoteCatalogService=function(b,o){if(!b){throw new sap.ui2.srvc.Error("Invalid base URL","sap.ui2.srvc.Factory");}if(typeof o.readChips!=="function"){throw new sap.ui2.srvc.Error("Invalid remote catalog service","sap.ui2.srvc.Factory");}b=b.replace(/\/$/,"");if(R.containsKey(b)){throw new sap.ui2.srvc.Error("Base URL '"+b+"' already registered","sap.ui2.srvc.Factory");}R.put(b,o);};this.createCatalog=function(v,s,f){var t=this,o,a=typeof v==="object"?v.id:v;function F(){var A;f=f||t.getPageBuildingService().getDefaultErrorHandler();if(f){A=Array.prototype.slice.call(arguments);A.splice(1,0,o);f.apply(null,A);}}function b(){F.apply(null,o.getCachedRemoteFailureArguments());}if(Object.prototype.hasOwnProperty.call(C,a)){o=C[a].catalog;if(typeof v==="object"&&o.getCatalogData()===undefined){sap.ui2.srvc.Catalog.call(o,this,v);}}else{r("sap.ui2.srvc.catalog");o=new sap.ui2.srvc.Catalog(this,v);C[a]={catalog:o,chips:{}};}if(s){if(o.isStub()){o.load(s.bind(null,o),F);}else{if(o.getCachedRemoteFailureArguments()!==undefined){sap.ui2.srvc.call(b,b,true);}else{sap.ui2.srvc.call(s.bind(null,o),F,true);}}}return o;};this.createChip=function(o,s,f){var a=o.remoteCatalogId,b=o.id,d,e;if(a){this.createCatalog(a);d=C[a].chips;}else{d=c;}if(Object.prototype.hasOwnProperty.call(d,b)){e=d[b];e.update(o);}else{r("sap.ui2.srvc.chip");e=new sap.ui2.srvc.Chip(o,this);d[b]=e;}if(s){if(e.isStub()){e.load(s.bind(null,e),f);}else{f=f||this.getPageBuildingService().getDefaultErrorHandler();sap.ui2.srvc.call(s.bind(null,e),f,true);}}return e;};this.createChipDefinition=function(u,s,f){var o,l;function a(O,S,d,A){sap.ui2.srvc.call(S.bind(null,new sap.ui2.srvc.ChipDefinition(O)),d,A);}function b(x){var i,n,o=new sap.ui2.srvc.ChipDefinition(x);m[u]=o;for(i=0,n=l.length;i<n;i+=2){a(o,l[i],l[i+1],false);}}function e(E){var i,n,M;if(typeof E==="string"){M=E;}else{M=E.message;}m[u]=M;for(i=0,n=l.length;i<n;i+=2){l[i+1](M);}}if(!u){throw new sap.ui2.srvc.Error("Missing URL","sap.ui2.srvc.Factory");}if(typeof s!=="function"){throw new sap.ui2.srvc.Error("Missing success handler","sap.ui2.srvc.Factory");}f=f||this.getPageBuildingService().getDefaultErrorHandler();if(window.jQuery&&jQuery.sap&&typeof jQuery.sap.loadResource==="function"){u=sap.ui2.srvc.addCacheBusterTokenUsingUshellConfig(u);}if(Object.prototype.hasOwnProperty.call(m,u)){o=l=m[u];if(sap.ui2.srvc.isArray(l)){l.push(s,f);}else if(o instanceof sap.ui2.srvc.ChipDefinition){a(o,s,f,true);}else{sap.ui2.srvc.call(f.bind(null,o),null,true);}return;}r("sap.ui2.srvc.chipdefinition");l=[s,f];m[u]=l;if(window.jQuery&&jQuery.sap&&typeof jQuery.sap.loadResource==="function"){jQuery.sap.loadResource({dataType:"xml",url:u,async:true}).then(b).catch(e);}else{sap.ui2.srvc.get(u,true,b,e);}};this.createChipInstance=function(o,s,f,P){var a,b;o.Chip=o.Chip||{$proxy:true};o.Chip.id=o.Chip.id||o.chipId;o.Chip.remoteCatalogId=o.Chip.remoteCatalogId||o.remoteCatalogId;if(o.RemoteCatalog&&o.RemoteCatalog.id){this.createCatalog(o.RemoteCatalog);}a=this.createChip(o.Chip);r("sap.ui2.srvc.chipinstance");b=new sap.ui2.srvc.ChipInstance(this,o,a,P);if(s){b.load(s.bind(null,b),f);}return b;};this.createNewCatalog=function(o,s,f){this.getPageBuildingService().createCatalog(o,function(a){var b=t.createCatalog(a);b.load(s.bind(null,b),function(e,E){f(e,b,E);});},function(e,M){f(e,undefined,M);});};this.createNewPageBasedCatalog=function(d,T,s,f){this.getPageBuildingService().createPageBasedCatalog(d,T,function(o){t.createCatalog(o,s,f);},f);};this.createPage=function(P,s,f,b){var o;r("sap.ui2.srvc.page");o=new sap.ui2.srvc.Page(this,P);if(s){o.load(s.bind(null,o),f,b);}return o;};this.createPageSet=function(P,s,f){var o;r("sap.ui2.srvc.pageset");o=new sap.ui2.srvc.PageSet(this,P);if(s){o.load(s.bind(null,o),f);}return o;};this.forgetCatalog=function(o){delete C[o.getId()];};this.getPageBuildingService=function(){return p;};this.getRemoteCatalogService=function(o){var b=o.type==='H'?"/sap/hba/apps/kpi/s/odata/hana_chip_catalog.xsodata":o.baseUrl;return b?R.get(b.replace(/\/$/,"")):undefined;};this.toString=function(v){var a=['sap.ui2.srvc.Factory({oPbs:',p.toString(v)];if(v){a.push(',mChips:',JSON.stringify(c));}a.push('})');return a.join('');};if(!sap.ui2.srvc.Map){r("sap.ui2.srvc.utils");}R=new sap.ui2.srvc.Map();if(!p){throw new sap.ui2.srvc.Error("Missing page building service","sap.ui2.srvc.Factory");}jQuery.sap.log.debug("Created: "+this,null,"sap.ui2.srvc.Factory");};sap.ui2.srvc.createFactory=function(b,d,i){if(!sap.ui2.srvc.createPageBuildingService){r("sap.ui2.srvc.PageBuildingService");}return new sap.ui2.srvc.Factory(sap.ui2.srvc.createPageBuildingService(b,d,i));};}());
},
	"sap/ui2/srvc/page.js":function(){this.sap=this.sap||{};(function(){"use strict";sap.ui2=sap.ui2||{};sap.ui2.srvc=sap.ui2.srvc||{};var r=String;if(typeof jQuery==="function"&&jQuery.sap){jQuery.sap.declare("sap.ui2.srvc.page");r=function(){jQuery.sap.require.apply(this,arguments);};}sap.ui2.srvc.Page=function(f,p){var I,a,A,b,c,C=[],d=true,g=true,t=this;function h(){if(g){throw new sap.ui2.srvc.Error(t+": page is just a stub","sap.ui2.srvc.Page");}}function j(n){var i,B=!!(n.Bags&&n.Bags.results),R=B?n.Bags.results:[],e=(n.PageChipInstances&&n.PageChipInstances.results)||[],l=R.length,m=e.length;d=!B;delete n.Bags;delete n.Catalog;delete n.PageChipInstances;A=n;g=false;if(l>0){r("sap.ui2.srvc.bag");}for(i=0;i<l;i+=1){b.put(R[i].id,new sap.ui2.srvc.Bag(f,R[i]));}for(i=0;i<m;i+=1){C[i]=f.createChipInstance(e[i],null,null,t);}}function k(s,F){f.getPageBuildingService().updatePage(A,function(R){t.updateScope();if(s){s();}},F);}this.addChipInstance=function(T,s,F,P){var o=f.getPageBuildingService(),e,i;function u(R){var i=f.createChipInstance(R,P?null:s,F,t);C.push(i);t.updateScope();if(P){s(i);}}h();if(T.getChip){i=T;e=i.getChip();}else{e=T;}if(e.getRemoteCatalog()){o.createPageChipInstanceFromRawData({pageId:A.id,chipId:e.getId(),configuration:(i&&i.getConfiguration())||"",title:i&&i.getTitle(),remoteCatalogId:e.getRemoteCatalog().getId()},u,F);}else{o.createPageChipInstance(A.id,null,e.getId(),i&&i.getTitle(),(i&&i.getConfiguration())||"","",u,F);}};this.addChipInstanceReference=function(o,s,F){var P=f.getPageBuildingService();function u(R){var e=f.createChipInstance(R,o.isStub()?null:s,F,t);C.push(e);if(o.isStub()){s(e);}}h();P.clonePageChipInstance(o.getPage().getId(),o.getId(),this.getId(),u,F);};this.exit=function(){var i,n;jQuery.sap.log.debug("Exiting: "+this,null,"sap.ui2.srvc.Page");for(i=0,n=C.length;i<n;i+=1){C[i].exit();}A=null;b=new sap.ui2.srvc.Map();c=null;C=[];g=true;jQuery.sap.log.debug("Exited: "+this,null,"sap.ui2.srvc.Page");};this.getAllCatalogs=function(){if(!a){try{r("sap.ui2.srvc.allcatalogs");}catch(e){}if(sap.ui2.srvc.AllCatalogs){a=new sap.ui2.srvc.AllCatalogs(f,I);}else{jQuery.sap.log.warning("sap.ui2.srvc.AllCatalogs is not available",null,"sap.ui2.srvc.Page");}}return a;};this.getBagIds=function(){if(d){throw new sap.ui2.srvc.Error(t+": page is just a stub, load bags on demand","sap.ui2.srvc.Page");}return b.keys();};this.getBag=function(B){var o;if(d){throw new sap.ui2.srvc.Error(t+": page is just a stub, load bags on demand","sap.ui2.srvc.Page");}if(!B){throw new sap.ui2.srvc.Error("Missing bag ID","sap.ui2.srvc.Page");}if(b.containsKey(B)){return b.get(B);}r("sap.ui2.srvc.bag");o=new sap.ui2.srvc.Bag(f,{pageId:this.getId(),id:B,$tmp:true});b.put(B,o);return o;};this.loadBag=function(B){var D;if(!B){throw new sap.ui2.srvc.Error("Missing bag ID","sap.ui2.srvc.Page");}if(b.containsKey(B)){D=b.get(B);}else{r("sap.ui2.srvc.bag");D=new jQuery.Deferred();b.put(B,D);f.getPageBuildingService().readBag(I,B,function(R){D.resolve(new sap.ui2.srvc.Bag(f,R));},function(){D.resolve(new sap.ui2.srvc.Bag(f,{pageId:I,id:B,$tmp:true}));});}return D.promise();};this.getCatalog=function(){h();if(!c&&A.catalogId){c=f.createCatalog(A.catalogId);}return c;};this.getChipInstances=function(){h();return C.slice();};this.getId=function(){return I;};this.getLayout=function(){h();return A.layout;};this.setLayout=function(l,s,F){h();if(A.layout===l){if(s){F=F||f.getPageBuildingService().getDefaultErrorHandler();sap.ui2.srvc.call(s,F,true);}return;}A.layout=l;k(s,F);};this.getOriginalLanguage=function(){h();return A.originalLanguage;};this.getScope=function(){h();return A.scope;};this.getTitle=function(){h();return A.title;};this.setTitle=function(T,s,F){h();if(A.title===T){if(s){F=F||f.getPageBuildingService().getDefaultErrorHandler();sap.ui2.srvc.call(s,F,true);}return;}A.title=T;k(s,F);};this.isCatalogPage=function(){h();return A.isCatalogPage==="X";};this.isPersonalizationLocked=function(){h();return A.isPersLocked==="X";};this.setPersonalizationLocked=function(i,s,F){h();if(f.getPageBuildingService().isPersonalization()){throw new sap.ui2.srvc.Error("Personalization locking cannot be changed at personalization scope","sap.ui2.srvc.Page");}if((A.isPersLocked==="X"&&i)||(A.isPersLocked!=="X"&&!i)){if(s){F=F||f.getPageBuildingService().getDefaultErrorHandler();sap.ui2.srvc.call(s,F,true);}return;}A.isPersLocked=i?"X":" ";k(s,F);};this.isOutdated=function(){h();return A.outdated==="X";};this.isReadOnly=function(){h();return A.isReadOnly==="X";};this.isPersonalized=function(){h();return A.scope==="PERSONALIZATION";};this.isStub=function(){return g;};this.load=function(s,F,P){var e;if(!g){throw new sap.ui2.srvc.Error("Page is not a stub anymore","sap.ui2.srvc.Page");}function l(){if(e===0){jQuery.sap.log.debug("Initialized: "+t,null,"sap.ui2.srvc.Page");s();}}function o(){e-=1;l();}f.getPageBuildingService().readPage(I,function(n){var i,R=(n.PageChipInstances&&n.PageChipInstances.results)||[],m=R.length;jQuery.sap.log.debug("Loaded: "+t,null,"sap.ui2.srvc.Page");j(n);e=P?0:m;if(!P){for(i=0;i<m;i+=1){C[i].load(o,F);}}l();},F);};this.remove=function(s,F){this.exit();f.getPageBuildingService().deletePage(I,s,F);};this.removeChipInstance=function(o,s,F){var i=C.indexOf(o);h();if(i>=0){C.splice(i,1);o.remove(function(){t.updateScope();if(s){s.apply(this,arguments);}},function(){C.splice(i,0,o);F=F||f.getPageBuildingService().getDefaultErrorHandler();F.apply(this,arguments);});return true;}return false;};this.toString=function(v){var R=['sap.ui2.srvc.Page({sId:"',I,'",bIsStub:',g,',bIsLoadingBagsOnDemand:',d];if(v){R.push(',oAlterEgo:',JSON.stringify(A),',oCatalog:',c?c.toString(v):c,',oFactory:',f.toString(v),',aChipInstances:',JSON.stringify(C));}R.push('})');return R.join('');};this.updateScope=function(){if(f.getPageBuildingService().isPersonalization()){A.scope="PERSONALIZATION";}};if(!sap.ui2.srvc.Map){r("sap.ui2.srvc.utils");}if(typeof p==='object'){I=p.id;j(p);}else if(typeof p==='string'){I=p;}if(!I){throw new sap.ui2.srvc.Error("Missing ID","sap.ui2.srvc.Page");}b=new sap.ui2.srvc.Map();jQuery.sap.log.debug("Created: "+this,null,"sap.ui2.srvc.Page");};}());
},
	"sap/ui2/srvc/pageset.js":function(){this.sap=this.sap||{};(function(){"use strict";sap.ui2=sap.ui2||{};sap.ui2.srvc=sap.ui2.srvc||{};var O={assigned:1,userCreated:2,personalized:3,defaultPage:4};jQuery.sap.declare("sap.ui2.srvc.pageset");sap.ui2.srvc.PageSet=function(f,p){var I,a,d,P=[],o,b=true,t=this;function c(){if(b){throw new sap.ui2.srvc.Error(t+": page set is just a stub","sap.ui2.srvc.PageSet");}}sap.ui2.srvc.testPublishAt(t);function g(h){var I=h.getId(),i;c();if(!o.containsKey(I)){throw new sap.ui2.srvc.Error("Unknown page "+I,"sap.ui2.srvc.PageSet");}i=o.get(I);if(i===O.assigned&&h.isPersonalized()){i=O.personalized;}return i;}function e(n){var D=n.DefaultPage.id,r=(n.AssignedPages&&n.AssignedPages.results)||[];a=n;o=new sap.ui2.srvc.Map();r.forEach(function(R){o.put(R.id,O.assigned);});a.Pages.results.forEach(function(R){var h=new sap.ui2.srvc.Page(f,R),s=h.getId();P.push(h);if(D===s){d=h;o.put(s,O.defaultPage);}else if(!o.containsKey(s)){o.put(s,O.userCreated);}});delete a.AssignedPages;delete a.DefaultPage;delete a.Pages;b=false;jQuery.sap.log.debug("Initialized: "+t,null,"sap.ui2.srvc.PageSet");}this.appendPage=function(s,C,S,F){c();if(typeof S!=="function"){throw new sap.ui2.srvc.Error("Missing success handler","sap.ui2.srvc.PageSet");}f.getPageBuildingService().createPageInPageSet(I,s,C,function(n){var N=new sap.ui2.srvc.Page(f,n);P.push(N);o.put(N.getId(),O.userCreated);jQuery.sap.log.debug("Appended new page with ID "+N.getId()+" to pageset "+t,null,"sap.ui2.srvc.PageSet");S(N);},F);};this.isPageRemovable=function(h){return g(h)===O.userCreated;};this.isPageResettable=function(h){return g(h)===O.personalized;};this.removePage=function(h,s,F){if(!this.isPageRemovable(h)){throw new sap.ui2.srvc.Error("Cannot remove page "+h.getId(),"sap.ui2.srvc.PageSet");}h.remove(function(){P.splice(P.indexOf(h),1);o.remove(h.getId());if(s){s();}},F);};this.resetPage=function(h,s,F){if(!this.isPageResettable(h)){throw new sap.ui2.srvc.Error("Cannot reset page "+h.getId(),"sap.ui2.srvc.PageSet");}h.remove(function(){h.load(s,F,true);},F);};this.filter=function(h,C){var i,r=[],j;c();h=h||[];C=C||[];for(i=0;i<P.length;i+=1){j=P[i];if(h.indexOf(j.getId())!==-1){r.push(j);}else if(j.getCatalog()&&C.indexOf(j.getCatalog().getId())!==-1){r.push(j);}}P=r;};this.getConfiguration=function(){c();return a.configuration;};this.setConfiguration=function(C,s,F){c();if(typeof s!=="function"){throw new sap.ui2.srvc.Error("Missing success handler","sap.ui2.srvc.PageSet");}if(a.configuration===C){sap.ui2.srvc.call(s,F,true);return;}a.configuration=C;f.getPageBuildingService().updatePageSet(a,function(n){s();},F);};this.getDefaultPage=function(){c();return d;};this.getId=function(){return I;};this.getPages=function(){c();return P.slice();};this.isStub=function(){return b;};this.load=function(s,F){if(!b){throw new sap.ui2.srvc.Error("Page set is not a stub anymore","sap.ui2.srvc.PageSet");}f.getPageBuildingService().readPageSet(I,function(n){jQuery.sap.log.debug("Loaded: "+t,null,"sap.ui2.srvc.PageSet");e(n);s();},F,true);};this.toString=function(v){var r=['sap.ui2.srvc.PageSet({sId:"',I,'",bIsStub:',b];if(v){r.push(',oAlterEgo:',JSON.stringify(a),',oFactory:',f.toString(v),',aPages:',JSON.stringify(P));}r.push('})');return r.join('');};jQuery.sap.require("sap.ui2.srvc.page");jQuery.sap.require("sap.ui2.srvc.utils");I=p;if(!I){throw new sap.ui2.srvc.Error("Missing page set ID","sap.ui2.srvc.PageSet");}jQuery.sap.log.debug("Created: "+this,null,"sap.ui2.srvc.PageSet");};}());
}
},"sap/ushell/core-lib-preload"
);
//# sourceMappingURL=core-min-0.js.map